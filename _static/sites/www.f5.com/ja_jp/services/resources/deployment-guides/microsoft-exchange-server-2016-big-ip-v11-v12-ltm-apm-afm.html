
<!DOCTYPE HTML>
<html lang="ja" class="js-off">
    <head>
    
    <meta charset="UTF-8"/>
    <title>Microsoft Exchange Server 2016 (BIG-IP v11 - v13: LTM, APM, AFM)</title>
    <meta name="robots"/>
    <meta name='viewport' content='width=device-width, initial-scale=1'/>
    <meta name="keywords" content="BIG-IP Advanced Firewall Manager,Access Policy Manager,BIG-IP Local Traffic Manager,Deployment Guide"/>
    
    <meta name="template" content="article-page4"/>
    
    
        <meta property="og:type" content="website"/>
    
        <meta property="og:title" content="Microsoft Exchange Server 2016 (BIG-IP v11 - v13: LTM, APM, AFM)"/>
    
        <meta property="og:locale" content="ja"/>
    
        <meta property="og:url" content="https://www.f5.com/ja_jp/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm.html"/>
    
        <meta property="og:image" content="https://www.f5.com/content/dam/f5-com/global-assets/default-ogimage.png"/>
    
    


    <link rel="canonical" href="microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm.html"/>
    <script>var wperf = window.performance ? window.performance : {}; wperf.mark("PreResources");</script>
    <script>window.F5=window.F5||{};window.F5.VisitorTracking=window.F5.VisitorTracking||{"isConfigEnabled":true,"tealiumScriptAsyncUrl":"//mktg.tags.f5.com/main/prod/utag.js","tealiumScriptSyncUrl":"//mktg.tags.f5.com/main/prod/utag.sync.js","visitorTrackingService":"tealium","isTealiumActive":true,"isLegacyActive":false,"legacyLibWarmingUrls":["https://assets.adobedtm.com","https://www.google-analytics.com","https://www.googletagmanager.com"]}</script>

    

    


<link rel="preload" as="font" type="font/woff2" href="../../../../etc.clientlibs/base/clientlibs/base-resources/resources/fonts/Proxima.woff2" crossorigin/>
<link rel="preload" as="font" type="font/woff2" href="../../../../etc.clientlibs/base/clientlibs/base-resources/resources/fonts/Neusa.woff2" crossorigin/>

    
    
<link rel="stylesheet" href="../../../../etc.clientlibs/f5-com/clientlibs/clientlib-base.73d77c51fbcf42c93b7630cd1bd65351.css" type="text/css">



    
    
<link rel="stylesheet" href="../../../../etc.clientlibs/f5-com/clientlibs/clientlib-components.d8c6e09fec6fb9b3d9ff7d0a01cdb356.css" type="text/css">



    


<script>wperf.mark("clientlib-css-done");</script>



<link href="https://static.cloud.coveo.com" rel="preconnect" crossorigin/>



    <script async="async" src="../../../../../consent.trustarc.com/notice%EF%B9%96domain=f5.com&amp;c=teconsent&amp;text=true&amp;gtm=1.js" crossorigin=""></script>





<script>
    window.digitalData = {"page":{"pageInfo":{"pageName":"www:f5.com:services:resources:deployment-guides:microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm","destinationUrl":"https://www.f5.com/ja_jp/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm.html","subDomain":"www","referringUrl":"https://www.f5.com/ja_jp/services/resources/deployment-guides","referringPageName":"www:f5.com:services:resources:deployment-guides","language":"ja","version":""},"category":{"primaryCategory":"services","subCategory1":"resources","subCategory2":"deployment-guides","subCategory3":"microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm"}}};
</script>
<script>
    window.utag_data = {"page.pageInfo.pageName":"www:f5.com:services:resources:deployment-guides:microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm","page.pageInfo.destinationUrl":"https://www.f5.com/ja_jp/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm.html","page.pageInfo.subDomain":"www","page.pageInfo.referringUrl":"https://www.f5.com/ja_jp/services/resources/deployment-guides","page.pageInfo.referringPageName":"www:f5.com:services:resources:deployment-guides","page.pageInfo.language":"ja","page.pageInfo.version":"","page.category.primaryCategory":"services","page.category.subCategory1":"resources","page.category.subCategory2":"deployment-guides","page.category.subCategory3":"microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm"};
</script>
<style>@font-face { font-family: Proxima; font-display: fallback; src: url(../../../../etc.clientlibs/base/clientlibs/base-resources/resources/fonts/Proxima.woff2) format("woff2"), url(../../../../etc.clientlibs/base/clientlibs/base-resources/resources/fonts/Proxima.woff) format("woff"); }
    @font-face { font-family: Neusa; font-display: fallback; src: url(../../../../etc.clientlibs/base/clientlibs/base-resources/resources/fonts/Neusa.woff2) format("woff2"), url(../../../../etc.clientlibs/base/clientlibs/base-resources/resources/fonts/Neusa.woff) format("woff"); }
</style>
<script>
    wperf.mark("customheaderlibs-done");

	(function() {
        var loadCls = "fonts-loaded";

		/* Font Face Observer v2.0.13 - Â© Bram Stein. License: BSD-3-Clause */
		(function(){'use strict';var f,g=[];function l(a){g.push(a);1==g.length&&f()}function m(){for(;g.length;)g[0](),g.shift()}f=function(){setTimeout(m)};function n(a){this.a=p;this.b=void 0;this.f=[];var b=this;try{a(function(a){q(b,a)},function(a){r(b,a)})}catch(c){r(b,c)}}var p=2;function t(a){return new n(function(b,c){c(a)})}function u(a){return new n(function(b){b(a)})}function q(a,b){if(a.a==p){if(b==a)throw new TypeError;var c=!1;try{var d=b&&b.then;if(null!=b&&"object"==typeof b&&"function"==typeof d){d.call(b,function(b){c||q(a,b);c=!0},function(b){c||r(a,b);c=!0});return}}catch(e){c||r(a,e);return}a.a=0;a.b=b;v(a)}}
		function r(a,b){if(a.a==p){if(b==a)throw new TypeError;a.a=1;a.b=b;v(a)}}function v(a){l(function(){if(a.a!=p)for(;a.f.length;){var b=a.f.shift(),c=b[0],d=b[1],e=b[2],b=b[3];try{0==a.a?"function"==typeof c?e(c.call(void 0,a.b)):e(a.b):1==a.a&&("function"==typeof d?e(d.call(void 0,a.b)):b(a.b))}catch(h){b(h)}}})}n.prototype.g=function(a){return this.c(void 0,a)};n.prototype.c=function(a,b){var c=this;return new n(function(d,e){c.f.push([a,b,d,e]);v(c)})};
		function w(a){return new n(function(b,c){function d(c){return function(d){h[c]=d;e+=1;e==a.length&&b(h)}}var e=0,h=[];0==a.length&&b(h);for(var k=0;k<a.length;k+=1)u(a[k]).c(d(k),c)})}function x(a){return new n(function(b,c){for(var d=0;d<a.length;d+=1)u(a[d]).c(b,c)})};window.Promise||(window.Promise=n,window.Promise.resolve=u,window.Promise.reject=t,window.Promise.race=x,window.Promise.all=w,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype["catch"]=n.prototype.g);}());
		(function(){function l(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function m(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function c(){document.removeEventListener("DOMContentLoaded",c);a()}):document.attachEvent("onreadystatechange",function k(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",k),a()})};function r(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";
		this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}
		function t(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function y(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function z(a,b){function c(){var a=k;y(a)&&a.a.parentNode&&b(a.g)}var k=a;l(a.b,c);l(a.c,c);y(a)};function A(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"normal"}var B=null,C=null,E=null,F=null;function G(){if(null===C)if(J()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);C=!!a&&603>parseInt(a[1],10)}else C=!1;return C}function J(){null===F&&(F=!!document.fonts);return F}
		function K(){if(null===E){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}E=""!==a.style.font}return E}function L(a,b){return[a.style,a.weight,K()?a.stretch:"","100px",b].join(" ")}
		A.prototype.load=function(a,b){var c=this,k=a||"BESbswy",q=0,D=b||3E3,H=(new Date).getTime();return new Promise(function(a,b){if(J()&&!G()){var M=new Promise(function(a,b){function e(){(new Date).getTime()-H>=D?b():document.fonts.load(L(c,'"'+c.family+'"'),k).then(function(c){1<=c.length?a():setTimeout(e,25)},function(){b()})}e()}),N=new Promise(function(a,c){q=setTimeout(c,D)});Promise.race([N,M]).then(function(){clearTimeout(q);a(c)},function(){b(c)})}else m(function(){function u(){var b;if(b=-1!=
		f&&-1!=g||-1!=f&&-1!=h||-1!=g&&-1!=h)(b=f!=g&&f!=h&&g!=h)||(null===B&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),B=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=B&&(f==v&&g==v&&h==v||f==w&&g==w&&h==w||f==x&&g==x&&h==x)),b=!b;b&&(d.parentNode&&d.parentNode.removeChild(d),clearTimeout(q),a(c))}function I(){if((new Date).getTime()-H>=D)d.parentNode&&d.parentNode.removeChild(d),b(c);else{var a=document.hidden;if(!0===a||void 0===a)f=e.a.offsetWidth,
		g=n.a.offsetWidth,h=p.a.offsetWidth,u();q=setTimeout(I,50)}}var e=new r(k),n=new r(k),p=new r(k),f=-1,g=-1,h=-1,v=-1,w=-1,x=-1,d=document.createElement("div");d.dir="ltr";t(e,L(c,"sans-serif"));t(n,L(c,"serif"));t(p,L(c,"monospace"));d.appendChild(e.a);d.appendChild(n.a);d.appendChild(p.a);document.body.appendChild(d);v=e.a.offsetWidth;w=n.a.offsetWidth;x=p.a.offsetWidth;I();z(e,function(a){f=a;u()});t(e,L(c,'"'+c.family+'",sans-serif'));z(n,function(a){g=a;u()});t(n,L(c,'"'+c.family+'",serif'));
		z(p,function(a){h=a;u()});t(p,L(c,'"'+c.family+'",monospace'))})})};"object"===typeof module?module.exports=A:(window.FontFaceObserver=A,window.FontFaceObserver.prototype.load=A.prototype.load);}());

        var PrimaryFont = new FontFaceObserver('Proxima');
        var DisplayFont = new FontFaceObserver('Neusa');

        Promise.all([PrimaryFont.load(null, 6000), DisplayFont.load(null, 6000)]).then(function () {
            document.documentElement.classList.add(loadCls);
            wperf.mark(loadCls);
        }).catch(e => {
             console.log("fonts failed to load.");
        });
	})();

</script>




    <script src="../../../../../mktg.tags.f5.com/main/prod/utag.sync.js"></script>

    <!-- custom properties -->
<script>
    (function () {
        if (!window.CSS) {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = ("/etc.clientlibs/base/clientlibs/libs/polyfills/customProperties/v1.js");
        document.getElementsByTagName("head")[0].appendChild(script);
        }
    })();
</script>
<!-- End custom properties -->

    <!-- If JS enable will change the HTML class tag to "js"-->
<script>
    document.documentElement.className = document.documentElement.className.replace("js-off","js-on");
</script>
<!-- If JS enable will change the HTML class tag to "js" -->

    
    
    

    
    


    
    
    <script type="application/ld+json">{
  "@context" : {
    "schema" : "http://schema.org/",
    "name" : "http://schema.org/name",
    "description" : "http://schema.org/description",
    "url" : "http://schema.org/url"
  },
  "@type" : "https://schema.org/WebPage",
  "name" : "Microsoft Exchange Server 2016 (BIG-IP v11 - v13: LTM, APM, AFM)",
  "url" : "https://www.f5.com/ja_jp/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm",
  "@id" : "https://www.f5.com/ja_jp/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm"
}</script>

    <script>wperf.mark("headlibRenderer-done");</script>
    
    
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../content/dam/f5-com/global-configuration/favicons/apple-touch-icon.png"/>
    
    
        <link rel="icon" type="image/png" sizes="16x16" href="../../../../content/dam/f5-com/global-configuration/favicons/favicon-16x16.png"/>
    
        <link rel="icon" type="image/png" sizes="32x32" href="../../../../content/dam/f5-com/global-configuration/favicons/favicon-32x32.png"/>
    
        <link rel="icon" type="image/png" sizes="150x150" href="../../../../content/dam/f5-com/global-configuration/favicons/mstile-150x150.png"/>
    
        <link rel="icon" type="image/png" sizes="192x192" href="../../../../content/dam/f5-com/global-configuration/favicons/android-chrome-192x192.png"/>
    
        <link rel="icon" type="image/png" sizes="512x512" href="../../../../content/dam/f5-com/global-configuration/favicons/android-chrome-512x512.png"/>
    
        <link rel="icon" type="image/png" sizes="192x192" href="../../../../content/dam/f5-com/global-configuration/favicons/android-chrome-192x192.png"/>
    
    <link rel="mask-icon" href="../../../../content/dam/f5-com/global-configuration/favicons/safari-pinned-tab.svg" color="#e21d38"/>

    <link rel="manifest" href="../../../../etc.clientlibs/base/clientlibs/base-resources/resources/site.webmanifest"/>
    <meta name="msapplication-TileColor" content="#ffffff"/>
    <meta name="theme-color" content="#ffffff"/>
</head>
    <body id="body">
        <div class="skiplink">
    <a href="#main-content" class="skiplink__item h-sr-only">Skip to main content</a>
    <a href="#footer" class="skiplink__item h-sr-only">Skip to footer</a>
    <a href="#search-bar-open-button" class="skiplink__item h-sr-only">Skip to search</a>
</div>

        
    <script>
    (function(a,b,c,d){
        a='//mktg.tags.f5.com/main/prod/utag.js';
        b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true;
        a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);
    })();
    </script>

        
        



        
<div class="root responsivegrid">


<div class="aem-Grid aem-Grid--12 aem-Grid--default--12 ">
    
    <div data-component-type="navigation" class="o03 aem-GridColumn aem-GridColumn--default--12" data-component-title="F5.com Navigation Bundle">
<header class="o03-main-navigation" id="global-header" tabindex="-1">

    <div id="navigation1802177697" class="u09">
    
    <nav class="meta-nav-row">
        <div class="container">
            <div class="meta-nav-wrapper">
                <ul class="meta-nav list-unstyled" id="meta-nav" tabindex="-1">
                    <li class="meta-nav__item">
                        <a class="meta-nav__link font-icon font-icon-chevron-down meta-nav__menu-trigger" href="#" aria-expanded="false">
                            <img class="meta-nav__icon-globe icon-lg" src="../../../../etc.clientlibs/f5-com/clientlibs/f5-com-resources/resources/main-nav/icon-globe.svg" alt=""/>
                            <span class="meta-nav__link-text">æ¥æ¬èª</span>
                        </a>
                        <div class="meta-nav__menu" tabindex="-1" aria-hidden="true" hidden>
                            <ul class="meta-nav__menu-list list-unstyled language-select-list">
                                <li class="meta-nav__menu-item">
                                    <a class="meta-nav__menu-link currentURL" href="#">æ¥æ¬èª</a>
                                </li>
                                
                                    <li class="meta-nav__menu-item">
                                        
                                            
                                            <a class="meta-nav__menu-link" href="../../../../services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm.html">
                                                EN
                                            </a>
                                            
                                        
                                    </li>
                                
                                    <li class="meta-nav__menu-item">
                                        
                                            
                                            <a class="meta-nav__menu-link" href="../../../../de_de/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm.html">
                                                DE
                                            </a>
                                            
                                        
                                    </li>
                                
                                    <li class="meta-nav__menu-item">
                                        
                                            
                                            <a class="meta-nav__menu-link" href="../../../../es_es/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm.html">
                                                ES
                                            </a>
                                            
                                        
                                    </li>
                                
                                    <li class="meta-nav__menu-item">
                                        
                                            
                                            <a class="meta-nav__menu-link" href="../../../../fr_fr/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm.html">
                                                FR
                                            </a>
                                            
                                        
                                    </li>
                                
                                    <li class="meta-nav__menu-item">
                                        
                                            
                                            <a class="meta-nav__menu-link" href="https://www.f5.com.cn/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm">
                                                ä¸­æ
                                            </a>
                                            
                                        
                                    </li>
                                
                                    
                                
                            </ul>
                        </div>
                    </li>

                    
                        
                        

                        

                        <li class="meta-nav__item">
                            <a class="meta-nav__link font-icon font-icon-chevron-down meta-nav__menu-trigger" href="#" aria-expanded="false">
                                <span class="meta-nav__link-text">F5ã®ãµã¤ã</span>
                            </a>
                            
                            <div class="meta-nav__menu" tabindex="-1" aria-hidden="true" hidden>
                                <ul class="meta-nav__menu-list list-unstyled">
                                    <li class="meta-nav__menu-item">
                                        <a class="meta-nav__menu-link" href="https://support.f5.com" rel="noreferrer">ãµãã¼ã ãã¼ã¿ã«</a>
                                        <p class="meta-nav__menu-text">F5è£½åããã³ãµã¼ãã¹ã«é¢ããã»ã«ããµã¼ãã¹ ãã«ãã®è¨äº</p>
                                    </li>
                                
                                    <li class="meta-nav__menu-item">
                                        <a class="meta-nav__menu-link" href="https://devcentral.f5.com" rel="noreferrer">DevCentral</a>
                                        <p class="meta-nav__menu-text">å¼ç¤¾ä¸»å¬ã®ã³ãã¥ããã£ã§ã¤ãªãããå­¦ã¶</p>
                                    </li>
                                
                                    <li class="meta-nav__menu-item">
                                        <a class="meta-nav__menu-link" href="../../../myf5.html">My F5</a>
                                        <p class="meta-nav__menu-text">ãµãã¹ã¯ãªãã·ã§ã³ããã³ç»é²ã­ã¼ã®ç®¡ç</p>
                                    </li>
                                
                                    <li class="meta-nav__menu-item">
                                        <a class="meta-nav__menu-link" href="https://partnercentral.f5.com" rel="noreferrer">Partner Central</a>
                                        <p class="meta-nav__menu-text">F5ãã¼ããã¼ã®ããã®ãªã½ã¼ã¹ããã³ãµãã¼ã ãã¼ã¿ã«</p>
                                    </li>
                                
                                    <li class="meta-nav__menu-item">
                                        <a class="meta-nav__menu-link" href="https://account.f5.com/learnf5" rel="noreferrer">LearnF5</a>
                                        <p class="meta-nav__menu-text">Learn to use F5 products</p>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    
                        
                        

                        

                        <li class="meta-nav__item">
                            <a class="meta-nav__link font-icon font-icon-chevron-down meta-nav__menu-trigger" href="#" aria-expanded="false">
                                <span class="meta-nav__link-text">F5ã¸ã®ãåãåãã</span>
                            </a>
                            
                            <div class="meta-nav__menu" tabindex="-1" aria-hidden="true" hidden>
                                <ul class="meta-nav__menu-list list-unstyled">
                                    <li class="meta-nav__menu-item">
                                        <a class="meta-nav__menu-link" href="../../../ContactFormJP.html">F5è²©å£²æå½é¨ã¸ã®ãåãåãã</a>
                                        <p class="meta-nav__menu-text">è©³ããã¯ãF5ã®å¶æ¥­æå½ç¤¾ã«ãåãåãããã ãã</p>
                                    </li>
                                
                                    <li class="meta-nav__menu-item">
                                        <a class="meta-nav__menu-link" href="../../../company/contact/regional-offices.html#product-support">F5ãµãã¼ãã¸ã®ãåãåãã</a>
                                        <p class="meta-nav__menu-text">ãè¿ãã®ãµãã¼ãæå½èã«ãåãåãããã ãã</p>
                                    </li>
                                
                                    <li class="meta-nav__menu-item">
                                        <a class="meta-nav__menu-link" href="../../professional-services/request-f5-professional-services.html">ãã­ãã§ãã·ã§ãã«ãµã¼ãã¹ã¸ã®ãåãåãã</a>
                                        <p class="meta-nav__menu-text">F5ã½ãªã¥ã¼ã·ã§ã³ãæé©åããããã®ãµãã¼ããåãã</p>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    
                </ul>
                
            </div>
        </div>
    </nav>
</div>

    


    <div id="navigation1677889645" class="u08">

    
    <nav class="main-nav-row">
        <div class="container">
            <div class="main-nav-wrapper">

                <div class="brand">
                    <a class="brand-link" href="../../../../ja_jp.html">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88">
                            <circle r="44" cy="44" cx="44" fill="#E21D38"></circle>
                            <path stroke="null" d="M43.02 48.22c21.63 1.8 29.95 7.75 29.56 15.88-.4 4.36-4.57 8.52-9.92 8.93-6.34.4-9.33-2.2-11.1-4.97-1.6-2.57-3.38-5.16-5.17-7.94-.4-.8-1.2-.2-1.8.2-1.4 1.2-2.6 2.58-3.8 3.78-.7.78-.5 1.4-.3 1.98 1.2 2.78 2.4 5.56 3.6 8.13 1.9 1.2 10.8 2.8 17.4 2.2 4.6-.4 10.1-2.2 14.9-5.5 4.6-3.6 7.9-8.3 8.5-16.1.2-4.7-.6-9.6-4.78-14.2s-11.3-8.3-25.8-9.3c.8-2.3 1.4-4.5 2.2-6.73 8.75.4 16.5 1 23.04 1.8.6-2.5.8-4.95 1.4-7.36l-1.8-2.1c-3.36-.42-6.55-1.22-10.1-1.62-4.55-.6-9.3-1-14.46-1.2-3.4 9.57-7.4 21.64-11.6 34.3m-5.8-37.1c-1.6 0-3.76.4-7.33 1.2-7.73 2.2-17.24 7.54-18.24 16.45-.2 1.4-.2 3-.4 4.3l-6.13.6C5 35.6 5 37.2 4.8 39c2-.2 3.97-.2 6.15-.4-.4 9.36 0 18.7.8 27.37.2 1.4.2 2.6.2 3.4-.2.82-1.6 1.22-3.57 1.22l2.6 3.1c7.56 1.4 17.1 2.4 27.18 2.6v-3c-5.97-.4-8.7-1.2-9.1-2.4-.4-1-.4-2.4-.6-3.8-.4-9.1-.6-19.1-.4-29.2 3.43 0 6.75 0 10.17-.2 1.8-.8 3.4-1.6 5-2.4v-3.4c-5.17 0-10.13.2-15.1.2l.6-11.9c.2-2.6 1.98-4.4 3.57-4.4 2.77-.2 5.33.98 7.92 2.17 1.4.6 2.8 1.4 4.18 2 .6.2 1.4.4 2-.23.8-.97 1.6-1.97 2.38-2.76.4-.6.2-1 0-1.2l-5.38-4c-1-.8-2.8-.8-4.4-.8-.6-.2-1.2 0-1.8 0" fill="#FFF"></path>
                            <text x="80" y="85" font-size="14" font-face="sans-serif" fill="#E21D38">Â®</text>
                        </svg>
                        <span class="sr-only">F5</span>
                    </a>
                </div>

                
                <ul class="main-nav" id="main-nav">
                    
                    
                    
                    
                    
                    
                    

                    <li>
                        <a data-aa="c:view,t:main-nav" class="main-nav__link font-icon font-icon-chevron-down main-nav__frame-content-link" href="../../../solutions.html" aria-expanded="false" data-target="mega-nav-panel--242780734" data-moddate="1643735503889">
                            <span class="main-nav__link-text">ã½ãªã¥ã¼ã·ã§ã³ã¨è£½å</span>
                        </a>
                    </li>
                
                    
                    
                    
                    
                    
                    
                    

                    <li>
                        <a data-aa="c:view,t:main-nav" class="main-nav__link font-icon font-icon-chevron-down " href="../../../partners.html" aria-expanded="false" data-target="mega-nav-panel---740270414" data-moddate="1629994387961" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/partners/_jcr_content/root/responsivegrid/cont01_wrapper_bloc.html">
                            <span class="main-nav__link-text">ãã¼ããã¼</span>
                        </a>
                    </li>
                
                    
                    
                    
                    
                    
                    
                    

                    <li>
                        <a data-aa="c:view,t:main-nav" class="main-nav__link font-icon font-icon-chevron-down main-nav__frame-content-link" href="../../resources.html" aria-expanded="false" data-target="mega-nav-panel--186316144" data-moddate="1643735503891">
                            <span class="main-nav__link-text">ãªã½ã¼ã¹</span>
                        </a>
                    </li>
                
                    
                    
                    
                    
                    
                    
                    

                    <li>
                        <a data-aa="c:view,t:main-nav" class="main-nav__link font-icon font-icon-chevron-down " href="../../support.html" aria-expanded="false" data-target="mega-nav-panel---2028199782" data-moddate="1617907462695" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/support/_jcr_content/root/responsivegrid/cont01_wrapper_bloc_.html">
                            <span class="main-nav__link-text">ãµãã¼ã</span>
                        </a>
                    </li>
                
                    
                    
                    
                    
                    
                    
                    

                    <li>
                        <a data-aa="c:view,t:main-nav" class="main-nav__link font-icon font-icon-chevron-down " href="../../../company.html" aria-expanded="false" data-target="mega-nav-panel--1445283912" data-moddate="1627314042547" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/company/_jcr_content/root/responsivegrid/cont01_wrapper_bloc_.html">
                            <span class="main-nav__link-text">ä¼ç¤¾æ¡å</span>
                        </a>
                    </li>
                
                    
                    
                    
                    
                    
                    
                    

                    <li>
                        <a data-aa="c:view,t:main-nav" class="main-nav__link font-icon font-icon-chevron-down " href="../../../products/get-f5.html" aria-expanded="false" data-target="mega-nav-panel--1420695405" data-moddate="1617907611990" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/get-f5/_jcr_content/root/responsivegrid/cont01_wrapper_bloc_.html">
                            <span class="main-nav__link-text">F5ããå©ç¨ãã ãã</span>
                        </a>
                    </li>
                </ul>
                

                
                <ul class="utility-nav" id="utility-nav">
                    <li class="utility-nav__item search-item">
                        <div class="CoveoOmnibox CoveoSearchbox search-bar is-closed" id="search-bar" tabindex="-1" data-global-coveo-token="xx72b884cd-c3eb-4428-aa1b-6440a04643c1" data-search-page-path="/content/f5-com/ja_jp/search.html" data-lang="ja" data-search-hub="f5com">
                            <div class="CoveoAnalytics" data-anonymous="true" data-search-hub="f5com"></div>
                            <div class="search-bar__controls">
                                <input type="text" spellcheck="false" role="combobox" autocomplete="off" aria-autocomplete="list" title="ã¯ã¨ãªãæ¿å¥ãã¾ãã Enterã­ã¼ãæ¼ãã¦éä¿¡ãã¾ã" aria-label="ãã¹ã¦ã®F5ãµã¤ããæ¤ç´¢ãã" placeholder="ãã¹ã¦ã®F5ãµã¤ããæ¤ç´¢ãã" class="search-bar__input"/>
                                <button id="search-bar-open-button" type="button" class="btn utility-nav__btn open-search-btn">
                                    <span class="icon-md icon-search-bg"></span>
                                    <span class="sr-only">æ¤ç´¢ãéã</span>
                                </button>
                                <button type="button" class="btn utility-nav__btn close-search-btn">
                                    <span class="icon-md icon-close-bg"></span>
                                    <span class="sr-only">æ¤ç´¢ãéãã</span>
                                </button>
                                <span class="search-bar__label">ãã¹ã¦ã®F5ãµã¤ããæ¤ç´¢ãã</span>
                            </div>
                            <div class="search-bar__suggestions">
                                <h4 class="search-bar__suggestions-title">æ¤ç´¢çµæã®ææ¡</h4>
                                <div class="search-bar__suggestions-list" role="listbox"></div>
                                <a href="#" class="sr-only search-bar__reset-focus-link"><span hidden>reset focus</span></a>
                            </div>
                        </div>
                    </li>
                    <li class="utility-nav__item menu-item">
                        <button type="button" class="btn utility-nav__btn menu-btn">
                            <span class="icon-md icon-menu-bg"></span>
                            <span class="sr-only">ããã²ã¼ã·ã§ã³ã¡ãã¥ã¼ãéã</span>
                        </button>
                    </li>
                </ul>
                

            </div>
        </div>
    </nav>
    

    
    <div class="mega-nav" id="mega-nav" hidden>

        
        <nav class="mega-nav--mobile">
            <div class="mobile-main-nav">
                
                <ul class="nav-list nav-list--level-one">
                    
                    

                    <li class="nav-list__item" data-framecontent="true" data-target="mega-nav-panel--242780734">

                        
                        
                        

                        <a data-aa="c:view,t:main-nav" class="nav-list__link level-one-link mega-nav-slidenav-trigger" href="../../../solutions.html" aria-expanded="false">
                            <span class="nav-list__link-text">ã½ãªã¥ã¼ã·ã§ã³ã¨è£½å</span>
                        </a>

                        
                        <div class="mega-nav-slidenav" hidden>
                            <div class="mega-nav-slidenav__header">
                                <div class="mega-nav-slidenav__title">ã½ãªã¥ã¼ã·ã§ã³ã¨è£½å</div>
                            </div>

                            
                            <ul class="nav-list nav-list--level-two">
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                
                                

                                
                                
                                    
                                    
                                    
                                    

                                    <li class="nav-list__item">
                                        <div class="nav-list__subheader level-two-subheader">
                                            <div class="nav-list__subtitle">ã½ãªã¥ã¼ã·ã§ã³</div>
                                            <a class="nav-list__viewall-link font-icon font-icon-chevron-right mobile-hidden" href="../../../solutions.html">ãã¹ã¦è¡¨ç¤º</a>
                                        </div>
                                    </li>

                                    <li class="nav-list__item">
                                        <a class="nav-list__link level-two-link font-icon font-icon-chevron-right desktop-hidden" href="../../../solutions.html">
                                            ãã¹ã¦ã®ã½ãªã¥ã¼ã·ã§ã³ãè¡¨ç¤º</a>
                                    </li>
                                

                                
                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel--1922819394" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc_.html">
                                                <span class="nav-list__link-text">ã½ãªã¥ã¼ã·ã§ã³ ã¿ã¤ãå¥ </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link ">
                                                                ããã©ã¼ãã³ã¹</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../solutions/application-performance.html">
                                                                        ã¢ããªã±ã¼ã·ã§ã³ ããã©ã¼ãã³ã¹</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../solutions/infrastructure-and-application-availability.html">
                                                                        ã¤ã³ãã©ã¹ãã©ã¯ãã£ã¨ã¢ããªã±ã¼ã·ã§ã³ã®å¯ç¨æ§</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link ">
                                                                ã»ã­ã¥ãªãã£</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../solutions/application-security.html">
                                                                        ã¢ããªã±ã¼ã·ã§ã³ ã»ã­ã¥ãªãã£</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../solutions/online-fraud.html">
                                                                        ãªã³ã©ã¤ã³ä¸æ­£è¡çºã®é²æ­¢</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../solutions/access-and-authorization.html">
                                                                        ã¢ã¯ã»ã¹ã¨èªå¯</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link ">
                                                                èªåå</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../solutions/devops-deployment.html">
                                                                        DevOpséçº</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../solutions/multi-cloud-policy-management.html">
                                                                        ãã«ãã¯ã©ã¦ãç®¡ç</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link ">
                                                                ã¤ã³ãµã¤ã</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../solutions/troubleshooting-and-visualization.html">
                                                                        ã¢ããªã±ã¼ã·ã§ã³ã®ãã©ãã«ã·ã¥ã¼ãã£ã³ã°</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel--52571039" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__732157306.html">
                                                <span class="nav-list__link-text">æ¥­ç¨®å¥ </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../solutions/banking-and-financial-services.html">
                                                                éè¡ããã³éèãµã¼ãã¹</a>

                                                            <!-- LEVEL FOUR START -->
                                                            
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../solutions/public-sector.html">
                                                                Public Sector Solutions</a>

                                                            <!-- LEVEL FOUR START -->
                                                            
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../solutions/service-providers.html">
                                                                ãµã¼ãã¹ ãã­ãã¤ã</a>

                                                            <!-- LEVEL FOUR START -->
                                                            
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel---2134351483" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__1024074961.html">
                                                <span class="nav-list__link-text">å°å¥æ¹æ³å¥ </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link ">
                                                                å°å¥æ¹æ³å¥ã½ãªã¥ã¼ã·ã§ã³</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../solutions/cloud.html">
                                                                        ã¯ã©ã¦ã</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/big-ip-services/virtual-editions.html">
                                                                        ã½ããã¦ã§ã¢</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/big-ip-services/iseries-appliance.html">
                                                                        ãã¼ãã¦ã§ã¢</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/security/silverline.html">
                                                                        as a Service</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link ">
                                                                ã¯ã©ã¦ã ãã¼ããã¼å¥ã½ãªã¥ã¼ã·ã§ã³</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../partners/technology-alliances/amazon-web-services.html">
                                                                        Amazon Web Servicesã§F5ãå©ç¨ãã</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../partners/technology-alliances/google-cloud-platform.html">
                                                                        Google Cloud Platformã§F5ãå©ç¨ãã</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../partners/technology-alliances/microsoft-azure.html">
                                                                        Microsoft Azureã§F5ãå©ç¨ãã</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                
                            
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                
                                

                                
                                
                                    
                                    
                                    
                                    

                                    <li class="nav-list__item">
                                        <div class="nav-list__subheader level-two-subheader">
                                            <div class="nav-list__subtitle">è£½å</div>
                                            <a class="nav-list__viewall-link font-icon font-icon-chevron-right mobile-hidden" href="../../../products.html">ãã¹ã¦è¡¨ç¤º</a>
                                        </div>
                                    </li>

                                    <li class="nav-list__item">
                                        <a class="nav-list__link level-two-link font-icon font-icon-chevron-right desktop-hidden" href="../../../products.html">
                                            ãã¹ã¦ã®è£½åãè¡¨ç¤º</a>
                                    </li>
                                

                                
                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel--1080149759" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__550120605.html">
                                                <span class="nav-list__link-text">Advanced WAF </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../products/security/advanced-waf.html">
                                                                Advanced WAF</a>

                                                            <!-- LEVEL FOUR START -->
                                                            
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel--109874682" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__184830928.html">
                                                <span class="nav-list__link-text">Beaconã«ããå¯è¦åã¨åæ </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../products/beacon-visibility-and-analytics.html">
                                                                Beaconã«ããå¯è¦åã¨åæ</a>

                                                            <!-- LEVEL FOUR START -->
                                                            
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel---1389495070" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__1020071244.html">
                                                <span class="nav-list__link-text">BIG-IP </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../products/big-ip-services.html">
                                                                BIG-IPã·ã¹ãã ãå¨ã¦è¡¨ç¤º</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/security/access-policy-manager.html">
                                                                        BIG-IP Access Policy Manager</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/security/advanced-firewall-manager.html">
                                                                        BIG-IP Advanced Firewall Manager</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/big-ip-services/carrier-grade-nat.html">
                                                                        BIG-IP Carrier-Grade NAT (CGNAT)</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/big-ip-services/big-ip-dns.html">
                                                                        BIG-IP DNS</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/big-ip-services/local-traffic-manager.html">
                                                                        BIG-IP Local Traffic Manager</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/big-ip-services/policy-enforcement-manager.html">
                                                                        BIG-IP Policy Enforcement Manager</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/service-proxy-for-kubernetes.html">
                                                                        BIG-IP Service Proxy for Kubernetes</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/automation-and-orchestration/container-ingress-services.html">
                                                                        Container Ingress Services</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link ">
                                                                BIG-IPã®å°å¥</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/cloud-editions/big-ip-cloud-edition.html">
                                                                        BIG-IP Cloud Edition</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/big-ip-services/virtual-editions.html">
                                                                        BIG-IPä»®æ³ã¢ãã©ã¤ã¢ã³ã¹</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/big-ip-services/iseries-appliance.html">
                                                                        BIG-IP iSeriesã¢ãã©ã¤ã¢ã³ã¹</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/big-ip-services/viprion-chassis.html">
                                                                        BIG-IP VIPRIONã·ã£ã¼ã·ããã³ãã¬ã¼ã</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel---1096182214" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__112413429.html">
                                                <span class="nav-list__link-text">BIG-IQã®ä¸åç®¡ç </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../products/automation-and-orchestration/big-iq.html">
                                                                BIG-IQã®ä¸åç®¡ç</a>

                                                            <!-- LEVEL FOUR START -->
                                                            
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel---1544703862" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__75707195.html">
                                                <span class="nav-list__link-text">DDoS Hybrid Defender </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../products/security/ddos-hybrid-defender.html">
                                                                DDoS Hybrid Defender</a>

                                                            <!-- LEVEL FOUR START -->
                                                            
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel---729478663" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__2102308149.html">
                                                <span class="nav-list__link-text">ã°ã­ã¼ãã« ãµã¼ã ã­ã¼ã ãã©ã³ã·ã³ã° </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../products/global-server-load-balancing-gslb.html">
                                                                ã°ã­ã¼ãã« ãµã¼ã ã­ã¼ã ãã©ã³ã·ã³ã°</a>

                                                            <!-- LEVEL FOUR START -->
                                                            
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel---230235068" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__171027193.html">
                                                <span class="nav-list__link-text">NGINX </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="https://www.nginx.co.jp" rel="noreferrer">
                                                                NGINXã®è£½åããã¹ã¦è¡¨ç¤º</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://www.nginx.co.jp/products/nginx-controller" rel="noreferrer">
                                                                        NGINX Controller</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://www.nginx.co.jp/products/products-nginx" rel="noreferrer">
                                                                        NGINX Plus</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://nginx.org/en" rel="noreferrer">
                                                                        NGINX Open Source</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://www.nginx.co.jp/products/nginx-app-protect" rel="noreferrer">
                                                                        NGINX App Protect</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://www.nginx.co.jp/products/products-nginx/kubernetes-ingress-controller" rel="noreferrer">
                                                                        NGINX Ingress Controller</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://www.nginx.co.jp/products/nginx-service-mesh" rel="noreferrer">
                                                                        NGINX Service Mesh</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://www.nginx.co.jp/products/nginx-unit" rel="noreferrer">
                                                                        NGINX Unit</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://www.nginx.com/products/nginx-amplify" rel="noreferrer">
                                                                        NGINX Amplify</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://www.nginx.com/products/f5-dns-cloud-services" rel="noreferrer">
                                                                        F5 DNS Cloud Services</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel---99718607" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__1624014819.html">
                                                <span class="nav-list__link-text">Shape Security </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../products/security/shape-security.html">
                                                                Shape Securityã®è£½åããã¹ã¦è¡¨ç¤º</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/security/shape-security/f5-device-idplus.html">
                                                                        F5 Device ID+</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/security/account-protection.html">
                                                                        Account Protection</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../solutions/application-security/bot-management.html">
                                                                        Bot Defense</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/client-side-defense.html">
                                                                        Client-side Defense</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/security/authentication-intelligence.html">
                                                                        Authentication Intelligence</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/security/aggregator-management.html">
                                                                        Aggregator Management</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel---1937059266" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__1821538830.html">
                                                <span class="nav-list__link-text">Silverlineããã¼ã¸ã ãµã¼ãã¹ </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../products/security/silverline.html">
                                                                Silverlineããã¼ã¸ã ãµã¼ãã¹ãå¨ã¦è¡¨ç¤º</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/security/silverline/web-application-firewall.html">
                                                                        Silverline Web Application Firewall</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/security/silverline/ddos-protection.html">
                                                                        Silverline DDoS Protection</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../products/security/silverline/shape-defense.html">
                                                                        Silverline Shape Defense</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel---1849732787" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__137105083.html">
                                                <span class="nav-list__link-text">SSL Orchestrator </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../products/security/ssl-orchestrator.html">
                                                                SSL Orchestrator</a>

                                                            <!-- LEVEL FOUR START -->
                                                            
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                        <li class="nav-list__item mega-nav-accordion">
                                            
                                            
                                            
                                            
                                            

                                            <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel--1286761075" data-moddate="1641822143007" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/solutions-products/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__351113653.html">
                                                <span class="nav-list__link-text">Volterra </span>
                                            </a>

                                            
                                                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                                    <!-- LEVEL THREE START -->
                                                    <ul class="nav-list">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="https://www.volterra.io" rel="noreferrer">
                                                                Volterraã®è£½åããã¹ã¦è¡¨ç¤º</a>

                                                            <!-- LEVEL FOUR START -->
                                                            <ul class="nav-list nav-list--indented">
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://www.volterra.io/products/voltmesh" rel="noreferrer">
                                                                        VoltMesh</a>
                                                                </li>
                                                            
                                                                
                                                                
                                                                

                                                                <li class="nav-list__item">
                                                                    <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://www.volterra.io/products/voltstack" rel="noreferrer">
                                                                        VoltStack</a>
                                                                </li>
                                                            </ul>
                                                            <!-- LEVEL FOUR END -->
                                                        </li>
                                                    </ul>
                                                    <!-- LEVEL THREE END -->
                                                </div>
                                            
                                        </li>
                                    

                                    
                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                
                            </ul>
                            
                        </div>
                    </li>
                
                    
                    

                    <li class="nav-list__item" data-framecontent="false" data-target="mega-nav-panel---740270414">

                        
                        
                        

                        <a data-aa="c:view,t:main-nav" class="nav-list__link level-one-link mega-nav-slidenav-trigger" href="../../../partners.html" aria-expanded="false">
                            <span class="nav-list__link-text">ãã¼ããã¼</span>
                        </a>

                        
                        <div class="mega-nav-slidenav" hidden>
                            <div class="mega-nav-slidenav__header">
                                <div class="mega-nav-slidenav__title">ãã¼ããã¼</div>
                            </div>

                            
                            <ul class="nav-list nav-list--level-two">
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                
                                

                                
                                
                                    
                                    
                                    
                                    

                                    <li class="nav-list__item">
                                        <div class="nav-list__subheader level-two-subheader">
                                            <div class="nav-list__subtitle">F5ãã¼ããã¼ãèª¿ã¹ã</div>
                                            <a class="nav-list__viewall-link font-icon font-icon-chevron-right mobile-hidden" href="../../../partners.html">Explore F5 Partners</a>
                                        </div>
                                    </li>

                                    <li class="nav-list__item">
                                        <a class="nav-list__link level-two-link font-icon font-icon-chevron-right desktop-hidden" href="../../../partners.html">
                                            F5 Partner Program Overview</a>
                                    </li>
                                

                                
                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../partners/jp-find-a-partner.html">
                                                è²©å£²ãã¼ããã¼ãæ¢ã</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../partners/technology-alliances.html">
                                                æè¡ææº</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                
                            
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                
                                

                                
                                
                                    
                                    
                                    
                                    

                                    <li class="nav-list__item">
                                        <div class="nav-list__subheader level-two-subheader">
                                            <div class="nav-list__subtitle">ãã¼ããã¼ ãã­ã°ã©ã ã¨ãªã½ã¼ã¹</div>
                                            <a class="nav-list__viewall-link font-icon font-icon-chevron-right mobile-hidden" href="../../../partners.html">View All Partner Programs and Resources</a>
                                        </div>
                                    </li>

                                    <li class="nav-list__item">
                                        <a class="nav-list__link level-two-link font-icon font-icon-chevron-right desktop-hidden" href="../../../partners.html">
                                            View All Partner Programs and Resources</a>
                                    </li>
                                

                                
                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../partners.html">
                                                F5ãã¼ããã¼ ãã­ã°ã©ã </a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="https://partnercentral.f5.com" rel="noreferrer">
                                                Partner Central</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                
                            </ul>
                            
                        </div>
                    </li>
                
                    
                    

                    <li class="nav-list__item" data-framecontent="true" data-target="mega-nav-panel--186316144">

                        
                        
                        

                        <a data-aa="c:view,t:main-nav" class="nav-list__link level-one-link mega-nav-slidenav-trigger" href="../../resources.html" aria-expanded="false">
                            <span class="nav-list__link-text">ãªã½ã¼ã¹</span>
                        </a>

                        
                        <div class="mega-nav-slidenav" hidden>
                            <div class="mega-nav-slidenav__header">
                                <div class="mega-nav-slidenav__title">ãªã½ã¼ã¹</div>
                            </div>

                            
                            <ul class="nav-list nav-list--level-two">
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                
                                

                                    <li class="nav-list__item mega-nav-accordion">
                                        
                                        
                                        
                                        
                                        

                                        
                                        <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel--1395800656" data-moddate="1642182647556" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/resources/_jcr_content/root/responsivegrid/cont01_wrapper_bloc_.html">
                                            <span class="nav-list__link-text">ãã­ã¥ã¡ã³ã</span>
                                        </a>

                                        <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                            
                                            <ul class="nav-list nav-list--level-three">
                                                
                                                
                                                

                                                <li class="nav-list__item">
                                                    <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../resources.html">
                                                        å¨ã¦ã®ãã­ã¥ã¡ã³ããªã½ã¼ã¹</a>

                                                    
                                                    <ul class="nav-list nav-list--level-four nav-list--indented">
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://clouddocs.f5.com/api" rel="noreferrer">
                                                                APIãã­ã¥ã¡ã³ã</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../recommended-practices-guides.html">
                                                                å°å¥ã®ãã¹ã ãã©ã¯ãã£ã¹</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../deployment-guides.html">
                                                                å°å¥ã¬ã¤ã</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../glossary.html">
                                                                ç¨èªé</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../infographics.html">
                                                                ã¤ã³ãã©ã°ã©ãã£ãã¯</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://support.f5.com" rel="noreferrer">
                                                                KBè¨äº</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../../../company/certifications.html">
                                                                è£½åèªå®</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../datasheets.html">
                                                                è£½åãã¼ã¿ã·ã¼ã</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="https://support.f5.com" rel="noreferrer">
                                                                è£½åãã­ã¥ã¡ã³ã</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../reference-architectures.html">
                                                                ãªãã¡ã¬ã³ã¹ ã¢ã¼ã­ãã¯ãã£</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../reports.html">
                                                                ã¬ãã¼ã</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../solution-profiles.html">
                                                                ã½ãªã¥ã¼ã·ã§ã³ ãã­ãã¡ã¤ã«</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../visio-stencils.html">
                                                                Visioã¹ãã³ã·ã«</a>
                                                        </li>
                                                    
                                                        
                                                        
                                                        

                                                        <li class="nav-list__item">
                                                            <a class="nav-list__link level-four-link font-icon font-icon-chevron-right" href="../white-papers.html">
                                                                ãã¯ã¤ã ãã¼ãã¼</a>
                                                        </li>
                                                    </ul>
                                                    
                                                </li>
                                            </ul>
                                            
                                        </div>
                                    </li>
                                

                                
                                

                                
                                
                                
                            
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                
                                

                                    <li class="nav-list__item mega-nav-accordion">
                                        
                                        
                                        
                                        
                                        

                                        
                                        <a data-aa="c:view,t:mobile-nav" class="nav-list__link level-two-link mega-nav-accordion__trigger" href="#" aria-expanded="false" data-target="mega-nav-subpanel---702883533" data-moddate="1642182647556" data-endpoint="https://www.f5.com/ja_jp/2021-homepage-main-navigation/resources/_jcr_content/root/responsivegrid/cont01_wrapper_bloc__478290303.html">
                                            <span class="nav-list__link-text">æè²</span>
                                        </a>

                                        <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>

                                            
                                            <ul class="nav-list nav-list--level-three">
                                                
                                                
                                                

                                                <li class="nav-list__item">
                                                    <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../training/free-training-courses.html">
                                                        ç¡æãªã³ã©ã¤ã³ ã³ã¼ã¹</a>

                                                    
                                                    
                                                    
                                                </li>
                                            
                                                
                                                
                                                

                                                <li class="nav-list__item">
                                                    <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../training.html">
                                                        ãã¬ã¼ãã³ã°</a>

                                                    
                                                    
                                                    
                                                </li>
                                            
                                                
                                                
                                                

                                                <li class="nav-list__item">
                                                    <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../certification.html">
                                                        ãã­ãã§ãã·ã§ãã«èªå®</a>

                                                    
                                                    
                                                    
                                                </li>
                                            
                                                
                                                
                                                

                                                <li class="nav-list__item">
                                                    <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../../company/events/webinars.html">
                                                        Webã»ããã¼</a>

                                                    
                                                    
                                                    
                                                </li>
                                            </ul>
                                            
                                        </div>
                                    </li>
                                

                                
                                

                                
                                
                                
                            
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                    <li class="nav-list__item">
                                        <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../customer-stories.html">
                                            Customer Case Studies</a>

                                        
                                        
                                        
                                    </li>
                                

                                
                                

                                
                                

                                
                                
                                
                            </ul>
                            
                        </div>
                    </li>
                
                    
                    

                    <li class="nav-list__item" data-framecontent="false" data-target="mega-nav-panel---2028199782">

                        
                        
                        

                        <a data-aa="c:view,t:main-nav" class="nav-list__link level-one-link mega-nav-slidenav-trigger" href="../../support.html" aria-expanded="false">
                            <span class="nav-list__link-text">ãµãã¼ã</span>
                        </a>

                        
                        <div class="mega-nav-slidenav" hidden>
                            <div class="mega-nav-slidenav__header">
                                <div class="mega-nav-slidenav__title">ãµãã¼ã</div>
                            </div>

                            
                            <ul class="nav-list nav-list--level-two">
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                    <li class="nav-list__item">
                                        <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../support.html">
                                            F5ãµãã¼ã</a>

                                        
                                        <ul class="nav-list nav-list--level-three nav-list--indented">
                                            
                                            
                                            

                                            <li class="nav-list__item">
                                                <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="https://support.f5.com" rel="noreferrer">
                                                    ãµãã¼ã ãã¼ã¿ã«</a>

                                                
                                                
                                                

                                            </li>
                                        
                                            
                                            
                                            

                                            <li class="nav-list__item">
                                                <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="../../professional-services.html">
                                                    ãã­ãã§ãã·ã§ãã« ãµã¼ãã¹</a>

                                                
                                                
                                                

                                            </li>
                                        
                                            
                                            
                                            

                                            <li class="nav-list__item">
                                                <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="https://activate.f5.com/license/dossier.jsp" rel="noreferrer">
                                                    ç»é²ã­ã¼ã®æå¹å</a>

                                                
                                                
                                                

                                            </li>
                                        
                                            
                                            
                                            

                                            <li class="nav-list__item">
                                                <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="https://support.f5.com/csp/bug-tracker" rel="noreferrer">
                                                    ãã° ãã©ãã«ã¼</a>

                                                
                                                
                                                

                                            </li>
                                        
                                            
                                            
                                            

                                            <li class="nav-list__item">
                                                <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="https://support.f5.com/csp/my-support/service-request" rel="noreferrer">
                                                    ãµã¼ãã¹ ãªã¯ã¨ã¹ãã®ä½æ</a>

                                                
                                                
                                                

                                            </li>
                                        
                                            
                                            
                                            

                                            <li class="nav-list__item">
                                                <a class="nav-list__link level-three-link font-icon font-icon-chevron-right" href="https://downloads.f5.com" rel="noreferrer">
                                                    ã½ããã¦ã§ã¢ ãã¦ã³ã­ã¼ã</a>

                                                
                                                
                                                

                                            </li>
                                        </ul>
                                        
                                    </li>
                                

                                
                                

                                
                                

                                
                                
                                
                            
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                
                                

                                
                                
                                    
                                    
                                    
                                    

                                    <li class="nav-list__item">
                                        <div class="nav-list__subheader level-two-subheader">
                                            <div class="nav-list__subtitle">ãµãã¼ã ã³ãã¥ããã£</div>
                                            <a class="nav-list__viewall-link font-icon font-icon-chevron-right mobile-hidden" href="../../../community.html">ãµãã¼ã ã³ãã¥ããã£</a>
                                        </div>
                                    </li>

                                    <li class="nav-list__item">
                                        <a class="nav-list__link level-two-link font-icon font-icon-chevron-right desktop-hidden" href="../../../community.html">
                                            ãµãã¼ã ã³ãã¥ããã£</a>
                                    </li>
                                

                                
                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../company/customer-engagement-centers.html">
                                                ã«ã¹ã¿ã ã¨ã³ã²ã¼ã¸ã¡ã³ã ã»ã³ã¿ã¼</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../../labs.html">
                                                F5 Labs</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="https://devcentral.f5.com" rel="noreferrer">
                                                DevCentral</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                
                            </ul>
                            
                        </div>
                    </li>
                
                    
                    

                    <li class="nav-list__item" data-framecontent="false" data-target="mega-nav-panel--1445283912">

                        
                        
                        

                        <a data-aa="c:view,t:main-nav" class="nav-list__link level-one-link mega-nav-slidenav-trigger" href="../../../company.html" aria-expanded="false">
                            <span class="nav-list__link-text">ä¼ç¤¾æ¡å</span>
                        </a>

                        
                        <div class="mega-nav-slidenav" hidden>
                            <div class="mega-nav-slidenav__header">
                                <div class="mega-nav-slidenav__title">ä¼ç¤¾æ¡å</div>
                            </div>

                            
                            <ul class="nav-list nav-list--level-two">
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                
                                

                                
                                
                                    
                                    
                                    
                                    

                                    <li class="nav-list__item">
                                        <div class="nav-list__subheader level-two-subheader">
                                            <div class="nav-list__subtitle">ä¼ç¤¾æ¡å</div>
                                            <a class="nav-list__viewall-link font-icon font-icon-chevron-right mobile-hidden" href="../../../company.html">About F5</a>
                                        </div>
                                    </li>

                                    <li class="nav-list__item">
                                        <a class="nav-list__link level-two-link font-icon font-icon-chevron-right desktop-hidden" href="../../../company.html">
                                            About F5</a>
                                    </li>
                                

                                
                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../company/contact.html">
                                                ãåãåããå</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../company/careers.html">
                                                ã­ã£ãªã¢</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../company/leadership.html">
                                                ãªã¼ãã¼ã·ãã</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="https://investors.f5.com" rel="noreferrer">
                                                æè³å®¶åãæå ±</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../company/global-good.html">
                                                F5ã°ã­ã¼ãã« ã°ãã</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                
                            
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                
                                

                                
                                
                                    
                                    
                                    
                                    

                                    <li class="nav-list__item">
                                        <div class="nav-list__subheader level-two-subheader">
                                            <div class="nav-list__subtitle">ãã¥ã¼ã¹ã¨ã¤ãã³ã</div>
                                            <a class="nav-list__viewall-link font-icon font-icon-chevron-right mobile-hidden" href="../../../company/news.html">F5ãã¥ã¼ã¹ã«ã¼ã </a>
                                        </div>
                                    </li>

                                    <li class="nav-list__item">
                                        <a class="nav-list__link level-two-link font-icon font-icon-chevron-right desktop-hidden" href="../../../company/news.html">
                                            F5ãã¥ã¼ã¹ã«ã¼ã </a>
                                    </li>
                                

                                
                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../company/blog.html">
                                                ãã­ã°</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../company/news/press-releases.html">
                                                ãã¬ã¹ ãªãªã¼ã¹</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../company/events.html">
                                                ã¤ãã³ã</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../company/news/features.html">
                                                Features</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../company/news/awards.html">
                                                åè³</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../company/news/press-kit.html">
                                                ãã¬ã¹ ã­ãã</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                
                            </ul>
                            
                        </div>
                    </li>
                
                    
                    

                    <li class="nav-list__item" data-framecontent="false" data-target="mega-nav-panel--1420695405">

                        
                        
                        

                        <a data-aa="c:view,t:main-nav" class="nav-list__link level-one-link mega-nav-slidenav-trigger" href="../../../products/get-f5.html" aria-expanded="false">
                            <span class="nav-list__link-text">F5ããå©ç¨ãã ãã</span>
                        </a>

                        
                        <div class="mega-nav-slidenav" hidden>
                            <div class="mega-nav-slidenav__header">
                                <div class="mega-nav-slidenav__title">F5ããå©ç¨ãã ãã</div>
                            </div>

                            
                            <ul class="nav-list nav-list--level-two">
                                
                                
                                
                                
                                
                                
                                

                                
                                

                                
                                

                                
                                
                                    
                                    
                                    
                                    

                                    <li class="nav-list__item">
                                        <div class="nav-list__subheader level-two-subheader">
                                            <div class="nav-list__subtitle">F5ããå©ç¨ãã ãã</div>
                                            <a class="nav-list__viewall-link font-icon font-icon-chevron-right mobile-hidden" href="../../../products/get-f5.html">Get F5 Overview</a>
                                        </div>
                                    </li>

                                    <li class="nav-list__item">
                                        <a class="nav-list__link level-two-link font-icon font-icon-chevron-right desktop-hidden" href="../../../products/get-f5.html">
                                            Get F5 Overview</a>
                                    </li>
                                

                                
                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../trials.html">
                                                ç¡æãã©ã¤ã¢ã«</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../professional-services.html">
                                                ãã­ãã§ãã·ã§ãã« ãµã¼ãã¹</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../products/get-f5/enterprise-license-agreements.html">
                                                ã¨ã³ã¿ã¼ãã©ã¤ãº ã©ã¤ã»ã³ã¹å¥ç´</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../products/get-f5/perpetual-licensing-gbb.html">
                                                æ°¸ä¹ã©ã¤ã»ã³ã¹ï¼GBBï¼</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                    
                                    
                                    

                                    <!-- LEVEL TWO FRAME CONTENT -->
                                    

                                    
                                    

                                        
                                        
                                        

                                        <li class="nav-list__item">
                                            <a class="nav-list__link level-two-link font-icon font-icon-chevron-right" href="../../../products/get-f5/subscription.html">
                                                ãµãã¹ã¯ãªãã·ã§ã³</a>
                                        </li>

                                    

                                    <!-- LEVEL TWO MOBILE LINK -->
                                    

                                
                                
                            </ul>
                            
                        </div>
                    </li>
                </ul>
                
            </div>
            <div class="mobile-meta-nav">
                
                    
                        <div id="navigation-1731862598" class="u09">
    <div class="u09-mobile-wrapper">
        <ul class="nav-list">
            
                
                

                

                <li class="nav-list__item mega-nav-accordion">
                    <a class="nav-list__link mega-nav-accordion__trigger" href="#" aria-expanded="false">
                        <span class="nav-list__link-text">F5ã®ãµã¤ã</span>
                    </a>
                    <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>
                        <ul class="nav-list">
                            <li class="nav-list__item">
                                <a class="nav-list__link font-icon font-icon-chevron-right" href="https://support.f5.com" rel="noreferrer">ãµãã¼ã ãã¼ã¿ã«</a>
                            </li>
                        
                            <li class="nav-list__item">
                                <a class="nav-list__link font-icon font-icon-chevron-right" href="https://devcentral.f5.com" rel="noreferrer">DevCentral</a>
                            </li>
                        
                            <li class="nav-list__item">
                                <a class="nav-list__link font-icon font-icon-chevron-right" href="../../../myf5.html">My F5</a>
                            </li>
                        
                            <li class="nav-list__item">
                                <a class="nav-list__link font-icon font-icon-chevron-right" href="https://partnercentral.f5.com" rel="noreferrer">Partner Central</a>
                            </li>
                        
                            <li class="nav-list__item">
                                <a class="nav-list__link font-icon font-icon-chevron-right" href="https://account.f5.com/learnf5" rel="noreferrer">LearnF5</a>
                            </li>
                        </ul>
                    </div>
                </li>
            
                
                

                

                <li class="nav-list__item mega-nav-accordion">
                    <a class="nav-list__link mega-nav-accordion__trigger" href="#" aria-expanded="false">
                        <span class="nav-list__link-text">F5ã¸ã®ãåãåãã</span>
                    </a>
                    <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>
                        <ul class="nav-list">
                            <li class="nav-list__item">
                                <a class="nav-list__link font-icon font-icon-chevron-right" href="../../../ContactFormJP.html">F5è²©å£²æå½é¨ã¸ã®ãåãåãã</a>
                            </li>
                        
                            <li class="nav-list__item">
                                <a class="nav-list__link font-icon font-icon-chevron-right" href="../../../company/contact/regional-offices.html#product-support">F5ãµãã¼ãã¸ã®ãåãåãã</a>
                            </li>
                        
                            <li class="nav-list__item">
                                <a class="nav-list__link font-icon font-icon-chevron-right" href="../../professional-services/request-f5-professional-services.html">ãã­ãã§ãã·ã§ãã«ãµã¼ãã¹ã¸ã®ãåãåãã</a>
                            </li>
                        </ul>
                    </div>
                </li>
            
            <li class="nav-list__item mega-nav-accordion">
                
                <a class="nav-list__link mega-nav-accordion__trigger" href="#" aria-expanded="false">
                    <img class="icon-md" src="../../../../etc.clientlibs/f5-com/clientlibs/f5-com-resources/resources/main-nav/icon-globe.svg" alt=""/>
                    &nbsp;
                    <span class="nav-list__link-text">æ¥æ¬èª</span>
                </a>
                <div class="mega-nav-accordion__panel" aria-hidden="true" hidden>
                    <ul class="nav-list language-select-list">
                        <li class="nav-list__item">
                            <a class="nav-list__link currentURL" href="../../../../ja_jp.html">
                                æ¥æ¬èª
                            </a>
                        </li>
                        
                            <li class="nav-list__item">
                                
                                    
                                    <a class="nav-list__link" href="../../../../index.html">
                                        EN
                                    </a>
                                    
                                    <a class="nav-list__link" href="../../../../index.html">
                                        EN
                                    </a>
                                
                            </li>
                        
                            <li class="nav-list__item">
                                
                                    
                                    
                                    <a class="nav-list__link" href="../../../../de_de/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm.html">
                                        DE
                                    </a>
                                    
                                
                            </li>
                        
                            <li class="nav-list__item">
                                
                                    
                                    
                                    <a class="nav-list__link" href="../../../../es_es/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm.html">
                                        ES
                                    </a>
                                    
                                
                            </li>
                        
                            <li class="nav-list__item">
                                
                                    
                                    
                                    <a class="nav-list__link" href="../../../../fr_fr/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm.html">
                                        FR
                                    </a>
                                    
                                
                            </li>
                        
                            <li class="nav-list__item">
                                
                                    
                                    
                                    <a class="nav-list__link">
                                        ä¸­æ
                                    </a>
                                    
                                
                            </li>
                        
                            
                        
                    </ul>
                </div>
            </li>
        </ul>
    </div>
</div>

                    
                
            </div>
        </nav>

        
        <nav class="mega-nav--desktop">
            <div class="mega-nav__underlay"></div>
            <button type="button" class="btn mega-nav__close-btn">
                <span class="icon-md icon-close-bg"></span>
                <span class="sr-only">close</span>
            </button>
            <div class="mega-nav-panel" tabindex="-1" data-id="null"></div>
        </nav>

        
        <a href="#" class="sr-only mega-nav__reset-focus-link"><span hidden>reset focus</span></a>

    </div>
</div>

</header>

    

<div id="main-content"></div>
</div>
<div data-component-type="platter" class="c20 aem-GridColumn aem-GridColumn--default--12" data-component-title="Page Header">






                              






















<div class="c20__grid" id="platter-1479318778">
    
    <div class="bg-default c20__background c20__background-true bg-dark" data-bg-sizes="xs|sm|md|lg|xl|hd|false" data-bg-src-xs="/content/dam/f5-com/global-assets/images/heros/deployment-guides-abstract-blue-swirl-hero_xs.jpg" data-bg-src-sm="/content/dam/f5-com/global-assets/images/heros/deployment-guides-abstract-blue-swirl-hero_sm.jpg" data-bg-src-md="/content/dam/f5-com/global-assets/images/heros/deployment-guides-abstract-blue-swirl-hero_md.jpg" data-bg-src-lg="/content/dam/f5-com/global-assets/images/heros/deployment-guides-abstract-blue-swirl-hero_lg.jpg" data-bg-src-xl="/content/dam/f5-com/global-assets/images/heros/deployment-guides-abstract-blue-swirl-hero_xl.jpg" data-bg-src-hd="/content/dam/f5-com/global-assets/images/heros/deployment-guides-abstract-blue-swirl-hero_hd.jpg">
    </div>
    <div class="c20__content">
        <div class="c20__text-wrap">
            <div class="eyebrow text-inverse">
                DEPLOYMENT GUIDE
            </div>
            <h1 class="display-1 c20__headline text-inverse">
                Microsoft Exchange Server 2016 (BIG-IP v11 - v13: LTM, APM, AFM)
            </h1>
        </div>
    </div>
</div>
</div>
<div data-component-type="platter" class="c29-columns aem-GridColumn aem-GridColumn--default--12">




                              






















<div id="platter2059497588" class="bg-default c29-columns__wrap  U:gapper-desktop-platter">

    <div class="c29-columns__container   ">
        
        
        
        
        
        
        <div class="row">
            <div class="c29-columns__col">
                <div>


<div class="aem-Grid aem-Grid--12 aem-Grid--default--12 ">
    
    <div class="responsivegrid aem-GridColumn aem-GridColumn--default--12">


<div class="aem-Grid aem-Grid--12 aem-Grid--default--12 ">
    
    <div data-component-type="article" class="a06 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article Content Linked Resources">









<div id="article1975916506" class="a06">
    <h5 class=" a06__headline">
        PRODUCTS
    </h5>
    
        <ul class="list-unstyled">
            <li class="U:margin-top-sm">
                
                <a class="link-cta" href="../../../products/security/access-policy-manager.html">BIG-IP APM&nbsp;&rsaquo;
                </a>
            </li>
        
            <li class="U:margin-top-sm">
                
                <a class="link-cta" href="../../../products/big-ip-services/local-traffic-manager.html">BIG-IP LTM&nbsp;&rsaquo;
                </a>
            </li>
        
            <li class="U:margin-top-sm">
                
                <a class="link-cta" href="../../../products/security/advanced-firewall-manager.html">BIG-IP AFM&nbsp;&rsaquo;
                </a>
            </li>
        </ul>
    
</div>
</div>
<div data-component-type="article" class="a06 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article Content Linked Resources">









<div id="article-1754887956" class="a06">
    <h5 class=" a06__headline">
        RESOURCES
    </h5>
    
        <ul class="list-unstyled">
            <li class="U:margin-top-sm">
                
                <a class="link-cta" href="https://support.f5.com/kb/en-us/solutions/public/13000/400/sol13497.html" target="_blank" rel="noopener noreferrer" rel="noreferrer">Download related iApp&nbsp;&rsaquo;
                </a>
            </li>
        </ul>
    
</div>
</div>

    
</div>
</div>

    
</div>
</div>
            </div>
            <div class="c29-columns__col c29-columns__col--two-wide">
                <div>


<div class="aem-Grid aem-Grid--12 aem-Grid--default--12 ">
    
    <div class="responsivegrid aem-GridColumn aem-GridColumn--default--12">


<div class="aem-Grid aem-Grid--12 aem-Grid--default--12 ">
    
    <div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









<div id="article892819431" class="a01 "><p>Welcome to the F5 and Microsoft Exchange 2016 deployment guide. Use this document for guidance on configuring the BIG-IP system version 11 and later to provide additional security, performance, and availability for Exchange Server 2016 Mailbox servers.</p>
<p>When configured according to the instructions in this guide, whether using an iApp template or manually, the BIG-IP system performs as a reverse proxy for Exchange Mailbox servers, and also performs functions such as load balancing, compression, encryption, caching, and pre-authentication.</p>
<h2>Why F5?</h2>
<p>F5 offers a complete suite of application delivery technologies designed to provide a highly scalable, secure, and responsive Exchange deployment.</p>
<ul>
<li><p>The BIG-IP LTM can balance load and ensure high-availability across multiple Mailbox servers using a variety of load balancing methods and priority rules.</p>
</li>
<li><p>Terminating HTTPS connections at the BIG-IP LTM reduces CPU and memory load on Mailbox Servers, and simplifies TLS/SSL certificate management for Exchange 2016.</p>
</li>
<li><p>The BIG-IP Access Policy Manager (APM), F5's high-performance access and security solution, can provide pre-authentication, single sign-on, and secure remote access to Exchange HTTP-based client access services.</p>
</li>
<li><p>The BIG-IP Advanced Firewall Manager (AFM), F5's high-performance, stateful, full-proxy network firewall designed to guard data centers against incoming threats that enter the network can help secure and protect your Exchange deployment.</p>
</li>
<li><p>The BIG-IP LTM TCP Express feature set ensures optimal network performance for all clients and servers, regardless of operating system and version.</p>
</li>
<li><p>The LTM provides content compression features which improve client performance.</p>
</li>
</ul>
<h3>Products and versions</h3>
<table>
<tbody><tr><td><p><b>Product</b></p>
</td>
<td><p><b>Version</b></p>
</td>
</tr></tbody><tbody><tr><td><p>Microsoft Exchange Server</p>
</td>
<td><p>2016 (for previous versions of Exchange, seeÂ <a href="https://www.f5.com/content/f5-com/language-masters/ja_jp/services/resources/deployment-guides.html">https://f5.com/solutions/deployment-guides</a>)</p>
</td>
</tr><tr><td><p>BIG-IP system</p>
</td>
<td><p>Manual configuration: 11.0 - 13.0</p>
<p>iApp template: 11.4.1 - 13.0</p>
</td>
</tr><tr><td><p>BIG-IP iApp template</p>
</td>
<td><p>f5.microsoft_exchange_2016.v1.0.1 and v.1.0.2rc1</p>
</td>
</tr><tr><td><p>Deployment Guide version</p>
<p>Last updated</p>
</td>
<td><p>2.8 SeeÂ <a href="#Anchor-89"><i>Document Revision History</i></a>Â for revision details</p>
<p>07-21-2017</p>
</td>
</tr></tbody></table>
<p><b>Important:</b>Â <i>Make sure you are using the most recent version of this deployment guide, available atÂ </i><a href="../../../../content/dam/f5/corp/global/pdf/deployment-guides/microsoft-exchange-2016-dg.pdf">http://f5.com/pdf/deployment-guides/microsoft-exchange-2016-dg.pdf</a>Â <i>For previous versions of this and other guides, see the Deployment guideÂ Archive tabÂ on f5.com:Â </i><a href="../../../../services/resources/deployment-guides.html" rel="noreferrer">https://f5.com/solutions/deployment-guides/archive-608</a></p>
<h2>Introduction</h2>
<p>This document provides guidance for using theÂ <b><i>updated, downloadable</i>Â <i>BIG-IP iApp</i></b>Â Template to configure the Mailbox server role of Microsoft Exchange Server, as well as instructions on how to configure the BIG-IP system manually. This iApp template was developed for use with Exchange Server 2016.</p>
<p>You can configure the BIG-IP system to support any combination of the following services supported by Mailbox servers: Outlook Web App (which includes the HTTP resources for Exchange Control Panel), Exchange Web Services, Outlook Anywhere (RPC over HTTP, including the Offline Address Book), ActiveSync, Autodiscover, POP3, IMAP4, and MAPI over HTTP.</p>
<p>For more information on the Exchange 2016 see:.<a href="https://technet.microsoft.com/en-us/library/jj150491(v=exchg.160).aspx" rel="noreferrer">https://technet.microsoft.com/en-us/library/jj150491(v=exchg.160).aspx</a></p>
<p>For more information on the F5 devices in this guide, seeÂ <a href="https://www.f5.com/content/f5-com/language-masters/en_us/products/big-ip-services">http://f5.com/products/big-ip/</a>.</p>
<p>You can also see the BIG-IP deployment guide for SMTP services at:Â <a href="../../../../content/dam/f5/corp/global/pdf/deployment-guides/f5-smtp-dg.pdf">http://f5.com/pdf/deployment-guides/f5-smtp-dg.pdf</a>.</p>
<p>You can also visit the Microsoft page of F5âs online developer community, DevCentral, for Microsoft forums, solutions, blogs and more:Â <a href="http://devcentral.f5.com/Microsoft/" rel="noreferrer">http://devcentral.f5.com/Microsoft/</a>.</p>
<p>To provide feedback on this deployment guide or other F5 solution documents, contact us atÂ <a href="mailto:solutionsfeedback@f5.com" rel="noreferrer">solutionsfeedback@f5.com</a>.</p>
<h2>What is F5 iApp?</h2>
<p>F5 iApp is a powerful set of features in the BIG-IP system that provides a new way to architect application delivery in the data center. iApp includes a holistic, application-centric view of how applications are managed and delivered inside, outside, and beyond the data center. The iApp template for Microsoft Exchange Server acts as the single-point interface for building, managing, and monitoring the Exchange 2016 client access role.</p>
<p>For more information on iApp, see the White PaperÂ <i>F5 iApp: Moving Application Delivery Beyond the Network:Â </i><a href="../../../../content/dam/f5/corp/global/pdf/white-papers/f5-iapp-wp.pdf">http://f5.com/pdf/white-papers/f5-iapp-wp.pdf</a>.</p>
<h2>Skip ahead</h2>
<p><img src="https://f5.com/Portals/1/Images/Deployment%20Guides/29787.png" width="80" height="25"/></p>
<p>If you are already familiar with the Exchange iApp, you can skip directly to the relevant section after reading the prerequisites:</p>
<ul>
<li><p><a href="#Anchor-128"><i>Configuring the BIG-IP system for Microsoft Exchange using the iApp template</i></a>Â if using the iApp template, or</p>
</li>
<li><p><a href="#Anchor-100-1"><i>Appendix C: Manual configuration tables</i></a><i>Â </i>if configuring the BIG-IP system manually.</p>
</li>
</ul>
<h2>Prerequisites and configuration notes</h2>
<p>Use this section for important items you need to know about and plan for before you begin this deployment. Not all items will apply in all implementations, but we strongly recommend you read all of these items carefully.</p>
<p><b>General BIG-IP system prerequisites</b></p>
<ul>
<li><p>For this deployment guide, the BIG-IP systemÂ <i><b>must</b>Â </i>be running version 11.4.1 or later. If you are using a previous version of the BIG-IP system, see the Deployment Guide index on F5.com. This guide does not apply to previous versions.</p>
</li>
<li><p>Most of the configuration guidance in this document is performed on F5 devices. We provide a summary of Exchange configuration steps for reference only; for complete information on how to deploy or configure the components of Microsoft Exchange Server, consult the appropriate Microsoft documentation. F5 cannot provide support for Microsoft products.</p>
</li>
<li><p>If deploying BIG-IP APM features, you must fully license and provision APM before starting the iApp template.</p>
</li>
<li><p>This document provides guidance on using the Exchange iApp template. Additionally, for users familiar with the BIG-IP system, there are manual configuration tables at the end of this guide. Because of the complexity of this configuration, we strongly recommend using the iApp to configure the BIG-IP system.</p>
</li>
</ul>
<p><b>iApp template prerequisites and notes</b></p>
<ul>
<li><p>This document provides guidance on using the F5 suppliedÂ <b>Warning</b>Â To run the Microsoft Exchange iApp template, you must be logged into the BIG-IP system as a user that is assigned the admin role. For more information on roles on the BIG-IP system, see the BIG-IP User Accounts chapter of the BIG-IP TMOS: Concepts guide.</p>
</li>
<li><p>BIG-IP APM v12.0 and later now supports the MAPI over HTTP transport protocol (introduced in Exchange 2013 SP1 and included in 2016Â <a href="http://technet.microsoft.com/en-us/library/dn635177(v=exchg.150).aspx" rel="noreferrer">http://technet.microsoft.com/en-us/library/dn635177(v=exchg.150).aspx</a>). If you are using BIG-IP APM v11.x, the iApp template does not support this new protocol. SeeÂ <a href="#Anchor-134"><i>Manually configuring MAPI over HTTP in Exchange</i></a><i>Â </i>for manual instructions on configuring the BIG-IP system for MAPI over HTTP for the 11.x versions.</p>
</li>
<li><p>If you have existing, manually created Node objects on the BIG-IP system and given these nodes a name, you cannot use the IP addresses for those nodes when configuring the iApp. You must first manually delete those nodes and re-add them without a name, or delete the nodes and let the iApp automatically create them.</p>
</li>
<li><p>For some configuration objects, such as profiles, the iApp allows you to import custom objects you created outside the template. This enables greater customization and flexibility. If you have already started the iApp template configuration and then decide to you want to create a custom profile, you can complete the rest of the template as appropriate and then re-enter the template at a later time to select the custom object. Otherwise you can exit the iApp immediately, create the profile, and then restart the iApp template from the beginning.</p>
</li>
<li><p>Be sure to seeÂ <a href="#Anchor-92"><i>Troubleshooting</i></a>Â for troubleshooting tips and important configuration changes for specific situations.</p>
</li>
</ul>
<p><b>SSL certificate and key prerequisites and notes</b></p>
<ul>
<li><p>If you are using the BIG-IP system to offload SSL or for SSL Bridging, we assume you have already obtained an SSL certificate and key, and it is installed on the BIG-IP LTM system. To configure your Mailbox servers to support SSL offloading, you must first follow the most recent Microsoft documentation.</p>
</li>
<li><p>We generally recommend that you do not re-encrypt traffic between your BIG-IP APM and BIG-IP LTM because both BIG-IP systems must process the SSL transactions. However, if you choose to re-encrypt, we strongly recommend you use a valid certificate (usually SAN-enabled) rather than the default, self-signed certificate for the Client SSL profile on your BIG-IP LTM system. If not re-encrypting traffic, you do not need a certificate on your BIG-IP LTM.</p>
</li>
<li><p>This template currently only supports the use of a single DNS name and corresponding certificate and key for all services, or multiple DNS names using a SAN-enabled certificate and key.</p>
</li>
<li><p>If using a single virtual server for all HTTP-based client access services as recommended, youÂ <i>must</i>Â obtain the Subject Alternative Name (SAN) certificate (or wildcard certificate, see the next paragraph) and key from a 3rd party certificate authority that supports SAN certificates, and then import it onto the BIG-IP system. While the BIG-IP system supports using a wildcard certificate to secure Exchange deployments using multiple FQDNs, for increased security, F5 recommends using SAN certificate(s) where possible. Additionally, some older mobile devices are incompatible with wildcard certificates. Consult your issuing Certificate Authority for compatibility information.Â <b>Note:</b>Â For more information on SAN certificates, seeÂ <a href="#Anchor-65"><i>Subject Alternative Name (SAN) SSL Certificates</i></a>.</p>
</li>
</ul>
<p><b>BIG-IP Access Policy Manager prerequisites and notes</b></p>
<ul>
<li><p>If you are deploying BIG-IP APM, make sure to seeÂ <a href="#Anchor-144"><i>Exchange Hybrid Autodiscover, free/busy lookups, and remote mailbox moves/migrations fail when APM is deployed</i></a>Â for an important iRule you must add to the configuration.</p>
</li>
<li><p>If you want to display the computer type (public/shared vs private) and light version (Use the light version of Outlook Web App) options for OWA on the APM logon page via the BIG-IP APM, you must run the following PowerShell command on one of your Mailbox Servers (only one): Get-OwaVirtualDirectory | Set-OwaVirtualDirectory -LogonPageLightSelectionEnabled $true -LogonPagePublicPrivateSelectionEnabled $true</p>
</li>
<li><p>If you are deploying the iApp template for APM and smart card authentication for Outlook Web App, you must be using Kerberos authentication. This only applies to Outlook Web App (OWA).</p>
</li>
<li><p>If you are using BIG-IP APM, the following table shows the Exchange Server (Mailbox Server) settings:</p>
</li>
</ul>
<table>
<tbody><tr><td><p>Role</p>
</td>
<td><p>Out-of-the-box setting</p>
</td>
<td><p>Your Setting</p>
</td>
<td><p>Notes</p>
</td>
</tr></tbody><tbody><tr><td><p>SSL Offload for all HTTP services 1</p>
</td>
<td><p>Not enabled</p>
</td>
<td><p><b>Enabled</b></p>
</td>
<td><p><b>Optional but strongly recommended</b></p>
</td>
</tr><tr><td><p>OWA Authentication1</p>
</td>
<td><p>Forms2</p>
</td>
<td><p><b>Forms (default)2</b> orÂ <b>NTLM,</b> orÂ <b>Kerberos authentication (smart card)</b></p>
</td>
<td><p><b>Required</b></p>
</td>
</tr><tr><td><p>Autodiscover Authentication 1</p>
</td>
<td><p>Negotiate</p>
</td>
<td><p><b>Negotiate (default)</b></p>
</td>
<td><p><b>Required</b></p>
</td>
</tr><tr><td><p>ActiveSync Authentication 1</p>
</td>
<td><p>Basic</p>
</td>
<td><p><b>Basic (default)</b></p>
</td>
<td><p><b>Required</b></p>
</td>
</tr><tr><td><p>Outlook Anywhere Authentication 1,3</p>
</td>
<td><p>Negotiate</p>
</td>
<td><p><b>Basic (default)orÂ NTLM</b></p>
</td>
<td><p><b>Required</b></p>
</td>
</tr><tr><td><p>MAPI-over-HTTP 4</p>
</td>
<td><p>Negotiate</p>
</td>
<td><p><b>Basic (default)orÂ NTLM</b></p>
</td>
<td><p><b>Required</b></p>
</td>
</tr></tbody></table>
<p>1Â <i>Exchange Server 2010 and 2013 SP1 and later only. See the following link for more information on default authentication methods for Exchange Server 2010:</i>http://technet.microsoft.com/en-us/library/bb331973.aspx</p>
<p>2Â <i>You must change the default Forms logon format from Domain\username to just username. More information is available later in this guide.</i></p>
<p>3Â <i>Outlook Anywhere is disabled by default in Exchange 2010; you must enable it before you can use it. You can optionally configure BIG-IP APM v11.3 and later for NTLM authentication for Outlook Anywhere. See page 50.</i></p>
<p>4 MAPI-over-HTTP requires BIG-IP v12.0 or later for APM</p>
<p>When deploying APM, server authentication settings for the OWA and Outlook protocols are determined by client-side authentication selections made in the iApp. For example, selecting Basic client authentication for Outlook clients causes NTLM SSO to be applied to server-side requests, while selecting NTLM client authentication results in Kerberos single sign-on.</p>
<p><b>Important:</b>Â The values in the following table are only examples, use the values appropriate for your configuration.</p>
<p>In our example, we use the following conventions.</p>
<table width="100%">
<tbody><tr><td><p>Role</p>
</td>
<td><p>FQDNs</p>
</td>
<td><p>DNS Records</p>
</td>
<td><p>External URL/ Host name</p>
</td>
<td><p>Notes</p>
</td>
</tr></tbody><tbody><tr><td rowspan="4"><p><b>Autodiscover</b></p>
</td>
<td colspan="3"><p><b>Combined virtual server</b></p>
</td>
<td rowspan="4"><p>If the external DNS SRV record listed is not used, and you donât want to use SCP internally, you must also have at least one of these, set to the same IP as your OWA FQDN: example.com autodiscover.example.com</p>
</td>
</tr><tr><td><p>mail.example.com</p>
</td>
<td><p>A: mail.example.com</p>
<p>SRV: _autodiscover._tcp.example.com: port 443, Host âmail.example.com.â</p>
</td>
<td><p>https://mail.example.com/autodiscover/autodiscover.xml</p>
</td>
</tr><tr><td colspan="3"><p><b>Separate virtual servers</b></p>
</td>
</tr><tr><td><p>autodiscover.example.com</p>
</td>
<td><p>A: autodiscover.example.com</p>
<p>SRV: _autodiscover._tcp.example.com: port 443, Host âautodiscover.example.com.â</p>
</td>
<td><p>https://autodiscover.example.com/autodiscover/autodiscover.xml</p>
</td>
</tr><tr><td rowspan="4"><p><b>Outlook Web App</b></p>
</td>
<td colspan="3"><p><b>Combined virtual server</b></p>
</td>
<td rowspan="4">Â </td>
</tr><tr><td><p>mail.example.com</p>
</td>
<td><p>A: mail.example.com</p>
</td>
<td><p>https://mail.example.com/owa</p>
</td>
</tr><tr><td colspan="3"><p><b>Separate virtual servers</b></p>
</td>
</tr><tr><td><p>owa.example.com</p>
</td>
<td><p>A: owa.example.com</p>
</td>
<td><p>https://owa.example.com/owa</p>
</td>
</tr><tr><td rowspan="4"><p><b>ActiveSync</b></p>
</td>
<td colspan="3"><p><b>Combined virtual server</b></p>
</td>
<td rowspan="4">Â </td>
</tr><tr><td><p>mail.example.com</p>
</td>
<td><p>A: mail.example.com</p>
</td>
<td><p>https://mail.example.com/Microsoft-Server-ActiveSync</p>
</td>
</tr><tr><td colspan="3"><p><b>Separate virtual servers</b></p>
</td>
</tr><tr><td><p>mobile.example.com</p>
</td>
<td><p>A: mobile.example.com</p>
</td>
<td><p>https://mobile.example.com/Microsoft-Server-ActiveSync</p>
</td>
</tr><tr><td rowspan="4"><p><b>Outlook Anywhere (RPC over HTTP)</b></p>
</td>
<td colspan="3"><p><b>Combined virtual server</b></p>
</td>
<td rowspan="4"><p>To prevent internal users from receiving a password prompt, your internal DNS must not have an A record for the FQDN for Outlook Anywhere. This only applies if you are using Exchange 2010, using RPC MAPI internally and Outlook Anywhere externally, and your internal clients do not have a route to the external Outlook Anywhere/EWS virtual server(s).</p>
</td>
</tr><tr><td><p>mail.example.com</p>
</td>
<td><p>A: mail.example.com</p>
</td>
<td><p>mail.example.com</p>
</td>
</tr><tr><td colspan="3"><p><b>Separate virtual servers</b></p>
</td>
</tr><tr><td><p>oa.example.com</p>
</td>
<td><p>A: oa.example.com</p>
</td>
<td><p>oa.example.com</p>
</td>
</tr><tr><td rowspan="4"><p><b>Outlook Anywhere (MAPI over HTTP)</b></p>
</td>
<td colspan="3"><p><b>Combined virtual server</b></p>
</td>
<td rowspan="4">Â </td>
</tr><tr><td><p>mail.example.com</p>
</td>
<td><p>A: mail.example.com</p>
</td>
<td><p>https://mail.example.com/mapi</p>
</td>
</tr><tr><td colspan="3"><p><b>Separate virtual servers</b></p>
</td>
</tr><tr><td><p>mapi.example.com</p>
</td>
<td><p>A: mapi.example.com</p>
</td>
<td><p>https://mapi.example.com/mapi</p>
</td>
</tr></tbody></table>
<p>For more information, see:</p>
<ul>
<li><p>Summary of SRV records on Wikipedia:Â <a href="http://en.wikipedia.org/wiki/SRV_record" rel="noreferrer">http://en.wikipedia.org/wiki/SRV_record</a></p>
</li>
<li><p>Specification for SRV records (RFC2782):Â <a href="http://tools.ietf.org/html/rfc2782" rel="noreferrer">http://tools.ietf.org/html/rfc2782</a></p>
</li>
<li><p>Microsoft KB article on SRV records and the Autodiscover service:Â <a href="http://support.microsoft.com/kb/940881" rel="noreferrer">http://support.microsoft.com/kb/940881</a></p>
</li>
<li><p>Understanding the Autodiscover Service (including SCP information):Â <a href="http://technet.microsoft.com/en-us/library/bb124251.aspx" rel="noreferrer">http://technet.microsoft.com/en-us/library/bb124251.aspx</a></p>
</li>
</ul>
<h2>Configuring the iApp for Exchange Hybrid deployments</h2>
<p>This solution supports using BIG-IP APM for secure access to hybrid deployment of Exchange 2016. A hybrid deployment means an environment that has deployed Exchange on-premise and Office 365, and those two components have been configured to communicate with each other (as described in https://technet.microsoft.com/en-us/library/jj200581(v=exchg.150).aspx).</p>
<p>In a hybrid scenario, the BIG-IP is located between the Exchange Web Services and the Office 365 infrastructure, and F5 provides seamless access to the on-premise Exchange components in a secure fashion without causing failures for the hybrid-related traffic. The iApp template (v1.0.2 and later) now includes the questionÂ <i>Would you like to bypass APM for hybrid services?</i>Â on page 18. Select Yes for hybrid deployments. This will prevent failures in federated requests for Autodiscover and free/busy information, as well as remote moves and migrations between your Exchange organization and Exchange Online.</p>
<h2><a name="Anchor-81" id="Anchor-81"></a>iApp Deployment Scenarios</h2>
<p>The iApp greatly simplifies configuring the BIG-IP system for Microsoft Exchange 2016 client access roles. Before beginning the Application template, you must make a decision about the scenario in which you are using BIG-IP system for this deployment. The iApp presents the following three deployment options. You choose one of these options when you begin configuring the iApp.</p>
<ul>
<li><p><a href="#Anchor-90"><i>Local BIG-IP system load balances and optimizes traffic</i></a></p>
</li>
<li><p><a href="#Anchor-112"><i>Local LTM receives HTTP-based traffic forwarded by a remote APM</i></a></p>
</li>
<li><p><a href="#Anchor-140"><i>Local APM secures and forwards traffic to a remote LTM</i></a></p>
</li>
</ul>
<h2><a name="Anchor-90" id="Anchor-90"></a>Local BIG-IP system load balances and optimizes traffic</h2>
<p>You can select this scenario to manage, secure, and optimize client-generated mailbox traffic using the BIG-IP system. This is the traditional role of the BIG-IP LTM and should be used in scenarios where you are not deploying BIG-IP Access Policy Manager (APM) on aÂ <i>separate</i>Â BIG-IP system. In this scenario, you can optionally the BIG-IP APM to secure HTTP-based virtual servers onÂ <i>this</i>Â system.</p>
<p>You would not select this option if you intend to deploy a separate APM that provides secure remote access to HTTP-based services.</p>
</div></div>
<div data-component-type="article" class="a11 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article Image">









<!-- /* Author controlled Height/Width */  -->






<figure id="article1387121600" class="a11">
    
    
      <img src="../../../../content/dam/f5-com/page-assets-en/home-en/resources/deployment-guides/exch-load-balance-cas.png" class="img-fluid"/>
      
    
    <figcaption class="small a11__caption">Figure 1: Logical configuration example showing the BIG-IP system directing traffic to client access Services</figcaption>
</figure>

</div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









<div id="article-900471153" class="a01 "><p>The traffic flow for this scenario is:</p>
<ol>
<li><p>All Exchange Mailbox traffic goes to the BIG-IP system.</p>
</li>
<li><p>You can use the following optional modules if they are licensed and provisioned on you BIG-IP system:</p>
<ul>
<li><p>BIG-IP Access Policy Manager (APM) The BIG-IP APM module provides secure access and proxied authentication (pre-authentication) for HTTP-based Mailbox services: Outlook Web App, Outlook Anywhere, ActiveSync, and Autodiscover). The BIG-IP APM presents a login page to end users that takes the place of the forms-based login page normally presented by Outlook Web App. Users provide credentials through the BIG-IP APM form; the BIG-IP APM then authenticates the user to Active Directory.</p>
</li>
<li><p>BIG-IP Advanced Firewall Manager (AFM) The BIG-IP Advanced Firewall Manager (AFM) is a high-performance, stateful, full-proxy network firewall designed to guard data centers against incoming threats that enter the network on the most widely deployed protocols.</p>
</li>
</ul>
<p>Â </p>
</li>
<li><p>The BIG-IP LTM load balances and optimizes the Exchange client traffic to the Mailbox servers, including the services which are not HTTP-based: POP3, and IMAP4.</p>
</li>
</ol>
<h2><a name="Anchor-112" id="Anchor-112"></a>Local LTM receives HTTP-based traffic forwarded by a remote APM</h2>
<p>You can select this scenario to configure BIG-IP LTM with a single virtual server that receives Exchange HTTP-based traffic that has been forwarded by a separate BIG-IP APM. The virtual server can also accommodate direct Exchange client traffic, e.g. internal clients that do not use the BIG-IP APM, and non-HTTP traffic that is not handled by BIG-IP APM such as POP3 and IMAP4.</p>
<p>This scenario would be used together with the following scenario, in which you configure a separate BIG-IP APM to send traffic to this BIG-IP LTM device.</p>
</div></div>
<div data-component-type="article" class="a11 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article Image">









<!-- /* Author controlled Height/Width */  -->






<figure id="article692126430" class="a11">
    
    
      <img src="../../../../content/dam/f5-com/page-assets-en/home-en/resources/deployment-guides/exch-receive-apm.png" class="img-fluid"/>
      
    
    <figcaption class="small a11__caption">Figure 2: Logical configuration example showing the BIG-IP system receiving traffic from a BIG-IP APM</figcaption>
</figure>

</div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









<div id="article-181283719" class="a01 "><ol>
<li><p>Traffic comes in from the BIG-IP APM as described in the next scenario.</p>
</li>
<li><p>The BIG-IP LTM receives HTTP-based Exchange client traffic from a separate BIG-IP APM, or directly received the non HTTP-based traffic.</p>
</li>
<li><p>If you have internal Exchange clients, all Mailbox traffic from the internal clients goes directly to the BIG-IP LTM.</p>
</li>
<li><p>The BIG-IP LTM load balances and optimizes the traffic to the Mailbox servers, including the services which are not HTTP-based: POP3, and IMAP4.</p>
</li>
</ol>
<p><b>Note:</b>Â While this scenario can accommodate internal clients, we do not recommend using this virtual server in that way. We strongly recommend creating a second instance of the iApp on this BIG-IP LTM for the direct traffic/internal users. You must use a unique virtual server IP address; all of the other settings can be identical. Once both iApps have been created, you would configure Split DNS (use the same domain name, but different zones and IP addresses for internal and external clients). For more information about Split DNS, refer to your DNS documentation.</p>
<h2><a name="Anchor-140" id="Anchor-140"></a>Local APM secures and forwards traffic to a remote LTM</h2>
<p>You can select this scenario to configure the BIG-IP system as a BIG-IP APM that will use a single virtual server to provide proxy authentication (pre-authentication) and secure remote access to Exchange 2016 HTTP-based services without requiring the use of an F5 Edge Client. When you select this deployment scenario, the BIG-IP APM presents a login page to end users that takes the place of the forms-based login page normally presented by Outlook Web App. Users provide credentials through the BIG-IP APM form; the BIG-IP APM then authenticates the user to Active Directory. The BIG-IP system will only forward connections after a user has authenticated successfully. The traffic is then sent to another BIG-IP running LTM which provides advanced load balancing, monitoring and optimizations for HTTP-based client access services.</p>
<p>This scenario would be used together with the previous scenario, in which you configure a separate BIG-IP LTM to receive traffic from this BIG-IP APM device.</p>
</div></div>
<div data-component-type="article" class="a11 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article Image">









<!-- /* Author controlled Height/Width */  -->






<figure id="article-1496432007" class="a11">
    
    
      <img src="../../../../content/dam/f5-com/page-assets-en/home-en/resources/deployment-guides/exch-send-apm.png" class="img-fluid"/>
      
    
    <figcaption class="small a11__caption">Figure 3: Logical configuration example showing the BIG-IP APM providing proxy authentication and secure remote access</figcaption>
</figure>

</div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









<div id="article192758759" class="a01 "><p><b>Note:Â </b>While this scenario can accommodate internal clients, we do not recommend using this virtual server in that way. We strongly recommend creating a second instance of the iApp on this BIG-IP LTM for the direct traffic/internal users. You must use a unique virtual server IP address; all of the other settings can be identical. Once both iApps have been created, you would configure Split DNS (use the same domain name, but different zones and IP addresses for internal and external clients). For more information about Split DNS, refer to your DNS documentation.</p>
<ol style="list-style-position: inside;">
<li>HTTP-based Mailbox traffic goes to the BIG-IP APM, which provides proxy authentication and secure remote access.</li>
<li>After authentication, the BIG-IP APM sends the traffic to a separate BIG-IP LTM for intelligent traffic management.</li>
</ol>
<p>Guidance specific to each deployment scenario is contained later in this document.</p>
<h2><a name="Anchor-31" id="Anchor-31"></a>Preparation worksheets</h2>
<p>For each section of the iApp Template, you need to gather some information, such as Mailbox server IP addresses and domain information. The worksheets do not contain every question in the template, but rather include the information that is helpful to have in advance. Use the worksheet(s) applicable to your configuration. More information on specific template questions can be found on the individual pages. You might find it useful to print these tables and then enter the information.</p>
<table border="0" cellspacing="3" cellpadding="0" width="668">
<tbody><tr><td colspan="3"><p>BIG-IP LTM Preparation worksheet</p>
</td>
</tr></tbody><tbody><tr><td rowspan="2" valign="top"><p><b>Traffic arriving to this BIG-IP system is:</b></p>
</td>
<td valign="top"><p><b>Encrypted</b></p>
</td>
<td valign="top"><p><b>Unencrypted</b></p>
</td>
</tr><tr><td valign="top"><p>SSL Certificate:</p>
<p>Key:</p>
<p>If re-encrypting traffic to the Mailbox servers and not using the BIG-IP default certificate and key for the Server SSL profile: Certificate:</p>
<p>Key:</p>
</td>
<td valign="top"><p>If encrypting traffic to the Mailbox servers and not using the BIG-IP default certificate and key:</p>
<p>Certificate:</p>
<p>Key:</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>BIG-IP virtual servers and Mailbox Servers will be on:</b></p>
</td>
<td valign="top"><p><b>Same Subnet</b></p>
</td>
<td valign="top"><p><b>Different Subnets</b></p>
</td>
</tr><tr><td valign="top"><p>If the maximum number of expected concurrent users per Mailbox server is more than 6,000, you need one SNAT IP address for each 6,000 users or fraction thereof:</p>
<table border="0" cellspacing="3" cellpadding="0">
<tbody><tr><td width="100"><p>1:</p>
</td>
<td width="100"><p>4:</p>
</td>
</tr><tr><td><p>2:</p>
</td>
<td><p>5:</p>
</td>
</tr><tr><td><p>3:</p>
</td>
<td><p>6:</p>
</td>
</tr></tbody></table>
</td>
<td valign="top"><p>If the Mailbox servers are a different subnet from the BIG-IP virtual servers, and doÂ <b>not</b>Â use the BIG-IP as their default gateway, and if the maximum number of expected concurrent users per Mailbox server is more than 6,000, you need one SNAT IP address for each 6,000 users or fraction thereof:</p>
<table border="0" cellspacing="3" cellpadding="0">
<tbody><tr><td width="100"><p>1:</p>
</td>
<td width="100"><p>4:</p>
</td>
</tr><tr><td><p>2:</p>
</td>
<td><p>5:</p>
</td>
</tr><tr><td><p>3:</p>
</td>
<td><p>6:</p>
</td>
</tr></tbody></table>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Single virtual IP address for all Mailbox services or multiple addresses</b></p>
</td>
<td valign="top"><p><b>Single virtual IP address</b></p>
</td>
<td valign="top"><p><b>Different virtual IP addresses for different services</b></p>
</td>
</tr><tr><td valign="top"><p>IP address for the BIG-IP virtual server:</p>
</td>
<td valign="top"><p>You need a unique IP address for each of the Exchange services you are deploying: Outlook Web App: Outlook Anywhere: ActiveSync: Autodiscover: EWS: POP3: IMAP4:</p>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b>Are all Mailbox services handled by the same set of servers, or different Servers for different services?</b></p>
</td>
<td valign="top"><p><b>Same set of Mailbox servers for all services</b></p>
</td>
<td valign="top"><p><b>Different Mailbox servers for different services</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>IP addresses of the Mailbox servers:</p>
<table border="0" cellspacing="3" cellpadding="0">
<tbody><tr><td width="100"><p>1:</p>
</td>
<td width="100"><p>6:</p>
</td>
</tr><tr><td><p>2:</p>
</td>
<td><p>7:</p>
</td>
</tr><tr><td><p>3:</p>
</td>
<td><p>8:</p>
</td>
</tr><tr><td><p>4:</p>
</td>
<td><p>9:</p>
</td>
</tr><tr><td><p>5:</p>
</td>
<td><p>10:</p>
</td>
</tr></tbody></table>
</td>
<td valign="top"><p>IP addresses for Mailbox servers for each service:</p>
</td>
</tr><tr><td valign="top"><table border="0" cellspacing="3" cellpadding="0">
<tbody><tr><td><p>Outlook Web App:</p>
</td>
</tr><tr><td><p>Outlook Anywhere:</p>
</td>
</tr><tr><td><p>ActiveSync:</p>
</td>
</tr><tr><td><p>Autodiscover:</p>
</td>
</tr><tr><td><p>EWS:</p>
</td>
</tr><tr><td><p>POP3:</p>
</td>
</tr><tr><td><p>IMAP4:</p>
</td>
</tr></tbody></table>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>External monitor configuration</b></p>
</td>
<td colspan="2" valign="top"><p>If you want the iApp to configure external health monitors, complete the SNMP community string information. If you want to use external monitors for POP3/IMAP4 which perform logins, you need additional information:</p>
</td>
</tr><tr><td valign="top"><p>SNMP community string for your Mailbox servers:</p>
<p>Mailbox account name in AD for the POP/IMAP monitors:</p>
<p>Associated password:</p>
<p>Domain name (can be FQDN or NETBIOS) of the user account used for monitors:</p>
</td>
<td valign="top"><p>Second mailbox for monitoring (recommended): 2nd mailbox account name in AD for the POP/IMAP monitors:</p>
<p>Associated password for this account:</p>
<p>2nd domain name (can be FQDN or NetBIOS) of the user account used for monitors:</p>
</td>
</tr><tr><td valign="top"><p><b>Outlook Web App authentication method</b></p>
</td>
<td colspan="2" valign="top"><p><b>If deploying Outlook Web App, which authentication method have you configured:</b></p>
<p><b>Forms-Based Authentication (default)</b></p>
<p><b>Basic or Windows Integrated authentication</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Same FQDN for all HTTP-based client access services or different FQDNs</b></p>
</td>
<td valign="top"><p><b>Same FQDN</b></p>
</td>
<td valign="top"><p><b>Different FQDNs</b></p>
</td>
</tr><tr><td valign="top"><p>FQDN for all HTTP-based client access services:</p>
</td>
<td valign="top"><p>You need a FQDN for each HTTP-based service you are deploying:</p>
<p>Outlook Web App:Â EWS:Â Outlook Anywhere:Â ActiveSync:Â Autodiscover:</p>
</td>
</tr></tbody></table>
<table border="0" cellspacing="3" cellpadding="0" width="668">
<tbody><tr><td colspan="2" valign="top"><p>BIG-IP Access Policy Manager Preparation Worksheet</p>
</td>
</tr><tr><td valign="top"><p><b>Outlook Web App FQDN</b></p>
</td>
<td valign="top"><p><b>If you are deploying APM and OWA, you need the FQDN this is used to access OWA (such as owa.example.com):</b></p>
</td>
</tr><tr><td valign="top"><p><b>Domain Controller FQDNs and IP addresses that the BIG-iP system can contact</b></p>
</td>
<td valign="top"><p><b>What are the Domain Controller FQDNs and IP address this BIG-IP system can contact (use FQDN and not NETBIOS name)</b></p>
<table border="0" cellspacing="3" cellpadding="0">
<tbody><tr><td width="100"><p>1:</p>
</td>
<td width="100"><p>4:</p>
</td>
</tr><tr><td><p>2:</p>
</td>
<td><p>5:</p>
</td>
</tr><tr><td><p>3:</p>
</td>
<td><p>6:</p>
</td>
</tr></tbody></table>
</td>
</tr><tr><td valign="top"><p><b>Active Directory Domain name for Exchange users</b></p>
</td>
<td valign="top"><p><b>What is the Active Directory Domain name (must be in FQDN format):</b></p>
</td>
</tr><tr><td valign="top"><p><b>Active Directory Anonymous binding</b></p>
</td>
<td valign="top"><p><b>If Anonymous Binding is not allowed in your Active Directory implementation, you need an Active Directory account with administrative permissions: User name:</b></p>
<p><b>Password:</b></p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>If deploying the &quot;Local APM secures and forwards traffic to a remote LTM&quot; scenario</b></p>
</td>
</tr><tr><td valign="top"><p><b>BIG-IP APM virtual server</b></p>
</td>
<td valign="top"><p><b>What is the IP address you want to use for your BIG-IP APM virtual server:</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSL Certificate and Key</b></p>
</td>
<td valign="top"><p><b>SSL Certificate:</b></p>
<p><b>Key:</b></p>
</td>
</tr><tr><td valign="top"><p><b>Re-encrypt the traffic to the BIG-IP virtual server</b></p>
</td>
<td valign="top"><p><b>You must know if the remote BIG-IP LTM that will receive traffic from this BIG-IP APM is using a self-signed/default certificate and key or a certificate signed by a Certificate Authority.</b></p>
</td>
</tr><tr><td valign="top"><p><b>Remote LTM virtual server</b></p>
</td>
<td valign="top"><p><b>What is the virtual server address on the remote BIG-IP LTM to which this BIG-IP APM will forward traffic:</b></p>
</td>
</tr></tbody></table>
<table border="0" cellspacing="3" cellpadding="0" width="668">
<tbody><tr><td colspan="2" valign="top"><p>BIG-IP Advanced Firewall Manager Preparation Worksheet</p>
</td>
</tr><tr><td valign="top"><p><b>Subnets/Networks</b></p>
</td>
<td valign="top"><p><b>Which networks or subnets should be allowed to access the Exchange deployment:</b></p>
</td>
</tr></tbody></table>
<h2><a name="Anchor-128" id="Anchor-128"></a>Configuring the BIG-IP system for Microsoft Exchange using the iApp template</h2>
<p>Use this section for guidance on configuring the BIG-IP system using the iApp template. If you plan to configure the system manually, seeÂ <a href="#Anchor-100-1"><i>Appendix C: Manual configuration tables</i></a>.</p>
<h2>Downloading and importing the new iApp</h2>
<p>The first task is to download and import the new Exchange Server 2016 iApp template.</p>
<ol style="list-style-position: inside;">
<li>To download and import the iApp</li>
<li>Open a web browser and go toÂ <a href="https://support.f5.com/kb/en-us/solutions/public/k/11/sol11100442.html" rel="noreferrer">https://support.f5.com/kb/en-us/solutions/public/k/11/sol11100442.html</a>.</li>
<li>Follow the instructions to download the Microsoft Exchange iApp to a location accessible from your BIG-IP system.</li>
<li>Extract (unzip) theÂ <b>f5.microsoft_exchange_2016.tmpl</b>Â file. The latest version is in the Release Candidate directory.</li>
<li>Log on to the BIG-IP system web-based Configuration utility.</li>
<li>On the Main tab, expandÂ <b>iApp</b>, and then clickÂ <b>Templates</b>.</li>
<li>Click theÂ <b>Import</b>Â button on the right side of the screen.</li>
<li>Click a check in theÂ <b>Overwrite Existing Templates</b>Â box.</li>
<li>Click theÂ <b>Browse</b>Â button, and then browse to the location you saved the iApp file.</li>
<li>Click theÂ <b>Upload</b>Â button. The iApp is now available for use.</li>
</ol>
<h2><a name="Anchor-132" id="Anchor-132"></a>Upgrading an Application Service from previous version of the iApp template</h2>
<p>If you configured your BIG-IP using a previous version of the Microsoft Exchange 2016 iApp template, we strongly recommend you upgrade the iApp template to the most recent version. CheckÂ <a href="https://support.f5.com/kb/en-us/solutions/public/k/11/sol11100442.html" rel="noreferrer">https://support.f5.com/kb/en-us/solutions/public/k/11/sol11100442.html</a>.</p>
<p>When you upgrade to the current template version, the iApp retains all of your settings for use in the new template. In some new versions, you may notice additional questions, or existing questions asked in different ways, but your initial settings are always saved.</p>
<ol style="list-style-position: inside;">
<li>To upgrade an Application Service to the current version of the template</li>
<li>From the Main tab of the BIG-IP Configuration utility, expandÂ <b>iApp</b>Â and then clickÂ <b>Application Services</b>.</li>
<li>Click the name of your existing f5.microsoft_exchange_2016 application service from the list.</li>
<li>On the Menu bar, clickÂ <b>Reconfigure</b>.</li>
<li>At the top of the page, in theÂ <b>Template</b>Â row, click theÂ <b>Change</b>Â button to the right of the list.</li>
<li>From theÂ <b>Template</b>Â list, selectÂ <b>f5.microsoft_exchange_2016.</b>.</li>
<li>Review the questions in the new template, making any necessary modifications. Use the iApp walkthrough section of this guide for information on specific questions.</li>
<li>ClickÂ <b>Finished</b>.</li>
</ol>
<h2>Getting started with the Exchange iApp template</h2>
<p>To begin the Exchange iApp Template, use the following procedure.</p>
<ol style="list-style-position: inside;">
<li>To start the iApp template</li>
<li>Log on to the BIG-IP system.</li>
<li>On the Main tab, expandÂ <b>iApp</b>, and then clickÂ <b>Application Services</b>.</li>
<li>ClickÂ <b>Create</b>. The Template Selection page opens.</li>
<li>In theÂ <b>Name</b>Â box, type a name. In our example, we useÂ <b>Exchange-2016_.</b></li>
<li>From theÂ <b>Template</b>Â list, selectÂ <b>f5.microsoft_exchange_2016.</b>. The new Microsoft Exchange template opens.</li>
</ol>
<h2>Advanced options</h2>
<p>If you selectÂ <b>Advanced</b>Â from theÂ <b>Template Selection</b>Â list at the very top of the template, you see Device and Traffic Group options for the application. This feature is a part of the Device Management configuration. This functionality extends the existing High Availability infrastructure and allows for clustering, granular control of configuration synchronization and granular control of failover. To use the Device and Traffic Group features, you must have already configured Device and Traffic Groups before running the iApp. For more information on Device Management, see the product documentation.</p>
<ol style="list-style-position: inside;">
<li><i><b>Device Group</b></i><br />
To select a Device Group, clear the Device Group check box and then select the appropriate Device Group from the list.</li>
<li><i><b>Traffic Group</b></i><br />
To select a Traffic Group, clear the Traffic Group check box and then select the appropriate Traffic Group from the list.</li>
</ol>
<h2>Inline help</h2>
<p>At the bottom of the Welcome section, the iApp template asks about inline help text.</p>
<ol>
<li><p><i><b>Do you want to see inline help?</b></i><br />
Select whether you want to see informational and help messages inline throughout the template, or if you would rather hide this inline help. If you are unsure, we recommend having the iApp display all inline help. Important and critical notes are always shown, no matter which selection you make.</p>
<ul>
<li><p><b>Yes, show inline help text</b><br />
Select this option to see all available inline help text.</p>
</li>
<li><p><b>No, do not show inline help</b><br />
If you are familiar with this template, or with the BIG-IP system in general, select this option to hide the inline help text.</p>
</li>
</ul>
</li>
</ol>
<h2><a name="Anchor-80" id="Anchor-80"></a>Deployment Scenarios</h2>
<p>Choose the option that best describes how you plan to use the BIG-IP system you are currently configuring. The scenario you select determines the questions that appear in the iApp. The scenarios were described inÂ <a href="#Anchor-81"><i>iApp Deployment Scenarios</i></a><i>.</i></p>
<ol>
<li><p><i><b>Which scenario describes how you will use the BIG-IP system?</b></i><br />
Choose the scenario that best describes the way you plan to use this BIG-IP system. Guidance for each scenario is contained in a separate section of this document. Click the link to go to the relevant section of the guide for the scenario you plan to deploy.</p>
<ul>
<li><p><b>Local BIG-IP system load balances and optimizes traffic</b><br />
Select this scenario to manage, secure, and optimize client-generated Exchange Mailbox traffic using the BIG-IP system. This is the traditional role of the LTM and should be used when you are not deploying APM on a separate BIG-IP system. In this scenario, if you have fully licensed and provisioned BIG-IP APM you have the option of using it to provide proxy authentication for HTTP-based services on this system. Do not select this option if you intend to deploy a separate BIG-IP APM that will provide secure remote access to Exchange HTTP-based services. For this role, go toÂ <b><a href="#Anchor-69">Configuring the BIG-IP LTM to load balance and optimize Mailbox traffic</a>.</b></p>
</li>
<li><p><b>Local LTM receives HTTP-based traffic forwarded by remote BIG-IP APM</b><br />
Select this scenario to configure BIG-IP LTM with a single virtual server that receives Exchange HTTP-based traffic that has been forwarded by an BIG-IP APM. The virtual server can also accommodate direct traffic, for example internal clients that do not use the BIG-IP APM, and non-HTTP traffic that is not handled by BIG-IP APM such as POP3 and IMAP4. For this role, go toÂ <b><a href="#Anchor-receive">Configuring the local LTM to receive HTTP-based traffic forwarded by a remote APM</a>.</b></p>
</li>
<li><p><b>Local APM secures and forwards traffic to a remote LTM</b><br />
Select this role to configure the BIG-IP system as a BIG-IP APM that will use a single HTTPS (port 443) virtual server to provide proxy authentication and secure remote access to Exchange HTTP-based services without requiring the use of an F5 Edge Client. The traffic will be forwarded to another BIG-IP running LTM which provides advanced load balancing, monitoring and optimizations for those services. For this role, go toÂ <b><a href="#Anchor-30">Configuring a local APM to secure and forward traffic to a remote LTM</a>.</b></p>
</li>
</ul>
</li>
</ol>
<h2><a name="Anchor-69" id="Anchor-69"></a>Configuring the BIG-IP LTM to load balance and optimize Mailbox traffic</h2>
<p>If you chose the first scenario,Â <i>Local BIG-IP system load balances and optimizes traffic</i>, use this section for guidance on configuring the iApp. Again, do not chose this option if you will deploy a separate BIG-IP APM to provide secure remote access to HTTP-based services.</p>
<h2>Analytics</h2>
<p>This section of the template asks questions about Analytics. The Application Visibility Reporting (AVR) module allows you to view statistics specific to your Microsoft Exchange implementation. AVR is available on all BIG-IP systems v11 and later, however you must have the AVR provisioned for this option to appear. Note that this is only for application visibility reporting, you can view object-level statistics from the BIG-IP without provisioning AVR.</p>
<p><b>Important</b>: Enabling Analytics may adversely affect overall system performance. If you choose to enable Analytics, we recommend gathering statistics for a set time period, such as one week, and then re-entering this template and disabling Analytics while you process the data.</p>
<p>If you plan on using AVR for analytics, we recommend creating a custom Analytics profile. To create a new profile, from the Main tab, selectÂ <b>Profiles</b>Â and then clickÂ <b>Analytics</b>. ClickÂ <b>New</b>Â and then configure the profile as applicable for your configuration. See the online help or product documentation for specific instructions. To select the new profile, you need to restart or reconfigure the iApp template.</p>
<ol>
<li><p><i><b>Do you want to enable Analytics for application statistics?</b></i><br />
Select whether you want to enable AVR for Analytics for HTTP-based services. Note that Analytics does not always properly report the HTTP methods of Outlook Anywhere.</p>
<ul>
<li><p><b>No, do not enable Analytics</b><br />
Select this option if you do not want to use Analytics, and then continue withÂ <a href="#Anchor-115">BIG-IP Access Policy Manager.</a></p>
</li>
<li><p><b>Yes, enable Analytics using AVR</b><br />
If you choose to enable Analytics, select Yes from the list, and then answer the following questions.</p>
<ol>
<li><p><i>Use the default Analytics profile or select a custom profile?</i><br />
If you decide to use AVR, you must decide whether to use the default Analytics profile, or create a new one. As mentioned previously, we recommend creating a new profile to get the most flexibility and functionality out of AVR. If you have already started the iApp template configuration and then decide to create a new Analytics profile, you must exit the iApp, create the profile, and then restart the iApp template.</p>
<ul>
<li><p><b>Select a custom Analytics profile</b><br />
Select this option if you have already created a custom Analytics profile for Exchange Server.</p>
<ol>
<li><p><i>Which Analytics profile do you want to use?</i><br />
From the list, select the appropriate Analytics profile.</p>
<ul>
<li><p><b>Use default profile</b><br />
Select this option if you have not yet created a custom Analytics profile for Microsoft Exchange. We do not recommend using the default profile.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<h2><a name="Anchor-115" id="Anchor-115"></a>BIG-IP Access Policy Manager</h2>
<p>This section in this scenario asks about BIG-IP APM. To use APM, it must be fully licensed and provisioned before starting the template. If you are not deploying BIG-IP APM, continue with the next section. As mentioned in the prerequisites, if you are deploying APM, you must have configured the BIG-IP system for DNS and NTP; seeÂ <a href="#Anchor-74"><i>Configuring DNS and NTP settings</i></a><i>Â </i>for instructions.</p>
<ol>
<li><p><i><b>Provide secure authentication to HTTP-based client access services with BIG-IP APM?</b></i><br />
Specify whether you want to deploy BIG-IP APM to provide proxy authentication and secure remote access for HTTP-based client Access services.</p>
<ul>
<li><p><b>No, do not provide secure authentication using BIG-IP APM</b><br />
Select this option if you do not want to use the BIG-IP APM at this time. You can always reconfigure the iApp template at a later date should you decide to add BIG-IP APM functionality.</p>
</li>
<li><p><b>Yes, provide secure authentication using BIG-IP APM</b><br />
Select this option if you want to use the BIG-IP APM to provide proxy authentication and secure remote access for your Exchange deployment.</p>
<ol>
<li><p><i>Would you like to create a new Access Profile, or use an existing Access Profile?</i><br />
Choose whether you want the system to create a new BIG-IP APM Access Profile, or if you have already created a custom Access Profile outside the template. If you are unsure, select Create a new Access Profile.</p>
<ul>
<li><p><i>Select the Access profile you created from the list</i><br />
If you have previously created an Access profile for your Exchange implementation, select the existing profile you created from the list. Continue with the next section.</p>
</li>
<li><p><b>Create a new Access profile</b><br />
Select this option if you have not created a custom Access profile, and want the system to create one.</p>
<ol>
<li><p><i>Would you like to create a new AAA server, or use an existing AAA server?</i><br />
Choose whether you want the system to create a new BIG-IP APM AAA Server object, or if you have already created a custom AAA Server outside the template. The AAA server contains information about your Active Directory implementation. If you are unsure, select Create a new AAA Server.</p>
<ul>
<li><p><i>Select the AAA Server you created from the list</i><br />
If you have previously created an AAA Server for your Exchange implementation, select the existing object you created from the list. Because additional information about the AAA Server is used elsewhere in this template, only AAA Servers configured to use a pool of Domain Controllers appear in the list.</p>
<ol>
<li><p><i>What is the FQDN of your Active Directory domain for your Exchange users?</i><br />
Specify the FQDN of the Active Directory deployment for your Exchange users. This is the FQDN for your entire domain, such as example.com, rather than the FQDN for any specific host. Continue with the What text should appear in the user access logon prompt question on the following page.</p>
</li>
</ol>
</li>
<li><p><b>Create a new AAA Server</b><br />
Select this option if you have not created a custom AAA Server, and want the system to create one.</p>
<ol>
<li><p><i>What is the FQDN of your Active Directory domain for your Exchange users?</i><br />
Specify the FQDN of the Active Directory deployment for your Exchange users. This is the FQDN for your entire domain, such as example.com, rather than the FQDN for any specific host.</p>
</li>
<li><p><i>Which Active Directory servers in your domain can this BIG-IP system contact?</i><br />
Specify both the FQDN and IP address of each Active Directory server you want the BIG-IP APM to use for servicing authentication requests. Click Add to include additional servers.</p>
</li>
<li><p><i>Does your Active Directory domain allow anonymous binding?</i><br />
Select whether anonymous binding is allowed in your Active Directory environment.</p>
<ul>
<li><p><b>Yes, anonymous binding is allowed</b><br />
Select this option if anonymous binding is allowed. No further information is required. For details, on allowing anonymous binding, see https://technet.microsoft.com/en-us/library/cc816788(v=ws.10).aspx.</p>
</li>
<li><p><b>No, credentials are required for binding</b><br />
If credentials are required for binding, you must specify an Active Directory user name and password for use in the AAA Server.</p>
<ol>
<li><p><i>Which Active Directory user with administrative permissions do you want to use?</i><br />
Type a user name with administrative permissions.</p>
</li>
<li><p><i>What is the password associated with that account?</i><br />
Type the associated password.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>How do you want to handle health monitoring for this pool?</i><br />
Specify whether you want the template to create a new LDAP monitor or a new ICMP monitor, or if you select an existing monitor. For more accurate monitoring, we recommend using an LDAP monitor.</p>
<ul>
<li><p><b>Select an existing monitor for the Active Directory pool</b><br />
Select this option if you have already created a health monitor (only monitors with a Type of LDAP or External can be used) for the Active Directory pool that will be created by the template. If you want to create a health monitor, but have not already done so, you must exit the template and create the object before it becomes available from the list. The iApp allows you to select monitors that are a part of another iApp Application Service. If you select a monitor that is a part of another Application Service, be aware that any changes you make to the monitor in the other Application Service will apply to this Application Service as well.</p>
<ol>
<li><p><i>Which monitor do you want to use?</i><br />
From the list, select the LDAP or External monitor you created to perform health checks for the Active Directory pool created by the template. Only monitors that have a Type value of LDAP or External appear in this list. Continue with the &quot;What text should appear in the user access logon prompt&quot; question on this page.</p>
</li>
</ol>
</li>
<li><p><b>Use a simple ICMP monitor for the Active Directory pool</b><br />
Select this option if you only want a simple ICMP monitor for the Active Directory pool. This monitor sends a ping to the servers and marks the server UP if the ping is successful. Continue with the &quot;What text should appear in the user access logon prompt&quot; question on this page.</p>
</li>
<li><p><b>Create a new LDAP monitor for the Active Directory pool</b><br />
Select this option if you want the template to create a new LDAP monitor for the Active Directory pool. You must answer the following questions:</p>
<ol>
<li><p><i>What is the Common Name of a user account that can search Active Directory?</i><br />
Specify the Common Name of an Active Directory user name for the monitor to use when attempting to log on as a part of the health check. This should be a user account created specifically for this health monitor, and must be set to never expire. ADSI editor, an administration tool for Active Directory LDAP administration, is useful for determining the correct Common Name (cn). You can also use the Get-ADUser command in PowerShell to display the properties of the user account. Do not include cn= in this field.</p>
</li>
<li><p><i>What is the associated password?</i><br />
Specify the password associated with the Active Directory user name.</p>
</li>
<li><p><i>What is the LDAP tree for this user account?</i><br />
Specify the LDAP tree for the user account. As noted in the inline help, ADSI editor, an tool for Active Directory LDAP administration, is useful for determining the correct LDAP tree value. For example, if the user name is âuser1â which is in the organizational unit âExchange Usersâ and is in the domain âexchange.example.comâ, the LDAP tree would be: ou=Exchange Users, dc=Exchange, dc=example, dc=com.</p>
</li>
<li><p><i>Does your Active Directory domain require a secure protocol for communication?</i><br />
Specify whether your Active Directory implementation requires SSL or TLS for communication, or does not require a secure protocol. This determines the port the health monitor uses.</p>
<ul>
<li><p><b>No, a secure protocol is not required</b><br />
Select this option if your Active Directory domain does not require a secure protocol.</p>
</li>
<li><p><b>Yes, SSL communication is required</b><br />
Select this option if your Active Directory domain requires SSL communication. The health check uses port 636 as the Alias Service Port.</p>
</li>
<li><p><b>Yes, TLS communication is required</b><br />
Select this option if your Active Directory domain requires TLS communication. The health check uses port 389 as the Alias Service Port.</p>
</li>
</ul>
<p>Â </p>
</li>
<li><p><i>How many seconds between Active Directory health checks?</i><br />
Specify how many seconds the system should use as the health check Interval for the Active Directory servers. We recommend the default of 10 seconds.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>What text should appear in the user access logon prompt?</i><br />
Type the text you want users to see above the user name and password prompts when logging on to the BIG-IP APM. By default, this includes the HTML tag to insert a line break between 'Secure Logon' and 'for F5 Networks'.Â <b>Warning</b>Â If the text you want to appear includes the characters &amp;, &quot;, or ', you must use proper encoding:Â &amp;Â for &amp;,Â &quot;e;Â for &quot;, andÂ 'Â for '.</p>
</li>
<li><i>Would you like to bypass APM for hybrid services?</i><br />
Choose whether you want to bypass BIG-IP APM for hybrid services. Select Yes if your Exchange environment is federated with Exchange Online, and you have deployed BIG-IP APM in front of your on-premise Exchange servers. This will prevent failures in federated requests for Autodiscover and free/busy information, as well as remote moves and migrations between your Exchange organization and Exchange Online.<ul>
<li><b>No, do not bypass APM for Hybrid services</b><br />
Select this option if you do not need to bypass APM for hybrid services. Continue with the next question.</li>
<li><b>Yes, bypass APM for Hybrid services</b><br />
Select this option to bypass APM for hybrid services. This prevents federated requests for Autodiscover and free/busy information, and remote moves and migrations between Exchange and Exchange online from failing.</li>
</ul>
</li>
<li><p><i>Which APM logging profile do you want to use?</i><br />
<i>This question only appears if you are using BIG-IP version 12.0 or later</i><br />
BIG-IP version 12.0 allows you to attach a logging profile to your BIG-IP APM configuration. If you created an APM logging profile for this configuration, you can select it from the list. The default profile is namedÂ <b>default-log-setting.</b> For more information on APM logging, see the APM documentation for v12.0 and later.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<h2><a name="Anchor-147" id="Anchor-147"></a>Application Firewall Manager (BIG-IP AFM)</h2>
<p><i>This entire section only appears if you have licensed and provisioned BIG-IP AFM</i></p>
<p>This section gathers information about BIG-IP Advanced Firewall Manager, if you want to use it to protect the Exchange deployment. For more information on BIG-IP AFM, seeÂ <a href="http://support.f5.com/kb/en-us/products/big-ip-afm.html" rel="noreferrer">http://support.f5.com/kb/en-us/products/big-ip-afm.html</a>, and then select your version.</p>
<ol>
<li><p><i><b>Do you want to use AFM network firewall and IP Intelligence to protect your application?</b></i><br />
Choose whether you want to use BIG-IP AFM, F5's network firewall with IP intelligence, to secure this Exchange deployment. If you choose to use BIG-IP AFM, you can restrict access to the Exchange virtual server(s) to a specific network or IP address. See the BIG-IP AFM documentation for specific details on configuring AFM.</p>
<ul>
<li><p><b>No, do not use network firewall and IP Intelligence</b><br />
Select this option if you do not want to enable BIG-IP AFM at this time. You can always re-enter the template at a later date to enable BIG-IP AFM. Continue with the next section.</p>
</li>
<li><p><b>Select an existing AFM policy from the list</b><br />
If you already created a BIG-IP AFM policy for this implementation, select it from the list. Continue withÂ <i>c</i>.<br />
</p>
</li>
<li><p><b>Yes, use network firewall and IP Intelligence</b><br />
Select this option if you want to enable BIG-IP AFM using F5's recommended configuration.</p>
<ol>
<li><p><i>Do you want to forbid access to your application from specific networks or IP addresses?</i><br />
Choose whether you want to restrict access to the Exchange implementation via the BIG-IP virtual server.</p>
<ul>
<li><p><b>No, do not forbid client addresses (allow all)</b>Â By default, the iApp configures the AFM to accept traffic destined for the Exchange virtual server(s) from all sources. If you do not have a need to restrict access to the virtual server, leave this option selected and then continue withÂ <i>b</i>.<br />
</p>
</li>
<li><p><b>Yes, forbid specific client addresses</b><br />
Select this option if you want to restrict access to the Exchange virtual server(s) by IP address or network address.</p>
<ol>
<li><p><i>What IP or network addresses should be allowed to access your application?</i><br />
Specify the IP address or network access that should be allowed access to the Exchange virtual server(s). You can specify a single IP address, a list of IP addresses separated by spaces (not commas or other punctuation), a range of IP addresses separated by a dash (for example 192.0.2.10-192.0.2.100), or a single network address, such as 192.0.2.200/24.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><i>How should the system control connections from networks suspected of malicious activity?</i><br />
The BIG-IP AFM uses an IP intelligence database to categorize IP addresses coming into the system. Choose what you want the system to do for sources that are attempting to access the Exchange virtual server(s) with a low reputation score. For more information, see the BIG-IP AFM documentation.Â <b>Important:</b>Â You must have an active IP Intelligence license for this feature to function. SeeÂ <a href="https://f5.com/products/modules/ip-intelligence-services%20for%20information" rel="noreferrer">https://f5.com/products/modules/ip-intelligence-services for information</a>.</p>
<ul>
<li><p><b>Accept all connections and log nothing</b><br />
Select this option to allow all sources, without taking into consideration the reputation score or logging anything.</p>
</li>
<li><p><b>Reject connections from IP addresses with poor reputations</b><br />
Select this option to reject access to the Exchange virtual server(s) from any source with a low reputation score.</p>
</li>
<li><p><b>Accept all connections but log those from suspicious networks</b><br />
Select this option to allow access to the Exchange virtual server(s) from sources with a low reputation score, but add an entry for it in the logs. By default, IP Intelligence events are logged toÂ <b>Security &gt; Event Logs &gt; Network &gt; IP Intelligence.</b> We recommend creating a remote logging profile for IP Intelligence events.</p>
</li>
</ul>
</li>
<li><p><i>Would you like to stage a policy for testing purposes?</i><br />
Choose whether you want to stage a firewall policy for testing purposes. A staged policy allows you to evaluate the effect a policy has on traffic by analyzing the system logs, without actually modifying traffic based on the firewall rules. You must already have a policy on the system in order to select it.</p>
<ul>
<li><p><b>Do not apply a staging policy</b><br />
Select this option if you do not want to apply a logging profile at this time. You can always re-enter the template at a later date to add a logging profile. Continue with the next question.</p>
</li>
<li><p><b>Select an existing policy from the list</b><br />
If you have already created a firewall policy for this implementation, select it from the list. Only policies that already exist on the system appear in the list. To create a new policy, on the Main tab, clickÂ <b>Security &gt; Network Firewall &gt; Policies.</b> Specific instructions for creating a firewall policy is outside the scope of this iApp and deployment guide.</p>
</li>
</ul>
</li>
<li><p><i>Which logging profile would you like to use?</i><br />
Choose whether you or not you want to use a logging profile for this AFM implementation. You can configure the BIG-IP system to log detailed information about BIG-IP system Network Firewall events and store those logs on the BIG-IP system or a remote logging server (supports servers like syslog and Splunk). If you want to use a logging profile, we recommend creating one outside this template. The list only contains profiles with Network Firewall enabled.</p>
<ul>
<li><p><b>Do not use a logging profile</b><br />
Select this option if you do not want to use a logging profile at this time. You can always re-enter the template at a later date to add a logging profile. Continue with the next question.</p>
</li>
<li><p><b>Select an existing logging profile from the list</b><br />
If you have already created a logging profile for this implementation, select it from the list. You must create a profile before it is available in the list. To create a logging profile, on the Main tab, clickÂ <b>Security &gt; Event Logs &gt; Logging Profiles.</b> Specific instructions for creating a logging profile is outside the scope of this iApp and deployment guide. See the online help or theÂ <i>About Local Logging with the Network Firewall</i>Â chapter of theÂ <i><b>BIG-IP Network Firewall: Policies and Implementations</b></i>Â guide for more information.</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2><a name="Anchor-148" id="Anchor-148"></a>Tell us about your deployment</h2>
<p>In this section, the iApp gathers general information about your Mailbox Server deployment. Remember, you must import an SSL certificate and key that correspond to all fully-qualified DNS names that you are using for OWA, Outlook Anywhere, Autodiscover, ActiveSync, POP3, or IMAP4 traffic. Any certificate that you obtain with multiple names must be in SAN (Subject Alternative Name) or wildcard format, not SNI (Server Name Indication) format.</p>
<ol>
<li><p><i><b>Will incoming traffic arrive at this BIG-IP system encrypted or unencrypted?</b></i><br />
<i>This question does not appear if you chose to deploy APM in the previous section. If you selected to deploy APM, continue with the re-encrypt question (a) under Encrypted.</i><br />
Select whether any of the HTTP-based, POP3 and IMAP4 traffic will be encrypted or not when it arrives on this system. In nearly all cases for this deployment scenario, it will be encrypted (it would not be encrypted, for example, if you selected one of the other scenarios/roles for this iApp, and elected to offload SSL/TLS traffic at a separate BIG-IP APM). Note that the BIG-IP system does not offload the encryption used for RPC; the answer to this question should be based on the other client access protocols you intend to deploy.</p>
<ul>
<li><p><b>Encrypted</b><br />
If you chose Encrypted in the previous question, additional questions appear.</p>
<ol>
<li><p><i>Do you want to re-encrypt this traffic to your Mailbox Servers?</i><br />
If want the BIG-IP system to offload SSL processing from the Mailbox servers, selectÂ <b>Do not re-encrypt (SSL Offload)</b>Â from the list. Offloading SSL on the BIG-IP system can extend Exchange Server server capacity.</p>
<ul>
<li><p><b>Do not re-encrypt (SSL Offload)</b><br />
Select this option if you want to offload SSL processing onto the BIG-IP system. If you choose SSL Offload, you must have followed the instructions from Microsoft for configuring the Mailbox servers for offload.</p>
<ol>
<li><p><i>Which Client SSL profile do you want to use?</i><br />
The iApp can create a new Client SSL profile, or if you have created a Client SSL profile which contains the appropriate SSL certificate and key for your Exchange implementation, you can select it from the list.</p>
<ul>
<li><p><b>Select the Client SSL profile you created from the list</b><br />
If you manually created a Client SSL profile, select it from the list, and then continue with #2.</p>
</li>
<li><p><b>Create a new Client SSL profile</b><br />
Select this option if you want the iApp to create a new Client SSL profile.</p>
<ol>
<li><p><i>Which SSL certificate do you want to use?</i><br />
Select the SSL certificate you imported onto the BIG-IP system for decrypting client connections. If you have not yet imported a certificate, you can leave the default selections and reconfigure this iApp after obtaining the certificates. The deployment will not function correctly until you have selected the correct certificates here.Â <b>Note:</b>Â Any certificate that you obtain with multiple names must be in SAN (Subject Alternative Name) format, not SNI (Server Name Indication) format. For more information on SAN certificates, seeÂ <a href="#Anchor-65"><i>Subject Alternative Name (SAN) SSL Certificates</i></a><i>.</i></p>
</li>
<li><p><i>Which SSL key do you want to use?</i><br />
Select the associated key from the list.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><b>Re-encrypt (SSL Bridging)</b><br />
Select this option if your implementation requires encrypted traffic to the Mailbox servers. The BIG-IP system unencrypts, then re-encrypts the traffic headed for the Mailbox servers.</p>
<ol>
<li><p><i>Which Client SSL profile do you want to use?</i><br />
The iApp can create a new Client SSL profile, or if you have created a Client SSL profile which contains the appropriate SSL certificate and key for your Exchange implementation, you can select it from the list.</p>
<ul>
<li><p><b>Select the Client SSL profile you created from the list</b><br />
If you manually created a Client SSL profile, select it from the list, and then continue with #2.Â <b>Note:</b>Â Any certificate that you obtain with multiple names must be in SAN (Subject Alternative Name) format, not SNI (Server Name Indication) format. For more information on SAN certificates, seeÂ <a href="#Anchor-65"><i>Subject Alternative Name (SAN) SSL Certificates</i></a><i>.</i></p>
</li>
<li><p><b>Create a new Client SSL Profile</b><br />
Select this option if you want the iApp to create a new Client SSL profile.</p>
<ol>
<li><p><i>Which SSL certificate do you want to use?</i><br />
Select the SSL certificate you imported onto the BIG-IP system for decrypting client connections. If you have not yet imported a certificate, you can leave the default selections and reconfigure this iApp after obtaining the certificates. The deployment will not function correctly until you have selected the correct certificates here.</p>
</li>
<li><p><i>Which SSL key do you want to use?</i><br />
Select the associated key from the list.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>Which Server SSL profile do you want to use?</i><br />
Select whether you want the iApp to create an F5 recommended Server SSL profile, or if you want to choose a Server SSL profile you already created.Â <b>Important:</b> If you are configuring SSL Bridging and using BIG-IP version 11.4.x, you must seeÂ <a href="#Anchor-116"><i>When using SSL Bridging and BIG-IP version 11.4.x, pool members may be marked down or you may experience connection resets and TLS errors logged to the Mailbox servers</i></a>.</p>
<ul>
<li><p><b>Select the Server SSL profile you created from the list</b>Â If you have previously created a Server SSL profile for your Exchange implementation, from the list, select the existing Server SSL profile you created.</p>
</li>
<li><p><b>Create a new Server SSL profile</b><br />
Select this option if you want the iApp to create a new Server SSL profile. The F5 recommended Server SSL profile uses theÂ <i>serverssl</i>parent profile. For information about the ciphers used in the Server SSL profile, seeÂ <a href="http://support.f5.com/kb/en-us/solutions/public/8000/800/sol8802.html" rel="noreferrer">http://support.f5.com/kb/en-us/solutions/public/8000/800/sol8802.html</a>. Continue with #2 on the next page.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><b>Unencrypted</b><br />
Select this option if Mailbox traffic is arriving at this BIG-IP system unencrypted (typically because you configured to offload SSL/TLS traffic at the BIG-IP APM that is sending traffic to this device).</p>
<ol>
<li><p><i>Do you want to encrypt the traffic to your Mailbox Servers?</i><br />
If you want the BIG-IP system to offload SSL processing from the Mailbox servers, selectÂ <b>Do not encrypt (SSL Offload)</b>Â from the list. Offloading SSL on the BIG-IP system can extend Exchange Server server capacity.</p>
<ul>
<li><p><b>Do not encrypt (SSL Offload)Â </b><br />
Select this option if you do not want the BIG-IP system to encrypt the traffic destined for the Mailbox servers. The BIG-IP system does not modify the traffic, and you can continue with the next question.</p>
</li>
<li><p><b>Encrypt (SSL Bridging)</b><br />
Select this option if your implementation requires encrypted traffic to the Mailbox servers. If you choose this option, the BIG-IP system encrypts the traffic headed for the Mailbox servers.</p>
<ol>
<li><p><i>Which Server SSL profile do you want to use?</i><br />
Select whether you want the iApp to create an F5 recommended Server SSL profile, or if you want to choose a Server SSL profile you already created.Â <b>Important:</b> If you are configuring SSL Bridging and using BIG-IP version 11.4.x, you must seeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-116" rel="noreferrer"><i>When using SSL Bridging and BIG-IP version 11.4.x, pool members may be marked down or you may experience connection resets and TLS errors logged to the Mailbox servers</i></a>.</p>
<ul>
<li><p><b>Select the Server SSL profile you created from the list</b>Â If you have previously created a Server SSL profile for your Exchange implementation, select the existing Server SSL profile you created from the list.</p>
</li>
<li><p><b>Create a new Server SSL profile</b><br />
Select this option if you want the iApp to create a new Server SSL profile. The default, F5 recommended Server SSL profile uses theÂ <i>serverssl</i>Â parent profile. For information about the ciphers used in the Server SSL profile, seeÂ <a href="http://support.f5.com/kb/en-us/solutions/public/8000/800/sol8802.html" rel="noreferrer">http://support.f5.com/kb/en-us/solutions/public/8000/800/sol8802.html</a>.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Which intermediate certificate do you want to use?</b></i><br />
Choose whether or not you want to use an intermediate certificate (also called intermediate certificate chains or chain certificates) in this deployment. These certificates are used to help systems which depend on SSL certificates for peer identification. These certificates are intended to create a chain of trust between the CA that signed the certificate and the CA that is already trusted by the recipient of the certificate. This allows the recipient to verify the validity of the certificates presented, even when the signing CA is unknown. In order to use an intermediate certificate in this deployment, you must have manually imported it onto the BIG-IP system.</p>
<ul>
<li><p><b>Do not use an intermediate certificate</b><br />
Select this option if you do not want to use an intermediate certificate in this deployment, or have not yet imported the certificate onto the system but want to exit the template to import it and then restart the template.</p>
</li>
<li><p><b>Select the intermediate certificate you imported from the list</b>Â If you imported an intermediate certificate for this Exchange implementation, select the certificate you imported from the list.</p>
</li>
</ul>
</li>
<li><p><i><b>How should the system optimize client-side TCP connections to the BIG-IP LTM?</b></i><br />
Select how the system should optimize client-side TCP connections. The iApp uses your selection to configure the proper TCP optimization settings on the TCP profile.</p>
<ul>
<li><p><b>Optimize TCP connections for WAN clients</b><br />
Select this option if most Exchange server clients are coming into your Exchange environment over a Wide Area Network.</p>
</li>
<li><p><b>Optimize TCP connections for LAN clients</b><br />
Select this option if most Exchange server clients are coming into your Exchange environment over a Local Area Network.</p>
</li>
</ul>
</li>
<li><p><i><b>Where will your BIG-IP virtual servers be in relation to your Mailbox Servers?</b></i><br />
Select whether your BIG-IP virtual servers are on the same subnet as your Mailbox servers, or on different subnets. This setting is used to determine the SNAT (secure NAT) and routing configuration.</p>
<ul>
<li><p><b>Same subnet for BIG-IP virtual servers</b><br />
Select this option if the BIG-IP virtual servers and the Mailbox servers are on the same subnet. In this case SNAT is configured on the BIG-IP virtual server and you must specify the number of concurrent connections.</p>
<ol>
<li><p><i>What is the maximum number of concurrent users you expect per Mailbox Server?</i><br />
Select whether you expect more or fewer than 6,000 concurrent users to each Mailbox server. This answer is used to determine what type of SNAT (secure network address translation) that system uses. A SNAT is an object that maps the source client IP address in a request to a translation address defined on the BIG-IP device.Â <b>Note:</b>Â For specific information on SNAT Pools, including why we chose 6,000 concurrent users per server, seeÂ <a href="#Anchor-49"><i>Maximum number of concurrent users: SNAT Pool guidance</i></a>.<i></i></p>
<ul>
<li><p><b>Fewer than 6000</b><br />
Select this option if you expect fewer than 6,000 concurrent users per Mailbox server. With this option, the system applies SNAT Auto Map, which doesnât require any additional IP addresses, as the system uses an existing self IP address for translation.</p>
</li>
<li><p><b>More than 6000</b><br />
Select this option if you expect more than 6,000 users at one time to each server. With this option, the iApp creates a SNAT Pool (or you can choose one you created), for which you need one IP address for each 6,000 users you expect.</p>
<ol>
<li><p><i>Create a new SNAT pool or use an existing one?</i><br />
Select whether you want the system to create a new SNAT Pool, or if you have already created a SNAT pool for this implementation.</p>
<ul>
<li><p><b>Select the SNAT pool you created from the list</b><br />
If you have previously created a SNAT Pool for your Exchange implementation, select it from the list.</p>
</li>
<li><p><b>Create a new SNAT Pool</b><br />
If you have not created a custom SNAT pool, select this option for the iApp to create a new one.</p>
<ol>
<li><p><i>Which IP addresses do you want to use for the SNAT Pool?</i><br />
Specify one otherwise unused IP address for every 6,000 concurrent connections, or fraction thereof. ClickÂ <b>Add</b>Â for more rows.Â <b>Important: :</b> If you choose more than 6,000 users, but do not specify enough SNAT pool addresses, after the maximum connection limit of 6,000 concurrent users per server is reached, new requests fail.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><b>Different subnet for BIG-IP virtual servers and Mailbox Servers</b><br />
If the BIG-IP virtual servers and Web Interface servers are on different subnets, the following question appears asking how routing is configured.</p>
<ol>
<li><p><i>How have you configured routing on your Mailbox Servers?</i><br />
Select whether the Mailbox servers use this BIG-IP systemâs Self IP address as their default gateway.</p>
<ul>
<li><p><b>Mailbox Servers do NOT use BIG-IP as their default gateway</b><br />
Select this option if the Mailbox servers do not use the BIG-IP system as their default gateway. If the servers do not usethe BIG-IP as their default gateway, SNAT is configured on the BIG-IP virtual server and you must select the expected number of concurrent users in the next question.</p>
<ol>
<li><p><i>What is the maximum number of concurrent users you expect per Mailbox Server?</i><br />
Select whether you expect more or fewer than 6,000 concurrent users to each Mailbox server. This answer is used to determine what type of SNAT (secure network address translation) that system uses. A SNAT is an object that maps the source client IP address in a request to a translation address defined on the BIG-IP device.Â <b>Note:</b>Â For specific information on SNAT Pools, including why we chose 6,000 concurrent users per server, seeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-49" rel="noreferrer"><i>Maximum number of concurrent users: SNAT Pool guidance</i></a>.<i></i></p>
<ul>
<li><p><b>Fewer than 6000</b><br />
Select this option if you expect fewer than 6,000 concurrent users per Mailbox server. With this option, the system applies SNAT Auto Map, which doesnât require any additional IP addresses, as the system uses an existing self IP address for translation.</p>
</li>
<li><p><b>More than 6000</b><br />
Select this option if you expect more than 6,000 users at one time to each server. With this option, the iApp creates a SNAT Pool (or you can choose one you created), for which you need one IP address for each 6,000 users you expect.</p>
<ol>
<li><p><i>Create a new SNAT pool or use an existing one?</i><br />
Select whether you want the system to create a new SNAT Pool, or if you have already created a SNAT pool for this implementation.</p>
<ul>
<li><p><b>Select the SNAT pool you created from the list</b><br />
If you have previously created a SNAT Pool for your Exchange implementation, select it from the list.</p>
</li>
<li><p><b>Create a new SNAT Pool</b><br />
If you have not created a custom SNAT pool, select this option for the iApp to create a new one.</p>
<ol>
<li><p><b>Which IP addresses do you want to use for the SNAT Pool?</b>Specify one otherwise unused IP address for every 6,000 concurrent connections, or fraction thereof. ClickÂ <b>Add</b> for more rows.Â <b>Important:</b> If you choose more than 6,000 users, but do not specify enough SNAT pool addresses, after the maximum connection limit of 6,000 concurrent users per server is reached, new requests fail.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><b>Mailbox Servers use the BIG-IP as their default gateway</b><br />
Select this option if the Mailbox servers use the BIG-IP system as their default gateway. In this scenario, no additional configuration is necessary to ensure correct server response handling.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Do you want to use a single IP address for all Mailbox Server connections?</b></i><br />
Select whether you want to use a single IP address for all Mailbox server connections, or separate IP addresses for the different services. If you chose a single IP address, the iApp creates a single virtual server for all of the Mailbox services. If you choose different addresses, the BIG-IP creates individual virtual servers for each service. There are advantages to each method:</p>
<ul>
<li><p><b>Single IP addressÂ </b><br />
With a single IP address, you can combine multiple functions on the same virtual server; for instance, you may wish to have a single fully-qualified domain name (FQDN) and associated SSL certificate for all HTTP-based Mailbox methods. You only need to provision a single IP address for the virtual server. If you want the services to have unique DNS names despite sharing an IP address, you need to obtain an SSL certificate that supports Subject Alternative Names or a wildcard certificate. For detailed information on SAN certificates, seeÂ <a href="#Anchor-65"><i>Subject Alternative Name (SAN) SSL Certificates</i></a><i>.</i></p>
</li>
<li><p><b>Different IP addresses for different services</b><br />
By maintaining a separate virtual server for each component, you can manage each service independently from one another. For instance, you may wish to have different pool membership, load balancing methods, or custom monitors for Outlook Web App and Outlook Anywhere. If each of those services are associated with a different virtual server, granular management becomes easier. You need to provision an available IP address for each virtual server, and obtain a valid SSL certificate with a unique subject name for each service.</p>
</li>
</ul>
</li>
<li><p><i><b>How are you distributing the client access service protocols between servers?</b></i><br />
Select whether all your Mailbox services are handled by the same servers, or if each service is handled by a unique set of servers. This iApp creates separate pools and monitors for each service regardless of this setting. However, if you use the same set of servers for all services, you only have to specify the server IP addresses once.</p>
<ul>
<li><p><b>All services will be handled by the same set of Mailbox Servers</b>Â Choose this option if you are using the same servers for all of your Exchange client access services.</p>
</li>
<li><p><b>Each service will be handled by a unique set of Mailbox Servers</b><br />
Choose this option if you are using different sets of Mailbox servers for each client access service.</p>
</li>
</ul>
</li>
</ol>
<h2><a name="Anchor-149" id="Anchor-149"></a>Tell us about which services you are deploying</h2>
<p>In this section, the iApp gathers information about which client access services you are deploying. Some questions only appear depending on your answers to previous questions. These contingencies are noted at the beginning of the question description.</p>
<ol>
<li><p><i><b>Do you want to customize the server pool settings?</b></i><br />
Select whether you want to customize the BIG-IP load balancing pools for Mailbox services, or use the F5 recommended settings.</p>
<ul>
<li><p><b>Use settings recommended by F5</b><br />
If you don't have a specific reason to customize the pool settings, leave this question set to this setting and continue with #2.</p>
</li>
<li><p><b>Customize pool settings</b><br />
If you need to modify individual pool options, select Customize pool settings and answer the following options that appear:</p>
<ol>
<li><p><i>Which load balancing method do you want to use?</i><br />
Select the load balancing method you want to use. We recommend the default,Â <b>Least Connections (member).</b> See the BIG-IP documentation for a description of each method. If you chose a node-based load balancing method, such as Ratio (Node), and use a Ratio or Connection Limit (both optional), you must seeÂ <a href="#Anchor-83"><i>Adding Ratio or Connection Limit information to the nodes if using a node-based load balancing method</i></a><i></i>after completing the template.</p>
</li>
<li><p><i>Do you want to give priority to specific groups of servers?</i><br />
Select whether you want to enable Priority Group Activation to send traffic first to groups of servers you specify. The BIG-IP system load balances traffic according to the priority number you assign to each server.</p>
<ul>
<li><p><b>Do not use Priority Group Activation</b><br />
Select this option if you do not want to enable Priority Group Activation.</p>
</li>
<li><p><b>Use Priority Group Activation</b><br />
Select this option if you want to enable Priority Group Activation. You will need to add a priority number in the Priority box to each server . A higher number indicates higher priority. Traffic is only sent to the servers with the highest priority, unless the number of available servers in that priority group falls below the value you specify as the minimum in the following question. The BIG-IP system then sends traffic to the group of servers with the next highest priority, and so on. See the BIG-IP documentation for more details.</p>
<ol>
<li><p><i>What is the minimum number of active members in a group?</i><br />
Specify the minimum number of servers that must be active to continue sending traffic to the priority group. If the number of active servers falls below this minimum, traffic will be sent to the group of servers with the next highest priority group number.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>Do you want the BIG-IP system to queue TCP requests?</i><br />
Select whether you want the BIG-IP system to queue TCP requests. TCP request queuing provides the ability to queue connection requests that exceed the capacity of connections for a pool, as determined by the connection limit. Consequently, instead of dropping connection requests that exceed the capacity of a pool, TCP request queuing enables those connection requests to reside within a queue according to defined conditions until capacity becomes available. For more information on TCP Request Queuing, see theÂ <i>Preventing TCP Connection Requests From Being Dropped</i>Â chapter in theÂ <i><b>BIG-IP Local Traffic Manager: Implementations</b></i><br />
<i></i>guide, available on AskF5.Â <b>Important:</b> TCP Request Queuing is an advanced feature and should be used only if you understand how it will affect your deployment, including application behavior and BIG-IP performance. If you enable TCP Request Queuing, you must have a Connection Limit set on at least one of the nodes when configuring the Address/Port for the Mailbox Server nodes.</p>
<ul>
<li><p><b>Do not queue TCP requests</b><br />
Select this option if you do not want the BIG-IP system to queue TCP requests.</p>
</li>
<li><p><b>Queue TCP requests</b><br />
Select this option if you want to enable TCP request queuing on the BIG-IP system.</p>
<ol>
<li><p><i>What is the maximum number of TCP requests for the queue?</i><br />
Type the maximum number of requests you want to queue. We doÂ <i><b>not</b></i><br />
recommend using 0, which means unlimited and is only constrained by available memory.</p>
</li>
<li><p><i>How many milliseconds should requests remain in the queue?</i><br />
Type a number of milliseconds for the TCP request timeout value.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>What IP address do you want to use for your virtual servers?</b></i><br />
<i>This question appears only if you selectedÂ </i><b>Single IP address</b><i>Â for all connections in the previous section.</i><br />
Specify a valid IP address to use for the BIG-IP virtual server. This virtual server address is used for all client access services. The BIG-IP system intelligently directs traffic to the appropriate service using an iRule created by the template.</p>
</li>
<li><p><i><b>Do you want to add any iRules to this combined virtual server?</b></i><br />
If you chose to customize pool settings, you have the option of adding existing iRules to the virtual server. iRules allow an administrator to instruct the system to intercept, inspect, transform, direct and track inbound or outbound application traffic. For more information on iRules, seeÂ <a href="https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx" rel="noreferrer">https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx</a>.<br />
<b>Important:</b> Improper use or misconfiguration of an iRule can result in unwanted application behavior and poor performance of your BIG-IP system. We recommended you verify the impact of an iRule prior to deployment in a production environment. If you want to add iRules, from theÂ <b>Options</b>Â box, select the iRule(s) you want to include, and then click the Add (&lt;&lt;) button.</p>
</li>
<li><p><i><b>Are you deploying Outlook Web App (includes ECP)?</b></i><br />
Select whether you are deploying Outlook Web App at this time. This includes the Exchange Control Panel (ECP).</p>
<ul>
<li><p><b>No</b><br />
Select this option if you are not deploying OWA at this time. You can always reconfigure the template later to add OWA.</p>
</li>
<li><p><b>Yes</b><br />
Select this option if you are deploying OWA at this time.</p>
<ol>
<li><p><i>Which type of authentication do Outlook Web App clients use?</i><br />
<i>This question only appears if you selected to use BIG-IP APM and for the iApp to create a new Access profile</i><br />
Choose whether your outlook Web App clients are using Forms-based authentication or Smart Card authentication. You must be using BIG-IP APM version 11.3 or later for Smart Card authentication support for OWA.</p>
<ul>
<li><p><b>Outlook Web App clients use Forms-based authentication</b><br />
Select this option if your Outlook Web App clients are using Forms-based authentication.</p>
<ol>
<li><p><i>Which type of authentication have you configured on the Outlook Web App virtual directory?</i><br />
Select whether you have configured Outlook Web App to use Windows authentication or Forms-based authentication. Note that this selection is only for OWA, andÂ notÂ for Outlook clients. If you choose Windows authentication, the question asking about showing the OWA logon options do not appear. Showing the OWA logon options is only supported when doing server-side Forms authentication.</p>
<ul>
<li><p><b>Outlook Web App is configured for Forms-based authentication</b><br />
Select this option if your OWA implementation uses forms-based authentication. You must answer the following question.</p>
<ol>
<li><p><i>Would you like to display the OWA computer type and light version options on the APM logon page?</i><br />
Choose whether you want to display the computer type (public/shared vs private) and light version (Use the light version of Outlook Web App) options for OWA on the APM logon page.</p>
<ul>
<li><p><b>No, do not display the OWA logon options</b><br />
Select this option if you do not want to display the OWA logon options on the APM logon page.</p>
</li>
<li><p><b>Yes, display the OWA logon options</b>Â Note that in Exchange 2016, you must enable the logon page options by running a specific PowerShell command in the Exchange Management Shell prior to logging into OWA. SeeÂ <a href="#Anchor-107">Powershell command for enabling the OWA logon options</a>Â <b>Note:</b>Â For the blind and low vision experience to function correctly when accessing OWA with Internet Explorer 11, the OWA site must be added to the Compatibility View websites list. Consult Microsoft documentation for more information.</p>
</li>
</ul>
</li>
</ol>
</li>
<li><p><b>Outlook Web App is configured for Windows authentication</b><br />
Select this option if your Outlook Web App implementation uses Windows authentication. You must answer the following question.</p>
<ol>
<li><p><i>What should the timeout be for inactive OWA sessions (in minutes)?</i><br />
Type the number of minutes you want to pass before idle Outlook Web App sessions timeout. The default is 480 minutes (8 hours).</p>
</li>
</ol>
</li>
<li><p><b>Outlook Web App clients use Smart Card authentication</b><br />
Select this option if your OWA clients use Smart Card authentication and you are using BIG-IP APM v11.3 or later.</p>
<ol>
<li><p><i>Which certificate from a CA trusted by this BIG-IP system for client-side processing of smart card authentication do you want to use?</i><br />
<i>This question does not appear if you are using an existing Client SSL profile and iApp v1.0.2rc1</i><br />
Select the certificate you imported onto the BIG-IP system that is from a Certificate Authority and is trusted by the BIG-IP system for client-side processing of smart card authentication. This certificate must already be imported onto the system before you can select it.</p>
</li>
<li><p><i>What should the timeout be for inactive OWA sessions (in minutes)?</i><br />
Type the number of minutes you want to pass before idle Outlook Web App sessions timeout. The default is 480 minutes (8 hours).</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>Should BIG-IP APM restrict EAC access to members of the Exchange Organization Management Security Group?</i><br />
<i>This question only appears if you selected to provide secure authentication with BIG-IP APM.</i><br />
Select whether you want the BIG-IP APM to restrict Exchange Administration Center (EAC) access to members of Exchange 2016's Organizational Management group. The BIG-IP APM module queries Active Directory group membership for the user making the request to EAC. If the user is not a member of the Organization Management group, the BIG-IP APM policy denies access.</p>
<ul>
<li><p><b>No, do not restrict EAC access by group membership</b><br />
Select this option and the BIG-IP APM will not restrict access to the EAC by group membership.</p>
</li>
<li><p><b>Yes, restrict EAC access by group membership</b><br />
Select this option if you want to restrict EAC access to the Organization Management group. This adds an additional layer of security to your Exchange deployment, as the system denies access to the EAC from anyone who is not a member of the Organization Management group.</p>
</li>
</ul>
</li>
<li><p><i>What IP address do you want to use for the OWA virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Different IP addresses for different services</b>Â <i>in the previous section.</i><br />
Specify the IP address the system will use for the Outlook Web App virtual server. Clients will use this IP address to access Outlook Web App.</p>
</li>
<li><p><i>Do you want to add custom iRules to this virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Customize pool settings</b>Â <i>as well asÂ </i><b>Different IP addresses for different services</b><i>Â in the previous section.</i><br />
If you chose to customize pool settings, you have the option of adding existing iRules to this OWA virtual server. iRules allow an administrator to instruct the system to intercept, inspect, transform, direct and track inbound or outbound application traffic. For more information on iRules, seeÂ <a href="https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx." rel="noreferrer">https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx.</a>If you want to add iRules, from theÂ <b>Options</b> box, select the iRule(s) you want to include, and then click the Add (&lt;&lt;) button. Improper use or misconfiguration of an iRule can result in unwanted application behavior and poor performance of your BIG-IP system. We recommended you verify the impact of an iRule prior to deployment in a production environment.</p>
</li>
<li><p><i>What are the IP addresses of your OWA servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your Outlook Web App servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Are you deploying Microsoft Outlook, including EWS and OAB?</b></i><br />
Select whether you are deploying Microsoft Outlook (including EWS and OAB) as a part of your Exchange 2016 deployment. If you are, you must answer the following question about the protocol Outlook uses to connect to Exchange.</p>
<ul>
<li><p><b>No, not deploying Microsoft Outlook or EWS</b><br />
Select this option if you are not deploying Microsoft Outlook or EWS at this time. You can always reconfigure the template at another time to add Outlook or EWS to the configuration.</p>
</li>
<li><p><b>Yes, deploying EWS only</b>Â <br />
Select this option if you are only deploying Exchange Web Services at this time, and not Outlook Anywhere or Offline Address Book. In this case, the BIG-IP system sends any Offline Address Book traffic to the Exchange Web Services pool. If you are not using OWA/ECP or are using OWA but did not specify that OWA clients use Smart Card authentication, start with stepÂ f. If you are deploying for a single IP address for all connections and the same set of Client Access servers, there is no further information required, continue with step 6.</p>
<ol>
<li><p><i>What is the Kerberos Key Distribution Center IP or FQDN?</i><br />
Specify the IP address or fully qualified domain name of the Kerberos Key Distribution Center (KDC). If you type an FQDN, the BIG-IP system must be able to resolve the address. Otherwise, use the IP address.</p>
</li>
<li><p><i>What is the name of the Kerberos Realm?</i><br />
Specify the name of the Kerberos Realm. While this name should be in all capital letters, the iApp automatically turns any lower case letters to capital.</p>
</li>
<li><p><i>What is the user name for the Active Directory delegation account you created?</i><br />
Specify the user name for the Active Directory delegation account you created. This account must be correctly configured in Active Directory for Kerberos delegation. SeeÂ <a href="#Anchor-100"><i>Appendix E: Active Directory and Exchange Server configuration for NTLM</i></a><i>Â </i>details<i>.</i></p>
</li>
<li><p><i>What is the associated password?</i><br />
Specify the password associated with the account.</p>
</li>
<li><p><i>How do you want to construct the Kerberos ticket request?</i><br />
Select whether you want to use DNS reverse lookups or the Outlook Anywhere Host header to construct the ticket request.</p>
<ul>
<li><p><b>Use DNS reverse lookups</b><br />
Select this option to use DNS reverse lookups to build the Kerberos ticket request. Note that you must configure a reverse lookup zone containing a PTR record for each Client Access Server on a DNS server that is accessible from this BIG-IP system. Consult your DNS documentation for specific instructions.</p>
</li>
<li><p><b>Use the Outlook Anywhere host header</b><br />
Select this option to use the Outlook Anywhere Host header to construct the ticket request. To use the host header value, you must configure IIS Application Pools for Outlook Anywhere, Autodiscover, and Exchange Web Services to run using the previously created Active Directory user account for Kerberos delegation. SeeÂ <a href="#Anchor-100"><i>Appendix E: Active Directory and Exchange Server configuration for NTLM</i></a>.</p>
</li>
</ul>
</li>
<li><p><i>What IP address do you want to use for the Exchange Web Services virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Different IP addresses for different services</b>Â <i>in the previous section.</i><br />
Specify the IP address the system will use for the Exchange Web Services virtual server.</p>
</li>
<li><p><i>Do you want to add custom iRules to this virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Customize pool settings</b>Â <i>as well asÂ </i><b>Different IP addresses for different services</b><i>Â in the previous section.</i><br />
If you chose to customize pool settings, you have the option of adding existing iRules to this Exchange Web Services virtual server. iRules allow an administrator to instruct the system to intercept, inspect, transform, direct and track inbound or outbound application traffic. For more information on iRules, seeÂ <a href="https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx." rel="noreferrer">https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx.</a>If you want to add iRules, from theÂ <b>Options</b> box, select the iRule(s) you want to include, and then click the Add (&lt;&lt;) button. Improper use or misconfiguration of an iRule can result in unwanted application behavior and poor performance of your BIG-IP system. We recommended you verify the impact of an iRule prior to deployment in a production environment.</p>
</li>
<li><p><i>What are the IP addresses of your EWS servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your Exchange Web Services servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority. Continue with #6 Are you deploying ActiveSync?</p>
</li>
</ol>
</li>
<li><p><b>Yes, deploying Microsoft Outlook with EWS and OAB</b><br />
Select this option if you are deploying Outlook Anywhere, EWS, and OAB at this time.</p>
<ol>
<li><p><i>Which protocol(s) will Microsoft Outlook use to connect to Exchange?</i>Â Choose which protocols your Microsoft Outlook users are using to connect to the Exchange servers.</p>
<ul>
<li><p><b>Outlook clients will use MAPI-over-HTTP</b><br />
Select this option if your Outlook clients will use MAPI-over-HTTP only to connect to Exchange.</p>
<ol>
<li><p><i>What IP address do you want to use for the MAPI virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Different IP addresses for different services</b><i>Â in the previous section.</i><br />
Type the IP address you want the system to use for the virtual server for MAPI-over-HTTP.</p>
</li>
<li><p><i>Do you want to add custom iRules to this virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Customize pool settings</b>Â <i>as well asÂ </i><b>Different IP addresses for different services</b><i>Â in the previous section.</i><br />
If you chose to customize pool settings, you have the option of adding existing iRules to this MAPI virtual server. iRules allow an administrator to instruct the system to intercept, inspect, transform, direct and track inbound or outbound application traffic. For more information on iRules, seeÂ <a href="https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx" rel="noreferrer">https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx</a>. If you want to add iRules, from theÂ <b>Options</b>Â box, select the iRule(s) you want to include, and then click the Add (&lt;&lt;) button. Improper use or misconfiguration of an iRule can result in unwanted application behavior and poor performance of your BIG-IP system. We recommended you verify the impact of an iRule prior to deployment in a production environment.</p>
</li>
<li><p><i>What are the IP addresses of your MAPI servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><br />
Specify the IP addresses of your MAPI servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
<li><p><b>Outlook clients will use RPC-over-HTTP</b><br />
Select this option if your Outlook clients will use RPC over HTTP, and will not use MAPI over HTTP.</p>
<ol>
<li><p><i>What IP address do you want to use for the Outlook Anywhere virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Different IP addresses for different services</b><i>Â in the previous section.</i>Â Specify the IP address the system will use for the Outlook Anywhere virtual server.</p>
</li>
</ol>
</li>
<li><p><b>Outlook clients will use both MAPI-over-HTTP and RPC-over-HTTP</b><br />
Select this option if your Outlook clients will use both the RPC-over-HTTP and MAPI-over-HTTP protocols.</p>
<ol>
<li><p><i>What IP address do you want to use for the MAPI virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Different IP addresses for different services</b>Â Type the IP address you want the system to use for the virtual server for MAPI-over-HTTP.</p>
</li>
<li><p><i>Do you want to add custom iRules to this virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Customize pool settings</b>Â <i>as well asÂ </i><b>Different IP addresses for different services</b>Â If you chose to customize pool settings, you have the option of adding existing iRules to this MAPI virtual server. iRules allow an administrator to instruct the system to intercept, inspect, transform, direct and track inbound or outbound application traffic. For more information on iRules, seeÂ <a href="https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx." rel="noreferrer">https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx.</a>If you want to add iRules, from theÂ <b>Options</b>Â box, select the iRule(s) you want to include, and then click the Add (&lt;&lt;) button. Improper use or misconfiguration of an iRule can result in unwanted application behavior and poor performance of your BIG-IP system. We recommended you verify the impact of an iRule prior to deployment in a production environment.</p>
</li>
<li><p><i>What are the IP addresses of your MAPI servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><br />
Specify the IP addresses of your MAPI servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
<li><p><i>What IP address do you want to use for the Outlook Anywhere virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Different IP addresses for different services</b>Â <i>in the previous section.</i>Â Type the IP address you want the system to use for the virtual server for Outlook Anywhere.<i></i></p>
</li>
<li><p><i>Do you want to add custom iRules to this virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Customize pool settings</b>Â <i>as well asÂ </i><b>Different IP addresses for different services</b>Â If you chose to customize pool settings, you have the option of adding existing iRules to this Outlook Anywhere virtual server. iRules allow an administrator to instruct the system to intercept, inspect, transform, direct and track inbound or outbound application traffic. For more information on iRules, seeÂ <a href="https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx." rel="noreferrer">https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx.</a>If you want to add iRules, from theÂ <b>Options</b>Â box, select the iRule(s) you want to include, and then click the Add (&lt;&lt;) button. Improper use or misconfiguration of an iRule can result in unwanted application behavior and poor performance of your BIG-IP system. We recommended you verify the impact of an iRule prior to deployment in a production environment.</p>
</li>
<li><p><i>What are the IP addresses of your Outlook Anywhere servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><br />
Specify the IP addresses of your Outlook Anywhere servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>Which type of authentication do Outlook clients use?</i><br />
<i>This question only appears if you chose to deploy BIG-IP APM version 11.3 or later AND if you chose to deploy Microsoft Outlook with EWS and OAB</i><br />
Choose whether your Outlook Anywhere clients use Basic or NTLM authentication. Beginning in BIG-IP version 11.3, the iApp supports using NTLM authentication for Outlook Anywhere.</p>
<ul>
<li><p><b>Outlook Anywhere clients use Basic Authentication</b><br />
Select this option if your Outlook Anywhere clients use Basic Authentication.Â <br />
<b><i>NOTE</i>:</b> If you specified Outlook Web App clients use Smart Card authentication, you must answer the questions in stepsÂ <b>b-f</b>Â underÂ <b>Outlook clients use NTLM authentication</b>Â below.</p>
</li>
<li><p><b>Outlook Anywhere clients use NTLM authentication</b><br />
Select this option if your Outlook Anywhere clients use NTLM information. You must answer the following questions about your Active Directory implementation. Also see Appendix E: Active Directory and Exchange Server configuration for NTLM for important information and modifications for NTLM.Â <b>Important:</b> Before completing this section, you must create a user account in the same domain that has been properly configured for Kerberos delegation. You must also create an NTLM Machine Account object on the BIG-IP system to join this system to the Active Directory domain. SeeÂ <a href="#Anchor-75"><i>Creating an NTLM Machine Account</i></a>. Note that the Kerberos SSO method is the only SSO method that can be used when the authentication method of the access policy is NTLM.</p>
<ol>
<li><p><i>Which NTLM machine account should be used for Kerberos delegation?</i><br />
Select the NTLM Machine Account you created to join the BIG-IP system to the Active Directory domain. If you have not already created an NTLM Machine Account on the BIG-IP system, seeÂ <a href="#Anchor-75"><i>Creating an NTLM Machine Account</i></a><i>.Â </i>You must either exit the template now and start over once you have created the NTLM Machine Account, or choose Outlook Anywhere Clients use Basic Authentication from the previous question, and then re-enter the template at a later time.</p>
</li>
<li><p><i>What is the Kerberos Key Distribution Center IP or FQDN?</i><br />
Specify the IP address or fully qualified domain name of the Kerberos Key Distribution Center (KDC). If you type an FQDN, the BIG-IP system must be able to resolve the address. Otherwise, use the IP address.</p>
</li>
<li><p><i>What is the name of the Kerberos Realm?</i><br />
Specify the name of the Kerberos Realm. While this name should be in all capital letters, the iApp automatically turns any lower case letters to capital.</p>
</li>
<li><p><i>What is the user name for the Active Directory delegation account you created?</i><br />
Specify the user name for the Active Directory delegation account you created. This account must be correctly configured in Active Directory for Kerberos delegation. SeeÂ <a href="#Anchor-103"><i>Appendix E: Active Directory and Exchange Server configuration for NTLM</i></a><i>Â </i>details<i>.</i></p>
</li>
<li><p><i>What is the associated password?</i><br />
Specify the password associated with the account.</p>
</li>
<li><p><i>How do you want to construct the Kerberos ticket request?</i><br />
Select whether you want to use DNS reverse lookups or the Outlook Anywhere Host header to construct the ticket request.</p>
<ul>
<li><p><b>Use DNS reverse lookups</b><br />
Select this option to use DNS reverse lookups to build the Kerberos ticket request. Note that you must configure a reverse lookup zone containing a PTR record for each Mailbox Server on a DNS server that is accessible from this BIG-IP system. Consult your DNS documentation for specific instructions.</p>
</li>
<li><p><b>Use the Outlook Anywhere host header</b><br />
Select this option to use the Outlook Anywhere Host header to construct the ticket request. To use the host header value, you must configure IIS Application Pools for Outlook Anywhere, Autodiscover, and Exchange Web Services to run using the previously created Active Directory user account for Kerberos delegation. SeeÂ <a href="#Anchor-103"><i>Appendix E: Active Directory and Exchange Server configuration for NTLM</i></a>.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>What IP address do you want to use for the Exchange Web Services virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Different IP addresses for different services</b>Â <i>in the previous section.</i><br />
Type the IP address you want the system to use for the virtual server for Outlook Anywhere.<i></i></p>
</li>
<li><p><i>Do you want to add custom iRules to this virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Customize pool settings</b>Â <i>andÂ </i><b>Different IP addresses for different services</b>Â If you chose to customize pool settings, you have the option of adding existing iRules to this EWS virtual server. iRules allow an administrator to instruct the system to intercept, inspect, transform, direct and track inbound or outbound application traffic. For more information on iRules, seeÂ <a href="https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx." rel="noreferrer">https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx.</a>If you want to add iRules, from theÂ <b>Options</b> box, select the iRule(s) you want to include, and then click the Add (&lt;&lt;) button. Improper use or misconfiguration of an iRule can result in unwanted application behavior and poor performance of your BIG-IP system. We recommended you verify the impact of an iRule prior to deployment in a production environment.</p>
</li>
<li><p><i>What are the IP addresses of your EWS servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><br />
Specify the IP addresses of your EWS servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Are you deploying ActiveSync?</b></i><br />
Select whether you are deploying ActiveSync at this time.</p>
<ul>
<li><p><b>No</b><br />
Select this option if you are not deploying ActiveSync at this time. You can always reconfigure the template at another time to add ActiveSync to the configuration.</p>
</li>
<li><p><b>Yes</b><br />
Select this option if you are deploying ActiveSync at this time. SeeÂ <a href="#Anchor-110"><i>iPhones and other iOS devices are displaying invalid certificate messages after deploying the iApp for ActiveSync</i></a><i>Â </i>for important information.</p>
<ol>
<li><p><i>What IP address do you want to use for the ActiveSync virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Different IP addresses for different services</b>Â <i>in the previous section.</i><br />
Specify the IP address the system will use for the ActiveSync virtual server.</p>
</li>
<li><p><i>Do you want to add custom iRules to this virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Customize pool settings</b>Â <i>andÂ </i><b>Different IP addresses for different services</b>Â If you chose to customize pool settings, you have the option of adding existing iRules to this ActiveSync virtual server. iRules allow an administrator to instruct the system to intercept, inspect, transform, direct and track inbound or outbound application traffic. For information on iRules, seeÂ <a href="https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx." rel="noreferrer">https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx.</a>If you want to add iRules, from theÂ <b>Options</b> box, select the iRule(s) you want to include, and then click the Add (&lt;&lt;) button. Improper use or misconfiguration of an iRule can result in unwanted application behavior and poor performance of your BIG-IP system. We recommended you verify the impact of an iRule prior to deployment in a production environment.</p>
</li>
<li><p><i>What are the IP addresses of your ActiveSync servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><br />
Specify the IP addresses of your Outlook Anywhere servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Are you deploying Autodiscover?</b></i><br />
Select whether you are deploying Autodiscover at this time.</p>
<ul>
<li><p><b>No</b><br />
Select this option if you are not deploying Autodiscover at this time. You can always reconfigure the template at another time to add Autodiscover to the configuration.Â <b>Warning</b>Â To deploy Autodiscover, you must either create an 'SRV' record in DNS or create 'A' records in order for external clients to be able to make use of Autodiscover. If you do not want to use an 'SRV' record, then you must have 'A' records for either 'autodiscover.' or '' that resolve to the IP address you have designated for your Autodiscover virtual server.</p>
<ol>
<li><p><i>What IP address do you want to use for the Autodiscover virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Different IP addresses for different servicesÂ </b><i>in the previous section.</i><br />
Specify the IP address the system will use for the Autodiscover virtual server.</p>
</li>
<li><p><i>Do you want to add custom iRules to this virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Customize pool settings</b>Â <i>as well asÂ </i><b>Different IP addresses for different services</b><i>Â in the previous section.</i><br />
If you chose to customize pool settings, you have the option of adding existing iRules to this Autodiscover virtual server. iRules allow an administrator to instruct the system to intercept, inspect, transform, direct and track inbound or outbound application traffic. For iRule information, seeÂ <a href="https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx." rel="noreferrer">https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx.</a>If you want to add iRules, from theÂ <b>Options</b> box, select the iRule(s) you want to include, and then click the Add (&lt;&lt;) button. Improper use or misconfiguration of an iRule can result in unwanted application behavior and poor performance of your BIG-IP system. We recommended you verify the impact of an iRule prior to deployment in a production environment.</p>
</li>
<li><p><i>What are the IP addresses of your Autodiscover servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your Autodiscover servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>What version of NTLM authentication does your deployment require?</b></i><br />
<i>This question appears depending on your other selections in the template</i><br />
Choose the version of NTLM your Microsoft Exchange deployment requires. Your selection determines the type of BIG-IP APM SSO Configuration object.</p>
<ul>
<li><p><b>NTLMv1 authentication</b><br />
Select this option if your Exchange implementation is using NTLMv1.</p>
</li>
<li><p><b>NTLMv2 authentication</b><br />
Select this option if your Exchange implementation is using NTLMv2.</p>
</li>
</ul>
</li>
<li><p><i><b>Are you deploying POP3?</b></i><br />
Select whether you are deploying POP3 at this time.</p>
<ul>
<li><p><b>No</b><br />
Select this option if you are not deploying POP3 at this time. You can always reconfigure the template at another time to add POP3 to the configuration. ImportantYou must enable POP3 on each of your Exchange Mailbox Servers before that service will be available. POP3 is not enabled by default on Exchange Mailbox Servers. If you are offloading SSL, you must configure the Authentication properties for POP3 on each of your Exchange Mailbox Servers to allow logins using plain text. By default, POP3 is configured to only allow secure (encrypted) logins.</p>
<ol>
<li><p><i>What IP address do you want to use for the POP3 virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Different IP addresses for different services</b>Â <i>in the previous section.</i><br />
Specify the IP address the system will use for the POP3 virtual server.</p>
</li>
<li><p><i>What are the IP addresses of your POP3 servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your POP3 servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Are you deploying IMAP4?</b></i><br />
Select whether you are deploying IMAP4 at this time.</p>
<ul>
<li><p><b>No</b><br />
Select this option if you are not deploying IMAP4 at this time. You can always reconfigure the template at another time to add IMAP4 to the configuration.Â <b>Important:</b> You must enable IMAP4 on each of your Exchange Mailbox Servers before that service will be available. IMAP4 is not enabled by default on Exchange Mailbox Servers. If you are offloading SSL, you must configure the Authentication properties for IMAP4 on each of your Exchange Mailbox Servers to allow logins using plain text. By default, IMAP4 is configured to only allow secure (encrypted) logins.</p>
<ol>
<li><p><i>What IP address do you want to use for the IMAP4 virtual server?</i><br />
<i>This question only appears if you selectedÂ </i><b>Different IP addresses for different servicesÂ </b><i>in the previous section.</i><br />
Specify the IP address the system will use for the IMAP4 virtual server.</p>
</li>
<li><p><i>What are the IP addresses of your IMAP4 servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><br />
Specify the IP addresses of your IMAP4 servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>What are the IP Addresses of your Mailbox Servers?</b></i><br />
<i>This question only appears if you selectedÂ </i><b>All services will be handled by a unique set of Mailbox Servers</b>Â If you chose that each client access service will be handled by the same Mailbox Servers, the iApp asks for the IP addresses of the Mailbox Servers. Type the IP addresses. Click theÂ AddÂ button to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
<h2><a name="Anchor-153" id="Anchor-153"></a>Server Health Monitors</h2>
<p>The last section of the template asks for information about the health checks the iApp will configure for the Mailbox Servers.</p>
<ol>
<li><p><i><b>Do you want to create external monitors for client access services?</b></i><br />
Choose whether you want to use external or standard health monitors to check the availability of the client access services on your Mailbox Servers. External monitors require a mailbox account and password and perform logins to POP3, IMAP4 services (if you are using them).</p>
<ul>
<li><p><b>No, do not create external monitors (use standard monitors)</b><br />
Select this option if you want to use standard monitors for checking the availability of the client access services. Standard monitors check network connectivity but do not perform actual logins.</p>
</li>
<li><p><b>Yes, create external monitors</b>Â If you choose external monitors, uses a script to look for the Windows service status of five critical client access services. If you are deploying the iApp for POP3 and/or IMAP4 services, the monitors attempt to login to the service and checks for valid content in the response. Because these monitors attempt to access a specific mailbox, account maintenance and Mailbox status must become a part of your monitoring strategy. For example, if an account used for monitoring is locked or deleted, the monitor will mark the services down for all users. We strongly recommend creating a mailbox account(s) specifically for use in the monitor(s). The accounts for those mailboxes should have no other privileges in the domain and should be configured with passwords that do not expire.</p>
<ol>
<li><p><i>What is the SNMP community string for your Client Access servers?</i><br />
Type the SNMP community string for your Client Access servers. Because Microsoft only supports SNMP v2 in their default SNMP service, you must use an SNMP v2 community string. If you require SNMP v3 support, and have configured that using a custom solution on your Exchange servers then you can manually modify the external monitor script created by the iApp. SeeÂ <a href="#Anchor-146"><i>Modifying the external monitor script file to support SNMP v3</i></a>.</p>
</li>
<li><p><i>Which mailbox account should be used for the monitors?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type a mailbox account for use in the external monitors. This name corresponds to the account name field in Active Directory (rather than the email address).</p>
</li>
<li><p><i>What is the password for that mailbox account?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type the associated password.</p>
</li>
<li><p><i>What is the domain name of the user account for the monitors?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type the Domain name for the user account. This domain can be entered in either FQDN (mydomain.example.com) or NetBIOS (MYDOMAIN) format.</p>
</li>
<li><p><i>Do you want to monitor a second mailbox?</i><br />
Choose whether you want to monitor a second mailbox. We strongly recommend configuring a second mailbox account to be used by a second set of monitors, using a mailbox that is configured to reside on a different Mailbox server. The BIG-IP LTM will only mark a client access service on a specific server down if both sets of credentials fail. This provides resiliency to accommodate configuration errors with a single account, mailbox, or Mailbox server.</p>
<ul>
<li><p><b>Monitor only one mailbox</b><br />
Select this option if you do not want the BIG-IP system to monitor a second mailbox. Continue with #3.</p>
</li>
<li><p><b>Monitor a second mailbox (recommended)</b><br />
Select this option if you want the BIG-IP system to monitor a second mailbox. You must answer the following:</p>
<ol>
<li><p><i>Which email address do you want to use for the second set of advanced monitors?</i><br />
<i>This question only appears if you specified you are deploying Autodiscover and/or Exchange Web Services</i><br />
Type the email address associated with the account you are going to monitor (and that you specify below).</p>
</li>
<li><p><i>Which mailbox account should be used for the second set of monitors?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type a mailbox account for use in the second monitors. Again, this name corresponds to the account name field in Active Directory (rather than the email address).</p>
</li>
<li><p><i>What is the password for that mailbox account?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type the associated password.</p>
</li>
<li><p><i>What is the domain name of the user account for the second set of monitors?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type the Domain name for the second user account. This domain can be entered in either FQDN (mydomain.example.com) or NetBIOS (MYDOMAIN) format.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Which authentication method have you configured for OWA?</b></i><br />
<i>This question only appears if you specified you are deploying Outlook Web App.</i><br />
If you configured the iApp to deploy Outlook Web App at this time, choose the authentication method you have configured for Outlook Web App. The health monitors will be customized to accommodate the authentication method you are using.Â <b>Important:</b> If you are using APM in this scenario, you must choose Forms-Based. If you are using Forms-Based authentication for OWA, you must change the credential format required for OWA on each Exchange Mailbox Server from the default domain\username format to just username. If you are using NTLMv2, even if you select advanced health monitors in the iApp template, the EAV health checks (the checks that call an external script) will only be simple monitors.</p>
<ul>
<li><p><b>OWA uses the default Forms-Based authentication</b><br />
Select this option if you are using Forms-based authentication. If you chose Forms-based authentication, the BIG-IP system does not perform an actual login to the service, but checks the availability of the forms-based authentication page.</p>
</li>
<li><p><b>OWA uses Basic or Windows Integrated authentication</b><br />
Select this option if you are using Basic/Windows Integrated authentication.</p>
</li>
</ul>
</li>
<li><p><i><b>How many seconds should pass between health checks?</b></i><br />
This question does not appear if you chose not to create external monitors Specifies how often the system checks the health of the servers. We recommend the default of 30 seconds. The maximum value for the interval is 28,799 seconds.</p>
</li>
<li><p><i><b>Are you using the same FQDN for all HTTP-based services?</b></i><br />
<i>This question only appears if you specified you are using aÂ single IP addressÂ for all connections. If you selected Different IP addresses for different services, continue with #5.</i><br />
Select whether you are using one FQDN for all HTTP-based services or separate FQDNs for each service. These values are used for HTTP 1.1-based health monitors.</p>
<ul>
<li><p><b>One FQDN for all HTTP services</b><br />
Select this option if you are using a single FQDN for all HTTP-based client access services.</p>
<ol>
<li><p><i>What is the FQDN that you use for your HTTP-based client access services?</i><br />
Specify the fully qualified domain name you are using for all of the HTTP-based client access services.</p>
<ul>
<li><p><b>Different FQDNs for each HTTP service</b><br />
Select this option if you are using separate FQDNs for each HTTP-based client access service. Additional questions appear. When you are finished adding the FQDNs, continue withÂ <i>Additional Steps</i>.</p>
<ol>
<li><p><i>What FQDN do you use for the OWA service?</i><br />
<i>This question only appears if you specified you are deploying Outlook Web App.</i><br />
Specify the fully qualified domain name you use for your Outlook Web App service.</p>
</li>
<li><p><i>What FQDN do you use for the Outlook Anywhere service?</i><br />
<i>This question only appears if you specified you are deploying Outlook Anywhere.</i><br />
Specify the fully qualified domain name you use for your Outlook Anywhere service.</p>
</li>
<li><p><i>What FQDN do you use for the ActiveSync service?</i><br />
<i>This question only appears if you specified you are deploying ActiveSync.</i><br />
Specify the fully qualified domain name you use for your ActiveSync service.</p>
</li>
<li><p><i>What FQDN do you use for the Autodiscover service?</i><br />
<i>This question only appears if you specified you are deploying Autodiscover.</i><br />
Specify the fully qualified domain name you use for your Autodiscover service.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>What is the FQDN for your OWA service?</b></i><br />
<i>This question only appears if you specified you are using different IP addresses for different services and you are deploying OWA</i><br />
Specify the fully qualified domain name you use for your Outlook Web App service.</p>
</li>
<li><p><i><b>What is the FQDN for your MAPI service?</b></i><br />
<i>This question only appears if you specified you are using different IP addresses for different services and you are deploying MAPI-over HTTP</i><br />
Specify the fully qualified domain name you use for your MAPI service.</p>
</li>
<li><p><i><b>What is the FQDN for your Outlook Anywhere service?</b></i><br />
<i>This question only appears if you specified you are using different IP addresses for different services and you are deploying Outlook Anywhere</i><br />
Specify the fully qualified domain name you use for your Outlook Anywhere service.</p>
</li>
<li><p><i><b>What is the FQDN for your ActiveSync service?</b></i><br />
<i>This question only appears if you specified you are usingÂ different IP addressesÂ for different services and are deploying ActiveSync</i><br />
Specify the fully qualified domain name you use for your ActiveSync service.</p>
</li>
<li><p><i><b>What is the FQDN for your Autodiscover service?</b></i><br />
<i>This question only appears if you specified you are usingÂ different IP addressesÂ for different services and you are deploying Autodiscover</i><br />
Specify the fully qualified domain name you use for your Autodiscover service.</p>
</li>
</ol>
<h2>Additional Steps</h2>
<p>Review the information in the Additional steps section, and take appropriate action if necessary. All of the notes in Additional Steps are found in the relevant section of this deployment guide.</p>
<h2><a name="Anchor-70" id="Anchor-70"></a>Finished</h2>
<p>Review your answers to the questions. When you are satisfied, click theÂ <b>Finished</b>Â button. The BIG-IP system creates the relevant objects. Continue withÂ <a href="#Anchor-35"><i>Next steps</i></a><i>.</i></p>
<h2><a name="Anchor-receive" id="Anchor-receive"></a>Configuring the local LTM to receive HTTP-based traffic forwarded by a remote APM</h2>
<p>If you chose the second scenario,Â <i>Local LTM receives HTTP-based traffic forwarded by remote BIG-IP APM</i>, use this section for guidance on configuring the iApp. This selection configures BIG-IP LTM with a single virtual server that receives Exchange HTTP-based traffic that has been forwarded by a separate BIG-IP APM. The BIG-IP system can also accommodate non-HTTP traffic that is not handled by BIG-IP APM such as POP3 and IMAP4.</p>
<p>While this virtual server can be used for direct traffic (for example, internal clients that do not use the BIG-IP APM), we do not recommend using this virtual server in that way. For direct traffic, we strongly recommend creating a second instance of the iApp on this BIG-IP LTM for the direct traffic/internal users. You must use a unique virtual server IP address, all of the other settings can be identical. Once both iApps have been created, you would configure Split DNS (use the same domain name, but different zones and IP addresses for internal and external clients). For more information about Split DNS, refer to your DNS documentation.</p>
<h2>Analytics</h2>
<p>This section of the template asks questions about Analytics. The Application Visibility Reporting (AVR) module allows you to view statistics specific to your Microsoft Exchange implementation. AVR is available on all BIG-IP systems v11 and later, however you must have the AVR provisioned for this option to appear. Note that this is only for application visibility reporting, you can view object-level statistics from the BIG-IP without provisioning AVR.</p>
<p><b>Important</b>: Enabling Analytics may adversely affect overall system performance. If you choose to enable Analytics, we recommend gathering statistics for a set time period, such as one week, and then re-entering this template and disabling Analytics while you process the data.</p>
<p>If you plan on using AVR for analytics, we recommend creating a custom Analytics profile. To create a new profile, from the Main tab, selectÂ <b>Profiles</b>Â and then clickÂ <b>Analytics</b>. ClickÂ <b>New</b>Â and then configure the profile as applicable for your configuration. See the online help or product documentation for specific instructions. To select the new profile, you need to restart or reconfigure the iApp.</p>
<ol>
<li><p><i><b>Do you want to enable Analytics for application statistics?</b></i><br />
Choose whether you want to enable AVR for Analytics.</p>
<ul>
<li><p><b>No, do not enable Analytics</b>Â If you do not want to enable Analytics, leave this list set toÂ <b>No,</b> and continue with the next section.</p>
</li>
<li><p><b>Yes, enable Analytics using AVR</b>Â If you choose to enable Analytics, selectÂ <b>Yes</b>Â from the list, and then answer the following questions.</p>
<ol>
<li><p><i>Use the default Analytics profile or select a custom profile?</i><br />
If you decide to use AVR, you must decide whether to use the default Analytics profile, or create a new one. As mentioned previously, we recommend creating a new profile to get the most flexibility and functionality out of AVR. If you have already started the iApp template configuration and then decide to create a new Analytics profile, you must exit the iApp, create the profile, and then restart the iApp template.</p>
<ul>
<li><p><b>Select a custom Analytics profile</b><br />
Select this option if you have already created a custom Analytics profile for Exchange Server.</p>
<ol>
<li><p><i>Which Analytics profile do you want to use?</i><br />
From the list, select the appropriate Analytics profile.</p>
</li>
</ol>
</li>
<li><p><b>Use default profile</b><br />
Select this option if you have not yet created a custom Analytics profile for Microsoft Exchange. We do not recommend using the default profile.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<h2>Application Firewall Manager (BIG-IP AFM)</h2>
<p><i>This entire section only appears if you have licensed and provisioned BIG-IP AFM</i></p>
<p>This section gathers information about BIG-IP Advanced Firewall Manager, if you want to use it to protect the Exchange deployment. For more information on BIG-IP AFM, seeÂ <a href="http://support.f5.com/kb/en-us/products/big-ip-afm.html" rel="noreferrer">http://support.f5.com/kb/en-us/products/big-ip-afm.html</a>, and then select your version.</p>
<ol>
<li><p><i><b>Do you want to use AFM network firewall and IP Intelligence to protect your application?</b></i><br />
Choose whether you want to use BIG-IP AFM, F5's network firewall with IP intelligence, to secure this Exchange deployment. If you choose to use BIG-IP AFM, you can restrict access to the Exchange virtual server(s) to a specific network or IP address. See the BIG-IP AFM documentation for specific details on configuring AFM.</p>
<ul>
<li><p><b>No, do not use network firewall and IP Intelligence</b><br />
Select this option if you do not want to enable BIG-IP AFM at this time. You can always re-enter the template at a later date to enable BIG-IP AFM. Continue with the next section.</p>
</li>
<li><p><b>Select an existing AFM policy from the list</b><br />
If you already created a BIG-IP AFM policy for this implementation, select it from the list. Continue withÂ <i>c</i>.<br />
</p>
</li>
<li><p><b>Yes, use network firewall and IP Intelligence</b><br />
Select this option if you want to enable BIG-IP AFM using F5's recommended configuration.</p>
<ol>
<li><p><i>Do you want to forbid access to your application from specific networks or IP addresses?</i><br />
Choose whether you want to restrict access to the Exchange implementation via the BIG-IP virtual server.</p>
<ul>
<li><p><b>No, do not forbid client addresses (allow all)</b>Â By default, the iApp configures the AFM to accept traffic destined for the Exchange virtual server(s) from all sources. If you do not have a need to restrict access to the virtual server, leave this option selected and then continue withÂ <i>b</i>.<br />
</p>
</li>
<li><p><b>Yes, forbid specific client addresses</b><br />
Select this option if you want to restrict access to the Exchange virtual server(s) by IP address or network address.</p>
<ol>
<li><p><i>What IP or network addresses should be allowed to access your application?</i><br />
Specify the IP address or network access that should be allowed access to the Exchange virtual server(s). You can specify a single IP address, a list of IP addresses separated by spaces (not commas or other punctuation), a range of IP addresses separated by a dash (for example 192.0.2.10-192.0.2.100), or a single network address, such as 192.0.2.200/24.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><i>How should the system control connections from networks suspected of malicious activity?</i><br />
The BIG-IP AFM uses an IP intelligence database to categorize IP addresses coming into the system. Choose what you want the system to do for sources that are attempting to access the Exchange virtual server(s) with a low reputation score. For more information, see the BIG-IP AFM documentation.Â <b>Important:</b>Â You must have an active IP Intelligence license for this feature to function. SeeÂ <a href="https://f5.com/products/modules/ip-intelligence-services%20for%20information" rel="noreferrer">https://f5.com/products/modules/ip-intelligence-services for information</a>.</p>
<ul>
<li><p><b>Accept all connections and log nothing</b><br />
Select this option to allow all sources, without taking into consideration the reputation score or logging anything.</p>
</li>
<li><p><b>Reject connections from IP addresses with poor reputations</b><br />
Select this option to reject access to the Exchange virtual server(s) from any source with a low reputation score.</p>
</li>
<li><p><b>Accept all connections but log those from suspicious networks</b><br />
Select this option to allow access to the Exchange virtual server(s) from sources with a low reputation score, but add an entry for it in the logs. By default, IP Intelligence events are logged toÂ <b>Security &gt; Event Logs &gt; Network &gt; IP Intelligence.</b> We recommend creating a remote logging profile for IP Intelligence events.</p>
</li>
</ul>
</li>
<li><p><i>Would you like to stage a policy for testing purposes?</i><br />
Choose whether you want to stage a firewall policy for testing purposes. A staged policy allows you to evaluate the effect a policy has on traffic by analyzing the system logs, without actually modifying traffic based on the firewall rules. You must already have a policy on the system in order to select it.</p>
<ul>
<li><p><b>Do not apply a staging policy</b><br />
Select this option if you do not want to apply a logging profile at this time. You can always re-enter the template at a later date to add a logging profile. Continue with the next question.</p>
</li>
<li><p><b>Select an existing policy from the list</b><br />
If you have already created a firewall policy for this implementation, select it from the list. Only policies that already exist on the system appear in the list. To create a new policy, on the Main tab, clickÂ <b>Security &gt; Network Firewall &gt; Policies.</b> Specific instructions for creating a firewall policy is outside the scope of this iApp and deployment guide.</p>
</li>
</ul>
</li>
<li><p><i>Which logging profile would you like to use?</i><br />
Choose whether you or not you want to use a logging profile for this AFM implementation. You can configure the BIG-IP system to log detailed information about BIG-IP system Network Firewall events and store those logs on the BIG-IP system or a remote logging server (supports servers like syslog and Splunk). If you want to use a logging profile, we recommend creating one outside this template. The list only contains profiles with Network Firewall enabled.</p>
<ul>
<li><p><b>Do not use a logging profile</b><br />
Select this option if you do not want to use a logging profile at this time. You can always re-enter the template at a later date to add a logging profile. Continue with the next question.</p>
</li>
<li><p><b>Select an existing logging profile from the list</b><br />
If you have already created a logging profile for this implementation, select it from the list. You must create a profile before it is available in the list. To create a logging profile, on the Main tab, clickÂ <b>Security &gt; Event Logs &gt; Logging Profiles.</b> Specific instructions for creating a logging profile is outside the scope of this iApp and deployment guide. See the online help or theÂ <i>About Local Logging with the Network Firewall</i>Â chapter of theÂ <i><b>BIG-IP Network Firewall: Policies and Implementations</b></i>Â guide for more information.</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
</div></div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









<div id="article1110158687" class="a01 "><h2>Tell us about your deployment</h2>
<p>In this section, the iApp gathers general information about your Mailbox Server deployment. Remember, you must import an SSL certificate and key that correspond to all fully-qualified DNS names that you are using for OWA, Outlook Anywhere, Autodiscover, ActiveSync, POP3, or IMAP4 traffic. Any certificate that you obtain with multiple names must be in SAN (Subject Alternative Name) or wildcard format, not SNI (Server Name Indication) format.</p>
<ol>
<li><p><i><b>Will incoming traffic arrive at this BIG-IP system encrypted or unencrypted?</b></i><br />
Select whether any of the HTTP-based, POP3 and IMAP4 traffic will be encrypted or not when it arrives on this system. In nearly all cases for this deployment scenario, it will be encrypted (it would not be encrypted, for example, if you selected one of the other scenarios/roles for this iApp, and elected to offload SSL/TLS traffic at a separate BIG-IP APM). Note that the BIG-IP system does not offload the encryption used for RPC; the answer to this question should be based on the other client access protocols you intend to deploy.</p>
<ul>
<li><p><b>Encrypted</b><br />
If you chose Encrypted in the previous question, additional questions appear.</p>
<ol>
<li><p><i><b>Do you want to re-encrypt this traffic to your Mailbox Servers?</b></i><br />
If want the BIG-IP system to offload SSL processing from the Mailbox servers, selectÂ <b>Do not re-encrypt (SSL Offload)</b> from the list. Offloading SSL on the BIG-IP system can extend Exchange Server server capacity.</p>
<ul>
<li><p><b>Do not re-encrypt (SSL Offload)Â </b><br />
Select this option if you want to offload SSL processing onto the BIG-IP system. If you choose SSL Offload, you must have followed the Microsoft instructions for configuring the Exchange Server.</p>
<ol>
<li><p><i>Which Client SSL profile do you want to use?</i><br />
The iApp can create a new Client SSL profile, or if you have created a Client SSL profile which contains the appropriate SSL certificate and key for your Exchange implementation, you can select it from the list.</p>
<ul>
<li><p><b>Select the Client SSL profile you created from the list</b><br />
If you manually created a Client SSL profile, select it from the list, and then continue with #2.</p>
</li>
<li><p><b>Create a new Client SSL profile</b><br />
Select this option if you want the iApp to create a new Client SSL profile.</p>
<ol>
<li><p><i>Which SSL certificate do you want to use?</i><br />
Select the SSL certificate you imported onto the BIG-IP system for decrypting client connections. If you have not yet imported a certificate, you can leave the default selections and reconfigure this iApp after obtaining the certificates. The deployment will not function correctly until you have selected the correct certificates here.Â <b>Note:</b>Â Any certificate that you obtain with multiple names must be in SAN (Subject Alternative Name) format, not SNI (Server Name Indication) format. For more information on SAN certificates, seeÂ <a href="#Anchor-65"><i>Subject Alternative Name (SAN) SSL Certificates</i></a><i>.</i></p>
</li>
<li><p><i>Which SSL key do you want to use?</i>Â <br />
Select the associated key from the list.</p>
</li>
<li><p><i>Which intermediate certificate do you want to use?</i><br />
Choose whether or not you want to use an intermediate certificate (also called intermediate certificate chains or chain certificates) in this deployment. These certificates are used to help systems which depend on SSL certificates for peer identification. These certificates are intended to create a chain of trust between the CA that signed the certificate and the CA that is already trusted by the recipient of the certificate. This allows the recipient to verify the validity of the certificates presented, even when the signing CA is unknown. In order to use an intermediate certificate in this deployment, you must have manually imported it onto the BIG-IP system.</p>
<ul>
<li><p><b>Do not use an intermediate certificate</b><br />
Select this option if you do not want to use an intermediate certificate in this deployment, or have not yet imported the certificate onto the system but want to exit the template to import it and then restart the template.</p>
</li>
<li><p><b>Select the intermediate certificate you imported from the list</b>Â If you imported an intermediate certificate for this Exchange implementation, select the certificate you imported from the list.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><b>Re-encrypt (SSL Bridging)</b><br />
Select this option if your implementation requires encrypted traffic to the Mailbox servers. The BIG-IP system unencrypts, then re-encrypts the traffic headed for the Mailbox servers.</p>
<ol>
<li><p><i>Which Client SSL profile do you want to use?</i>Â <br />
The iApp can create a new Client SSL profile, or if you have created a Client SSL profile which contains the appropriate SSL certificate and key for your Exchange implementation, you can select it from the list.</p>
<ul>
<li><p><b>Select the Client SSL profile you created from the list</b><br />
If you manually created a Client SSL profile, select it from the list, and then continue with #2.</p>
</li>
<li><p><b>Create a new Client SSL profile</b><br />
Select this option if you want the iApp to create a new Client SSL profile.</p>
<ol>
<li><p><i>Which SSL certificate do you want to use?</i>Â <br />
Select the SSL certificate you imported onto the BIG-IP system for decrypting client connections. If you have not yet imported a certificate, you can leave the default selections and reconfigure this iApp after obtaining the certificates. The deployment will not function correctly until you have selected the correct certificates here.Â <b>Note:</b>Â Any certificate that you obtain with multiple names must be in SAN (Subject Alternative Name) format, not SNI (Server Name Indication) format. For more information on SAN certificates, seeÂ <a href="#Anchor-65"><i>Subject Alternative Name (SAN) SSL Certificates</i></a><i>.</i></p>
</li>
<li><p><i>Which SSL key do you want to use?</i>Â <br />
Select the associated key from the list.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Which intermediate certificate do you want to use?</b></i><br />
Choose whether or not you want to use an intermediate certificate (also called intermediate certificate chains or chain certificates) in this deployment. These certificates are used to help systems which depend on SSL certificates for peer identification. These certificates are intended to create a chain of trust between the CA that signed the certificate and the CA that is already trusted by the recipient of the certificate. This allows the recipient to verify the validity of the certificates presented, even when the signing CA is unknown. In order to use an intermediate certificate in this deployment, you must have manually imported it onto the BIG-IP system.</p>
<ul>
<li><p><b>Do not use an intermediate certificate</b><br />
Select this option if you do not want to use an intermediate certificate in this deployment, or have not yet imported the certificate onto the system but want to exit the template to import it and then restart the template.</p>
</li>
<li><p><b>Select the intermediate certificate you imported from the list</b>Â If you imported an intermediate certificate for this Exchange implementation, select the certificate you imported from the list.</p>
</li>
</ul>
</li>
<li><p><i>Which Server SSL profile do you want to use?</i>Â <br />
Select whether you want the iApp to create an F5 recommended Server SSL profile, or if you want to choose a Server SSL profile you already created.Â <b>Important:</b> If you are configuring SSL Bridging and using BIG-IP version 11.4.x, you must seeÂ <a href="#Anchor-116"><i>When using SSL Bridging and BIG-IP version 11.4.x, pool members may be marked down or you may experience connection resets and TLS errors logged to the Mailbox servers</i></a>.</p>
<ul>
<li><p><b>Select the Server SSL profile you created from the list</b>Â If you have previously created a Server SSL profile for your Exchange implementation, from the list, select the existing Server SSL profile you created.</p>
</li>
<li><p><b>Create a new Server SSL profile</b><br />
Select this option if you want the iApp to create a new Server SSL profile. The F5 recommended Server SSL profile uses theÂ <i>serverssl</i>Â parent profile. For information about the ciphers used in the Server SSL profile, seeÂ <a href="http://support.f5.com/kb/en-us/solutions/public/8000/800/sol8802.html" rel="noreferrer">http://support.f5.com/kb/en-us/solutions/public/8000/800/sol8802.html</a>. Continue with #2.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><b>Unencrypted</b><br />
Select this option if Mailbox traffic is arriving at this BIG-IP system unencrypted (typically because you configured to offload SSL/TLS traffic at the BIG-IP APM that is sending traffic to this device).</p>
<ol>
<li><p><i>Do you want to encrypt the traffic to your Mailbox Servers?</i><br />
If you want the BIG-IP system to offload SSL processing from the Mailbox servers, selectÂ <b>Do not encrypt (SSL Offload)</b>Â from the list. Offloading SSL on the BIG-IP system can extend Exchange Server server capacity.</p>
<ul>
<li><p><b>Do not encrypt (SSL Offload)Â </b><br />
Select this option if you do not want the BIG-IP system to encrypt the traffic destined for the Mailbox servers. The BIG-IP system does not modify the traffic, and you can continue with the next question.</p>
</li>
<li><p><b>Encrypt (SSL Bridging)</b><br />
Select this option if your implementation requires encrypted traffic to the Mailbox servers. If you choose this option, the BIG-IP system encrypts the traffic headed for the Mailbox servers.</p>
<ol>
<li><p><b>Which Server SSL profile do you want to use?</b><br />
Select whether you want the iApp to create an F5 recommended Server SSL profile, or if you want to choose a Server SSL profile you already created.Â <b>Important:</b> If you are configuring SSL Bridging and using BIG-IP version 11.4.x, you must seeÂ <a href="#Anchor-116"><i>When using SSL Bridging and BIG-IP version 11.4.x, pool members may be marked down or you may experience connection resets and TLS errors logged to the Mailbox servers</i></a>.</p>
<ul>
<li><p><b>Select the Server SSL profile you created from the list</b>Â If you have previously created a Server SSL profile for your Exchange implementation, select the existing Server SSL profile you created from the list.</p>
</li>
<li><p><b>Create a new Server SSL profile</b><br />
Select this option if you want the iApp to create a new Server SSL profile. The default, F5 recommended Server SSL profile uses theÂ <i>serverssl</i>Â parent profile. For information about the ciphers used in the Server SSL profile, seeÂ <a href="http://support.f5.com/kb/en-us/solutions/public/8000/800/sol8802.html" rel="noreferrer">http://support.f5.com/kb/en-us/solutions/public/8000/800/sol8802.html</a>.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Which intermediate certificate do you want to use?</b></i><br />
Choose whether or not you want to use an intermediate certificate (also called intermediate certificate chains or chain certificates) in this deployment. These certificates are used to help systems which depend on SSL certificates for peer identification. These certificates are intended to create a chain of trust between the CA that signed the certificate and the CA that is already trusted by the recipient of the certificate. This allows the recipient to verify the validity of the certificates presented, even when the signing CA is unknown. In order to use an intermediate certificate in this deployment, you must have manually imported it onto the BIG-IP system.</p>
<ul>
<li><p><b>Do not use an intermediate certificate</b><br />
Select this option if you do not want to use an intermediate certificate in this deployment, or have not yet imported the certificate onto the system but want to exit the template to import it and then restart the template.</p>
</li>
<li><p><b>Select the intermediate certificate you imported from the list</b>Â If you imported an intermediate certificate for this Exchange implementation, select the certificate you imported from the list.</p>
</li>
</ul>
</li>
<li><p><i><b>Where will your BIG-IP virtual servers be in relation to your Mailbox Servers?</b></i><br />
Select whether your BIG-IP virtual servers are on the same subnet as your Mailbox servers, or on different subnets. This setting is used to determine the SNAT (secure NAT) and routing configuration.</p>
<ul>
<li><p><b>Same subnet for BIG-IP virtual servers</b><br />
Select this option if the BIG-IP virtual servers and the Mailbox servers are on the same subnet. In this case SNAT is configured on the BIG-IP virtual server and you must specify the number of concurrent connections.</p>
<ol>
<li><p><i>What is the maximum number of concurrent users you expect per Mailbox Server?</i><br />
Select whether you expect more or fewer than 6,000 concurrent users to each Mailbox server. This answer is used to determine what type of SNAT (secure network address translation) that system uses. A SNAT is an object that maps the source client IP address in a request to a translation address defined on the BIG-IP device.Â <b>Note:</b>Â For specific information on SNAT Pools, including why we chose 6,000 concurrent users per server, seeÂ <a href="#Anchor-49"><i>Maximum number of concurrent users: SNAT Pool guidance</i></a>.<i></i></p>
<ul>
<li><p><b>Fewer than 6000</b><br />
Select this option if you expect fewer than 6,000 concurrent users per Mailbox server. With this option, the system applies SNAT Auto Map, which doesnât require any additional IP addresses, as the system uses an existing self IP address for translation.</p>
</li>
<li><p><b>More than 6000</b><br />
Select this option if you expect more than 6,000 users at one time to each server. With this option, the iApp creates a SNAT Pool (or you can choose one you created), for which you need one IP address for each 6,000 users you expect.</p>
<ol>
<li><p><i>Create a new SNAT pool or use an existing one?</i><br />
Select whether you want the system to create a new SNAT Pool, or if you have already created a SNAT pool for this implementation.</p>
<ul>
<li><p><b>Select the SNAT pool you created from the list</b><br />
If you have previously created a SNAT Pool for your Exchange implementation, select it from the list.</p>
</li>
<li><p><b>Create a new SNAT Pool</b><br />
If you have not created a custom SNAT pool, select this option for the iApp to create a new one.</p>
<ol>
<li><p><b>Which IP addresses do you want to use for the SNAT Pool?</b>Â Specify one otherwise unused IP address for every 6,000 concurrent connections, or fraction thereof. ClickÂ <b>Add</b>Â for more rows.Â <b>Important:</b> If you choose more than 6,000 users, but do not specify enough SNAT pool addresses, after the maximum connection limit of 6,000 concurrent users per server is reached, new requests fail.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><b>Different subnet for BIG-IP virtual servers and Mailbox Servers</b><br />
If the BIG-IP virtual servers and Web Interface servers are on different subnets, the following question appears asking how routing is configured.</p>
<ol>
<li><p><i>How have you configured routing on your Mailbox Servers?</i><br />
Select whether the Mailbox servers use this BIG-IP systemâs Self IP address as their default gateway.</p>
<ul>
<li><p><b>Mailbox Servers do NOT use BIG-IP as their default gateway</b><br />
Select this option if the Mailbox servers do not use the BIG-IP system as their default gateway. If the servers do not usethe BIG-IP as their default gateway, SNAT is configured on the BIG-IP virtual server and you must select the expected number of concurrent users in the next question.</p>
<ol>
<li><p><i>What is the maximum number of concurrent users you expect per Mailbox Server?</i><br />
Select whether you expect more or fewer than 6,000 concurrent users to each Mailbox server. This answer is used to determine what type of SNAT (secure network address translation) that system uses. A SNAT is an object that maps the source client IP address in a request to a translation address defined on the BIG-IP device.Â <b>Note:</b>Â For specific information on SNAT Pools, including why we chose 6,000 concurrent users per server, seeÂ <a href="#Anchor-49"><i>Maximum number of concurrent users: SNAT Pool guidance</i></a>.<i></i></p>
<ul>
<li><p><b>Fewer than 6000</b><br />
Select this option if you expect fewer than 6,000 concurrent users per Mailbox server. With this option, the system applies SNAT Auto Map, which doesnât require any additional IP addresses, as the system uses an existing self IP address for translation.</p>
</li>
<li><p><b>More than 6000</b><br />
Select this option if you expect more than 6,000 users at one time to each server. With this option, the iApp creates a SNAT Pool (or you can choose one you created), for which you need one IP address for each 6,000 users you expect.</p>
<ol>
<li><p><i>Create a new SNAT pool or use an existing one?</i><br />
Select whether you want the system to create a new SNAT Pool, or if you have already created a SNAT pool for this implementation.</p>
<ul>
<li><p><b>Select the SNAT pool you created from the list</b><br />
If you have previously created a SNAT Pool for your Exchange implementation, select it from the list.</p>
</li>
<li><p><b>Create a new SNAT Pool</b><br />
If you have not created a custom SNAT pool, select this option for the iApp to create a new one.</p>
<ol>
<li><p><b>Which IP addresses do you want to use for the SNAT Pool?</b>Â Specify one otherwise unused IP address for every 6,000 concurrent connections, or fraction thereof. ClickÂ <b>Add</b>Â for more rows.Â <b>Important: :</b> If you choose more than 6,000 users, but do not specify enough SNAT pool addresses, after the maximum connection limit of 6,000 concurrent users per server is reached, new requests fail.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><b>Mailbox Servers use the BIG-IP as their default gateway</b><br />
Select this option if the Mailbox servers use the BIG-IP system as their default gateway. In this scenario, no additional configuration is necessary to ensure correct server response handling.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<h2><a name="Anchor-151" id="Anchor-151"></a>Tell us about which services you are deploying</h2>
<p>In this section, the iApp gathers information about which client access services you are deploying. Some questions only appear depending on your answers to previous questions. These contingencies are noted at the beginning of the question description.</p>
<ol>
<li><p><i><b>Do you want to customize the server pool settings?</b></i><br />
Select whether you want to customize the BIG-IP load balancing pools for Mailbox services, or use the F5 recommended settings.</p>
<ul>
<li><p><b>Use settings recommended by F5</b><br />
If you don't have a specific reason to customize the pool settings, leave this question set to this setting and continue with #2.</p>
</li>
<li><p><b>Customize pool settings</b><br />
If you need to modify individual pool options, select Customize pool settings and answer the following options that appear:</p>
<ol>
<li><p><i>Which load balancing method do you want to use?</i>Â <br />
Select the load balancing method you want to use. We recommend the default,Â <b>Least Connections (member).</b> See the BIG-IP documentation for a description of each method. If you chose a node-based load balancing method, such as Ratio (Node), and use a Ratio or Connection Limit (both optional), you must seeÂ <a href="#Anchor-83"><i>Adding Ratio or Connection Limit information to the nodes if using a node-based load balancing method</i></a><i>Â </i>after completing the template.</p>
</li>
<li><p><i>Do you want to give priority to specific groups of servers?</i><br />
Select whether you want to enable Priority Group Activation to send traffic first to groups of servers you specify. The BIG-IP system load balances traffic according to the priority number you assign to each server.</p>
<ul>
<li><p><b>Do not use Priority Group Activation</b><br />
Select this option if you do not want to enable Priority Group Activation.</p>
</li>
<li><p><b>Use Priority Group Activation</b><br />
Select this option if you want to enable Priority Group Activation. You will need to add a priority number in the Priority box to each server . A higher number indicates higher priority. Traffic is only sent to the servers with the highest priority, unless the number of available servers in that priority group falls below the value you specify as the minimum in the following question. The BIG-IP system then sends traffic to the group of servers with the next highest priority, and so on. See the BIG-IP documentation for more details.</p>
<ol>
<li><p><i>What is the minimum number of active members in a group?</i><br />
Specify the minimum number of servers that must be active to continue sending traffic to the priority group. If the number of active servers falls below this minimum, traffic will be sent to the group of servers with the next highest priority group number.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>Do you want the BIG-IP system to queue TCP requests?</i><br />
Select whether you want the BIG-IP system to queue TCP requests. TCP request queuing provides the ability to queue connection requests that exceed the capacity of connections for a pool, as determined by the connection limit. Consequently, instead of dropping connection requests that exceed the capacity of a pool, TCP request queuing enables those connection requests to reside within a queue according to defined conditions until capacity becomes available. For more information on TCP Request Queuing, see theÂ <i>Preventing TCP Connection Requests From Being Dropped</i>Â chapter in theÂ <i><b>BIG-IP Local Traffic Manager: Implementations</b></i><br />
<i></i>guide, available on AskF5.Â <b>Important: :</b> TCP Request Queuing is an advanced feature and should be used only if you understand how it will affect your deployment, including application behavior and BIG-IP performance. If you enable TCP Request Queuing, you must have a Connection Limit set on at least one of the nodes when configuring the Address/Port for the Mailbox Server nodes.</p>
<ul>
<li><p><b>Do not queue TCP requests</b><br />
Select this option if you do not want the BIG-IP system to queue TCP requests.</p>
</li>
<li><p><b>Queue TCP requests</b><br />
Select this option if you want to enable TCP request queuing on the BIG-IP system.</p>
<ol>
<li><p><i>What is the maximum number of TCP requests for the queue?</i><br />
Type the maximum number of requests you want to queue. We doÂ <i>not</i><br />
recommend using 0, which means unlimited and is only constrained by available memory.</p>
</li>
<li><p><i>How many milliseconds should requests remain in the queue?</i><br />
Type a number of milliseconds for the TCP request timeout value.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>What IP address do you want to use for your virtual servers?</b></i><br />
Specify a valid IP address to use for the BIG-IP virtual server. This virtual server address is used for all client access services. The BIG-IP system intelligently directs traffic to the appropriate service using an iRule created by the template.</p>
</li>
<li><p><i><b>Do you want to add any iRules to this combined virtual server?</b></i><br />
If you chose to customize pool settings, you have the option of adding existing iRules to the virtual server. iRules allow an administrator to instruct the system to intercept, inspect, transform, direct and track inbound or outbound application traffic. For more information on iRules, seeÂ <a href="https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx" rel="noreferrer">https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx</a>.Â <b>Important: :</b> Improper use or misconfiguration of an iRule can result in unwanted application behavior and poor performance of your BIG-IP system. We recommended you verify the impact of an iRule prior to deployment in a production environment. If you want to add iRules, from theÂ <b>Options</b>Â box, select the iRule(s) you want to include, and then click the Add (&lt;&lt;) button.</p>
</li>
<li><p><i><b>Are you deploying Outlook Web App (includes ECP)?</b></i><br />
Select whether you are deploying Outlook Web App at this time. This includes the Exchange Control Panel (ECP).</p>
<ul>
<li><p><b>No</b><br />
Select this option if you are not deploying OWA at this time. You can always reconfigure the template later to add OWA.</p>
</li>
<li><p><b>Yes</b><br />
Select this option if you are deploying OWA at this time.</p>
<ol>
<li><p><i>What are the IP addresses of your OWA servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><br />
Specify the IP addresses of your Outlook Web App servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Are you deploying Microsoft Outlook, including EWS and OAB?</b></i><br />
Select whether you are deploying Microsoft Outlook (including EWS and OAB) as a part of your Exchange 2016 deployment. If you are, you must answer the following question about the protocol Outlook uses to connect to Exchange.</p>
<ul>
<li><p><b>No, not deploying Microsoft Outlook or EWS</b><br />
Select this option if you are not deploying Microsoft Outlook or EWS at this time. You can always reconfigure the template at another time to add Outlook or EWS to the configuration.</p>
</li>
<li><p><b>Yes, deploying EWS onlyÂ </b><br />
Select this option if you are only deploying Exchange Web Services at this time, and not Outlook Anywhere or Offline Address Book. In this case, the BIG-IP system sends any Offline Address Book traffic to the Exchange Web Services pool.</p>
<ol>
<li><p><i>What are the IP addresses of your EWS servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><br />
Specify the IP addresses of your Exchange Web Services servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority. Continue with #6 Are you deploying ActiveSync?</p>
</li>
</ol>
</li>
<li><p><b>Yes, deploying Microsoft Outlook with EWS and OAB</b><br />
Select this option if you are deploying Outlook Anywhere, EWS, and OAB at this time.</p>
<ol>
<li><p><i>Which protocol(s) will Microsoft Outlook use to connect to Exchange?</i><br />
Choose which protocols your Microsoft Outlook users are using to connect to the Exchange servers.</p>
<ul>
<li><p><b>Outlook clients will use MAPI-over-HTTP</b><br />
Select this option if your Outlook clients will use MAPI-over-HTTP only to connect to Exchange.</p>
<ol>
<li><p><i>What are the IP addresses of your MAPI servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><br />
Specify the IP addresses of your MAPI servers. ClickÂ AddÂ to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
<li><p><b>Outlook clients will use RPC-over-HTTP</b><br />
Select this option if your Outlook clients will use RPC over HTTP, and will not use MAPI over HTTP.</p>
<ol>
<li><p><i>What are the IP addresses of your Outlook Anywhere servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your Outlook Anywhere servers. ClickÂ AddÂ to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
<li><p><b>Outlook clients will use both MAPI-over-HTTP and RPC-over-HTTP</b><br />
Select this option if your Outlook clients will use both the RPC-over-HTTP and MAPI-over-HTTP protocols.</p>
<ol>
<li><p><i>What are the IP addresses of your MAPI servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your MAPI servers. ClickÂ AddÂ to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
<li><p><i>What are the IP addresses of your Outlook Anywhere servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your Outlook Anywhere servers. ClickÂ AddÂ to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>What are the IP addresses of your EWS servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your EWS servers. ClickÂ AddÂ to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Are you deploying ActiveSync?</b></i><br />
Select whether you are deploying ActiveSync at this time.</p>
<ul>
<li><p><b>No</b><br />
Select this option if you are not deploying ActiveSync at this time. You can always reconfigure the template at another time to add ActiveSync to the configuration.</p>
</li>
<li><p><b>Yes</b><br />
Select this option if you are deploying ActiveSync at this time. SeeÂ <a href="#Anchor-110"><i>iPhones and other iOS devices are displaying invalid certificate messages after deploying the iApp for ActiveSync</i></a><i>Â </i>for important information.</p>
<ol>
<li><p><i>What are the IP addresses of your ActiveSync servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your Outlook Anywhere servers. ClickÂ AddÂ to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Are you deploying Autodiscover?</b></i><br />
Select whether you are deploying Autodiscover at this time.</p>
<ul>
<li><p><b>No</b><br />
Select this option if you are not deploying Autodiscover at this time. You can always reconfigure the template at another time to add Autodiscover to the configuration.</p>
</li>
<li><p><b>Yes</b><br />
Select this option if you are deploying Autodiscover at this time.Â <b>Warning</b>Â To deploy Autodiscover, you must either create an 'SRV' record in DNS or create 'A' records in order for external clients to be able to make use of Autodiscover. If you do not want to use an 'SRV' record, then you must have 'A' records for either 'autodiscover.' or '' that resolve to the IP address you have designated for your Autodiscover virtual server.</p>
<ol>
<li><p><i>What are the IP addresses of your Autodiscover servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your Autodiscover servers. ClickÂ <b>Add</b>Â to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Are you deploying POP3?</b></i><br />
Select whether you are deploying POP3 at this time.</p>
<ul>
<li><p><b>No</b><br />
Select this option if you are not deploying POP3 at this time. You can always reconfigure the template at another time to add POP3 to the configuration.</p>
</li>
<li><p><b>Yes</b><br />
Select this option if you are deploying POP3 at this time.Â <b>Important:</b> You must enable POP3 on each of your Exchange Mailbox Servers before that service will be available. POP3 is not enabled by default on Exchange Mailbox Servers. If you are offloading SSL, you must configure the Authentication properties for POP3 on each of your Exchange Mailbox Servers to allow logins using plain text. By default, POP3 is configured to only allow secure (encrypted) logins.</p>
<ol>
<li><p><i>What are the IP addresses of your POP3 servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your POP3 servers. ClickÂ <b>Add</b> to include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Are you deploying IMAP4?</b></i><br />
Select whether you are deploying IMAP4 at this time.</p>
<ul>
<li><p><b>No</b><br />
Select this option if you are not deploying IMAP4 at this time. You can always reconfigure the template at another time to add IMAP4 to the configuration.</p>
</li>
<li><p><b>Yes</b><br />
Select this option if you are deploying IMAP4 at this time.Â <b>Important:</b> You must enable IMAP4 on each of your Exchange Mailbox Servers before that service will be available. IMAP4 is not enabled by default on Exchange Mailbox Servers. If you are offloading SSL, you must configure the Authentication properties for IMAP4 on each of your Exchange Mailbox Servers to allow logins using plain text. By default, IMAP4 is configured to only allow secure (encrypted) logins.</p>
<ol>
<li><p><i>What are the IP addresses of your IMAP4 servers?</i><br />
<i>This question only appears if you selectedÂ </i><b>Each service will be handled by a unique set of Mailbox Servers</b><i>Â in the previous section.</i><br />
Specify the IP addresses of your IMAP4 servers. ClickÂ Addto include additional servers. If you chose to have the BIG-IP system queue TCP requests, you must specify a Connection Limit. If you chose to enable Priority Group Activation, you must specify a Priority.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<h2><a name="Anchor-154" id="Anchor-154"></a>Server Health Monitors</h2>
<p>The last section of the template asks for information about the health checks the iApp will configure for the Mailbox Servers.</p>
<ol>
<li><p><i><b>Do you want to create external monitors for client access services?</b></i><br />
Choose whether you want to use external or standard health monitors to check the availability of the client access services on your Mailbox Servers. External monitors require a mailbox account and password and perform logins to POP3, IMAP4 services (if you are using them).</p>
<ul>
<li><p><b>No, do not create external monitors (use standard monitors)</b><br />
Select this option if you want to use standard monitors for checking the availability of the client access services. Standard monitors check network connectivity but do not perform actual logins.</p>
</li>
<li><p><b>Yes, create external monitors</b>Â If you choose external monitors, uses a script to look for the Windows service status of five critical client access services. If you are deploying the iApp for POP3 and/or IMAP4 services, the monitors attempt to login to the service and checks for valid content in the response. Because these monitors attempt to access a specific mailbox, account maintenance and Mailbox status must become a part of your monitoring strategy. For example, if an account used for monitoring is locked or deleted, the monitor will mark the services down for all users. We strongly recommend creating a mailbox account(s) specifically for use in the monitor(s). The accounts for those mailboxes should have no other privileges in the domain and should be configured with passwords that do not expire.</p>
<ol>
<li><p><i>What is the SNMP community string for your Client Access servers?</i><br />
Type the SNMP community string for your Client Access servers. Because Microsoft only supports SNMP v2 in their default SNMP service, you must use an SNMP v2 community string. If you require SNMP v3 support, and have configured that using a custom solution on your Exchange servers then you can manually modify the external monitor script created by the iApp. SeeÂ <a href="#Anchor-146"><i>Modifying the external monitor script file to support SNMP v3</i></a>.</p>
</li>
<li><p><i>Which mailbox account should be used for the monitors?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type a mailbox account for use in the external monitors. This name corresponds to the account name field in Active Directory (rather than the email address).</p>
</li>
<li><p><i>What is the password for that mailbox account?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type the associated password.</p>
</li>
<li><p><i>What is the domain name of the user account for the monitors?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type the Domain name for the user account. This domain can be entered in either FQDN (mydomain.example.com) or NetBIOS (MYDOMAIN) format.</p>
</li>
<li><p><i>Do you want to monitor a second mailbox?</i><br />
Choose whether you want to monitor a second mailbox. We strongly recommend configuring a second mailbox account to be used by a second set of monitors, using a mailbox that is configured to reside on a different Mailbox server. The BIG-IP LTM will only mark a client access service on a specific server down if both sets of credentials fail. This provides resiliency to accommodate configuration errors with a single account, mailbox, or Mailbox server.</p>
<ul>
<li><p><b>Monitor only one mailbox</b><br />
Select this option if you do not want the BIG-IP system to monitor a second mailbox. Continue with #3.</p>
</li>
<li><p><b>Monitor a second mailbox (recommended)</b><br />
Select this option if you want the BIG-IP system to monitor a second mailbox. You must answer the following:</p>
<ol>
<li><p><i>Which email address do you want to use for the second set of advanced monitors?</i><br />
<i>This question only appears if you specified you are deploying Autodiscover and/or Exchange Web Services</i><br />
Type the email address associated with the account you are going to monitor (and that you specify below).</p>
</li>
<li><p><i>Which mailbox account should be used for the second set of monitors?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type a mailbox account for use in the second monitors. Again, this name corresponds to the account name field in Active Directory (rather than the email address).</p>
</li>
<li><p><i>What is the password for that mailbox account?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type the associated password.</p>
</li>
<li><p><i>What is the domain name of the user account for the second set of monitors?</i><br />
<i>This question only appears if you are deploying the iApp for POP3 and/or IMAP4</i><br />
Type the Domain name for the second user account. This domain can be entered in either FQDN (mydomain.example.com) or NetBIOS (MYDOMAIN) format.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Which authentication method have you configured for OWA?</b></i><br />
<i>This question only appears if you specified you are deploying Outlook Web App.</i><br />
If you configured the iApp to deploy Outlook Web App at this time, choose the authentication method you have configured for Outlook Web App. The health monitors will be customized to accommodate the authentication method you are using.Â <b>Important:</b> If you are using APM in this scenario, you must choose Forms-Based. If you are using Forms-Based authentication for OWA, you must change the credential format required for OWA on each Exchange Mailbox Server from the default domain\username format to just username. If you are using NTLMv2, even if you select advanced health monitors in the iApp template, the EAV health checks (the checks that call an external script) will only be simple monitors.</p>
<ul>
<li><p><b>OWA uses the default Forms-Based authentication</b><br />
Select this option if you are using Forms-based authentication. If you chose Forms-based authentication, the BIG-IP system does not perform an actual login to the service, but checks the availability of the forms-based authentication page.</p>
</li>
<li><p><b>OWA uses Basic or Windows Integrated authentication</b><br />
Select this option if you are using Basic/Windows Integrated authentication.</p>
</li>
</ul>
</li>
<li><p><i><b>How many seconds should pass between health checks?</b></i><br />
This question does not appear if you chose not to create external monitors Specifies how often the system checks the health of the servers. We recommend the default of 30 seconds. The maximum value for the interval is 28,799 seconds.</p>
</li>
<li><p><i><b>Are you using the same FQDN for all HTTP-based services?</b></i><br />
<i>This question only appears if you specified you are using aÂ single IP addressÂ for all connections. If you selected Different IP addresses for different services, continue with #5.</i><br />
Select whether you are using one FQDN for all HTTP-based services or separate FQDNs for each service. These values are used for HTTP 1.1-based health monitors.</p>
<ul>
<li><p><b>One FQDN for all HTTP services</b><br />
Select this option if you are using a single FQDN for all HTTP-based client access services.</p>
<ol>
<li><p><i>What is the FQDN that you use for your HTTP-based client access services?</i><br />
Specify the fully qualified domain name you are using for all of the HTTP-based client access services.</p>
<ul>
<li><p><b>Different FQDNs for each HTTP service</b><br />
Select this option if you are using separate FQDNs for each HTTP-based client access service. Additional questions appear. When you are finished adding the FQDNs, continue withÂ <i>Additional Steps</i>.</p>
<ol>
<li><p><i>What FQDN do you use for the OWA service?</i><br />
<i>This question only appears if you specified you are deploying Outlook Web App.</i><br />
Specify the fully qualified domain name you use for your Outlook Web App service.</p>
</li>
<li><p><i>What FQDN do you use for the Outlook Anywhere service?</i><br />
<i>This question only appears if you specified you are deploying Outlook Anywhere.</i><br />
Specify the fully qualified domain name you use for your Outlook Anywhere service.</p>
</li>
<li><p><i>What FQDN do you use for the ActiveSync service?</i><br />
<i>This question only appears if you specified you are deploying ActiveSync.</i><br />
Specify the fully qualified domain name you use for your ActiveSync service.</p>
</li>
<li><p><i>What FQDN do you use for the Autodiscover service?</i><br />
<i>This question only appears if you specified you are deploying Autodiscover.</i>Â Specify the fully qualified domain name you use for your Autodiscover service.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>What is the FQDN for your OWA service?</b></i><br />
<i>This question only appears if you specified you are using different IP addresses for different services and you are deploying OWA</i><br />
Specify the fully qualified domain name you use for your Outlook Web App service.</p>
</li>
<li><p><i><b>What is the FQDN for your MAPI service?</b></i><br />
<i>This question only appears if you specified you are using different IP addresses for different services and you are deploying MAPI-over HTTP</i>Â Specify the fully qualified domain name you use for your MAPI service.</p>
</li>
<li><p><i><b>What is the FQDN for your Outlook Anywhere service?</b></i><br />
<i>This question only appears if you specified you are using different IP addresses for different services and you are deploying Outlook Anywhere</i>Â Specify the fully qualified domain name you use for your Outlook Anywhere service.</p>
</li>
<li><p><i><b>What is the FQDN for your ActiveSync service?</b></i><br />
<i>This question only appears if you specified you are usingÂ different IP addressesÂ for different services and are deploying ActiveSync</i><br />
Specify the fully qualified domain name you use for your ActiveSync service.</p>
</li>
<li><p><i><b>What is the FQDN for your Autodiscover service?</b></i><br />
<i>This question only appears if you specified you are usingÂ different IP addressesÂ for different services and you are deploying Autodiscover</i><br />
Specify the fully qualified domain name you use for your Autodiscover service.</p>
</li>
</ol>
<h2>Additional Steps</h2>
<p>Review the information in the Additional steps section, and take appropriate action if necessary. All of the notes in Additional Steps are found in the relevant section of this deployment guide.</p>
<h2><a name="Anchor-116-1" id="Anchor-116-1"></a>Finished</h2>
<p>Review your answers to the questions. When you are satisfied, click theÂ <b>Finished</b>Â button. The BIG-IP system creates the relevant objects. Continue withÂ <a href="#Anchor-35"><i>Next steps</i></a><i>.</i></p>
<h2><a name="Anchor-30" id="Anchor-30"></a>Configuring a local APM to secure and forward traffic to a remote LTM</h2>
<p>If you choseÂ <i>Local APM secures and forwards traffic to a remote LTM</i>, use this section for guidance on configuring the iApp. In this scenario, the BIG-IP will be configured as a BIG-IP APM that will use a single virtual server to provide proxy authentication and secure remote access to all Exchange HTTP-based Mailbox services (Outlook Web App (including ECP), Outlook Anywhere (including EWS and OAB), ActiveSync, and Autodiscover) without requiring the use of the F5 Edge Client. The traffic will be forwarded to separate BIG-IP running LTM which will provide advanced load balancing, monitoring and optimizati<i>ons for those services.</i></p>
<p>As mentioned in the prerequisites, because you are deploying BIG-IP APM, you must have configured the BIG-IP system for DNS and NTP. SeeÂ <a href="#Anchor-74"><i>Configuring DNS and NTP settings</i></a>Â for instructions.</p>
<h2>Analytics</h2>
<p>This section of the template asks questions about Analytics. The Application Visibility Reporting (AVR) module allows you to view statistics specific to your Microsoft Exchange implementation. AVR is available on all BIG-IP systems v11 and later, however you must have the AVR provisioned for this option to appear. Note that this is only for application visibility reporting, you can view object-level statistics from the BIG-IP without provisioning AVR.</p>
<p><b>Important</b>: Enabling Analytics may adversely affect overall system performance. If you choose to enable Analytics, we recommend gathering statistics for a set time period, such as one week, and then re-entering this template and disabling Analytics while you process the data.</p>
<p>If you plan on using AVR for analytics, we recommend creating a custom Analytics profile. To create a new profile, from the Main tab, selectÂ <b>Profiles</b>Â and then clickÂ <b>Analytics</b>. ClickÂ <b>New</b>Â and then configure the profile as applicable for your configuration. See the online help or product documentation for specific instructions. To select the new profile, you must restart or reconfigure the iApp template.</p>
<ol>
<li><p><i><b>Do you want to enable Analytics for application statistics?</b></i><br />
Choose whether you want to enable AVR for Analytics.</p>
<ul>
<li><p><b>No, do not enable Analytics</b>Â If you do not want to enable Analytics, leave this list set toÂ <b>No,</b> and continue with the next section.</p>
</li>
<li><p><b>Yes, enable Analytics using AVR</b>Â If you choose to enable Analytics, selectÂ <b>Yes</b>Â from the list, and then answer the following questions.</p>
<ol>
<li><p><i>Use the default Analytics profile or select a custom profile?</i>If you decide to use AVR, you must decide whether to use the default Analytics profile, or create a new one. As mentioned previously, we recommend creating a new profile to get the most flexibility and functionality out of AVR. If you have already started the iApp template configuration and then decide to create a new Analytics profile, you must exit the iApp, create the profile, and then restart the iApp template.</p>
<ul>
<li><p><b>Select a custom Analytics profile</b><br />
Select this option if you have already created a custom Analytics profile for Exchange Server.</p>
<ol>
<li><p><i>Which Analytics profile do you want to use?</i>From the list, select the appropriate Analytics profile.</p>
</li>
</ol>
</li>
<li><p><b>Use default profile</b><br />
Select this option if you have not yet created a custom Analytics profile for Microsoft Exchange. We do not recommend using the default profile.</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<h2>BIG-IP Access Policy Manager</h2>
<p>The first section of the iApp in this scenario asks about the BIG-IP Access Policy Manager. You must have APM fully licensed and provisioned to use APM. For more information on BIG-IP APM, seeÂ <a href="https://www.f5.com/content/f5-com/language-masters/en_us/products/security/access-policy-manager">http://f5.com/products/big-ip/access-policy-manager.html</a>.</p>
<ol>
<li><p><i><b>Would you like to create a new Access Profile, or use an existing Access Profile?</b></i><br />
Choose whether you want the system to create a new BIG-IP APM Access Profile, or if you have already created a custom Access Profile outside the template. If you are unsure, selectÂ <b>Create a new Access Profile.</b></p>
<ul>
<li><p><b>Select the Access profile you created from the list</b>Â If you have previously created an Access profile for your Exchange implementation, select the existing profile you created from the list. Continue with the next section.</p>
</li>
<li><p><b>Create a new Access profile</b><br />
Select this option if you have not created a custom Access profile, and want the system to create one.</p>
<ol>
<li><p><i>Would you like to create a new AAA server, or use an existing AAA server?</i>Â Choose whether you want the system to create a new BIG-IP APM AAA Server object, or if you have already created a custom AAA Server outside the template. The AAA server contains information about your Active Directory implementation. If you are unsure, selectÂ <b>Create a new AAA Server.</b></p>
<ul>
<li><p><b>Select the AAA Server you created from the list</b>Â If you have previously created an AAA Server for your Exchange implementation, select the existing object you created from the list. Because additional information about the AAA Server is used elsewhere in this template, only AAA Servers configured to use a pool of Domain Controllers appear in the list.</p>
<ol>
<li><p><i>What is the FQDN of your Active Directory domain for your Exchange users?</i>Â Specify the FQDN of the Active Directory deployment for your Exchange users. This is the FQDN for your entire domain, such as example.com, rather than the FQDN for any specific host. Continue with b on the following page.</p>
</li>
</ol>
</li>
<li><p><b>Create a new AAA Server</b><br />
Select this option if you have not created a custom AAA Server, and want the system to create one.</p>
<ol>
<li><p><i>What is the FQDN of your Active Directory domain for your Exchange users?</i>Â Specify the FQDN of the Active Directory deployment for your Exchange users. This is the FQDN for your entire domain, such as example.com, rather than the FQDN for any specific host.</p>
</li>
<li><p><i>Which Active Directory servers in your domain can this BIG-IP system contact?</i>Â Specify both the FQDN and IP address of each Active Directory server you want the BIG-IP APM to use for servicing authentication requests. ClickÂ AddÂ to include additional servers.</p>
</li>
<li><p><i>Does your Active Directory domain allow anonymous binding?</i>Â Select whether anonymous binding is allowed in your Active Directory environment.</p>
<ul>
<li><p><b>Yes, anonymous binding is allowed</b><br />
Select this option if anonymous binding is allowed. No further information is required.</p>
</li>
<li><p><b>No, credentials are required for binding</b><br />
Select this option if credentials are required for binding. You must answer the following questions.</p>
<ol>
<li><p><i>Which Active Directory user with administrative permissions do you want to use?</i>Â Type a user name with administrative permissions.</p>
</li>
<li><p><i>What is the password associated with that account?</i>Â Type the associated password.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>How do you want to handle health monitoring for this pool?</i>Â Specify whether you want the template to create a new LDAP monitor or a new ICMP monitor, or if you select an existing monitor. For more accurate monitoring, we recommend using an LDAP monitor.</p>
<ul>
<li><p><b>Select an existing monitor for the Active Directory pool</b><br />
Select this option if you have already created a health monitor (only monitors with a Type of LDAP or External can be used) for the Active Directory pool that will be created by the template. If you want to create a health monitor, but have not already done so, you must exit the template and create the object before it becomes available from the list. The iApp allows you to select monitors that are a part of another iApp Application Service. If you select a monitor that is a part of another Application Service, be aware that any changes you make to the monitor in the other Application Service will apply to this Application Service as well.</p>
<ol>
<li><p><i>Which monitor do you want to use?</i>From the list, select the LDAP or External monitor you created to perform health checks for the Active Directory pool created by the template. Only monitors that have a Type value of LDAP or External appear in this list. Continue with the next question.</p>
</li>
</ol>
</li>
<li><p><b>Use a simple ICMP monitor for the Active Directory pool</b><br />
Select this option if you only want a simple ICMP monitor for the Active Directory pool. This monitor sends a ping to the servers and marks the server UP if the ping is successful. Continue with b.</p>
</li>
<li><p><b>Create a new LDAP monitor for the Active Directory pool</b><br />
Select this option if you want the template to create a new LDAP monitor for the Active Directory pool. You must answer the following questions:</p>
<ol>
<li><p><i>Which Active Directory user name should the monitor use?</i>Â Specify an Active Directory user name for the monitor to use when attempting to log on as a part of the health check. This should be a user account created specifically for this health monitor, andÂ <i>must</i>Â be set to never expire.</p>
</li>
<li><p><i>What is the associated password?</i>Specify the password associated with the Active Directory user name.</p>
</li>
<li><p><i>What is the LDAP tree for this user account?</i>Â Specify the LDAP tree for the user account. As noted in the inline help, ADSI editor, an tool for Active Directory LDAP administration, is useful for determining the correct LDAP tree value. For example, if the user name is âuser1â which is in the organizational unit âExchange Usersâ and is in the domain âexchange.example.comâ, the LDAP tree would be: ou=Exchange Users, dc=Exchange, dc=example, dc=com.</p>
</li>
<li><p><i>Does your Active Directory domain require a secure protocol for communication?</i>Â Specify whether your Active Directory implementation requires SSL or TLS for communication, or does not require a secure protocol. This determines the port the health monitor uses.</p>
<ul>
<li><p><b>No, a secure protocol is not required</b><br />
Select this option if your Active Directory domain does not require a secure protocol.</p>
</li>
<li><p><b>Yes, SSL communication is required</b><br />
Select this option if your Active Directory domain requires SSL communication. The health check uses port 636 as the Alias Service Port.</p>
</li>
<li><p><b>Yes, TLS communication is required</b><br />
Select this option if your Active Directory domain requires TLS communication. The health check uses port 389 as the Alias Service Port.</p>
</li>
</ul>
</li>
<li><p><i>How many seconds between Active Directory health checks?</i>Â Specify how many seconds the system should use as the health check Interval for the Active Directory servers. We recommend the default of 10 seconds.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>What text should appear in the user access logon prompt?</i>Type the text you want users to see above the user name and password prompts when logging on to the BIG-IP APM. By default, this includes the HTML tag to insert a line break between 'Secure Logon' and 'for F5 Networks'.Â <b>Warning</b>Â If the text you want to appear includes the characters &amp;, &quot;, or ', you must use proper encoding:Â <b>&amp;</b>Â for &amp;,Â <b>&quot;e;</b>Â for &quot;, andÂ 'Â for '.</p>
</li>
<li><p><i>Which APM logging profile do you want to use?</i><br />
<i>This question only appears if you are using BIG-IP version 12.0 or later</i>Â BIG-IP version 12.0 allows you to attach a logging profile to your BIG-IP APM configuration. If you created an APM logging profile for this configuration, you can select it from the list. The default profile is namedÂ <b>default-log-setting.</b> For more information on APM logging, see the APM documentation for v12.0 and later.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
<h2>Application Firewall Manager (BIG-IP AFM)</h2>
<p><i>This entire section only appears if you have licensed and provisioned BIG-IP AFM</i></p>
<p>This section gathers information about BIG-IP Advanced Firewall Manager, if you want to use it to protect the Exchange deployment. For more information on BIG-IP AFM, seeÂ <a href="http://support.f5.com/kb/en-us/products/big-ip-afm.html" rel="noreferrer">http://support.f5.com/kb/en-us/products/big-ip-afm.html</a>, and then select your version.</p>
<ol>
<li><p><i><b>Do you want to use AFM network firewall and IP Intelligence to protect your application?</b></i><br />
Choose whether you want to use BIG-IP AFM, F5's network firewall with IP intelligence, to secure this Exchange deployment. If you choose to use BIG-IP AFM, you can restrict access to the Exchange virtual server(s) to a specific network or IP address. See the BIG-IP AFM documentation for specific details on configuring AFM.</p>
<ul>
<li><p><b>No, do not use network firewall and IP Intelligence</b><br />
Select this option if you do not want to enable BIG-IP AFM at this time. You can always re-enter the template at a later date to enable BIG-IP AFM. Continue with the next section.</p>
</li>
<li><p><b>Select an existing AFM policy from the list</b><br />
If you already created a BIG-IP AFM policy for this implementation, select it from the list. Continue withÂ <i>c</i>.</p>
</li>
<li><p><b>Yes, use network firewall and IP Intelligence</b><br />
Select this option if you want to enable BIG-IP AFM using F5's recommended configuration.</p>
<ol>
<li><p><i>Do you want to forbid access to your application from specific networks or IP addresses?</i>Â Choose whether you want to restrict access to the Exchange implementation via the BIG-IP virtual server.</p>
<ul>
<li><p><b>No, do not forbid client addresses (allow all)</b><br />
By default, the iApp configures the AFM to accept traffic destined for the Exchange virtual server(s) from all sources. If you do not have a need to restrict access to the virtual server, leave this option selected and then continue withÂ <i>b</i>.<br />
</p>
</li>
<li><p><b>Yes, forbid specific client addresses</b><br />
Select this option if you want to restrict access to the Exchange virtual server(s) by IP address or network address.</p>
<ol>
<li><p><i>What IP or network addresses should be allowed to access your application?</i>Â Specify the IP address or network access that should be allowed access to the Exchange virtual server(s). You can specify a single IP address, a list of IP addresses separated by spaces (not commas or other punctuation), a range of IP addresses separated by a dash (for example 192.0.2.10-192.0.2.100), or a single network address, such as 192.0.2.200/24.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><i>How should the system control connections from networks suspected of malicious activity?</i><br />
The BIG-IP AFM uses an IP intelligence database to categorize IP addresses coming into the system. Choose what you want the system to do for sources that are attempting to access the Exchange virtual server(s) with a low reputation score. For more information, see the BIG-IP AFM documentation.Â <b>Important:</b>Â You must have an active IP Intelligence license for this feature to function. SeeÂ <a href="https://f5.com/products/modules/ip-intelligence-services%20for%20information" rel="noreferrer">https://f5.com/products/modules/ip-intelligence-services for information</a>.</p>
<ul>
<li><p><b>Accept all connections and log nothing</b><br />
Select this option to allow all sources, without taking into consideration the reputation score or logging anything.</p>
</li>
<li><p><b>Reject connections from IP addresses with poor reputations</b><br />
Select this option to reject access to the Exchange virtual server(s) from any source with a low reputation score.</p>
</li>
<li><p><b>Accept all connections but log those from suspicious networks</b><br />
Select this option to allow access to the Exchange virtual server(s) from sources with a low reputation score, but add an entry for it in the logs. By default, IP Intelligence events are logged toÂ <b>Security &gt; Event Logs &gt; Network &gt; IP Intelligence.</b> We recommend creating a remote logging profile for IP Intelligence events.</p>
</li>
</ul>
</li>
<li><p><i>Would you like to stage a policy for testing purposes?</i><br />
Choose whether you want to stage a firewall policy for testing purposes. A staged policy allows you to evaluate the effect a policy has on traffic by analyzing the system logs, without actually modifying traffic based on the firewall rules. You must already have a policy on the system in order to select it.</p>
<ul>
<li><p><b>Do not apply a staging policy</b><br />
Select this option if you do not want to apply a logging profile at this time. You can always re-enter the template at a later date to add a logging profile. Continue with the next question.</p>
</li>
<li><p><b>Select an existing policy from the list</b><br />
If you have already created a firewall policy for this implementation, select it from the list. Only policies that already exist on the system appear in the list. To create a new policy, on the Main tab, clickÂ <b>Security &gt; Network Firewall &gt; Policies.</b> Specific instructions for creating a firewall policy is outside the scope of this iApp and deployment guide.</p>
</li>
</ul>
</li>
<li><p><i>Which logging profile would you like to use?</i>Â Choose whether you or not you want to use a logging profile for this AFM implementation. You can configure the BIG-IP system to log detailed information about BIG-IP system Network Firewall events and store those logs on the BIG-IP system or a remote logging server (supports servers like syslog and Splunk). If you want to use a logging profile, we recommend creating one outside this template. The list only contains profiles with Network Firewall enabled.</p>
<ul>
<li><p><b>Do not use a logging profile</b><br />
Select this option if you do not want to use a logging profile at this time. You can always re-enter the template at a later date to add a logging profile. Continue with the next question.</p>
</li>
<li><p><b>Select an existing logging profile from the list</b><br />
If you have already created a logging profile for this implementation, select it from the list. You must create a profile before it is available in the list. To create a logging profile, on the Main tab, clickÂ <b>Security &gt; Event Logs &gt; Logging Profiles.</b> Specific instructions for creating a logging profile is outside the scope of this iApp and deployment guide. See the online help or theÂ <i>About Local Logging with the Network Firewall</i>Â chapter of theÂ <i><b>BIG-IP Network Firewall: Policies and Implementations</b></i>Â guide for more information.</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2><a name="Anchor-152" id="Anchor-152"></a>Tell us about your Access Policy Manager deployment</h2>
<p>This section of the iApp asks about your BIG-IP Access Policy Manager deployment.</p>
<ol>
<li><p><i><b>What IP address do you want to use for the BIG-IP APM virtual server?</b></i><br />
Specify the IP address you want to use for the BIG-IP Access Policy Manager virtual server. This is the address clients will use to access the HTTP-based client access services.</p>
</li>
<li><p><i><b>Do you want to re-encrypt the traffic that will be forwarded to your BIG-IP LTM?</b></i><br />
Select whether you want the system to re-encrypt traffic that will be sent from this BIG-IP APM to the BIG-IP LTM.</p>
<p>We generally recommend you do not re-encrypt traffic between your BIG-IP APM and BIG-IP LTM because both BIG-IP systems must process the SSL transactions. However, if you do choose to re-encrypt, we strongly recommend you use a valid certificate (usually SAN-enabled) rather than the default, self-signed certificate for the Client SSL profile on your BIG-IP LTM system. If not re-encrypting traffic, you do not need a certificate on your BIG-IP LTM.</p>
<ul>
<li><p><b>Re-encrypt (SSL Bridging)</b><br />
Select this option if your implementation requires encrypted traffic to the Mailbox Servers. The system unencrypts, then re-encrypts the traffic headed for the Mailbox Servers.</p>
<ol>
<li><p><i>Which Client SSL profile do you want to use?</i>Â The iApp can create a new Client SSL profile, or if you have created a Client SSL profile which contains the appropriate SSL certificate and key for your Exchange implementation, you can select it from the list.</p>
<ul>
<li><p><b>Select the Client SSL profile you created from the list</b><br />
If you manually created a Client SSL profile, select it from the list, and then continue with #2.</p>
</li>
<li><p><b>Create a new Client SSL profile</b><br />
Select this option if you want the iApp to create a new Client SSL profile.</p>
<ol>
<li><p><i>Which SSL certificate do you want to use?</i>Â <br />
Select the SSL certificate you imported onto the BIG-IP system for decrypting client connections. If you have not yet imported a certificate, you can leave the default selections and reconfigure this iApp after obtaining the certificates. The deployment will not function correctly until you have selected the correct certificates.Â <b>Note:</b>Â Any certificate that you obtain with multiple names must be in SAN (Subject Alternative Name) format, not SNI (Server Name Indication) format. For more information on SAN certificates, seeÂ <a href="#Anchor-65"><i>Subject Alternative Name (SAN) SSL Certificates</i></a><i>.</i></p>
</li>
<li><p><i>Which SSL key do you want to use?</i>Â <br />
Select the associated key from the list.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i>Which Server SSL profile do you want to use?</i>Â <br />
Select whether you want the iApp to create an F5 recommended Server SSL profile, or if you want to choose a Server SSL profile you already created.</p>
<ul>
<li><p><b>Select the Server SSL profile you created from the list</b>Â If you have previously created a Server SSL profile for your Exchange implementation, from the list, select the existing Server SSL profile you created.</p>
</li>
<li><p><b>Create a new Server SSL profile</b><br />
Select this option if you want the iApp to create a new Server SSL profile.</p>
<p>The default, F5 recommended Server SSL profile uses theÂ <i>serverssl</i>Â parent profile. For information about the ciphers used in the Server SSL profile, seeÂ <a href="http://support.f5.com/kb/en-us/solutions/public/8000/800/sol8802.html" rel="noreferrer">http://support.f5.com/kb/en-us/solutions/public/8000/800/sol8802.html</a>.</p>
</li>
</ul>
</li>
<li><p><i>Is the remote BIG-IP LTM receiving this traffic using a self-signed or default certificate for decryption, or is the certificate signed by a CA?</i>Â Select whether the remote BIG-IP LTM receiving the traffic is using a self-signed (or default) certificate for decrypting the traffic from this system, or if the certificate is signed by a Certificate Authority. Your answer determines the Secure Renegotiation setting on the Server SSL profile. This BIG-IP system will not trust the remote BIG-IP default or a self-signed certificate unless specifically configured to do so in this question.Â <b>Important:</b> This question pertains to the certificate used by the remote BIG-IP LTM, NOT the certificates present and assigned on the local BIG-IP system you are configuring.</p>
<ul>
<li><p><b>Certificate Authority-provided certificate and key</b><br />
Select this option if the remote BIG-IP LTM is using a certificate from a Certificate Authority.</p>
</li>
<li><p><b>Self-signed or default certificate and key</b><br />
Select this option if the remote BIG-IP LTM is using a self-signed or default certificate.</p>
</li>
</ul>
</li>
</ol>
</li>
<li><p><b>Do not re-encrypt (SSL Offload)</b><br />
Select this option if you do not want the system to re-encrypt traffic to the BIG-IP LTM virtual server. We recommend not re-encrypting unless you have a requirement for SSL for the entire transaction. In this case, the system is offloading the BIG-IP LTM from also having to process the SSL transaction.</p>
<ol>
<li><p><i>Which Client SSL profile do you want to use?</i>Â The iApp can create a new Client SSL profile, or if you have created a Client SSL profile which contains the appropriate SSL certificate and key for your Exchange implementation, you can select it from the list.</p>
<ul>
<li><p><b>Select the Client SSL profile you created from the list</b><br />
If you manually created a Client SSL profile, select it from the list, and then continue with #2.</p>
</li>
<li><p><b>Create a new Client SSL profile</b><br />
Select this option if you want the iApp to create a new Client SSL profile.</p>
<ol>
<li><p><i>Which SSL certificate do you want to use?</i>Â <br />
Select the SSL certificate you imported onto the BIG-IP system for decrypting client connections. If you have not yet imported a certificate, you can leave the default selections and reconfigure this iApp after obtaining the certificates. The deployment will not function correctly until you have selected the correct certificates.Â <b>Note:</b>Â Any certificate that you obtain with multiple names must be in SAN (Subject Alternative Name) format, not SNI (Server Name Indication) format. For more information on SAN certificates, seeÂ <a href="#Anchor-65"><i>Subject Alternative Name (SAN) SSL Certificates</i></a><i>.</i></p>
</li>
<li><p><i>Which SSL key do you want to use?</i>Â <br />
Select the associated key from the list.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Which intermediate certificate do you want to use?</b></i><br />
Choose whether or not you want to use an intermediate certificate (also called intermediate certificate chains or chain certificates) in this deployment. These certificates are used to help systems which depend on SSL certificates for peer identification. These certificates are intended to create a chain of trust between the CA that signed the certificate and the CA that is already trusted by the recipient of the certificate. This allows the recipient to verify the validity of the certificates presented, even when the signing CA is unknown. In order to use an intermediate certificate in this deployment, you must have manually imported it onto the BIG-IP system.</p>
<ul>
<li><p><b>Do not use a chain certificate</b><br />
Select this option if you do not want to use an intermediate (chain) certificate in this deployment, or have not yet imported the certificate onto the system but want to exit the template to import it and then restart the template.</p>
</li>
<li><p><b>Select the intermediate certificate you imported from the list</b><br />
If you imported an intermediate certificate for this Exchange implementation, select the certificate you imported from the list.</p>
</li>
</ul>
</li>
<li><p><i><b>What is the virtual IP address on the remote BIG-IP system to which you will forward traffic?</b></i><br />
Type the IP address of the virtual server on the remote BIG-IP LTM to which you will be forwarding Exchange client traffic from this BIG-IP device<i>.</i>Â This BIG-IP APM sends traffic to this address after performing authentication.</p>
</li>
<li><p><i><b>Will clients be connecting to this BIG-IP virtual server primarily over a LAN or WAN?</b></i><br />
Select how the system should optimize client-side TCP connections. The iApp uses your selection to configure the proper TCP optimization settings on the TCP profile.</p>
<ul>
<li><p><b>Optimize TCP connections for WAN clients</b><br />
Select this option if most Exchange server clients are coming into your Exchange environment over a Wide Area Network.</p>
</li>
<li><p><b>Optimize TCP connections for WAN clients</b><br />
Select this option if most Exchange server clients are coming into your Exchange environment over a Local Area Network.</p>
</li>
</ul>
</li>
<li><p><i><b>Should BIG-IP APM restrict EAC access to members of the Exchange Organization Management Security Group?</b></i><br />
Select whether you want the BIG-IP APM to restrict Exchange Administration Center (EAC) access to members of Exchange 2016's Organizational Management group. The BIG-IP APM module queries Active Directory group membership for the user making the request to EAC. If the user is not a member of the Organization Management group, the APM policy denies access.</p>
<ul>
<li><p><b>No, do not restrict EAC access by group membership</b><br />
Select this option and the BIG-IP APM will not restrict access to the EAC by group membership.</p>
</li>
<li><p><b>Yes, restrict EAC access by group membership</b><br />
Select this option if you want to restrict EAC access to the Organization Management group. This adds an additional layer of security to your Exchange deployment, as the system denies access to the EAC from anyone who is not a member of the Organization Management group.</p>
</li>
</ul>
</li>
<li><p><i><b>Which type of authentication do Outlook Web App clients use?</b></i><br />
Choose whether your outlook Web App clients are using Forms-based authentication or Smart Card authentication. You must be using BIG-IP APM version 11.3 or later for Smart Card authentication support for OWA.</p>
<ul>
<li><p><b>Outlook Web App not used or clients use Forms-based authentication</b><br />
Select this option if your Outlook Web App clients are using Forms-based authentication, or if you are not using OWA.</p>
<ol>
<li><p><i>Which type of authentication have you configured on the Outlook Web App virtual directory?</i><br />
Select whether you have configured Outlook Web App to use Windows authentication or Forms-based authentication. Note that this selection is only for OWA, andÂ <b>not</b>Â for Outlook clients. If you choose Windows authentication, the question asking about showing the OWA logon options do not appear. Showing the OWA logon options is only supported when doing server-side Forms authentication.</p>
<ul>
<li><p><b>Outlook Web App is configured for Forms-based authentication</b><br />
Select this option if your OWA implementation uses forms-based authentication. You must answer the following question.</p>
<ol>
<li><p><i>Would you like to display the OWA computer type and light version options on the APM logon page?</i><br />
Choose whether you want to display the computer type (public/shared vs private) and light version (Use the light version of Outlook Web App) options for OWA on the APM logon page.</p>
<ul>
<li><p><b>No, do not display the OWA logon options</b><br />
Select this option if you do not want to display the OWA logon options on the APM logon page.</p>
</li>
<li><p><b>Yes, display the OWA logon options</b><br />
Select this option if you want users to see the OWA logon options on the BIG-IP APM logon page. Note that in Exchange 2016, you mustÂ <a href="#Anchor-107">enable the logon page options by running a specific PowerShell command in the Exchange Management Shell prior to logging into OWA</a>. <b>Note:</b>Â For the blind and low vision experience to function correctly when accessing OWA with Internet Explorer 11, the OWA site must be added to the Compatibility View websites list. Consult Microsoft documentation for more information.</p>
</li>
<li><p><b>Outlook Web App is configured for Windows authentication</b><br />
Select this option if your Outlook Web App implementation uses Windows authentication.</p>
<ol>
<li><p><i>What should the timeout be for inactive OWA sessions (in minutes)?</i>Type the number of minutes you want to pass before the BIG-IP system closes inactive OWA sessions.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
<li><p><b>Outlook Web App clients use Smart Card authentication</b><br />
Select this option if your OWA clients use Smart Card authentication and you are using BIG-IP APM v11.3 or later.</p>
<ol>
<li><p><i>Which certificate from a CA trusted by this BIG-IP system for client-side processing of smart card authentication do you want to use?</i><br />
<i>This question does not appear if you are using an existing Client SSL profile and iApp v1.0.2rc1</i>Â Select the certificate you imported onto the BIG-IP system that is from a Certificate Authority and is trusted by the BIG-IP system for client-side processing of smart card authentication. This certificate must already be imported onto the system before you can select it.</p>
</li>
<li><p><i>What should the timeout be for inactive OWA sessions (in minutes)?</i>Â Type the number of minutes you want to pass before the BIG-IP system closes inactive OWA sessions.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>Which type of authentication do Outlook clients use?</b></i><br />
Choose whether your Outlook clients use Basic or NTLM authentication. Beginning in BIG-IP version 11.3, the iApp supports using NTLM authentication for Outlook Anywhere.</p>
<ul>
<li><p><b>Outlook not used or clients use Basic Auth</b><br />
Select this option if your Outlook Anywhere clients use Basic Authentication, or if you are not using Outlook. Continue with #9.</p>
</li>
<li><p><b>Outlook Anywhere clietns use NTLM authentication</b><br />
Select this option if your Outlook Anywhere clients use NTLM information. You must answer the following questions about your Active Directory implementation. Also see Appendix E: Active Directory and Exchange Server configuration for NTLM for important information and modifications for NTLM.Â Important: Before completing this section, you must create a user account in the same domain that has been properly configured for NTLM delegation. You must also create an NTLM Machine Account object on the BIG-IP system to join this system to the Active Directory domain. SeeÂ <a href="#Anchor-75"><i>Creating an NTLM Machine Account</i></a>. Note that the Kerberos SSO method is the only SSO method that can be used when the authentication method of the access policy is NTLM.</p>
<ol>
<li><p><i>Which NTLM machine account should be used for Kerberos delegation?</i><br />
Select the NTLM Machine Account you created to join the BIG-IP system to the Active Directory domain. If you have not already created an NTLM Machine Account on the BIG-IP system, seeÂ <a href="#Anchor-75"><i>Creating an NTLM Machine Account</i></a><i>.Â </i>You must either exit the template now and start over once you have created the NTLM Machine Account, or choose Outlook Anywhere Clients use Basic Authentication from the previous question, and then re-enter the template later.</p>
</li>
<li><p><i>What is the Kerberos Key Distribution Center IP or FQDN?</i><br />
Specify the IP address or fully qualified domain name of the Kerberos Key Distribution Center (KDC). If you type an FQDN, the BIG-IP system must be able to resolve the address. Otherwise, use the IP address.</p>
</li>
<li><p><i>What is the name of the Kerberos Realm?</i>Â <br />
Specify the name of the Kerberos Realm. While this name should be in all capital letters, the iApp automatically turns any lower case letters to capital.</p>
</li>
<li><p><i>What is the user name for the Active Directory delegation account you created?</i><br />
Specify the user name for the Active Directory delegation account you created. This account must be correctly configured in Active Directory for Kerberos delegation. SeeÂ <a href="#Anchor-103"><i>Appendix E: Active Directory and Exchange Server configuration for NTLM</i></a><i>Â </i>details<i>.</i></p>
</li>
<li><p><i>What is the associated password?</i><br />
Specify the password associated with the account.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p><i><b>What version of NTLM authentication does your deployment require?</b></i><br />
<i>This question appears depending on your other selections in the template</i>Â Choose the version of NTLM your Microsoft Exchange deployment requires. Your selection determines the type of BIG-IP APM SSO Configuration object.</p>
<ul>
<li><p><b>NTLMv1 authentication</b><br />
Select this option if your Exchange implementation is using NTLMv1.</p>
</li>
<li><p><b>NTLMv2 authentication</b><br />
Select this option if your Exchange implementation is using NTLMv2.</p>
</li>
</ul>
</li>
<li><p><i><b>Do you want to add any iRules to this configuration?</b></i><br />
You have the option of adding existing iRules to the virtual server. iRules allow an administrator to instruct the system to intercept, inspect, transform, direct and track inbound or outbound application traffic. For more information on iRules, seeÂ <a href="https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx." rel="noreferrer">https://devcentral.f5.com/HotTopics/iRules/tabid/1082202/Default.aspx.</a>Â <b>Important:</b> Improper use or misconfiguration of an iRule can result in unwanted application behavior and poor performance of your system. Verify the impact of an iRule prior to deployment in production. If you want to add iRules, from theÂ <b>Options</b>Â box, select the iRule(s) you want to include, and then click the Add (&lt;&lt;) button.</p>
</li>
</ol>
<h2>Additional Steps</h2>
<p>Review the information in the Additional steps section, and take appropriate action if necessary. All of the notes in Additional Steps are found in the relevant section of this deployment guide.</p>
<h2><a name="Anchor-72" id="Anchor-72"></a>Finished</h2>
<p>Review your answers to the questions. When you are satisfied, click theÂ <b>Finished</b>Â button. The BIG-IP system creates the relevant objects.</p>
<h2><a name="Anchor-135" id="Anchor-135"></a>Modifying the iApp configuration</h2>
<p>This section contains modifications you must make to the configuration after running the iApp. Not all of these changes are required in all cases; make sure the change applies to your configuration before modifying the configuration.</p>
<h2>Adding iRules to the configuration if you chose to use different IP address for the different client access services</h2>
<p>If you configured the iApp template to use different IP address for the different client access Services, and are using ActiveSync and/or Outlook Anywhere, you must add an iRule to the virtual server(s).</p>
<h3>Creating the ActiveSync iRule</h3>
<p>If you deployed the iApp for separate virtual servers and are deploying ActiveSync, create the following iRule. To create the iRule, on the Main tab clickÂ <b>iRules &gt; Create</b>. Give the iRule a unique name, and then in theÂ <b>Definition</b>Â field, copy and paste the following code.</p>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
}
</pre>
<h3>Creating the Outlook Anywhere iRule</h3>
<p>If you deployed the iApp for separate virtual servers and are deploying Outlook Anywhere, create the following iRule. To create the iRule, on the Main tab clickÂ <b>iRules &gt; Create</b>. Give the iRule a unique name, and then in theÂ <b>Definition</b>Â field, copy and paste the following code.</p>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
}
</pre>
<pre>
when HTTP_RESPONSE {
</pre>
<pre>
if { ( [HTTP::header exists &quot;WWW-Authenticate&quot;] &amp;&amp; [string tolower [HTTP::header values &quot;WWW-Authenticate&quot;]] contains &quot;negotiate&quot; ) ||
</pre>
<pre>
( [HTTP::header exists &quot;Persistent-Auth&quot;] &amp;&amp; [string tolower [HTTP::header &quot;Persistent-Auth&quot;]] contains &quot;true&quot; ) } {
</pre>
<pre>
ONECONNECT::reuse disable
</pre>
<pre>
ONECONNECT::detach disable
</pre>
<pre>
## disables NTLM conn pool for connections where OneConnect has been disabled
</pre>
<pre>
NTLM::disable
</pre>
<pre>
}
</pre>
<pre>
## this command rechunks encoded responses
</pre>
<pre>
if {[HTTP::header exists &quot;Transfer-Encoding&quot;]} {
</pre>
<pre>
HTTP::payload rechunk
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<h3>To attach the iRule(s) to the virtual server</h3>
<ol>
<li><p>From the Main tab of the BIG-IP Configuration utility, expandÂ <b>iApp</b>Â and then clickÂ <b>Application Services.</b></p>
</li>
<li><p>Click the name of your existing Microsoft Exchange application service from the list.</p>
</li>
<li><p>On the Menu bar, clickÂ <b>Reconfigure.</b></p>
</li>
<li><p>If necessary, from theÂ <i>Do you want to customize your server pool settings?</i>Â question, selectÂ <b>Customize pool settings.</b></p>
</li>
<li><p>If you created the ActiveSync iRule, from theÂ <i>Do you want to add any iRules to this virtual server?</i>Â question under the question asking if you are deploying ActiveSync, select the iRule you just created and then click the Add (&lt;&lt;) button to move it to theÂ <b>Selected</b>Â list.</p>
</li>
<li><p>If you created the Outlook Anywhere iRule, from theÂ <i>Do you want to add any iRules to this virtual server?</i>Â question under the question asking if you are deploying Outlook Anywhere, select the iRule you just created and then click the Add (&lt;&lt;) button to move it to theÂ <b>Selected</b>Â list.</p>
</li>
<li><p>ClickÂ <b>Finished.</b></p>
</li>
</ol>
<h2><a name="Anchor-35" id="Anchor-35"></a>Next steps</h2>
<p>After completing the iApp Template, the BIG-IP Application Services page opens for the Exchange application service you just created. To see the list of all the configuration objects created to support Microsoft Exchange, on the Menu bar, clickÂ <b>Components</b>. The complete list of all Exchange related objects opens. You can click individual objects to see the settings.</p>
<p>Once the objects have been created, you are ready to use the new deployment.</p>
<h2>Modifying DNS settings to use the BIG-IP virtual server address</h2>
<p>Before sending traffic to the BIG-IP system, your DNS administrator may need to modify any DNS entries for the Exchange implementation to point to the BIG-IP systemâs virtual server address.</p>
<h2><a name="Anchor-22" id="Anchor-22"></a>Modifying the iApp configuration</h2>
<p>The iApp application service you just created can be quickly and easily modified if you find it necessary to make changes to the configuration. The Strict Updates feature of the iApp prevents users from manually modifying the iApp configuration (Strict Updates can be disabled, but use extreme caution). iApp allows you to re-enter the template, make changes, and then update the template. The modifications are automatically made to any of the associated objects.</p>
<ol style="list-style-position: inside;">
<li>To modify the configuration</li>
<li>On the Main tab, expandÂ <b>iApp</b>Â and then click<b>Â Application Services</b>.</li>
<li>Click the name of your Exchange Application service from the list.</li>
<li>On the Menu bar, clickÂ <b>Reconfigure</b>.</li>
<li>Make the necessary modifications to the template.</li>
<li>Click theÂ <b>Finished</b>Â button.</li>
</ol>
<h3><a name="Anchor-62" id="Anchor-62"></a>Viewing statistics</h3>
<p>You can easily view a number of different statistics on the BIG-IP system related to the Exchange configuration objects created by the iApp template. You can get statistics specific to the Application Service if you have provisioned AVR. Otherwise, you can always get object-level statistics.</p>
<h3><b>AVRÂ </b>statistics</h3>
<p>If you have provisioned AVR, you can get application-level statistics for your Exchange application service.</p>
<ol style="list-style-position: inside;">
<li>To view AVR statistics</li>
<li>On the Main tab, expandÂ <b>iApp</b>Â and then clickÂ <b>Application Services</b>.</li>
<li>From theÂ <b>Application Service</b>Â List, click the Exchange service you just created.</li>
<li>On the Menu bar, clickÂ <b>Analytics</b>.</li>
<li>Use the tabs and the Menu bar to view different statistics for your Exchange iApp.</li>
</ol>
<h3>Object-level statistics</h3>
<p>If you havenât provisioned AVR, or want to view object-level statistics, use the following procedure.</p>
<ol style="list-style-position: inside;">
<li>To view object-level statics</li>
<li>On the Main tab, expandÂ <b>Overview</b>, and then clickÂ <b>Statistics</b>.</li>
<li>From theÂ <b>Statistics Type</b>Â menu, you can selectÂ <b>Virtual Servers</b>Â to see statistics related to the virtual servers.</li>
<li>You can also chooseÂ <b>Pools</b>Â orÂ <b>Nodes</b>Â to get a closer look at the traffic.</li>
<li>To see networking statistics in a graphical format, clickÂ <b>Dashboard</b>.</li>
</ol>
<p>For more information on viewing statistics on the BIG-IP system, see the online help or product documentation.</p>
<h2>Adding Ratio or Connection Limit information to the nodes if using a node-based load balancing method</h2>
<p>If you chose to customize the server pool settings, changed the load balancing method from the default to a node-based method (such as Ratio (node) or Least Connections (node)), and configured a Ratio or Connection Limit, the iApp applies the ratio or connection limit to the load balancing pool member, and not to the node itself. In this case, you must manually modify each node to include any Ratio or Connection Limit settings you want to configure.</p>
<ol style="list-style-position: inside;">
<li>To modify the nodes to include Ratio or Connection Limit settings</li>
<li>On the Main tab, expandÂ <b>Local Traffic</b>Â and then clickÂ <b>Nodes</b>.</li>
<li>From the Node table, click a Mailbox Server node you entered in the iApp template.</li>
<li>In theÂ <b>Ratio</b>Â box, type the appropriate ratio, if applicable.</li>
<li>In theÂ <b>Connection Limit</b>Â box, type the appropriate connection limit, if applicable.</li>
<li>ClickÂ <b>Update</b>.</li>
<li>Repeat this procedure for each node that is a part of your Exchange deployment.</li>
</ol>
<h2>Modifying the external monitor script file to support SNMP v3</h2>
<p>If you deployed the iApp template to use external health monitors and need to use SNMP v3, you must manually modify the monitor script file produced by the template. Note this procedure does not require disabling Strict Updates.</p>
<ol>
<li><p>To modify the monitor to support SNMP v3</p>
</li>
<li><p>On the Main tab, clickÂ <b>System-&gt;File Management-&gt;External Monitor Program FileÂ List.</b></p>
</li>
<li><p>Click one of the Exchange script files. These begin with the abbreviation for the Exchange service, followed byÂ <b>_eav.</b> For example for Autodiscover, the file name isÂ <b>ad_eav.</b></p>
</li>
<li><p>Modify each query variable containing theÂ <b>snmpget</b>Â query string with the appropriate snmpget variables and values to perform an SNMP v3 get request. Use the following example for guidance.</p>
<p>If the standard string is:</p>
<pre>
query1=$(/usr/bin/snmpget -v 2c -c &quot;${PASSWORD}&quot;
</pre>
<p>You would change it to something like:</p>
<pre>
query1=$(/usr/bin/snmpget -v 3 -A authpassphrase -a MD5 -x AES -X &quot;${PASSWORD}&quot; -l authPriv
</pre>
<p>followed by the existing $NODE variable and service oid.</p>
<p>Refer to external documentation for more information on the snmpget linux client to understand each argument being passed in as well as SNMP v3 standard requirements.</p>
</li>
<li><p>ClickÂ <b>Update.</b></p>
</li>
<li><p>Repeat this procedure for each script file you need to modify.</p>
</li>
</ol>
<h2><a name="Anchor-92" id="Anchor-92"></a>Troubleshooting</h2>
<p>This section contains common issues and troubleshooting steps. Beginning with document revision 1.6 on 8/3/16, we include the document revision and date for each new troubleshooting entry. New entries now appear at the top of this section.</p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-159" id="Anchor-159"></a><b>Clients experiencing Outlook connectivity issues</b></li>
</ul>
<p><i>This issue has been corrected in iApp version v1.0.2rc1. Upgrade to this version, or use the following guidance.</i></p>
<p>If clients are experiencing Outlook connectivity issues (described in detail here:Â <a href="https://blogs.technet.microsoft.com/exchange/2016/05/31/checklist-for-troubleshooting-outlook-connectivity-in-exchange-2013-and-2016-on-premises/" rel="noreferrer">https://blogs.technet.microsoft.com/exchange/2016/05/31/checklist-for-troubleshooting-outlook-connectivity-in-exchange-2013-and-2016-on-premises/</a>), you must add an iRule to the virtual server(s). This iRule increases the TCP Idle Timeout on the server-side TCP profile.</p>
<p>If you are running a BIG-IP version prior to 11.6, seeÂ <i>Procedure for BIG-IP versions prior to 11.6Â </i>on this page.</p>
<p>To create the iRule and add it to the Exchange 2016 virtual server(s)</p>
<ol style="list-style-position: inside;">
<li>On the Main tab, click<b>Â Local Traffic</b>Â &gt;Â <b>iRules</b>Â &gt;Â <b>Create</b>.</li>
<li>In theÂ <b>Name</b>Â box, type a unique name for this iRule.</li>
<li>In theÂ <b>Definition</b>Â section, copy and paste one of the following iRules depending on whether you configured the iApp to use a combined IP address or separate IP addresses for the Exchange services.</li>
</ol>
<p>Note that theÂ <b>idletime</b>Â value (in line 7 or line 2) of 2100 seconds based on the default CASÂ <b>KeepAliveTime</b>Â setting. If you are not using the default KeepAliveTime, modify the value in line 7 or 2 so it is 300 seconds more than your CAS KeepAliveTime value.</p>
<p><b>For the combined virtual server</b>.</p>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
switch -glob -- [string tolower [HTTP::path]] {
</pre>
<pre>
&quot;/ews*&quot; -
</pre>
<pre>
&quot;/oab*&quot; -
</pre>
<pre>
&quot;/mapi*&quot; -
</pre>
<pre>
&quot;/rpc/rpcproxy.dll*&quot; {
</pre>
<pre>
TCP::idletime 2100
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<p><b>For separate virtual servers</b>.</p>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
TCP::idletime 2100
</pre>
<pre>
}
</pre>
<p>4. Click theÂ <b>Finished</b>Â button.</p>
<p>5. Re-enter the iApp template (on the Main tab, clickÂ <b>iApp</b>Â &gt;Â <b>Application Services</b>Â &gt; [name of your Exchange application service] and then from the Menu bar, clickÂ <b>Reconfigure</b>).</p>
<p>6. In the Tell us which services you are deploying section, from the &quot;Do you want to customize your server pool settings&quot; question, selectÂ <b>Customize pool settings</b>.</p>
<p>7. The next step depends on if you used a single IP address or separate IP address for Exchange services.</p>
<p>- Single IP address: From the &quot;Do you want to add any custom iRules to this combined virtual server?&quot; enable the iRule you created.</p>
<p>- Separate IP addresses: From the &quot;Do you want to add any custom iRules to this virtual server?&quot; questions, enable the iRule you just created for all of the following services you are using: Outlook Anywhere, MAPI-over-HTTP, EWS, and OAB.</p>
<p>7. ClickÂ <b>Update</b>. This completes the solution for v11.6 and later.</p>
<h3>Procedure for BIG-IP versions prior to 11.6 - Different IP addresses for different services</h3>
<ol style="list-style-position: inside;">
<li>Create a new TCP Profile (<b>Local Traffic &gt; Profiles &gt; Protocol &gt; TCP &gt; Create</b>). Set theÂ <b>Idle Timeout</b>Â value toÂ <b>2100Â </b>(if you are not using the default KeepAliveTime, modify the value so it is 300 seconds more than your CAS KeepAliveTime value).</li>
<li>If you have not already disabled Strict Updates, see StepÂ <a href="#Anchor-119"><i>2. Disable the Strict Updates feature:</i></a>.</li>
<li>ClickÂ <b>Local Traffic &gt; Virtual Servers</b>.</li>
<li>For the Outlook Anywhere, MAPI-over-HTTP, EWS, and OAB virtual servers (you may not have all of these depending on your choices), click the name of the virtual server, and then from theÂ <b>Protocol Profile (Server)</b>Â list, select the TCP profile you just created.</li>
<li>ClickÂ <b>Update</b>.</li>
</ol>
<h3>Procedure for BIG-IP versions prior to 11.6 - Single IP address</h3>
<ol style="list-style-position: inside;">
<li>If you have not already disabled Strict Updates, see StepÂ <a href="#Anchor-119"><i>2. Disable the Strict Updates feature:</i></a>.</li>
<li>ClickÂ <b>Local Traffic &gt; Profiles &gt; Protocol &gt; TCP</b>.</li>
<li>Click the name of the server side TCP profile created by the template. This name isÂ <b>_lan-optimized_tcp_profile</b>.</li>
<li>In theÂ <b>Idle Timeout</b>Â field, type 2100 (if you are not using the default KeepAliveTime, modify the value so it is 300 seconds more than your CAS KeepAliveTime value).</li>
<li>ClickÂ <b>Update</b>.</li>
</ol>
<p>Updated in document revision 2.6 on 05-11-2017</p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-96" id="Anchor-96"></a><b>Clients receiving error message when using BIG-IP APM with OWA 2016 and IE10 or Google Chrome</b></li>
</ul>
<p>If you are using APM and Outlook Web App 2013, and have clients using Internet Explorer 10 or Google Chrome, clients may receive the following error message from the BIG-IP APM:Â <i>Access policy evaluation is already in progress for your current session.</i>Â If clients are receiving this error, you must apply the an iRule to the virtual server(s) used for OWA 2013.</p>
<p>To create the iRule and add it to the OWA 2016 virtual server</p>
<p>1. On the Main tab, click<b>Â Local Traffic</b>Â &gt;Â <b>iRules</b>Â &gt;Â <b>Create</b>.</p>
<p>2. In theÂ <b>Name</b>Â box, type a unique name for this iRule.</p>
<p>3. In theÂ <b>Definition</b>Â section, copy and paste one of the following iRules depending on your BIG-IP version.</p>
<p>All versionsÂ <i><b>except</b></i>Â v11.5.4 HF2 and v11.6.1 HF1:</p>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
if { [HTTP::cookie exists &quot;IsClientAppCacheEnabled&quot;] } {
</pre>
<pre>
HTTP::cookie &quot;IsClientAppCacheEnabled&quot; False
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<p>Use the following irule if you are using BIG-IP version v11.5.4 HF2 or v11.6.1 HF1. Or if you have already deployed the iApp template and find you are not receiving a response from the BIG-IP virtual server using the rule above, and are seeing this message in /var/log/ltm: TCL error: /Common/_Â - Operation not supported (line 2) invoked from within &quot;HTTP::uri&quot;</p>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
if { [HTTP::cookie exists &quot;IsClientAppCacheEnabled&quot;] } {
</pre>
<pre>
HTTP::cookie remove &quot;IsClientAppCacheEnabled&quot;
</pre>
<pre>
HTTP::cookie insert name &quot;IsClientAppCacheEnabled&quot; value False
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<p>4. Click theÂ <b>Finished</b>Â button.</p>
<p>5. Re-enter the iApp template (on the Main tab, clickÂ <b>iApp</b>Â &gt;Â <b>Application Services</b>Â &gt; [name of your Exchange application service] and then from the Menu bar, clickÂ <b>Reconfigure</b>).</p>
<p>6. In the Tell us which services you are deploying section, from the &quot;Do you want to customize your server pool settings&quot; question, selectÂ <b>Customize pool settings</b>. Either in the &quot;Do you want to add any custom iRules to this combined virtual server?&quot; (if you used a single IP address) or in the &quot;Do you want to add any custom iRules to this virtual server?&quot; question under the IP address for OWA question (if you used different IP addresses), enable the iRule you just created.</p>
<p>7. ClickÂ <b>Update</b>.</p>
<p>If you have Outlook Web App clients connecting to a BIG-IP APM virtual server externally, and the same clients connect to a non-APM virtual server internally, you must apply the iRule to both virtual servers.</p>
<p>If clients are still receiving this error after adding the iRule, you should request they delete Temporary Internet Files (IE10), or go to chrome://appcache-internals and remove the application cache for Outlook Web Access (Chrome).</p>
<p>Updated in document revision 2.2 on 11-02-2016</p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-158" id="Anchor-158"></a><b>OSX/iOS clients receive a bad request error when clicking logout from Outlook Web App</b></li>
</ul>
<p><i>This issue has been corrected in iApp version v1.0.1rc1. We recommend upgrading if you are experiencing this issue.</i></p>
<p>If your clients using Apple's OSX and/or iOS are receiving a bad request error when clicking the Logout button from OWA, you must modify theÂ <b>login_timeout</b>Â rule created by the iApp using the following guidance.</p>
<ol style="list-style-position: inside;">
<li>If you have not already disabled Strict Updates, seeÂ <i>StepÂ </i><a href="#Anchor-119"><i>2. Disable the Strict Updates feature:</i></a>.</li>
<li>On the Main tab, clickÂ <b>Local Traffic &gt; iRules</b>, and then click the login timeout rule. This rule starts with the name you gave the iApp application service, followed byÂ <b>_login_timeout</b>. For example,Â <b>myExchange_login_timeout</b>.</li>
<li>In the Definition area, change all references ofÂ <b>Thurs</b>Â toÂ <b>Thu</b>.</li>
<li>Click theÂ <b>Update</b>Â button.</li>
</ol>
<p>Added in document revision 1.9 on 09-22-2016</p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-143" id="Anchor-143"></a><b>When using Forms-based authentication, users are unable to logout of an APM session after clicking logout from OWA</b></li>
</ul>
<p><i>This issue has been corrected in iApp version v1.0.1rc1. We recommend upgrading if you are experiencing this issue.</i></p>
<p>If using Forms-based authentication for clients to access Outlook Web App you may experience an issue with users being unable to logout of the APM session after clicking logout in the OWA browser. If you are experiencing this issue, you must make a change to the iRule that controls the session timeout.</p>
<ol style="list-style-position: inside;">
<li><a name="Anchor-157" id="Anchor-157"></a><b>To modify the APMÂ </b>session ch<b>eck iRule if you used the iApp template</b></li>
</ol>
<p>1. If you have not already disabled Strict Updates, seeÂ <i>StepÂ </i><a href="#Anchor-119"><i>2. Disable the Strict Updates feature:</i></a>.</p>
<p>2. On the Main tab, click<b>Â Local Traffic</b>Â &gt;Â <b>iRules</b>Â &gt;Â <b>Create</b>.</p>
<p>3. From theÂ <b>iRules</b>Â list, clickÂ <b>_login_timeout</b>.</p>
<p>4. Follow the instructions in Step 3 ofÂ <a href="#Anchor-142"><i>Optional: Creating the iRule to terminate inactive APM sessions if using Windows based authentication for OWA</i></a><i>Â </i>to copy and paste the iRule in theÂ <b>Definition</b>Â field.</p>
<p>5. ClickÂ <b>Update</b>.</p>
<p>Note that if you make changes to the iApp template using the Reconfigure option, you'll have to make this change to the iRule again. The next version of the iApp template will correct this issue.</p>
<p>Added in document revision 1.9 on 09-22-2016</p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-144" id="Anchor-144"></a><b>Exchange Hybrid Autodiscover, free/busy lookups, and remote mailbox moves/migrations fail when APM is deployed</b></li>
</ul>
<p>If your Exchange environment is federated with Exchange Online, and you have deployed BIG-IP APM in front of your on-premise Exchange servers, federated requests for Autodiscover and free/busy information will fail, as will remote moves and migrations between your Exchange organization and Exchange Online. You must create and assign the following iRule to correct this behavior. The following rule selectively disables APM for hybrid-specific Exchange URIs.</p>
<p>Once you have configured the iRule, attach it to the Rule to the combined virtual server or the separate EWS virtual server:</p>
<ol>
<li><p>On the Main tab, clickÂ <b>Local Traffic</b>Â &gt;Â <b>iRules</b> &gt; <b>Create.</b></p>
</li>
<li><p>In theÂ <b>Name</b>Â field, type a unique name.</p>
</li>
<li><p>In theÂ <b>Description</b>Â field, copy and paste the following code, omitting the line numbers.Â <b>Important: :</b> Make sure to substitute the appropriate pool names/paths in lines 11 and 19.</p>
<pre>
priority 1
</pre>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
set is_disabled 0
</pre>
<pre>
switch -glob [string tolower [HTTP::path]] {
</pre>
<pre>
&quot;/ews/mrsproxy.svc&quot; -
</pre>
<pre>
&quot;/ews/exchange.asmx/wssecurity&quot; {
</pre>
<pre>
set is_disabled 1
</pre>
<pre>
set path [HTTP::path]
</pre>
<pre>
ACCESS::disable
</pre>
<pre>
HTTP::path _disable-$path
</pre>
<pre>
pool
</pre>
<pre>
}
</pre>
<pre>
&quot;/autodiscover/autodiscover.svc/wssecurity&quot; -
</pre>
<pre>
&quot;/autodiscover/autodiscover.svc&quot; {
</pre>
<pre>
set is_disabled 1
</pre>
<pre>
set path [HTTP::path]
</pre>
<pre>
ACCESS::disable
</pre>
<pre>
HTTP::path _disable-$path
</pre>
<pre>
pool
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
when HTTP_REQUEST_RELEASE {
</pre>
<pre>
if { [info exists is_disabled] &amp;&amp; $is_disabled == 0 } { return }
</pre>
<pre>
if { [info exists path] } {
</pre>
<pre>
HTTP::path $path
</pre>
<pre>
unset is_disabled
</pre>
<pre>
unset path
</pre>
<pre>
}
</pre>
</li>
<li><p>Re-enter the iApp template (on the Main tab, clickÂ <b>iApp</b>Â &gt;Â <b>Application Services</b>Â &gt; [name of your Exchange application service] and then from the Menu bar, clickÂ <b>Reconfigure</b>).</p>
</li>
<li><p>.rom the iApp interface, select âCustomize pool settingsâ from the âTell us about which services you are deployingâ section, from the âDo you want to add any iRules to this combined virtual server?â question, enable the iRule you created. If you are using separate virtual servers, assign the iRule to the virtual servers that pass Autodiscover and EWS traffic.</p>
</li>
<li><p>ClickÂ <b>Update</b>Â Added in document revision 1.6 on 08-03-2016.</p>
</li>
</ol>
<ul style="list-style-position: inside;">
<li><a name="Anchor-156" id="Anchor-156"></a><b>SSL Offloading is not supported when performing remote moves and migrations between your Exchange organization and Exchange Online</b></li>
</ul>
<p>Because connections to the MRS Proxy endpoint must be encrypted to the Exchange server(s), F5 requires you select Re-encrypt (SSL Bridging) in response to theÂ <i>Do you want to re-encrypt this traffic to your Client Access Servers?</i>Â question in the iApp template. Added in document revision 1.6 on 08-03-2016.</p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-67" id="Anchor-67"></a><b>Modifying the IIS authentication token timeout value</b></li>
</ul>
<p>The iApp template configures most Exchange monitors to check service health every 30 seconds. However, to reduce traffic between the Exchange server and domain controllers, IIS virtual directories configured to use Basic authentication cache authentication tokens for up to 15 minutes before re-authenticating the user with Active Directory. This may result in the BIG-IP pool members for these services being marked UP incorrectly while Basic authentication tokens are cached.</p>
<p>You can decrease the length of or disable this token caching period by editing the registry on the Exchange server. The length of time configured for the token cache combined with the timeout value of the monitor will determine how long it will take until a resource is marked down. For example, setting a token cache period of 60 seconds, combined with a monitor using a timeout value of 91 seconds, will result in a resource being marked down after 151 s<i>econds.</i></p>
<p>For instructions on modifying the registry, see the following Microsoft article (while this article says IIS 6.0, we tested it on IIS 7.5 with no modifications):Â <a href="http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/6b2e7fcd-5fad-4ac8-ac0a-dcfbe771e9e1.mspx" rel="noreferrer">http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/6b2e7fcd-5fad-4ac8-ac0a-dcfbe771e9e1.mspx</a></p>
<p><b>WarningÂ </b>Use extreme caution any time you are editing the registry. Contact Microsoft for specific instructions and/or help editing the registry values.</p>
<ul style="list-style-position: inside;">
<li><b>Microsoft Exchange Remote Connectivity Analyzer fails to successfully run the FolderSync command</b></li>
</ul>
<p>If you deployed the BIG-IP system for ActiveSync, either using the iApp template or manually, and attempt to run the Microsoft Exchange Remote Connectivity Analyzer (ExRCA) against an Exchange mailbox, you may receive the following error:</p>
</div></div>
<div data-component-type="article" class="a11 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article Image">









<!-- /* Author controlled Height/Width */  -->






<figure id="article2025631820" class="a11">
    
    
      <img src="../../../../content/dam/f5-com/page-assets-en/home-en/resources/deployment-guides/error-activesync.png" class="img-fluid"/>
      
    
    
</figure>

</div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









<div id="article-210874370" class="a01 "><p>This behavior affects versions of BIG-IP earlier than 11.4.0. To work around this error, you must create an iRule, and then use the iApp template to apply the iRule to the combined Exchange BIG-IP virtual server (or attach the iRule manually if you used the manual configuration tables).</p>
<ol style="list-style-position: inside;">
<li>To create the iRule</li>
<li>On the Main tab, expandÂ <b>Local Traffic</b>, clickÂ <b>iRules</b>, and then click theÂ <b>Create</b>Â button.</li>
<li>In theÂ <b>Name</b>Â box, give the iRule a unique name.</li>
<li>In theÂ <b>Definition</b>Â section, copy and paste one of the following iRules, omitting the line numbers, depending on whether you configured the system for a combined virtual server, or a separate virtual server for ActiveSync.</li>
<li>ClickÂ <b>Finished</b>.</li>
</ol>
<p>Only use the definition applicable to your configuration.</p>
<h3>Combined virtual server iRule definition</h3>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
set isactivesync 0
</pre>
<pre>
if { [string tolower [HTTP::path]] contains &quot;/microsoft-server-activesync&quot; } {
</pre>
<pre>
set isactivesync 1
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
when HTTP_RESPONSE {
</pre>
<pre>
if { [HTTP::status] == 401 &amp;&amp; [HTTP::header exists &quot;Content-Length&quot;] &amp;&amp; $isactivesync == 1 } {
</pre>
<pre>
HTTP::header insert &quot;Connection&quot; &quot;Close&quot;
</pre>
<pre>
}
</pre>
<pre>
unset isactivesync
</pre>
<pre>
}
</pre>
<h3>Separate virtual server iRule definition</h3>
<pre>
when HTTP_RESPONSE {
</pre>
<pre>
if { [HTTP::status] == 401 &amp;&amp; [HTTP::header exists &quot;Content-Length&quot;] } {
</pre>
<pre>
HTTP::header insert &quot;Connection&quot; &quot;Close&quot;
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<p>The next task is to attach the iRule to the virtual server. This depends on whether you configured the BIG-IP system using the iApp template or manually.</p>
<h3><b>Attaching the iRule if you used the iApp template to configure the BIG-IP system</b></h3>
<p>Use the following procedure if you used the iApp template to configure the BIG-IP system.</p>
<ol style="list-style-position: inside;">
<li>1.Â Â Â  To attach the iRule to the virtual server</li>
<li>2.Â Â Â  From the Main tab of the BIG-IP Configuration utility, expandÂ <b>iApp</b>Â and then clickÂ <b>Application Services</b>.</li>
<li>3.Â Â Â  Click the name of your existing Microsoft Exchange application service from the list.</li>
<li>4.Â Â Â  On the Menu bar, clickÂ <b>Reconfigure</b>.</li>
<li>5.Â Â Â  If necessary, from theÂ <i>Do you want to customize your server pool settings?</i>Â question, selectÂ <b>Customize pool settings</b>.</li>
<li>6.Â Â Â  If you used a Combined virtual server, from theÂ <i>Do you want to add any iRules to this combined virtual server?</i>Â question, select the iRule you just created and then click the Add (<b>&lt;&lt;</b>) button to move it to theÂ <b>Selected</b>Â list. If you used Separate virtual servers, after the questionÂ <i>What IP address do you want to use for the ActiveSync virtual server?Â </i>from theÂ <i>Do you want to add any custom iRules to this virtual server?</i>question, select the iRule you just created and then click the Add (<b>&lt;&lt;</b>) button to move it to theÂ <b>Selected</b>Â list.</li>
<li>7.Â Â Â  ClickÂ <b>Finished</b>.</li>
</ol>
<h3><b>Attaching the iRule if you manually configured the BIG-IP system</b></h3>
<p>If you configured the BIG-IP system manually, and configured a combined virtual server, modify the combined virtual server you created to attach the combined iRule. If you configured separate virtual servers, modify the ActiveSync virtual server you created to attach the separate virtual server iRule.</p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-110" id="Anchor-110"></a><b>iPhones and other iOS devices are displaying invalid certificate messages after deployingÂ the iApp for ActiveSync</b></li>
</ul>
<p>If you deployed the iApp template for ActiveSync (or manually configured the BIG-IP system) and iOS devices started showing invalid certificate messages even though the certificates were issued by an appropriate authority, you must manually create an Client SSL profile that uses a Chain certificate. Intermediate certificates, also called intermediate certificate chains or chain certificates, are used to help systems which depend on SSL certificates for peer identification.</p>
<p>Use the guidance in this solution to create a Client SSL profile that uses an intermediate certificate chain:Â <a href="http://support.f5.com/kb/en-us/solutions/public/13000/300/sol13302.html" rel="noreferrer">http://support.f5.com/kb/en-us/solutions/public/13000/300/sol13302.html</a>. Be sureÂ <b>Secure Renegotiation</b>is set toÂ <b>Require</b>Â (the default) on the Client SSL profile.</p>
<p>If you manually configured the system, add the Client SSL profile to your virtual server.</p>
<p>If you used the iApp, use this procedure:</p>
<p>1.Â Â Â  <i>Re-enter the iApp template (on the Main tab, clickÂ iApp &gt; Application Services &gt; [name of your Exchange application service] and then from the Menu bar, click Reconfigure).</i></p>
<p>2.Â Â Â  <i>In theÂ Tell us about your deploymentÂ section, from the &quot; Do you want to create a new client SSL profile or use and existing one?&quot; question, select the profile you just created that uses the Chain certificate.</i></p>
<p>3.Â Â Â  <i>ClickÂ Update.</i></p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-116" id="Anchor-116"></a><b>When using SSL Bridging and BIG-IP version 11.4.x, pool members may be marked down or you may experience connection resets and TLS errors logged to the Mailbox servers</b></li>
</ul>
<p>This issue only occurs when using SSL BridgingÂ <i><b>and</b></i>Â BIG-IP versions 11.4.x. Pool members may be marked down when using simple monitors, or you may experience connection resets and TLS errors logged to the Mailbox servers because the SSL ciphers used in the Server SSL profile in 11.4.x are not compatible with those in some versions of Microsoft Internet Information Server (IIS).</p>
<p>There are two ways you can resolve this issue:</p>
<p>1.Â Â Â  Upgrade your BIG-IP system to version 11.5 or later.</p>
<p>2.Â Â Â  Create a custom Server SSL profile and associate it with the virtual server, either using the iApp template or manually.</p>
<p>To create the Server SSL profile</p>
<p>a. On the Main tab, clickÂ <b>Local Traffic &gt; Profiles &gt; SSL &gt; Server</b>.</p>
<p>b. ClickÂ <b>Create</b>.</p>
<p>c. In theÂ <b>Name</b>Â box, type a unique name for this profile.</p>
<p>d. In theÂ <b>Options</b>Â row, click theÂ <b>Custom</b>Â box.</p>
<p>e. From theÂ <b>Available Options</b>Â list, selectÂ <b>No TLSv1.2</b>, and then click theÂ <b>Enable</b>Â button.</p>
<p>f. Click theÂ <b>Finished</b>Â button.</p>
<p>g. Attach the new Server SSL profile to the virtual server either using the iApp or manually.</p>
<p>â¢ To attach the profile to the virtual server using the iApp template:</p>
<p>i) Re-enter the iApp template (on the Main tab, clickÂ <b>iApp</b>Â &gt;Â <b>Application Services</b>Â &gt; [name of your Exchange application service] and then from the Menu bar, clickÂ <b>Reconfigure</b>).</p>
<p>ii) In the Tell us which services you are deploying section, from the &quot;Which Server SSL profile do you want to use&quot; question, select the Server SSL profile you just created.</p>
<p>iii) ClickÂ <b>Update</b>.</p>
<p>â¢ To attach the profile to the virtual server manually:</p>
<p>i) Select the Exchange virtual server you created.</p>
<p>ii) From theÂ <b>SSL Profile (Server)</b>Â area, enable the Server SSL profile you just created.</p>
<p>iii) ClickÂ <b>Update</b>.</p>
<p>iv) If you used separate virtual servers for each Exchange service, add the profile to each virtual server.</p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-118" id="Anchor-118"></a><b>Lync clients cannot connect or receive authentication prompts when accessing Microsoft Exchange Autodiscover and EWS through F5 APM</b></li>
</ul>
<p>When you have deployed APM in front of Microsoft Exchange, Microsoft Lync clients may be unable to successfully query the Autodiscover service or download free/busy information from EWS. To work around this issue, you must create an iRule to disable APM for these requests and attach it using the iApp interface.</p>
<p>To create the iRule and add it to the virtual server</p>
<p>1. On the Main tab, click<b>Â Local Traffic &gt; iRules &gt; Create</b>.</p>
<p>2. In theÂ <b>Name</b>Â box, type a name.</p>
<p>3. In theÂ <b>Definition</b>Â section, copy and paste the following iRule, omitting the line numbers. Enter line 4 as a single line.</p>
<pre>
priority 1
</pre>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
set is_disabled 0
</pre>
<pre>
# Lync Client Exchange Conversation History Auto discovery APM Bypass
</pre>
<pre>
if { [string tolower [HTTP::header value &quot;User-Agent&quot;]] contains &quot;microsoft lync&quot; || [string tolower [HTTP::header value &quot;User-Agent&quot;]] contains &quot;ms-webservices&quot; || [string tolower [HTTP::header value &quot;User-Agent&quot;]] contains &quot;skype for business&quot; } {
</pre>
<pre>
if { [string tolower [HTTP::path]] starts_with &quot;/autodiscover&quot; } {
</pre>
<pre>
set is_disabled 1
</pre>
<pre>
set path [HTTP::path]
</pre>
<pre>
ACCESS::disable
</pre>
<pre>
HTTP::path _disable-$path
</pre>
<pre>
pool
</pre>
<pre>
}
</pre>
<pre>
if { [string tolower [HTTP::path]] starts_with &quot;/ews&quot; } {
</pre>
<pre>
set is_disabled 1
</pre>
<pre>
set path [HTTP::path]
</pre>
<pre>
ACCESS::disable
</pre>
<pre>
HTTP::path _disable-$path
</pre>
<pre>
pool
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
#Lync Server Partner Application Setup APM Bypass
</pre>
<pre>
if { [string tolower [HTTP::path]] starts_with &quot;/autodiscover/metadata/json/1&quot; } {
</pre>
<pre>
set is_disabled 1
</pre>
<pre>
set path [HTTP::path]
</pre>
<pre>
ACCESS::disable
</pre>
<pre>
HTTP::path _disable-$path
</pre>
<pre>
pool /Common/Exchange_2013.app/Exchange_2013_ad_pool3
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
when HTTP_REQUEST_RELEASE {
</pre>
<pre>
if { !$is_disabled } { return }
</pre>
<pre>
HTTP::path $path
</pre>
<pre>
unset is_disabled
</pre>
<pre>
}
</pre>
<p>4. Click theÂ <b>Finished</b>Â button.</p>
<p>5. Re-enter the iApp template (on the Main tab, clickÂ <b>iApp</b>Â &gt;Â <b>Application Services</b>Â &gt; [name of your Exchange application service] and then from the Menu bar, clickÂ <b>Reconfigure</b>).</p>
<p>6. From the iApp, select âCustomize pool settingsâ from the âTell us about which services you are deployingâ section, from the âDo you want to add any iRules to this combined virtual server?â question, enable the iRule you created.</p>
<p>7. ClickÂ <b>Update</b>.</p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-136" id="Anchor-136"></a><b>You may experience deployment errors when a NTLM Machine Account name contains spaces or special characters</b></li>
</ul>
<p>If you are using BIG-IP APM, and specified that Outlook Anywhere clients use NTLM authentication, you must specify an NTLM Machine Account in the iApp template that you created manually. If the name of the NTLM Machine Account object contains spaces or special characters, you may experience errors when trying to deploy the template.</p>
<p>If your NTLM Machine Account object name contains a special character or space, the workaround for this issue is to create an NTLM Machine Account name that only contains alphanumeric characters and underscores, with no spaces. Return toÂ <a href="#Anchor-75"><i>Creating an NTLM Machine Account</i></a>, and create a new machine account.</p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-137" id="Anchor-137"></a><b>The Direct File Access setting for public computers is not honored</b></li>
</ul>
<p>When you have configured the OWA virtual directory to deny Direct File Access to public computers, and you have deployed BIG-IP APM with OWA logon options enabled, users who have selectedÂ <b>This is a public or shared computer</b>Â from the APM logon page are able to download or open OWA file attachments.</p>
<p>To solve this issue, create and then attach the following iRule to the combined virtual server or the separate OWA virtual server (this rule should appear below the _owa_forms_value_irule in the iRule list):</p>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
if { [ACCESS::session data get &quot;session.custom.owa.trusted&quot;] == 0 } {
</pre>
<pre>
if { [HTTP::cookie exists &quot;PrivateComputer&quot;] } {
</pre>
<pre>
HTTP::cookie remove &quot;PrivateComputer&quot;
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<ul style="list-style-position: inside;">
<li><a name="Anchor-138" id="Anchor-138"></a><b>After deploying the iApp template for SSL Bridging, my BIG-IP system is experiencing excessive memory usage</b></li>
</ul>
<p>If you are experiencing high memory usage on the BIG-IP system after deploying the iApp template for SSL Bridging, it may be due to the Retain Certificate setting on the Server SSL profile. If you are experiencing this issue, we recommend creating a new Server SSL profile with Retain Certificate disabled, and then selecting the new profile from the iApp.</p>
<p>To create a new Server SSL profile</p>
<p>1. On the Main tab, click<b>Â Local Traffic</b>Â &gt;Â <b>Profiles &gt; SSL &gt; Server</b>Â &gt;Â <b>Create</b>.</p>
<p>2. In theÂ <b>Name</b>Â box, type a unique name.</p>
<p>3. In theÂ <b>Retain Certificate</b>Â row, clear the check box toÂ <b>disable</b>Â the Retain Certificates setting.</p>
<p>4. Click theÂ <b>Finished</b>Â button.</p>
<p>5. Re-enter the iApp template (on the Main tab, clickÂ <b>iApp</b>Â &gt;Â <b>Application Services</b>Â &gt; [name of your Exchange application service] and then from the Menu bar, clickÂ <b>Reconfigure</b>).</p>
<p>6. In the Tell us about your deployment section, from the &quot;Which Server SSL profile do you want to use?&quot; question, select the Server SSL profile you just created.</p>
<p>7. ClickÂ <b>Update</b>.</p>
<ul style="list-style-position: inside;">
<li><a name="Anchor-145" id="Anchor-145"></a><b>Multiple BIG-IP APM sessions may be created when a website uses favicon</b></li>
</ul>
<p>When connecting to Outlook Web App through the BIG-IP APM, you may see multiple sessions for a single client IP address, and the Favorite icon may not display in the browser.</p>
<p>To work around this issue, create and then attach the following iRule to the combined virtual server or the separate OWA virtual server (this rule should appear above the pool assignment rule in the iRule list):</p>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
if { [string tolower [HTTP::path]] ends_with &quot;favicon.ico&quot; and [HTTP::cookie &quot;MRHSession&quot;] eq &quot;&quot; } {
</pre>
<pre>
ACCESS::disable
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<ul style="list-style-position: inside;">
<li><b>When choosing a custom APM profile created outside the template, sessions are not timing out</b></li>
</ul>
<p>If you created a custom APM profile outside the iApp and then chose to use it in the iApp template, the iApp does not attach a timeout iRule to the virtual server, as the system does not know which SSO method is being used. If this is the case, you must manually create the iRule and then attach it to the virtual server.</p>
<p>Follow the instructions in eitherÂ <a href="#Anchor-133"><i>Creating the iRule to terminate inactive APM sessions if using Forms-based authentication for OWA (default)</i></a>Â orÂ <a href="#Anchor-142"><i>Optional: Creating the iRule to terminate inactive APM sessions if using Windows based authentication for OWA</i></a><i>Â </i>depending on the authentication method you are using.</p>
<h2><a name="Anchor-75" id="Anchor-75"></a>Creating an NTLM Machine Account</h2>
<p>If you are using BIG-IP APM to provide secure authentication and configuring the BIG-IP system for Outlook Anywhere clients using NTLM authentication, you must have an NTLM Machine Account object configured before you can successfully complete the template. Use the following procedure to create the NTLM Machine Account.</p>
<ol style="list-style-position: inside;">
<li>To create the NTLM Machine Account</li>
<li>On the Main tab, expandÂ <b>Access Policy</b>, and then clickÂ <b>Access Profiles</b>.</li>
<li>On the Menu bar, from theÂ <b>NTLM</b>Â menu, clickÂ <b>Machine Account List</b>.</li>
<li>Click theÂ <b>Create</b>Â button.</li>
<li>In theÂ <b>Name</b>Â box, type a name for the BIG-IP Machine Account object. Currently, the NTLM machine account should contain alphanumeric characters and underscores only. Spaces and special characters are not allowed.</li>
<li>In theÂ <b>Machine Account Name</b>Â box, type the name of the computer account that will be created in the domain after clicking Join.</li>
<li>In theÂ <b>Domain FQDN</b>Â box, type the fully qualified domain name of the domain that you want the machine account to join.</li>
<li>In theÂ <b>Domain Controller FQDN</b>Â box, if the machine account should have access to one domain only, type the FQDN for the domain controller for that domain.</li>
<li>In theÂ <b>Admin</b>Â User box, type the name of a user with administrative privileges.</li>
<li>In theÂ <b>Password</b>Â box, type the associated password.</li>
<li>Click theÂ <b>Join</b>Â button.</li>
</ol>
<h2><a name="Anchor-100-2" id="Anchor-100-2"></a>Appendix A: Configuring additional BIG-IP settings</h2>
<p>This section contains information on configuring the BIG-IP system for objects or settings that are required, but not part of the template.</p>
<h2><a name="Anchor-74" id="Anchor-74"></a>Configuring DNS and NTP settings</h2>
<p>If you are configuring the iApp to use BIG-IP APM, you must configure DNS and NTP settings on the BIG-IP system before beginning the iApp.</p>
<h3>Configuring the DNS settings</h3>
<p>In this section, you configure the DNS settings on the BIG-IP system to point to a DNS server that can resolve your Active Directory server or servers. In many cases, this IP address will be that of your Active Directory servers themselves.</p>
<p><b>Note:Â </b>DNS lookups go out over one of the interfaces configured on the BIG-IP system, not the management interface. The management interface has its own, separate DNS settings.</p>
<p><b>Important</b>:Â The BIG-IP system must have a self IP address in the same local subnet and VLAN as the DNS server, or a route to the DNS server if located on a different subnet. The route configuration is found on the Main tab by expanding Network and then clicking Routes. For specific instructions on configuring a route on the BIG-IP system, see the online help or the product documentation.</p>
<ol style="list-style-position: inside;">
<li>To configure DNS settings</li>
<li>On the Main tab, expandÂ <b>System</b>, and then clickÂ <b>Configuration</b>.</li>
<li>On the Menu bar, from theÂ <b>Device</b>Â menu, clickÂ <b>DNS</b>.</li>
<li>In theÂ <b>DNS Lookup Server List</b>Â row, complete the following:</li>
<li>In theÂ <b>Address</b>Â box, type the IP address of a DNS server that can resolve the Active Directory server.</li>
<li>Click theÂ <b>Add</b>Â button.</li>
<li>ClickÂ <b>Update</b>.</li>
</ol>
<h3><a name="Anchor-29" id="Anchor-29"></a>Configuring the NTP settings</h3>
<p>The next task is to configure the NTP settings on the BIG-IP system for authentication to work properly.</p>
<ol style="list-style-position: inside;">
<li>To configure NTP settings</li>
<li>On the Main tab, expandÂ <b>System</b>, and then clickÂ <b>Configuration</b>.</li>
<li>On the Menu bar, from theÂ <b>Device</b>Â menu, clickÂ <b>NTP</b>.</li>
<li>In theÂ <b>Address</b>Â box, type the fully-qualified domain name (or the IP address) of the time server that you want to add to the Address List.</li>
<li>Click theÂ <b>Add</b>Â button.</li>
<li>ClickÂ <b>Update</b>.</li>
</ol>
<p>To verify the NTP setting configuration, you can use theÂ <b>ntpq</b>Â utility. From the command line, run ntpq -np.</p>
<p>SeeÂ <a href="http://support.f5.com/kb/en-us/solutions/public/10000/200/sol10240.html" rel="noreferrer">http://support.f5.com/kb/en-us/solutions/public/10000/200/sol10240.htmlÂ </a>for more information on this command.</p>
<h2><a name="Anchor-117" id="Anchor-117"></a>Appendix B: Using X-Forwarded-For to log the client IP address</h2>
<p>When you configure BIG-IP LTM to use SNAT, the BIG-IP system replaces the source IP address of an incoming connection with its local self IP address (in the case of SNAT Automap), or an address you have configured in a SNAT pool. As a result, Microsoft IIS logs each connection with its assigned SNAT address, rather than the address of the client. The iApp produces an HTTP profile on the BIG-IP system which inserts an X-Forwarded-For header, so the original client IP address is sent as well; however, in default IIS configuration, this information is not logged.</p>
<p>Beginning with IIS 7, Microsoft provides an optional Advanced Logging Feature for IIS that allows you to define custom log definitions that can capture additional information such as the client IP address included in the X-Forwarded-For header.</p>
<h2>Deploying the Custom Logging role service</h2>
<p>The first task is to deploy the Custom Logging role service. If you do not deploy this role service, you may receive a &quot;Feature not supported&quot; error when trying to edit the log definition in the next section.</p>
<ol style="list-style-position: inside;">
<li>To deploy the Custom Logging role service in Windows 2008 and 2008 R2</li>
<li>From your Windows Server 2008 or Windows Server 2008 R2 device, open Server Manager.</li>
<li>In the Navigation pane, expandÂ <b>Roles</b>.</li>
<li>Right-clickÂ <b>Web Server</b>, and then clickÂ <b>Add Role Services</b>.</li>
<li>Under Health and Diagnostics, check the box forÂ <b>Custom Logging</b>, and then clickÂ <b>Next</b>.</li>
<li>On the Confirmation page, clickÂ <b>Install</b>.</li>
<li>After the service has successfully installed, click theÂ <b>Close</b>Â button.</li>
<li>To deploy the Custom Logging role service in Windows 2012 and 2012 R2</li>
<li>From your Windows Server 2012 or Windows Server 2012 R2 device, open Server Manager.</li>
<li>ClickÂ <b>Add Roles and Features</b>.</li>
<li>In the Add Roles and Features wizard, the Custom Logging Role is under theÂ <b>Web Server &gt; Web Server &gt; Health and Diagnostics</b>category.</li>
<li>On the Confirmation page, clickÂ <b>Install</b>.</li>
<li>After the service has successfully installed, click theÂ <b>Close</b>Â button.</li>
</ol>
<h2>Adding the X-Forwarded-For log field to IIS</h2>
<p>Before beginning the following procedure, you must have installed IIS Advanced Logging. For installation instructions, seeÂ <a href="http://www.iis.net/community/files/media/advancedlogging_readme.htm" rel="noreferrer">http://www.iis.net/community/files/media/advancedlogging_readme.htm</a></p>
<p>If you are using IIS version 6, F5 has a downloadable ISAPI filter that performs a similar function to the Advanced Logging Feature discussed here. For information on that solution, see the DevCentral post atÂ <a href="http://devcentral.f5.com/weblogs/Joe/archive/2009/08/19/x_forwarded_for_log_filter_for_windows_servers.aspx" rel="noreferrer">http://devcentral.f5.com/weblogs/Joe/archive/2009/08/19/x_forwarded_for_log_filter_for_windows_servers.aspx</a></p>
<ol style="list-style-position: inside;">
<li>To add the X-Forwarded-For log field to IIS</li>
<li>From your Windows Server 2008 or Windows Server 2008 R2 device, open the Internet Information Services (IIS) Manager.</li>
<li>From the Connections navigation pane, click the appropriate server, web site, or directory on which you are configuring Advanced Logging. The Home page appears in the main panel.</li>
<li>From the Home page, under IIS, double-clickÂ <b>Advanced</b>Â <b>Logging</b>.</li>
<li>From the Actions pane on the right, clickÂ <b>Edit Logging Fields</b>.</li>
<li>From the Edit Logging Fields dialog box, click theÂ <b>Add Field</b>Â button, and then complete the following:</li>
<li>In theÂ <b>Field ID</b>Â box, typeÂ <b>X-Forwarded-For</b>.</li>
<li>From theÂ <b>Category</b>Â list, selectÂ <b>Default</b>.</li>
<li>From theÂ <b>Source Type</b>Â list, selectÂ <b>Request Header</b>.</li>
<li>In theÂ <b>Source Name</b>Â box, type<b>Â X-Forwarded-For</b>.</li>
<li>Click theÂ <b>OK</b>Â button.</li>
<li>Click a Log Definition to select it. By default, there is only one: %COMPUTERNAME%-Server. The log definition you select must have a status of Enabled.</li>
<li>From the Actions pane on the right, clickÂ <b>Edit Log Definition</b>.</li>
<li>Click theÂ <b>Select Fields</b>Â button, and then check the box for the X-Forwarded-For logging field.</li>
<li>Click theÂ <b>OK</b>Â button.</li>
<li>From the Actions pane, clickÂ <b>Apply</b>.</li>
<li>ClickÂ <b>Return To Advanced Logging</b>.</li>
<li>In the Actions pane, clickÂ <b>Enable Advanced Logging</b>.</li>
</ol>
<p>Now, when you look at the logs, the client IP address is included.</p>
<h2><a name="Anchor-100-1" id="Anchor-100-1"></a>Appendix C: Manual configuration tables</h2>
<p>This table contains the BIG-IP configuration objects in this deployment and any non-default settings. See the BIG-IP APM tables for additional APM configuration. Give each BIG-IP object a unique name in theÂ <b>Name</b>Â field. Because of the complexity, we strongly recommend using the iApp to configure Microsoft Exchange Server. Replace any host names (in red) with your host name. Only configure objects for the services you are using.</p>
<p><b>TIP:Â </b>If you are manually configuring the BIG-IP system, you may want to useÂ <b><a href="../../../../content/dam/f5/corp/global/pdf/deployment-guides/microsoft-exchange-2016-dg.pdf">the PDF version of this guide</a></b>Â for easier reading.<br />
<a href="../../../../pdf/deployment-guides/microsoft-exchange-2016-dg.pdf#page=81" rel="noreferrer"></a></p>
</div></div>
<div data-component-type="article" class="a11 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article Image">









<!-- /* Author controlled Height/Width */  -->






<figure id="article487868821" class="a11">
    
    
      <img src="../../../../content/dam/f5-com/page-assets-en/home-en/resources/deployment-guides/manual-config.png" class="img-fluid"/>
      
    
    
</figure>

</div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









<div id="article-966591093" class="a01 "><p><b>Note:Â </b>We recommend using this section to create two monitors for each service, using a second mailbox account. For the external monitors, note that Microsoft only supports SNMPv2 in their default service. If you require SNMP v3 support, seeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-146" rel="noreferrer"><i>Modifying the external monitor script file to support SNMP v3</i></a>.</p>
<h2><b>Configuration table if using a combined virtual server for Exchange HTTP-based services</b></h2>
<h2>Â </h2>
<table border="0" cellspacing="3" cellpadding="0" width="596">
<tbody><tr><td colspan="3" valign="top"><p><b>Health MonitorsÂ </b>(Main tab &gt; Local Traffic &gt; Monitors)</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><a name="Anchor-121" id="Anchor-121"></a>Outlook Web App monitor (includes ECP)</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Simple monitor for OWAÂ </b>Use this monitor for a simple health check</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>HTTP</b>Â (SSL offload),Â <b>HTTPS</b>Â (SSL Bridging)</p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Send String</b></p>
</td>
<td colspan="2" valign="top"><p>GET /owa/healthcheck.htm HTTP/1.1\r\nHost: owa.example.com\r\nConnection: Close\r\n\r\n</p>
</td>
</tr><tr><td valign="top"><p><b>Receive StringÂ </b><i>1</i></p>
</td>
<td colspan="2" valign="top"><p>200 OK</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>External monitor for OWAÂ </b>Use this monitor for a more sophisticated health check</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>External</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>External Program</b></p>
</td>
<td colspan="2" valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-73" rel="noreferrer"><i>Importing the monitor script files</i></a><i>Â for the EAV script file</i></p>
</td>
</tr><tr><td valign="top"><p><b>Variables</b></p>
</td>
<td colspan="2" valign="top"><p><b>Name:Â PASSWORD</b>Â <b>Value:Â Type the SNMPv2 community string for your Mailbox servers.</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><a name="Anchor-123" id="Anchor-123"></a>ActiveSync monitor</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Simple monitor for ActiveSyncÂ </b>Use this monitor for a simple health check</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>HTTP</b>Â (SSL offload),Â <b>HTTPS</b>Â (SSL Bridging)</p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Send String</b></p>
</td>
<td colspan="2" valign="top"><p>GET /Microsoft-Server-Activesync/healthcheck.htm HTTP/1.1\r\nHost: as.example.com\r\nConnection: Close\r\n\r\n</p>
</td>
</tr><tr><td valign="top"><p><b>Receive StringÂ </b><i>1</i></p>
</td>
<td colspan="2" valign="top"><p>200 OK</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>External monitor for ActiveSyncÂ </b>Use this monitor for a more sophisticated health check</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>External</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>External Program</b></p>
</td>
<td colspan="2" valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-73" rel="noreferrer"><i>Importing the monitor script files</i></a><i>Â for the EAV script file</i></p>
</td>
</tr><tr><td valign="top"><p><b>Variables</b></p>
</td>
<td colspan="2" valign="top"><p><b>Name:Â PASSWORD</b>Â <b>Value:Â Type the SNMPv2 community string for your Mailbox servers.</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><a name="Anchor-125" id="Anchor-125"></a>Autodiscover monitor</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Simple monitor for AutodiscoverÂ </b>Use this monitor for a simple health checkÂ <b>Important</b>: : YouÂ <b><i>must</i></b>Â use this monitor if you are using NTLM v2</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>HTTP</b>Â (SSL offload),Â <b>HTTPS</b>Â (SSL Bridging).</p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Send String</b></p>
</td>
<td colspan="2" valign="top"><p>GET /autodiscover/healthcheck.htm HTTP/1.1\r\nHost: ad.example.com\r\nConnection: Close\r\n\r\n</p>
</td>
</tr><tr><td valign="top"><p><b>Receive StringÂ </b><i>1</i></p>
</td>
<td colspan="2" valign="top"><p>200 OK</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><i>1Â This response string is part of a Cookie header that returned by the server. Although you may elect to use another string on the page, it must be on the first 5,120 bytes of the received data (including headers and payload). Strings found near the end of the HTTP response will not be properly detected. See</i>http://support.f5.com/kb/en-us/solutions/public/3000/400/sol3451.htmlÂ <i>for more details.</i></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>External monitor for AutodiscoverÂ </b>Use this monitor for a more sophisticated health check</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>External</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>External Program</b></p>
</td>
<td colspan="2" valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-73" rel="noreferrer"><i>Importing the monitor script files</i></a><i>Â for the EAV script file</i></p>
</td>
</tr><tr><td valign="top"><p><b>Variables</b></p>
</td>
<td colspan="2" valign="top"><p><b>Name:Â PASSWORD</b>Â <b>Value:Â Type the SNMPv2 community string for your Mailbox servers.</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><a name="Anchor-139" id="Anchor-139"></a>Exchange Web Services (EWS) monitor</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Simple monitor for EWSÂ </b>Use this monitor for a simple health checkÂ <b>Important</b>: : YouÂ <b><i>must</i></b>Â use this monitor if you are using NTLM v2</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>HTTP</b>Â (SSL offload),Â <b>HTTPS</b>Â (SSL Bridging)</p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Send String</b></p>
</td>
<td colspan="2" valign="top"><p>GET /EWS/healthcheck.htm HTTP/1.1\r\nHost: ews.example.com\r\nConnection: Close\r\n\r\n</p>
</td>
</tr><tr><td valign="top"><p><b>Receive StringÂ </b><i>1</i></p>
</td>
<td colspan="2" valign="top"><p>200 OK</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>External monitor for EWSÂ </b>Use this monitor for a more sophisticated health check</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>External</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>External Program</b></p>
</td>
<td colspan="2" valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-73" rel="noreferrer"><i>Importing the monitor script files</i></a><i>Â for the EAV script file</i></p>
</td>
</tr><tr><td valign="top"><p><b>Variables</b></p>
</td>
<td colspan="2" valign="top"><p><b>Name:Â PASSWORD</b>Â <b>Value:Â Type the SNMPv2 community string for your Mailbox servers.</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><a name="Anchor-122" id="Anchor-122"></a>Outlook Anywhere monitor</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Simple monitor for Outlook AnywhereÂ </b>Use this monitor for a simple health check.Â <b>Important</b>: : YouÂ <b><i>must</i></b>Â use this monitor if you are using NTLM v2</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>HTTP</b>Â (SSL offload),Â <b>HTTPS</b>Â (SSL Bridging).</p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Send String</b></p>
</td>
<td colspan="2" valign="top"><p>GET /rpc/healthcheck.htm HTTP/1.1\r\nHost: oa.example.com\r\nConnection: Close\r\n\r\n</p>
</td>
</tr><tr><td valign="top"><p><b>Receive StringÂ </b><i>1</i></p>
</td>
<td colspan="2" valign="top"><p>200 OK</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>External monitor for Outlook AnywhereÂ </b>Use this monitor for a more sophisticated health check</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>External</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>External Program</b></p>
</td>
<td colspan="2" valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-73" rel="noreferrer"><i>Importing the monitor script files</i></a><i>Â for the EAV script file</i></p>
</td>
</tr><tr><td valign="top"><p><b>Variables</b></p>
</td>
<td colspan="2" valign="top"><p><b>Name:Â PASSWORD</b>Â <b>Value:Â Type the SNMPv2 community string for your Mailbox servers.</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><a name="Anchor-141" id="Anchor-141"></a>MAPI-over-HTTP monitor</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Simple monitor for MAPI-over-HTTPÂ </b>Use this monitor for a simple health checkÂ <b>Important</b>: : YouÂ <b><i>must</i></b>Â use this monitor if you are using NTLM v2</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>HTTP</b>Â (SSL offload),Â <b>HTTPS</b>Â (SSL Bridging)</p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Send String</b></p>
</td>
<td colspan="2" valign="top"><p>GET /mapi/healthcheck.htm HTTP/1.1\r\nHost: mapi.example.com\r\nConnection: Close\r\n\r\n</p>
</td>
</tr><tr><td valign="top"><p><b>Receive StringÂ </b><i>1</i></p>
</td>
<td colspan="2" valign="top"><p>200 OK</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>External monitor for MAPI-over-HTTPÂ </b>Use this monitor for a more sophisticated health check</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>External</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>External Program</b></p>
</td>
<td colspan="2" valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-73" rel="noreferrer"><i>Importing the monitor script files</i></a><i>Â for the EAV script file</i></p>
</td>
</tr><tr><td valign="top"><p><b>Variables</b></p>
</td>
<td colspan="2" valign="top"><p><b>Name:Â PASSWORD</b>Â <b>Value:Â Type the SNMPv2 community string for your Mailbox servers.</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><i>1Â This response string is part of a Cookie header that returned by the server. Although you may elect to use another string on the page, it must be on the first 5,120 bytes of the received data (including headers and payload). Strings found near the end of the HTTP response will not be properly detected. See</i>http://support.f5.com/kb/en-us/solutions/public/3000/400/sol3451.htmlÂ <i>for more details.</i></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Important:</b>Â <b>Repeat for each Mailbox Server role you are deploying</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Health monitor</i></b></p>
</td>
<td colspan="2" valign="top"><p>Add the appropriate health monitor for the Mailbox role you created above. As noted, if using external monitors, we recommend attaching both simple and external monitors to each pool.</p>
</td>
</tr><tr><td valign="top"><p><b><i>Availability Requirement</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>If attaching more than one health monitor, ensure this is set toAll.</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Slow Ramp Time</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>300Â (must select Advanced from the Configuration menu for this option to appear)</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Load Balancing Method</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Least Connections (member)</b>Â recommended</p>
</td>
</tr><tr><td valign="top"><p><b><i>Address</i></b></p>
</td>
<td colspan="2" valign="top"><p>IP Address of Mailbox server running Outlook Web App</p>
</td>
</tr><tr><td valign="top"><p><b><i>Service Port</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>80Â (443</b>Â if using SSL Bridging) Repeat Address and Port for all members</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>iRulesÂ </b>(Main tab &gt; Local Traffic &gt; iRules)</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>iRules (Local Traffic--&gt;iRules)</p>
</td>
<td valign="top"><p><b><i>OWA Redirect iRule</i></b></p>
</td>
<td valign="top"><p><b>Create the Redirect iRule, using the Definition found onÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-79" rel="noreferrer"><i>pageÂ 83</i></a></p>
</td>
</tr><tr><td valign="top"><p><b><i>Pool Assignment iRule</i></b></p>
</td>
<td valign="top"><p><b>Create the Pool Assignment iRule, using the Definition found onÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-77" rel="noreferrer"><i>pageÂ 83</i></a></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>ProfilesÂ </b>(Main tab &gt; Local Traffic &gt; Profiles)</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>HTTP (Profiles-&gt;Services)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>http</b></p>
</td>
</tr><tr><td valign="top"><p>Redirect Rewrite</p>
</td>
<td valign="top"><p><b>All</b></p>
</td>
</tr><tr><td valign="top"><p><b>HTTP Compression</b>(Profiles-&gt;Services)</p>
</td>
<td valign="top"><p>Content List--&gt;Include List</p>
</td>
<td valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-120" rel="noreferrer"><i>HTTP Compression Content include list</i></a></p>
</td>
</tr><tr><td valign="top"><p><b>Web Acceleration</b>(Profiles &gt;Services)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>optimized-caching</b></p>
</td>
</tr><tr><td valign="top"><p>TCP WAN1 (Profiles &gt;Protocol)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-wan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p>TCP LAN1 (Profiles-&gt;Protocol)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-lan-optimized</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Client SSL</b>(Profiles-&gt;SSL)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>clientssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate/Key</p>
</td>
<td valign="top"><p>Select the Certificate and Key you imported</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Server SSL<i>2</i></b>(Profiles-&gt;SSL)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>serverssl</b></p>
</td>
</tr><tr><td valign="top"><p>Options List</p>
</td>
<td valign="top"><p>If using BIG-IP v11.4.x only, enableÂ <b>No TLSv1.2</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>OneConnect</b>(Profiles-&gt;Other)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>oneconnect</b></p>
</td>
</tr><tr><td valign="top"><p>Source Mask</p>
</td>
<td valign="top"><p><b>255.255.255.255</b></p>
</td>
</tr><tr><td valign="top"><p><b>NTLM</b>(Profiles-&gt;Other)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>ntlm</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Virtual ServersÂ </b>(Main tab &gt; Local Traffic &gt; Virtual Servers)</p>
</td>
</tr><tr><td rowspan="5" valign="top"><p><b><i>Port 443</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port443)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>Add each of the profiles you created above from the appropriate list</b></p>
</td>
</tr><tr><td valign="top"><p>Source Address Translation3</p>
</td>
<td valign="top"><p><b>Auto Map3</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRules</b></p>
</td>
<td valign="top"><p><b>Add the Append and Pool Assignment iRules.If using APMÂ prior to version 11.4, enable the built-in_sys_APM_ExchangeSupport_OA_BasicAuth</b>Rule (or if using 11.3.x and NTLM, _<b>sys_APM_ExchangeSupport_OA_NTLMAuth).</b>Important<i>: The Append iRule must be listed first</i></p>
</td>
</tr><tr><td valign="top"><p><b>Default Pool</b></p>
</td>
<td valign="top"><p><b>DoÂ <i>not</i>Â select a default pool for this virtual</b></p>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b><i>Port 80(optional, for redirect purposes only)</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port80)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>HTTP profile only</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRule</b></p>
</td>
<td valign="top"><p><b>_sys_https_redirect</b></p>
</td>
</tr></tbody></table>
<p>1Â <i>The optimized TCP profiles areÂ optional. If not creating the optimized profiles, create a TCP profile with the base TCP parent</i>Â <i>2Â Server SSL profile is only necessary if configuring SSL Bridging.</i>Â <i>3Â If you expect more than 6,000 concurrent users per Mailbox Server, create a SNAT Pool instead of using Auto Map.Â See the BIG-IP documentation for creating SNAT Pools.Â This field is &quot;SNAT Pool&quot; in versions 11.0 - 11.2.x.</i></p>
<p>This completes the combined virtual manual configuration table. Continue withÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-124" rel="noreferrer"><i>Configuration tables for POP3, and IMAP4Â </i></a>.</p>
<h2><b>Configuration table if using separate virtual servers for Exchange HTTP-based services</b></h2>
<p>Use this section if you are planning to deploy the BIG-IP system with separate virtual servers for the Exchange client access services.</p>
<h2><b>Outlook Web App configuration table - includes the Exchange Control Panel (ECP)</b></h2>
<h2>Â </h2>
<table border="0" cellspacing="3" cellpadding="0" width="540">
<tbody><tr><td colspan="3" valign="top"><p><b>Health MonitorsÂ </b>(Main tab &gt; Local Traffic &gt; Monitors)</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Follow the monitor guidance for OWA in the tableÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-121" rel="noreferrer"><i>Outlook Web App monitor (includes ECP)</i></a></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>PoolsÂ </b>(Main tab--&gt;Local Traffic--&gt;Pools)</p>
</td>
</tr><tr><td valign="top"><p><b><i>Health monitor</i></b></p>
</td>
<td colspan="2" valign="top"><p>Add the health monitor(s) you created</p>
</td>
</tr><tr><td valign="top"><p><b><i>Availability Requirement</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>If attaching more than one health monitor, ensure this is set toÂ All.</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Slow Ramp Time</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>300Â (must select Advanced from the Configuration menu for this option to appear)</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Load Balancing Method</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Least Connections (member)</b>Â recommended</p>
</td>
</tr><tr><td valign="top"><p><b><i>Address</i></b></p>
</td>
<td colspan="2" valign="top"><p>IP Address of Mailbox server running Outlook Web App</p>
</td>
</tr><tr><td valign="top"><p><b><i>Service Port</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>80Â (443</b>Â if using SSL Bridging) Repeat Address and Port for all members</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>iRulesÂ </b>(Main tab &gt; Local Traffic &gt; iRules)</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>iRules (Local Traffic--&gt;iRules)</p>
</td>
<td valign="top"><p><b><i>OWA Redirect iRule</i></b></p>
</td>
<td valign="top"><p><b>Create the Redirect iRule, using the Definition found onÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-79" rel="noreferrer"><i>pageÂ 83</i></a></p>
</td>
</tr><tr><td valign="top"><p><b><i>Pool assignment iRule</i></b></p>
</td>
<td valign="top"><p><b>Create the Pool assignment iRule, using the Definition found onÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-77" rel="noreferrer"><i>pageÂ 83</i></a></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>ProfilesÂ </b>(Main tab &gt; Local Traffic &gt; Profiles)</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>HTTP (Profiles--&gt;Services)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>http</b></p>
</td>
</tr><tr><td valign="top"><p>Redirect Rewrite</p>
</td>
<td valign="top"><p><b>All</b></p>
</td>
</tr><tr><td valign="top"><p><b>HTTP Compression</b>(Profiles--&gt;Services)</p>
</td>
<td valign="top"><p>Content List--&gt;Include List</p>
</td>
<td valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-120" rel="noreferrer"><i>HTTP Compression Content include list</i></a></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Web Acceleration</b>(Profiles--&gt;Services)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>optimized-caching</b></p>
</td>
</tr><tr><td valign="top"><p><b>URI List</b></p>
</td>
<td valign="top"><p>Add the following to theÂ <b>Exclude</b>list:Â <b>/owa/ev.owa</b>Â andÂ <b>uglobal.js</b></p>
</td>
</tr><tr><td valign="top"><p>TCP WAN1 (Profiles--&gt;Protocol)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-wan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p>TCP LAN1 (Profiles--&gt;Protocol)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-lan-optimized</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Client SSL</b>Â (Profiles--&gt;SSL)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>clientssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate/Key</p>
</td>
<td valign="top"><p>Select the Certificate and Key you imported</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Server SSL<i>2</i></b>(Profiles--&gt;SSL)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>serverssl</b></p>
</td>
</tr><tr><td valign="top"><p>Options List</p>
</td>
<td valign="top"><p>If using BIG-IP v11.4.x only, enableÂ <b>No TLSv1.2</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>OneConnect</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>oneconnect</b></p>
</td>
</tr><tr><td valign="top"><p>Source Mask</p>
</td>
<td valign="top"><p><b>255.255.255.255</b></p>
</td>
</tr><tr><td valign="top"><p><b>NTLM</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>ntlm</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Virtual ServersÂ </b>(Main tab &gt; Local Traffic &gt; Virtual Servers)</p>
</td>
</tr><tr><td rowspan="5" valign="top"><p><b><i>Port 443</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service PortÂ 443)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>Add each of the profiles you created above from the appropriate list</b></p>
</td>
</tr><tr><td valign="top"><p>Source Address Translation3</p>
</td>
<td valign="top"><p><b>Auto Map</b>3</p>
</td>
</tr><tr><td valign="top"><p><b>iRules</b></p>
</td>
<td valign="top"><p><b>Append, Pool assignment (the Append iRule must be listed first)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Default Pool</b></p>
</td>
<td valign="top"><p><b>Select the pool you created for Outlook Web App above</b></p>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b><i>Port 80</i></b>Â <b><i>(optional, for redirect purposes only)</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service PortÂ 80)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>HTTP profile only</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRule</b></p>
</td>
<td valign="top"><p><b>_sys_https_redirect</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p>1Â <i>The optimized TCP profiles areÂ optional. If not creating the optimized profiles, create a TCP profile with the base TCP parent</i>Â <i>2Â Server SSL profile is only necessary if configuring SSL Bridging</i>Â <i>3Â If you expect more than 6,000 concurrent users per Mailbox Server, create a SNAT Pool instead of using Auto Map. See the BIG-IP documentation for creating SNAT Pools.</i>Â <i>This field is &quot;SNAT Pool&quot; in versions 11.0 - 11.2.x.</i></p>
</td>
</tr></tbody></table>
<h2><b>Outlook Anywhere configuration table (for separate virtual servers)</b></h2>
<h2>Â </h2>
<table border="0" cellspacing="3" cellpadding="0" width="594">
<tbody><tr><td colspan="3" valign="top"><p><b>Health MonitorsÂ </b>(Main tab &gt; Local Traffic &gt; Monitors)</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Follow the monitor guidance for Outlook Anywhere in the tableÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-122" rel="noreferrer"><i>Outlook Anywhere monitor</i></a></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>PoolsÂ </b>(Main tab &gt; Local Traffic &gt; Pools)</p>
</td>
</tr><tr><td valign="top"><p><b><i>Health monitor</i></b></p>
</td>
<td colspan="2" valign="top"><p>Add the health monitor(s) you created</p>
</td>
</tr><tr><td valign="top"><p><b><i>Availability Requirement</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>If attaching more than one health monitor, ensure this is set toAll.</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Slow Ramp Time</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>300Â (must select Advanced from the Configuration menu for this option to appear)</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Load Balancing Method</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Least Connections (member)</b>Â recommended</p>
</td>
</tr><tr><td valign="top"><p><b><i>Address</i></b></p>
</td>
<td colspan="2" valign="top"><p>IP Address of Mailbox server running Outlook Web App</p>
</td>
</tr><tr><td valign="top"><p><b><i>Service Port</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>80Â (443</b>Â if using SSL Bridging) Repeat Address and Port for all members</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>iRulesÂ </b>(Main tab &gt; Local Traffic &gt; iRules)</p>
</td>
</tr><tr><td valign="top"><p><b><i>OA iRule</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Create the iRule for Outlook Anywhere, using the Definition found onÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-64" rel="noreferrer"><i>pageÂ 84</i></a><i>.</i></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>ProfilesÂ </b>(Main tab &gt; Local Traffic &gt; Profiles)</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>HTTP</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>http</b></p>
</td>
</tr><tr><td valign="top"><p><b>Redirect Rewrite</b></p>
</td>
<td valign="top"><p><b>Matching</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>TCP WAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-wan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p><b>Nagle's Algorithm</b></p>
</td>
<td valign="top"><p><b>DisabledÂ (clear the Enabled check box)</b></p>
</td>
</tr><tr><td valign="top"><p>TCP LAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-lan-optimized</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Client SSL</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>clientssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate/Key</p>
</td>
<td valign="top"><p>Select the Certificate and Key you imported</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Server SSL<i>2</i></b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>serverssl</b></p>
</td>
</tr><tr><td valign="top"><p>Options List</p>
</td>
<td valign="top"><p>If using BIG-IP v11.4.x only, enableÂ <b>No TLSv1.2</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>OneConnect</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>oneconnect</b></p>
</td>
</tr><tr><td valign="top"><p>Source Mask</p>
</td>
<td valign="top"><p><b>255.255.255.255</b></p>
</td>
</tr><tr><td valign="top"><p><b>NTLM</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>ntlm</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Virtual ServersÂ </b>(Main tab &gt; Local Traffic &gt; Virtual Servers)</p>
</td>
</tr><tr><td rowspan="5" valign="top"><p><b><i>Port 443</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port443)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>Add each of the profiles you created above from the appropriate list</b></p>
</td>
</tr><tr><td valign="top"><p>Source Address Translation3</p>
</td>
<td valign="top"><p><b>Auto Map3</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRules</b></p>
</td>
<td valign="top"><p><b>If using APMÂ prior to version 11.4, enable the built-in_sys_APM_ExchangeSupport_OA_BasicAuth</b>rule (or if using 11.3.x and NTLM, _<b>sys_APM_ExchangeSupport_OA_NTLMAuth).</b></p>
</td>
</tr><tr><td valign="top"><p><b>Default Pool</b></p>
</td>
<td valign="top"><p><b>Select the pool you created for Outlook Anywhere above</b></p>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b><i>Port 80(optional, for redirect purposes only)</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port80)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>HTTP profile only</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRule</b></p>
</td>
<td valign="top"><p><b>_sys_https_redirect</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><i>1Â The optimized TCP profiles areÂ optional. If not creating the optimized profiles, create a TCP profile with the base TCP parent</i>Â <i>2Â Server SSL profile is only necessary if configuring SSL Bridging.</i></p>
<p><i>3Â If you expect more than 6,000 concurrent users per Mailbox Server, create a SNAT Pool instead of using Auto Map. See the BIG-IP documentation for creating SNAT Pools.</i>Â <i>This field is &quot;SNAT Pool&quot; in versions 11.0 - 11.2.x.</i></p>
</td>
</tr></tbody></table>
<h2><b>Exchange Web Services configuration table (for separate virtual servers)</b></h2>
<h2>Â </h2>
<table border="0" cellspacing="3" cellpadding="0" width="594">
<tbody><tr><td colspan="3" valign="top"><p><b>Health MonitorsÂ </b>(Main tab &gt; Local Traffic &gt; Monitors)</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Follow the monitor guidance for Outlook Anywhere in the tableÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-139" rel="noreferrer"><i>Exchange Web Services (EWS) monitor</i></a></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>PoolsÂ </b>(Main tab &gt; Local Traffic &gt; Pools)</p>
</td>
</tr><tr><td valign="top"><p><b><i>Health monitor</i></b></p>
</td>
<td colspan="2" valign="top"><p>Add the health monitor(s) you created</p>
</td>
</tr><tr><td valign="top"><p><b><i>Availability Requirement</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>If attaching more than one health monitor, ensure this is set toAll.</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Slow Ramp Time</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>300Â (must select Advanced from the Configuration menu for this option to appear)</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Load Balancing Method</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Least Connections (member)</b>Â recommended</p>
</td>
</tr><tr><td valign="top"><p><b><i>Address</i></b></p>
</td>
<td colspan="2" valign="top"><p>IP Address of Mailbox server running Outlook Web App</p>
</td>
</tr><tr><td valign="top"><p><b><i>Service Port</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>80Â (443</b>Â if using SSL Bridging) Repeat Address and Port for all members</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>iRulesÂ </b>(Main tab &gt; Local Traffic &gt; iRules)</p>
</td>
</tr><tr><td valign="top"><p><b><i>EWS iRule</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Create the iRule for Outlook Anywhere for EWS, using the Definition found onÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-64" rel="noreferrer"><i>pageÂ 84</i></a><i>. If using both services, enable the same iRule</i></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>ProfilesÂ </b>(Main tab &gt; Local Traffic &gt; Profiles)</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>HTTP</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>http</b></p>
</td>
</tr><tr><td valign="top"><p><b>Redirect Rewrite</b></p>
</td>
<td valign="top"><p><b>Matching</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>TCP WAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-wan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p><b>Nagle's Algorithm</b></p>
</td>
<td valign="top"><p><b>DisabledÂ (clear the Enabled check box)</b></p>
</td>
</tr><tr><td valign="top"><p>TCP LAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-lan-optimized</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Client SSL</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>clientssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate/Key</p>
</td>
<td valign="top"><p>Select the Certificate and Key you imported</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Server SSL<i>2</i></b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>serverssl</b></p>
</td>
</tr><tr><td valign="top"><p>Options List</p>
</td>
<td valign="top"><p>If using BIG-IP v11.4.x only, enableÂ <b>No TLSv1.2</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>OneConnect</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>oneconnect</b></p>
</td>
</tr><tr><td valign="top"><p>Source Mask</p>
</td>
<td valign="top"><p><b>255.255.255.255</b></p>
</td>
</tr><tr><td valign="top"><p><b>NTLM</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>ntlm</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Virtual ServersÂ </b>(Main tab &gt; Local Traffic &gt; Virtual Servers)</p>
</td>
</tr><tr><td rowspan="5" valign="top"><p><b><i>Port 443</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port443)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>Add each of the profiles you created above from the appropriate list</b></p>
</td>
</tr><tr><td valign="top"><p>Source Address Translation3</p>
</td>
<td valign="top"><p><b>Auto Map3</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRules</b></p>
</td>
<td valign="top"><p><b>If using APMÂ prior to version 11.4, enable the built-in_sys_APM_ExchangeSupport_OA_BasicAuth</b>rule (or if using 11.3.x and NTLM, _<b>sys_APM_ExchangeSupport_OA_NTLMAuth).</b></p>
</td>
</tr><tr><td valign="top"><p><b>Default Pool</b></p>
</td>
<td valign="top"><p><b>Select the pool you created for Outlook Anywhere above</b></p>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b><i>Port 80(optional, for redirect purposes only)</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port80)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>HTTP profile only</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRule</b></p>
</td>
<td valign="top"><p><b>_sys_https_redirect</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><i>1Â The optimized TCP profiles areÂ optional. If not creating the optimized profiles, create a TCP profile with the base TCP parent</i>Â <i>2Â Server SSL profile is only necessary if configuring SSL Bridging.</i></p>
<p><i>3Â If you expect more than 6,000 concurrent users per Mailbox Server, create a SNAT Pool instead of using Auto Map. See the BIG-IP documentation for creating SNAT Pools.</i>Â <i>This field is &quot;SNAT Pool&quot; in versions 11.0 - 11.2.x.</i></p>
</td>
</tr></tbody></table>
<h2><b>Offline Address book configuration table (for separate virtual servers)</b></h2>
<h2>Â </h2>
<table border="0" cellspacing="3" cellpadding="0" width="592">
<tbody><tr><td colspan="3" valign="top"><p><b>Health MonitorsÂ </b>(Main tab &gt; Local Traffic &gt; Monitors)</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>HTTP</b>Â (SSL offload),Â <b>HTTPS</b>Â (SSL Bridging)</p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Send String</b></p>
</td>
<td colspan="2" valign="top"><p>Send: GET /oab/healthcheck.htm HTTP/1.1\r\nHost: oab.example.com\r\nConnection: Close\r\n\r\n</p>
</td>
</tr><tr><td valign="top"><p><b>Receive StringÂ </b><i>1</i></p>
</td>
<td colspan="2" valign="top"><p>200 OK</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>PoolsÂ </b>(Main tab &gt; Local Traffic &gt; Pools)</p>
</td>
</tr><tr><td valign="top"><p><b><i>Health monitor</i></b></p>
</td>
<td colspan="2" valign="top"><p>Add the health monitor you created</p>
</td>
</tr><tr><td valign="top"><p><b><i>Slow Ramp Time</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>300Â (must select Advanced from the Configuration menu for this option to appear)</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Load Balancing Method</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Least Connections (member)</b>Â recommended</p>
</td>
</tr><tr><td valign="top"><p><b><i>Address</i></b></p>
</td>
<td colspan="2" valign="top"><p>IP Address of Mailbox server running Outlook Web App</p>
</td>
</tr><tr><td valign="top"><p><b><i>Service Port</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>80Â (443</b>Â if using SSL Bridging) Repeat Address and Port for all members</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>iRulesÂ </b>(Main tab &gt; Local Traffic &gt; iRules)</p>
</td>
</tr><tr><td valign="top"><p><b><i>OAB iRule</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Create the iRule for Outlook Anywhere for OAB, using the Definition found onÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-64" rel="noreferrer"><i>pageÂ 84</i></a><i>. If using both services, enable the same iRule</i></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>ProfilesÂ </b>(Main tab &gt; Local Traffic &gt; Profiles)</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>HTTP</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>http</b></p>
</td>
</tr><tr><td valign="top"><p><b>Redirect Rewrite</b></p>
</td>
<td valign="top"><p><b>Matching</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>TCP WAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-wan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p><b>Nagle's Algorithm</b></p>
</td>
<td valign="top"><p><b>DisabledÂ (clear the Enabled check box)</b></p>
</td>
</tr><tr><td valign="top"><p>TCP LAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-lan-optimized</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Client SSL</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>clientssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate/Key</p>
</td>
<td valign="top"><p>Select the Certificate and Key you imported</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Server SSL<i>2</i></b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>serverssl</b></p>
</td>
</tr><tr><td valign="top"><p>Options List</p>
</td>
<td valign="top"><p>If using BIG-IP v11.4.x only, enableÂ <b>No TLSv1.2</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>OneConnect</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>oneconnect</b></p>
</td>
</tr><tr><td valign="top"><p>Source Mask</p>
</td>
<td valign="top"><p><b>255.255.255.255</b></p>
</td>
</tr><tr><td valign="top"><p><b>NTLM</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>ntlm</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Virtual ServersÂ </b>(Main tab &gt; Local Traffic &gt; Virtual Servers)</p>
</td>
</tr><tr><td rowspan="5" valign="top"><p><b><i>Port 443</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port443)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>Add each of the profiles you created above from the appropriate list</b></p>
</td>
</tr><tr><td valign="top"><p>Source Address Translation3</p>
</td>
<td valign="top"><p><b>Auto Map3</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRules</b></p>
</td>
<td valign="top"><p><b>If using APMÂ prior to version 11.4, enable the built-in_sys_APM_ExchangeSupport_OA_BasicAuth</b>rule (or if using 11.3.x and NTLM, _<b>sys_APM_ExchangeSupport_OA_NTLMAuth).</b></p>
</td>
</tr><tr><td valign="top"><p><b>Default Pool</b></p>
</td>
<td valign="top"><p><b>Select the pool you created for Outlook Anywhere above</b></p>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b><i>Port 80(optional, for redirect purposes only)</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port80)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>HTTP profile only</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRule</b></p>
</td>
<td valign="top"><p><b>_sys_https_redirect</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><i>1Â The optimized TCP profiles areÂ optional. If not creating the optimized profiles, create a TCP profile with the base TCP parent</i>Â <i>2Â Server SSL profile is only necessary if configuring SSL Bridging.</i></p>
<p><i>3Â If you expect more than 6,000 concurrent users per Mailbox Server, create a SNAT Pool instead of using Auto Map. See the BIG-IP documentation for creating SNAT Pools.</i>Â <i>This field is &quot;SNAT Pool&quot; in versions 11.0 - 11.2.x.</i></p>
</td>
</tr></tbody></table>
<h2><b>Active Sync manual configuration table (for separate virtual server configuration)</b></h2>
<h2>Â </h2>
<table border="0" cellspacing="3" cellpadding="0" width="594">
<tbody><tr><td colspan="3" valign="top"><p><b>Health MonitorsÂ </b>(Main tab &gt; Local Traffic &gt; Monitors)</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Follow the monitor guidance for ActiveSync in the tableÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-123" rel="noreferrer"><i>ActiveSync monitor</i></a></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>PoolsÂ </b>(Main tab &gt; Local Traffic &gt; Pools)</p>
</td>
</tr><tr><td valign="top"><p><b><i>Health monitor</i></b></p>
</td>
<td colspan="2" valign="top"><p>Add health monitor(s) above</p>
</td>
</tr><tr><td valign="top"><p><b><i>Availability Requirement</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>If attaching more than one health monitor, ensure this is set toAll.</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Slow Ramp Time</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>300</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Load Balancing Method</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Least Connections (member)</b>Â recommended</p>
</td>
</tr><tr><td valign="top"><p><b><i>Address</i></b></p>
</td>
<td colspan="2" valign="top"><p>IP Address of Mailbox server running ActiveSync</p>
</td>
</tr><tr><td valign="top"><p><b><i>Service Port</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>80Â </b>(<b>443</b>Â if configuring SSL Bridging) Repeat Address and Port for all members</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>ProfilesÂ </b>(Main tab &gt; Local Traffic &gt; Pools)</p>
</td>
</tr><tr><td valign="top"><p>HTTP</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>http</b></p>
</td>
</tr><tr><td valign="top"><p>TCP WAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-wan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p>TCP LAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-lan-optimized</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Client SSL</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>clientssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate/Key</p>
</td>
<td valign="top"><p>Select the Certificate and Key you imported</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Server SSL<i>2</i></b>(Profiles--&gt;SSL)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>serverssl</b></p>
</td>
</tr><tr><td valign="top"><p>Options List</p>
</td>
<td valign="top"><p>If using BIG-IP v11.4.x only, enableÂ <b>No TLSv1.2</b></p>
</td>
</tr><tr><td valign="top"><p>OneConnect</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>oneconnect</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Virtual ServersÂ </b>(Main tab &gt; Local Traffic &gt; Virtual Servers)</p>
</td>
</tr><tr><td rowspan="5" valign="top"><p><b><i>Port 443</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port443)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>Add each of the profiles you created above from the appropriate list</b></p>
</td>
</tr><tr><td valign="top"><p>Source Address Translation3</p>
</td>
<td valign="top"><p><b>Auto Map3</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRules</b></p>
</td>
<td valign="top"><p><b>Enable the ActiveSync Persist iRule you created. If using APMÂ prior to version 11.4, enable the built-in_sys_APM_ExchangeSupport_OA_BasicAuth</b>rule (or if using 11.3.x and NTLM, _<b>sys_APM_ExchangeSupport_OA_NTLMAuth).</b></p>
</td>
</tr><tr><td valign="top"><p><b>Default Pool</b></p>
</td>
<td valign="top"><p><b>Select the pool you created for ActiveSync above</b></p>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b><i>Port 80(optional, for redirect purposes only)</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port80)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>HTTP profile only</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRule</b></p>
</td>
<td valign="top"><p><b>_sys_https_redirect</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><i>1Â The optimized TCP profiles areÂ optional. If not creating the optimized profiles, create a TCP profile with the base TCP parent</i>Â <i>2Â Server SSL profile is only necessary if configuring SSL Bridging.</i></p>
<p><i>3Â If you expect more than 6,000 concurrent users per Mailbox Server, create a SNAT Pool instead of using Auto Map. See the BIG-IP documentation for creating SNAT Pools.</i>Â <i>This field is &quot;SNAT Pool&quot; in versions 11.0 - 11.2.x.</i></p>
</td>
</tr></tbody></table>
<h2><b>Autodiscover manual configuration table (for separate virtual server configuration)</b></h2>
<h2>Â </h2>
<table border="0" cellspacing="3" cellpadding="0" width="589">
<tbody><tr><td colspan="3" valign="top"><p><b>Health MonitorsÂ </b>(Main tab &gt; Local Traffic &gt; Monitors)</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Follow the monitor guidance for Outlook Anywhere in the tableÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-125" rel="noreferrer"><i>Autodiscover monitor</i></a></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>PoolsÂ </b>(Main tab &gt; Local Traffic &gt; Pools)</p>
</td>
</tr><tr><td valign="top"><p><b><i>Health monitor</i></b></p>
</td>
<td colspan="2" valign="top"><p>Add health monitor(s) above</p>
</td>
</tr><tr><td valign="top"><p><b><i>Availability Requirement</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>If attaching more than one health monitor, ensure this is set toAll.</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Slow Ramp Time</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>300</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Load Balancing Method</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Least Connections (member)</b>Â recommended</p>
</td>
</tr><tr><td valign="top"><p><b><i>Address</i></b></p>
</td>
<td colspan="2" valign="top"><p>IP Address of Mailbox server running ActiveSync</p>
</td>
</tr><tr><td valign="top"><p><b><i>Service Port</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>80Â </b>(<b>443</b>Â if configuring SSL Bridging) Repeat Address and Port for all members</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>ProfilesÂ </b>(Main tab &gt; Local Traffic &gt; Profiles)</p>
</td>
</tr><tr><td valign="top"><p>HTTP</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>http</b></p>
</td>
</tr><tr><td valign="top"><p>TCP WAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-wan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p>TCP LAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-lan-optimized</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Client SSL</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>clientssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate/Key</p>
</td>
<td valign="top"><p>Select the Certificate and Key you imported</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Server SSL<i>2</i></b>(Profiles--&gt;SSL)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>serverssl</b></p>
</td>
</tr><tr><td valign="top"><p>Options List</p>
</td>
<td valign="top"><p>If using BIG-IP v11.4.x only, enableÂ <b>No TLSv1.2</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Virtual ServersÂ </b>(Main tab &gt; Local Traffic &gt; Virtual Servers)</p>
</td>
</tr><tr><td rowspan="5" valign="top"><p><b><i>Port 443</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port443)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>Add each of the profiles you created above from the appropriate list</b></p>
</td>
</tr><tr><td valign="top"><p>Source Address Translation3</p>
</td>
<td valign="top"><p><b>Auto Map3</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRules</b></p>
</td>
<td valign="top"><p><b>If using APMÂ prior to version 11.4, enable the built-in_sys_APM_ExchangeSupport_OA_BasicAuth</b>rule (or if using 11.3.x and NTLM, _<b>sys_APM_ExchangeSupport_OA_NTLMAuth)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Default Pool</b></p>
</td>
<td valign="top"><p><b>Select the pool you created for Autodiscover above</b></p>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b><i>Port 80(optional, for redirect purposes only)</i></b></p>
</td>
<td valign="top"><p><b>Destination Address</b></p>
</td>
<td valign="top"><p><b>IP address for the virtual server (Service Port80)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td valign="top"><p><b>HTTP profile only</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRule</b></p>
</td>
<td valign="top"><p><b>_sys_https_redirect</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><i>1Â The optimized TCP profiles areÂ optional. If not creating the optimized profiles, create a TCP profile with the base TCP parent</i>Â <i>2Â Server SSL profile is only necessary if configuring SSL Bridging.</i></p>
<p><i>3Â If you expect more than 6,000 concurrent users per Mailbox Server, create a SNAT Pool instead of using Auto Map. See the BIG-IP documentation for creating SNAT Pools.</i>Â <i>This field is &quot;SNAT Pool&quot; in versions 11.0 - 11.2.x.</i></p>
</td>
</tr></tbody></table>
<h3><a name="Anchor-124" id="Anchor-124"></a><b>Configuration tables for POP3, and IMAP4</b></h3>
<p>Use the following tables for POP3, and IMAP4, no matter which HTTP-based configuration you chose in the tables on the previous pages. Use the table appropriate for your configuration.</p>
<h2><b>POP3 manual configuration table</b></h2>
<h2>Â </h2>
<table border="0" cellspacing="3" cellpadding="0" width="540">
<tbody><tr><td colspan="4" valign="top"><p><b>Health MonitorsÂ </b>(Main tab &gt; Local Traffic &gt; Monitors)</p>
</td>
</tr><tr><td valign="top"><p><b><i>Type</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>POP3</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="3" valign="top"><p><b>30</b>Â (recommended)</p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="3" valign="top"><p><b>91</b>Â (recommended)</p>
</td>
</tr><tr><td valign="top"><p><b><i>User Name</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>If offloading SSL, type a user name of a POP3 account</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Password</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>If offloading SSL, type the associated password</b></p>
</td>
</tr><tr><td colspan="4" valign="top"><p><b>External monitor for POP3S (only necessary if using SSL Bridging)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="3" valign="top"><p><b>External</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="3" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="3" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>External Program</b></p>
</td>
<td colspan="3" valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-73" rel="noreferrer"><i>Importing the monitor script files</i></a><i>Â for the EAV script</i></p>
</td>
</tr><tr><td valign="top"><p><b>Variables</b></p>
</td>
<td colspan="2" valign="top"><table border="0" cellspacing="3" cellpadding="0">
<tbody><tr><td><p><b>Name</b></p>
</td>
<td><p>Value</p>
</td>
</tr><tr><td><p><b>USER PASSWORD DOMAIN EMAIL</b></p>
</td>
<td><p>The account name associated with a mailbox. The password for the account The Windows domain for the account The email address for the user mailbox (such as j.smith@example.com)</p>
</td>
</tr></tbody></table>
</td>
<td valign="top">Â </td>
</tr><tr><td colspan="4" valign="top"><p><b>PoolsÂ </b>(Main tab &gt; Local Traffic &gt; Pools)</p>
</td>
</tr><tr><td valign="top"><p><b><i>Health monitor</i></b></p>
</td>
<td colspan="3" valign="top"><p>Add health monitor(s) above</p>
</td>
</tr><tr><td valign="top"><p><b><i>Availability Requirement</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>If attaching more than one health monitor, ensure this is set toÂ All.</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Slow Ramp Time</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>300</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Load Balancing Method</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>Least Connections (member)</b>Â recommended</p>
</td>
</tr><tr><td valign="top"><p><b><i>Address</i></b></p>
</td>
<td colspan="3" valign="top"><p>IP Address of Mailbox server running POP3</p>
</td>
</tr><tr><td valign="top"><p><b><i>Service Port</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>If offloading SSL (POP3):Â 110Â If using SSL Bridging (POP3S):Â 995Â </b>(repeat Address and Port for all members)</p>
</td>
</tr><tr><td colspan="4" valign="top"><p><b>ProfilesÂ </b>(Main tab &gt; Local Traffic &gt; Profiles)</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>Client SSL</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td colspan="2" valign="top"><p><b>clientssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate/Key</p>
</td>
<td colspan="2" valign="top"><p>Select the Certificate and Key you imported</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Server SSL<i>2</i></b>(Profiles--&gt;SSL)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td colspan="2" valign="top"><p><b>serverssl</b></p>
</td>
</tr><tr><td valign="top"><p>Options List</p>
</td>
<td colspan="2" valign="top"><p>If using BIG-IP v11.4.x only, enableÂ <b>No TLSv1.2</b></p>
</td>
</tr><tr><td valign="top"><p>TCP WAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td colspan="2" valign="top"><p><b>tcp-wan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p>TCP LAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td colspan="2" valign="top"><p><b>tcp-lan-optimized</b></p>
</td>
</tr><tr><td colspan="4" valign="top"><p><b>Virtual ServersÂ </b>(Main tab &gt; Local Traffic &gt; Profiles)</p>
</td>
</tr><tr><td valign="top"><p><b>Destination Address</b></p>
</td>
<td colspan="3" valign="top"><p><b>IP address for the virtual server</b></p>
</td>
</tr><tr><td valign="top"><p><b>Service Port</b></p>
</td>
<td colspan="3" valign="top"><p><b>If offloading SSL (POP3):Â 110Â If using SSL Bridging (POP3S):Â 995</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td colspan="3" valign="top"><p><b>Add each of the profiles you created above from the appropriate list</b></p>
</td>
</tr><tr><td valign="top"><p>Source Address Translation</p>
</td>
<td colspan="3" valign="top"><p><b>Auto Map3</b></p>
</td>
</tr><tr><td valign="top"><p><b>Default Pool</b></p>
</td>
<td colspan="3" valign="top"><p><b>Select the pool you created for POP3</b></p>
</td>
</tr><tr><td colspan="4" valign="top"><p><i>1Â The optimized TCP profiles areÂ optional. If not creating the optimized profiles, create a TCP profile with the base TCP parent</i>Â <i>2Â Server SSL profile is only necessary if configuring SSL Bridging.</i></p>
<p><i>3Â If you expect more than 6,000 concurrent users per Mailbox Server, create a SNAT Pool instead of using Auto Map. See the BIG-IP documentation for creating SNAT Pools.</i>Â <i>This field is &quot;SNAT Pool&quot; in versions 11.0 - 11.2.x.</i></p>
</td>
</tr><tr><td width="191">Â </td>
<td width="465">Â </td>
<td width="3">Â </td>
<td width="152">Â </td>
</tr></tbody></table>
<p><b>IMAP4 manual configuration table</b></p>
<p>Â </p>
<table border="0" cellspacing="3" cellpadding="0" width="540">
<tbody><tr><td colspan="4" valign="top"><p><b>Health MonitorsÂ </b>(Main tab &gt; Local Traffic &gt; Monitors)</p>
</td>
</tr><tr><td valign="top"><p><b><i>Type</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>IMAP4</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="3" valign="top"><p><b>30</b>Â (recommended)</p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="3" valign="top"><p><b>91</b>Â (recommended)</p>
</td>
</tr><tr><td valign="top"><p><b><i>User Name</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>If offloading SSL, type a user name of a IMAP4 account</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Password</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>If offloading SSL, type the associated password</b></p>
</td>
</tr><tr><td colspan="4" valign="top"><p><b>External monitor for IMAP4S (only necessary if using SSL Bridging)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="3" valign="top"><p><b>External</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="3" valign="top"><p><b>30Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="3" valign="top"><p><b>91Â (recommended)</b></p>
</td>
</tr><tr><td valign="top"><p><b>External Program</b></p>
</td>
<td colspan="3" valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-73" rel="noreferrer"><i>Importing the monitor script files</i></a><i>Â for the EAV script</i></p>
</td>
</tr><tr><td valign="top"><p><b>Variables</b></p>
</td>
<td colspan="2" valign="top"><table border="0" cellspacing="3" cellpadding="0">
<tbody><tr><td><p><b>Name</b></p>
</td>
<td><p>Value</p>
</td>
</tr><tr><td><p><b>USER PASSWORD DOMAIN EMAIL</b></p>
</td>
<td><p>The account name associated with a mailbox. The password for the account The Windows domain for the account The email address for the user mailbox (such as j.smith@example.com)</p>
</td>
</tr></tbody></table>
</td>
<td valign="top">Â </td>
</tr><tr><td colspan="4" valign="top"><p><b>PoolsÂ </b>(Main tab &gt; Local Traffic &gt; Pools)</p>
</td>
</tr><tr><td valign="top"><p><b><i>Health monitor</i></b></p>
</td>
<td colspan="3" valign="top"><p>Add health monitor(s) above</p>
</td>
</tr><tr><td valign="top"><p><b><i>Availability Requirement</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>If attaching more than one health monitor, ensure this is set toÂ All.</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Slow Ramp Time</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>300</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Load Balancing Method</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>Least Connections (member)</b>Â recommended</p>
</td>
</tr><tr><td valign="top"><p><b><i>Address</i></b></p>
</td>
<td colspan="3" valign="top"><p>IP Address of Mailbox server running IMAP4</p>
</td>
</tr><tr><td valign="top"><p><b><i>Service Port</i></b></p>
</td>
<td colspan="3" valign="top"><p><b>If offloading SSL (IMAP4):Â 143Â If using SSL Bridging (IMAP4S):Â 993Â </b>(repeat Address and Port for all members)</p>
</td>
</tr><tr><td colspan="4" valign="top"><p><b>ProfilesÂ </b>(Main tab &gt; Local Traffic &gt; Profiles)</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>Client SSL</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td colspan="2" valign="top"><p><b>clientssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate/Key</p>
</td>
<td colspan="2" valign="top"><p>Select the Certificate and Key you imported</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Server SSL<i>2</i></b>(Profiles--&gt;SSL)</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td colspan="2" valign="top"><p><b>serverssl</b></p>
</td>
</tr><tr><td valign="top"><p>Options List</p>
</td>
<td colspan="2" valign="top"><p>If using BIG-IP v11.4.x only, enableÂ <b>No TLSv1.2</b></p>
</td>
</tr><tr><td valign="top"><p>TCP WAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td colspan="2" valign="top"><p><b>tcp-wan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p>TCP LAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td colspan="2" valign="top"><p><b>tcp-lan-optimized</b></p>
</td>
</tr><tr><td colspan="4" valign="top"><p><b>Virtual ServersÂ </b>(Main tab &gt; Local Traffic &gt; Profiles)</p>
</td>
</tr><tr><td valign="top"><p><b>Destination Address</b></p>
</td>
<td colspan="3" valign="top"><p><b>IP address for the virtual server</b></p>
</td>
</tr><tr><td valign="top"><p><b>Service Port</b></p>
</td>
<td colspan="3" valign="top"><p><b>If offloading SSL (IMAP4):Â 143Â If using SSL Bridging (IMAP4S):Â 993</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td colspan="3" valign="top"><p><b>Add each of the profiles you created above from the appropriate list</b></p>
</td>
</tr><tr><td valign="top"><p>Source Address Translation</p>
</td>
<td colspan="3" valign="top"><p><b>Auto Map3</b></p>
</td>
</tr><tr><td valign="top"><p><b>Default Pool</b></p>
</td>
<td colspan="3" valign="top"><p><b>Select the pool you created for IMAP4</b></p>
</td>
</tr><tr><td colspan="4" valign="top"><p><i>1Â The optimized TCP profiles areÂ optional. If not creating the optimized profiles, create a TCP profile with the base TCP parent</i>Â <i>2Â Server SSL profile is only necessary if configuring SSL Bridging.</i></p>
<p><i>3Â If you expect more than 6,000 concurrent users per Mailbox Server, create a SNAT Pool instead of using Auto Map. See the BIG-IP documentation for creating SNAT Pools.</i>Â <i>This field is &quot;SNAT Pool&quot; in versions 11.0 - 11.2.x.</i></p>
</td>
</tr><tr><td width="191">Â </td>
<td width="465">Â </td>
<td width="3">Â </td>
<td width="152">Â </td>
</tr></tbody></table>
<h2><a name="Anchor-94" id="Anchor-94"></a><a name="Anchor-134" id="Anchor-134"></a><b>Manually configuring MAPI over HTTP in Exchange</b></h2>
<p>Introduced in Exchange 2013 SP1 and in Exchange 2016, the new MAPI over HTTP transport protocol is for Outlook clients running Office 2013 SP1 and later (only).</p>
<p>If you are using the new MAPI over HTTP transport protocol, use the following guidance to create the objects necessary to support MAPI over HTTP. If you configured the iApp template to use a combined virtual server, you create a health monitor, pool, and an iRule.</p>
<p><b>Important</b>:Â <b>If using APM v11.x only:Â </b>Because BIG-IP APM is not yet supported for MAPI over HTTP in v11.x, the iRule in the following table includes a line (commented out by default) to disable Access Policy processing for this new protocol only. If you configured the iApp to use separate virtual servers, you create the monitor, pool, and a virtual server. The iRule is not necessary at all in this case. In APM v12.0 and later, the Exchange APM profile options you configure for Outlook Anywhere also apply to MAPI over HTTP.</p>
<p>Use the following table to create the objects on the BIG-IP LTM. Unless otherwise specified, settings not mentioned in the table can be configured as applicable for your configuration. For help configuring individual objects, see the Help tab or product manuals.</p>
<p>Â </p>
<table border="0" cellspacing="3" cellpadding="0" width="540">
<tbody><tr><td colspan="3" valign="top"><p><b>Health MonitorsÂ </b>(Main tab--&gt;Local Traffic--&gt;Monitors)</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Follow the monitor guidance for MAPI-over-HTTP in the tableÂ </b><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-141" rel="noreferrer"><i>MAPI-over-HTTP monitor</i></a></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>PoolsÂ </b>(Main tab--&gt;Local Traffic --&gt;Pools)</p>
</td>
</tr><tr><td valign="top"><p><b>Name</b></p>
</td>
<td colspan="2" valign="top"><p>Type a unique name</p>
</td>
</tr><tr><td valign="top"><p><b>Health Monitor</b></p>
</td>
<td colspan="2" valign="top"><p>Select the monitor you created above. If you are using the External monitor, add both the advanced and simple monitor.</p>
</td>
</tr><tr><td valign="top"><p><b><i>Availability Requirement</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>If attaching more than one health monitor, ensure this is set toÂ All.</b></p>
</td>
</tr><tr><td valign="top"><p><b>Load Balancing Method</b></p>
</td>
<td colspan="2" valign="top"><p><b>Least Connections (Member)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Address</b></p>
</td>
<td colspan="2" valign="top"><p>Type the IP Address of your server</p>
</td>
</tr><tr><td valign="top"><p><b>Service Port</b></p>
</td>
<td colspan="2" valign="top"><p><b>80Â </b>(if using SSL offload)<b>Â </b>orÂ <b>443Â </b>(if using SSL bridging)Â <b>ClickÂ AddÂ to repeat Address and Service Port for all nodes</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>ProfilesÂ </b>(Main tab--&gt;Local Traffic --&gt;Profiles)</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>HTTP</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>http</b></p>
</td>
</tr><tr><td valign="top"><p><b>Redirect Rewrite</b></p>
</td>
<td valign="top"><p><b>Matching</b></p>
</td>
</tr><tr><td valign="top"><p>TCP WAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-wan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p>TCP LAN1</p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-lan-optimized</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Client SSL</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>clientssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate/Key</p>
</td>
<td valign="top"><p>Select the Certificate and Key you imported</p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Server SSL<i>2</i></b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>serverssl</b></p>
</td>
</tr><tr><td valign="top"><p>Options List</p>
</td>
<td valign="top"><p>If using BIG-IP v11.4.x only, enableÂ <b>No TLSv1.2</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>OneConnect</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>oneconnect</b></p>
</td>
</tr><tr><td valign="top"><p>Source Mask</p>
</td>
<td valign="top"><p><b>255.255.255.255</b></p>
</td>
</tr><tr><td valign="top"><p><b>NTLM</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>ntlm</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>iRulesÂ </b>(Main tab--&gt;Local Traffic --&gt;iRules)Â <b>This iRule is for theÂ combinedvirtual server scenario only</b></p>
</td>
</tr><tr><td valign="top"><p><b>Name</b></p>
</td>
<td colspan="2" valign="top"><p>Type a unique name</p>
</td>
</tr><tr><td valign="top"><p><b>Definition</b></p>
</td>
<td colspan="2" valign="top"><p>See the following section<i>Â for the iRule definition and instructions on attaching the iRule to the virtual server using the iApp.</i></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Virtual ServersÂ </b>(Main tab--&gt;Local Traffic --&gt;Virtual Servers)Â <b>This virtual server is only for theÂ separateÂ virtual server scenario</b></p>
</td>
</tr><tr><td valign="top"><p><b>Destination Address</b></p>
</td>
<td colspan="2" valign="top"><p><b>IP address for the virtual server</b></p>
</td>
</tr><tr><td valign="top"><p><b>Service Port</b></p>
</td>
<td colspan="2" valign="top"><p><b>443</b></p>
</td>
</tr><tr><td valign="top"><p><b>Profiles</b></p>
</td>
<td colspan="2" valign="top"><p><b>Add each of the profiles you created from the appropriate list</b></p>
</td>
</tr><tr><td valign="top"><p><b>Secure Address Translation</b></p>
</td>
<td colspan="2" valign="top"><p><b>Auto Map3</b></p>
</td>
</tr><tr><td valign="top"><p><b>iRules</b></p>
</td>
<td colspan="2" valign="top"><p><b>If using a combined virtual server,</b></p>
</td>
</tr><tr><td valign="top"><p><b>Default Pool</b></p>
</td>
<td colspan="2" valign="top"><p><b>Select the pool you created for MAPI over HTTP</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><i>1Â The optimized TCP profiles areÂ optional. If not creating the optimized profiles, create a TCP profile with the base TCP parent</i>Â <i>2Â Server SSL profile is only necessary if configuring SSL Bridging.</i></p>
<p><i>3Â If you expect more than 6,000 concurrent users per Mailbox Server, create a SNAT Pool instead of using Auto Map. See the BIG-IP documentation for creating SNAT Pools.</i>Â <i>This field is &quot;SNAT Pool&quot; in versions 11.0 - 11.2.x.</i></p>
</td>
</tr></tbody></table>
<h2><a name="Anchor-48" id="Anchor-48"></a><b>Creating the iRule definition for the combined virtual server scenario</b></h2>
<p>Use the following for the Definition of the iRule, omitting the line numbers, andÂ <b><i>changing the red text to the name your pool</i></b>. If you want MAPI over HTTP to bypass the BIG-IP APM, remove the comment (#) from line 5.</p>
<p>Do not uncomment line 5 if you are using BIG-IP APM v12.0 or later.</p>
<table border="0" cellspacing="3" cellpadding="0" width="540">
<tbody><tr><td valign="top"><p>1</p>
<p>2</p>
<p>3</p>
<p>4</p>
<p>5</p>
<p>6</p>
<p>7</p>
<p>8</p>
<p>9</p>
<p>10</p>
<p>11</p>
<p>12</p>
</td>
<td valign="top"><pre>
when HTTP_REQUEST {
</pre>
<pre>
switch -glob -- [string tolower [HTTP::path]] {
</pre>
<pre>
&quot;/mapi*&quot; {
</pre>
<pre>
###uncomment the following line to bypass APM for MAPI-over-HTTP in v11.x ONLY
</pre>
<pre>
#ACCESS::disable
</pre>
<pre>
pool mapi_http_pool
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
</td>
</tr></tbody></table>
<h2><b>External monitor script files</b></h2>
<p>This section contains the EAV script code referred to from the manual configuration table. To use these external monitors, you must have SNMP enabled on each Mailbox server in the pool.</p>
<h3><a name="Anchor-73" id="Anchor-73"></a><b>Importing the monitor script files</b></h3>
<p>Before you can create the external monitors, you must download and import the applicable monitor files onto the BIG-IP system.</p>
<p><b>Note:Â </b>If you are using a redundant BIG-IP system, you need to make sure any modifications to the script EAVs are manually copied between BIG-IP LTM devices, and given the required permissions when configuration is synchronized.</p>
<ol>
<li>To download and install the script</li>
<li>Download the appropriate script:</li>
</ol>
<ul>
<li><b>For all client access services (does not include POP/IMAP)</b><a href="../../../../content/dam/f5/corp/global/pdf/deployment-guides/cas-external-monitor-script.zip">http://www.f5.com/pdf/deployment-guides/cas-external-monitor-script.zip</a>Â While you use this same script file for all client access service external monitors, you create a separate monitor object for each service as shown in the manual configuration table.</li>
<li><b>POP3</b>Â <a href="../../../../content/dam/f5/corp/global/pdf/deployment-guides/pop-external-monitor-script.zip">http://www.f5.com/pdf/deployment-guides/pop-external-monitor-script.zip</a></li>
<li><b>IMAP4</b>Â <a href="../../../../content/dam/f5/corp/global/pdf/deployment-guides/imap-external-monitor-script.zip">http://www.f5.com/pdf/deployment-guides/imap-external-monitor-script.zip</a></li>
</ul>
<ol>
<li>Extract the appropriate file(s) to a location accessible by the BIG-IP system.</li>
<li>From the Main tab of the BIG-IP Configuration utility, expandÂ <b>System</b>, and then clickÂ <b>File Management</b>.</li>
<li>On the Menu bar, clickÂ <b>External Monitor Program File List</b>.</li>
<li>Click theÂ <b>Import</b>Â button.</li>
<li>In theÂ <b>File Name</b>Â row, clickÂ <b>Browse</b>, and then locate the appropriate file.</li>
<li>In theÂ <b>Name</b>Â box, type a name for the file related to the script you are using.</li>
<li>Click theÂ <b>Import</b>Â button.</li>
</ol>
<p>Now when you create the external monitors, you can select the name of the file you imported from theÂ <b>External ProgramÂ </b>list.</p>
<h2><b>iRules</b></h2>
<p>This section contains the iRules referenced from the manual configuration tables. The line numbers in this section are provided for reference only. Create a new iRule and copy the code, omitting the line numbers. In many of the rules, you need need to modify pool names according to your configuration.</p>
<p>To create an iRule, from the Main tab, expandÂ <b>Local Traffic</b>, and then clickÂ <b>iRules</b>. ClickÂ <b>Create</b>, give the iRule a unique name, and then copy and paste the iRule code into theÂ <b>Definition</b>Â section (omitting the line numbers). If specified, you must replace any parts of the code in red text with the names of the appropriate BIG-IP object.</p>
<h3><a name="Anchor-79" id="Anchor-79"></a><b>OWA Redirect iRule (formerly referred to as the Append iRule)</b></h3>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
if { ([HTTP::uri] == &quot;/&quot;) } {
</pre>
<pre>
HTTP::redirect https://[HTTP::host]/owa/
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<p><i>This iRule should appear at the top of the iRule list in the virtual server and come before any iRules you might use.</i></p>
<h3><a name="Anchor-93" id="Anchor-93"></a><a name="Anchor-77" id="Anchor-77"></a><b>Pool Assignment iRule if using a single virtual server for all HTTP-based services For this configuration, you must create an additional iRule which changes the pool based on the service being accessed.</b></h3>
<p><b>CriticalÂ </b>You must change the pool names in the following iRules (shown in red) to match the pools in your configuration.</p>
<h3><b>Pool Assignment iRule if using a single virtual server for all HTTP-based services</b></h3>
<pre>
## iRule to select pool when all Exchange Mailbox HTTP-based services are
</pre>
<pre>
## accessed through the same BIG-IP virtual server.
</pre>
<pre>
## CHANGE ALL POOL NAMES TO MATCH THOSE IN YOUR ENVIRONMENT.
</pre>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
switch -glob -- [string tolower [HTTP::path]] {
</pre>
<pre>
&quot;/microsoft-server-activesync*&quot; {
</pre>
<pre>
## ActiveSync.
</pre>
<pre>
pool as_pool_name
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/owa*&quot; {
</pre>
<pre>
## Outlook Web Access
</pre>
<pre>
pool owa_pool_name
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/ecp*&quot; {
</pre>
<pre>
## Exchange Control Panel.
</pre>
<pre>
pool owa_pool_name
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/ews*&quot; {
</pre>
<pre>
## Exchange Web Services.
</pre>
<pre>
pool oa_pool_name
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/oab*&quot; {
</pre>
<pre>
## Offline Address Book.
</pre>
<pre>
pool oa_pool_name
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/rpc/rpcproxy.dll*&quot; {
</pre>
<pre>
## Outlook Anywhere.
</pre>
<pre>
pool oa_pool_name
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/mapi*&quot; {
</pre>
<pre>
## mapi.
</pre>
<pre>
pool mapi_pool_name
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/autodiscover*&quot; {
</pre>
<pre>
## Autodiscover.
</pre>
<pre>
pool ad_pool_name
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
default {
</pre>
<pre>
## This final section takes all traffic that has not otherwise
</pre>
<pre>
## been accounted for and sends it to the pool for Outlook Web App
</pre>
<pre>
pool owa_pool_name
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
when HTTP_RESPONSE {
</pre>
<pre>
if { ( [HTTP::header exists &quot;WWW-Authenticate&quot;] &amp;&amp; [string tolower [HTTP::header values &quot;WWW-Authenticate&quot;]] contains &quot;negotiate&quot; ) ||
</pre>
<pre>
( [HTTP::header exists &quot;Persistent-Auth&quot;] &amp;&amp; [string tolower [HTTP::header &quot;Persistent-Auth&quot;]] contains &quot;true&quot; ) } {
</pre>
<pre>
ONECONNECT::reuse disable
</pre>
<pre>
ONECONNECT::detach disable
</pre>
<pre>
## disables NTLM conn pool for connections where OneConnect has been disabled
</pre>
<pre>
NTLM::disable
</pre>
<pre>
}
</pre>
<pre>
## this command rechunks encoded responses
</pre>
<pre>
if {[HTTP::header exists &quot;Transfer-Encoding&quot;]} {
</pre>
<pre>
HTTP::payload rechunk
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<h3><a name="Anchor-64" id="Anchor-64"></a><b>Outlook Anywhere rule if using separate pools AND virtual servers</b></h3>
<p>Use this rule for Outlook Anywhere, Exchange Web Services, and Offline Address book. If you are using more than one service, you can attach the same iRule to multiple virtual servers.</p>
<pre>
when HTTP_RESPONSE {
</pre>
<pre>
if { ( [HTTP::header exists &quot;WWW-Authenticate&quot;] &amp;&amp; [string tolower [HTTP::header values &quot;WWW-Authenticate&quot;]] contains &quot;negotiate&quot; ) ||
</pre>
<pre>
( [HTTP::header exists &quot;Persistent-Auth&quot;] &amp;&amp; [string tolower [HTTP::header &quot;Persistent-Auth&quot;]] contains &quot;true&quot; ) } {
</pre>
<pre>
ONECONNECT::reuse disable
</pre>
<pre>
ONECONNECT::detach disable
</pre>
<pre>
## disables NTLM conn pool for connections where OneConnect has been disabled
</pre>
<pre>
NTLM::disable
</pre>
<pre>
}
</pre>
<pre>
## this command rechunks encoded responses
</pre>
<pre>
if {[HTTP::header exists &quot;Transfer-Encoding&quot;]} {
</pre>
<pre>
HTTP::payload rechunk
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<h3><a name="Anchor-84" id="Anchor-84"></a><a name="Anchor-120" id="Anchor-120"></a><b>HTTP Compression Content include list</b></h3>
<p>Use the following list for the Content list in the HTTP Compression profiles</p>
<ul>
<li>text/(css | html | javascript | json | plain | postscript | richtext | rtf | vnd.wap.wml | vnd.wap.wmlscript | wap | wml | x-component | x-vcalendar | x-vcard | xml)</li>
<li>application/(css | css-stylesheet | doc | excel | javascript | json | lotus123 | mdb | mpp | ms-excel | ms-powerpoint | ms-word | msaccess | msexcel | mspowerpoint | msproject | msword | photoshop | postscript | powerpoint | ps | psd | quarkexpress | rtf | txt | visio | vnd.excel | vnd.ms-access | vnd.ms-excel | vnd.ms-powerpoint | vnd.ms-pps | vnd.ms-project | vnd.ms-word | vnd.ms-works | vnd.ms-works-db | vnd.msaccess | vnd.msexcel | vnd.mspowerpoint | vnd.msword | vnd.powerpoint | vnd.visio | vnd.wap.cmlscriptc | vnd.wap.wmlc | vnd.wap.xhtml+xml | vnd.word | vsd | winword | wks | word | x-excel | x-java-jnlp-file | x-javascript | x-json | x-lotus123 | x-mdb | x-ms-excel | x-ms-project | x-mscardfile | x-msclip | x-msexcel | x-mspowerpoint | x-msproject | x-msword | x-msworks-db | x-msworks-wps | x-photoshop | x-postscript | x-powerpoint | x-ps | x-quark-express | x-rtf | x-vermeer-rpc | x-visio | x-vsd | x-wks | x-word | x-xls | x-xml | xhtml+xml | xls | xml)</li>
<li>image/(photoshop | psd | x-photoshop | x-vsd)</li>
</ul>
<h2>BIG-IP APM manual configuration</h2>
<p>This section covers the following scenarios for BIG-IP APM:</p>
<ol>
<li><p>A BIG-IP APM deployment on a separate BIG-IP than that providing your Exchange traffic management. There are two options in this scenario:</p>
</li>
</ol>
<ul>
<li><p>SSL (HTTPS, port 443) connections will be terminated at the BIG-IP APM and forwarded to the BIG-IP LTM and then to your Exchange Mailbox servers on HTTP port 80.</p>
</li>
<li><p>Both the BIG-IP APM and the BIG-IP LTM will perform SSL Bridging; they will decrypt SSL traffic in order to process it, and then re-encrypt the traffic before placing it back on the network.</p>
</li>
</ul>
<ol>
<li><p>A single BIG-IP configured with both APM and LTM modules. There are two options in this scenario:</p>
</li>
</ol>
<ul>
<li><p>The BIG-IP will terminate SSL connections and forward traffic to your Exchange Mailbox servers on HTTP port 80.</p>
</li>
<li><p>The BIG-IP will perform SSL bridging; SSL will be decrypted on the BIG-IP but re-encrypted before it is placed back on the network.</p>
</li>
</ul>
<h2><a name="Anchor-130" id="Anchor-130"></a><b>BIG-IP APM Configuration</b></h2>
<p>No matter which of the scenarios you are deploying, use the following table to create the BIG-IP APM configuration (scenario-specific configuration begins after this section). The tables in this section provide guidance on configuring the individual BIG-IP objects. For specific instructions on configuring individual objects, see the online help or product documentation.</p>
<h3><a name="Anchor-107" id="Anchor-107"></a><b>Powershell command for enabling the OWA logon options</b></h3>
<p>If you want to display the computer type (public/shared vs private) and light version (&quot;Use the light version of Outlook Web App&quot;) options for Outlook Web App on the APM logon page via the BIG-IP APM, you must run the following PowerShell command on one of your Mailbox Servers (only one): Get-OwaVirtualDirectory | Set-OwaVirtualDirectory -LogonPageLightSelectionEnabled $true -LogonPagePublicPrivateSelectionEnabled $true</p>
<p>Give each BIG-IP object a unique name in theÂ <b>Name</b>Â field.</p>
<p>Â </p>
<table border="0" cellspacing="3" cellpadding="0" width="540">
<tbody><tr><td colspan="2" valign="top"><p>DNS and NTP</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><i>SeeÂ </i><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-74" rel="noreferrer"><i>Configuring DNS and NTP settings</i></a><i>Â for instructions.</i></p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>Health MonitorsÂ </b>(Main tab &gt; Local Traffic &gt; Monitors)</p>
</td>
</tr><tr><td valign="top"><p><b>Configuration</b></p>
</td>
<td valign="top"><p>SelectÂ <b>Advanced</b>Â from the Configuration list (if necessary).</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td valign="top"><p><b>LDAP</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td valign="top"><p><b>10</b>Â (recommended)</p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td valign="top"><p><b>31</b>Â (recommended)</p>
</td>
</tr><tr><td valign="top"><p>User Name</p>
</td>
<td valign="top"><p>Type a user name with administrative permissions</p>
</td>
</tr><tr><td valign="top"><p>Password</p>
</td>
<td valign="top"><p>Type the associated password</p>
</td>
</tr><tr><td valign="top"><p><b>Base</b></p>
</td>
<td valign="top"><p>Specify your LDAP base tree. For example, CN=Exchange Users,DC=example,DC=com</p>
</td>
</tr><tr><td valign="top"><p><b>Filter</b></p>
</td>
<td valign="top"><p>Specify the filter. We typeÂ <b>cn=user1</b>, using the example above: user1 in OU group âExchange Usersâ and domain âexample.comâ</p>
</td>
</tr><tr><td valign="top"><p><b>Security</b></p>
</td>
<td valign="top"><p>Select a Security option (either None, SSL, or TLS)</p>
</td>
</tr><tr><td valign="top"><p><b>Chase Referrals</b></p>
</td>
<td valign="top"><p><b>Yes</b></p>
</td>
</tr><tr><td valign="top"><p>Alias Address</p>
</td>
<td valign="top"><p><b>*All Addresses</b></p>
</td>
</tr><tr><td valign="top"><p>Alias Address Port</p>
</td>
<td valign="top"><p><b>389Â </b>(for None or TLS) orÂ <b>636Â </b>(for SSL)</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>AAA ServerÂ </b>(Main tab--&gt;Access Policy--&gt;AAA Servers)</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td valign="top"><p><b>Active Directory</b></p>
</td>
</tr><tr><td valign="top"><p><b>Domain Name</b></p>
</td>
<td valign="top"><p>Type the FQDN of the Windows Domain name</p>
</td>
</tr><tr><td valign="top"><p><b>Server Connection</b></p>
</td>
<td valign="top"><p>ClickÂ <b>Use Pool</b>Â if necessary.</p>
</td>
</tr><tr><td valign="top"><p><b>Domain Controller Pool Name</b></p>
</td>
<td valign="top"><p>Type a unique name</p>
</td>
</tr><tr><td valign="top"><p><b>Domain Controllers</b></p>
</td>
<td valign="top"><p><b>IP Address</b>: Type the IP address of a domain controllerÂ <b>Hostname</b>: Type the FQDN of the domain controller ClickÂ <b>Add</b>. Repeat for each domain controller in this configuration.</p>
</td>
</tr><tr><td valign="top"><p><b>Server Pool Monitor</b></p>
</td>
<td valign="top"><p>Select the monitor you created above.</p>
</td>
</tr><tr><td valign="top"><p><b>Admin Name1</b></p>
</td>
<td valign="top"><p>Type the Administrator name</p>
</td>
</tr><tr><td valign="top"><p><b>Admin Password1</b></p>
</td>
<td valign="top"><p>Type the associated password</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>SSO Configuration2Â </b>(Main tab--&gt;Access Policy--&gt;SSO Configurations)</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>Forms based SSO Configuration</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Configurations By Type</b></p>
</td>
<td valign="top"><p><b>Forms-Client Initiated</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Configuration Name</b></p>
</td>
<td valign="top"><p>Type a unique name. We useÂ <b>Exchange-SSOv2</b></p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>In the left pane of the box, clickÂ Form Settings, and then clickÂ <i>Create</i>.</b></p>
</td>
</tr><tr><td valign="top"><p><b>Form Name</b></p>
</td>
<td valign="top"><p>Type a unique name. We useÂ <b>Exchange-Form</b></p>
</td>
</tr><tr><td colspan="2" valign="top"><p>1 Optional; Admin Name and Password are only required if anonymous binding to Active Directory is not allowed in your environment</p>
<p>2 If you are using BIG-IP version 11.3, you can optionally create a Kerberos SSO configuration for Outlook Anywhere. SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-105" rel="noreferrer"><i>Optional: Configuring the APM for Outlook Anywhere with NTLM Authentication - BIG-IP v11.3 or later only</i></a></p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>Forms based SSO Configuration continued</b></p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>In the left pane of the box, clickÂ Form Parameters, and then clickÂ <i>Create</i></b></p>
</td>
</tr><tr><td valign="top"><p><b>Form Parameters</b></p>
</td>
<td valign="top"><table border="0" cellspacing="3" cellpadding="0">
<tbody><tr><td><p><b>Form Parameter Name</b></p>
</td>
<td><p>SelectÂ <b>UsernameÂ </b>from the list.</p>
</td>
</tr><tr><td><p><b>Username Parameter Value</b></p>
</td>
<td><p><b>%{session.sso.token.last.username}</b></p>
</td>
</tr><tr><td colspan="2"><p>ClickÂ <b>Ok</b>, and then clickÂ <b>Create</b>Â again in the Forms Parameters box.</p>
</td>
</tr><tr><td><p><b>Form Parameter Name</b></p>
</td>
<td><p>SelectÂ <b>password</b></p>
</td>
</tr><tr><td><p><b>Form Parameter Value</b></p>
</td>
<td><p>SelectÂ <b>%{session.sso.token.last.password}</b></p>
</td>
</tr><tr><td><p><b>Secure</b></p>
</td>
<td><p><b>Yes</b></p>
</td>
</tr><tr><td colspan="2"><p>ClickÂ <b>Ok</b>. If you are not using the OWA logon options, continue with Form Detection. If you are using OWA logon options, clickÂ <b>Create</b>Â again in the Forms Parameters box.</p>
</td>
</tr><tr><td><p><b>Form Parameter Name</b></p>
</td>
<td><p>TypeÂ <b>flags</b></p>
</td>
</tr><tr><td><p><b>Form Parameter Value</b></p>
</td>
<td><p>TypeÂ <b>%{session.custom.owa.flags}</b></p>
</td>
</tr><tr><td colspan="2"><p>ClickÂ <b>Ok</b>, and then clickÂ <b>Create</b>Â again in the Forms Parameters box.</p>
</td>
</tr><tr><td><p><b>Form Parameter Name</b></p>
</td>
<td><p>TypeÂ <b>trusted</b></p>
</td>
</tr><tr><td><p><b>Form Parameter Value</b></p>
</td>
<td><p>TypeÂ <b>%{session.custom.owa.trusted}</b></p>
</td>
</tr></tbody></table>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b>Form Detection</b></p>
</td>
<td valign="top"><p>In the left page of the Create New Form Definition box, clickÂ <b>Form Detection</b>.</p>
</td>
</tr><tr><td valign="top"><p><b>Detect Form byÂ </b>SelectÂ <b>URI</b></p>
</td>
</tr><tr><td valign="top"><p><b>Request URIÂ </b>Type<b>Â /owa/auth/logon.aspxÂ </b>.</p>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b>Logon Detection</b></p>
</td>
<td valign="top"><p>In the left page of the Create New Form Definition box, clickÂ <b>Logon Detection</b>.</p>
</td>
</tr><tr><td valign="top"><p><b>Detect Logon byÂ </b>SelectÂ <b>Presence of Cookie</b></p>
</td>
</tr><tr><td valign="top"><p><b>Cookie NameÂ </b>TypeÂ <b>cadata</b></p>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b>JavaScript Injection</b></p>
</td>
<td valign="top"><p>In the left page of the Create New Form Definition box, clickÂ <b>JavaScript Detection</b>.</p>
</td>
</tr><tr><td valign="top"><p><b>Injection MethodÂ </b>SelectÂ <b>extra</b></p>
</td>
</tr><tr><td valign="top"><p><b>Extra JavaScriptÂ </b>TypeÂ <b>clkLgn()Â </b>ClickÂ <b>Ok</b>Â twice to complete the SSO Configuration.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>NTLM SSO ConfigurationÂ (create only one)</b></p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>NTLMv1Â (create this object if you are using NTLMv1)</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Method</b></p>
</td>
<td valign="top"><p><b>NTLMv1Â (if you are using NTLMv2 only, selectNTLMv2)</b></p>
</td>
</tr><tr><td valign="top"><p><b>Username Conversion</b></p>
</td>
<td valign="top"><p><b>Enable</b></p>
</td>
</tr><tr><td valign="top"><p><b>NTLM Domain</b></p>
</td>
<td valign="top"><p>The NTLM domain name where the user accounts are located</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>NTLMv2Â (create this object if you are using only NTLMv2)</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Method</b></p>
</td>
<td valign="top"><p><b>NTLMv2</b></p>
</td>
</tr><tr><td valign="top"><p><b>NTLM Domain</b></p>
</td>
<td valign="top"><p>Enter the fully-qualified name of the domain where users will authenticate</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>11.4 and later only: Exchange Profile3Â </b>(Main tab &gt; Access Policy &gt; Application Access &gt; Microsoft Exchange)</p>
</td>
</tr><tr><td valign="top"><p><b>Parent Profile</b></p>
</td>
<td valign="top"><p><b>/Common/exchange</b></p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>In the left pane of the box, under Service Settings, clickÂ Autodiscover</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Configuration</b></p>
</td>
<td valign="top"><p>From the Autodiscover SSO Configuration list, select the NTLM SSO Configuration you created.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>In the left pane of the box, under Service Settings, clickÂ Exchange Web Service</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Configuration</b></p>
</td>
<td valign="top"><p>From the EWS SSO Configuration list, select the NTLM SSO Configuration you created.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>In the left pane of the box, under Service Settings, clickÂ Offline Address Book</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Configuration</b></p>
</td>
<td valign="top"><p>From the OAB SSO Configuration list, select the NTLM SSO Configuration you created.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>If you are configuring client-side NTLM authentication only: In the left pane of the box, under Service Settings, clickÂ Outlook Anywhere</b>Â <b>NOTE:In BIG-IP APM v12 and later, your selections here apply to both Outlook Anywhere and MAPI-over-HTTP connections.</b></p>
</td>
</tr><tr><td valign="top"><p><b>Front End Authentication</b></p>
</td>
<td valign="top"><p>SelectÂ <b>Basic-NTLM</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Configuration</b></p>
</td>
<td valign="top"><p>From the SSO Configuration list, select the Kerberos SSO Configuration you created.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>Access ProfileÂ </b>(Main tab &gt; Access Policy &gt; Access Profiles)</p>
</td>
</tr><tr><td valign="top"><p><b>Microsoft Exchange4</b></p>
</td>
<td valign="top"><p>If you created the Exchange profile, select the profile you created from the list.</p>
</td>
</tr><tr><td valign="top"><p><b><i>SSO Configuration</i></b></p>
</td>
<td valign="top"><p>If using BIG-IP v11.3 or earlier, select the name of NTLM SSO configuration you created</p>
</td>
</tr><tr><td colspan="2" valign="top"><p>Edit the Access Policy</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><i>Edit the Access Profile you just created using the Visual Policy Editor. Continue now withÂ </i><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-126" rel="noreferrer"><i>Editing the Access Policy</i></a></p>
</td>
</tr></tbody></table>
<p>3 If using the Exchange profile in 11.4 and later, you must remove any _sys_APM irules from the virtual server</p>
<p>4 Optional, only available in 11.4 and later, and only applicable if you created the Exchange profile.</p>
</div></div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









<div id="article760363842" class="a01 "><h3><b>Editing the Access Policy</b></h3>
<p>After creating the objects in the table above, use the following procedure to edit the Access Policy on the BIG-IP APM using the Visual Policy Editor (VPE). The Policy shown is just an example, you can use this Access Policy or create one of your own.</p>
<ol>
<li>To configure the Access Policy</li>
<li>On the Main tab, expandÂ <b>Access Policy</b>, and clickÂ <b>Access Profiles</b>.</li>
<li>Locate the Access Profile you created using the table, and then, in the Access Policy column, clickÂ <b>Edit</b>.</li>
<li>Click theÂ <b>+</b>Â symbol betweenÂ <b>Start</b>Â andÂ <b>Deny</b>. A box opens with options for different actions.</li>
<li>Click theÂ <b>Logon Page</b>Â option button, and then theÂ <b>Add Item</b>Â button at the bottom.</li>
<li>From theÂ <b>Split domain from full Username</b>Â list, selectÂ <b>Yes</b>.</li>
<li>Configure the rest of the Logon Page properties as applicable, and then clickÂ <b>Save</b>.</li>
<li>Click theÂ <b>+</b>Â symbol betweenÂ <b>Logon Page</b>Â andÂ <b>Deny</b>.</li>
<li>In the Authentication section, click theÂ <b>AD Auth</b>Â option button, and clickÂ <b>Add Item</b>.</li>
<li>In theÂ <b>Active Directory</b>Â properties box, from theÂ <b>Server</b>Â list, select the AAA server you created using the table above. The rest of the settings are optional. ClickÂ <b>Save</b>.</li>
<li>On the Successful path betweenÂ <b>AD Auth</b>Â andÂ <b>Deny</b>, click theÂ <b>+</b>symbol.</li>
<li>Click theÂ <b>SSO Credential Mapping</b>Â option button, and then clickÂ <b>Add Item</b>.</li>
<li>Configure the Properties as applicable for your configuration; we leave the settings at the defaults. ClickÂ <b>Save</b>.</li>
<li>On the fallback path betweenÂ <b>SSO Credential Mapping</b>Â andÂ <b>Deny</b>, click theÂ <b>Deny</b>Â box. Click theÂ <b>Allow</b>Â option button, and then clickÂ <b>Save</b>. See Figure 8.</li>
<li>Click theÂ <b>Apply Access Policy</b>Â link in the upper left part of the window. You must apply an access policy before it takes effect.</li>
</ol>
<h3><a name="Anchor-85" id="Anchor-85"></a><b>Creating the iRule that chooses the SSO Configuration</b></h3>
<p>The next task is to create an iRule that selects the appropriate SSO Configuration to support forms-based authentication of OWA.</p>
<ol>
<li><p>To create the iRule</p>
</li>
<li><p>On the Main tab, expandÂ <b>Local Traffic,</b> clickÂ <b>iRules,</b> and then click theÂ <b>Create</b>Â button.</p>
</li>
<li><p>In theÂ <b>Name</b>Â box, give the iRule a unique name. We useÂ <b>select_SSO_irule.</b></p>
</li>
<li><p>In theÂ <b>Definition</b>Â section, copy and paste the following iRule, omitting the line numbers. If you used a different name for your forms-based SSO Configuration when creating it based on the table above, use that name in line 4. If you are in a partition other than /Common, replace /Common with the name of your partition.</p>
<pre>
when ACCESS_ACL_ALLOWED {
</pre>
<pre>
set req_uri [HTTP::uri]
</pre>
<pre>
if { $req_uri contains &quot;/owa/auth&quot; } {
</pre>
<pre>
WEBSSO::select [set foo /Common/Exchange-SSOv2]
</pre>
<pre>
}
</pre>
<pre>
unset req_uri
</pre>
<pre>
}
</pre>
</li>
<li><p>Click theÂ <b>Finished</b>Â button.</p>
</li>
</ol>
<h2>Configuration table for scenario 1: BIG-IP APM sending traffic to a remote BIG-IP LTM</h2>
<p>If you are using the BIG-IP APM for scenario 1 with either SSL offload or SSL Bridging, use the following table to configure the APM. There are additional procedures immediately following this table.</p>
<p>Â </p>
<table border="0" cellspacing="3" cellpadding="0" width="540">
<tbody><tr><td colspan="3" valign="top"><p><b>Health MonitorsÂ </b>(Main tab &gt; Local Traffic &gt; Monitors)</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td colspan="2" valign="top"><p><b>TCP</b></p>
</td>
</tr><tr><td valign="top"><p><b>Interval</b></p>
</td>
<td colspan="2" valign="top"><p><b>30</b>Â (recommended)</p>
</td>
</tr><tr><td valign="top"><p><b>Timeout</b></p>
</td>
<td colspan="2" valign="top"><p><b>91</b>Â (recommended)</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>PoolsÂ </b>(Main tab &gt; Local Traffic &gt; Pools)</p>
</td>
</tr><tr><td valign="top"><p><b>Health Monitor</b></p>
</td>
<td colspan="2" valign="top"><p>Select the monitor you created above</p>
</td>
</tr><tr><td valign="top"><p><b>Load Balancing Method</b></p>
</td>
<td colspan="2" valign="top"><p><b>Round Robin</b></p>
</td>
</tr><tr><td valign="top"><p><b>Address</b></p>
</td>
<td colspan="2" valign="top"><p>Type the IP Address of remote BIG-IP LTM virtual server to which this BIG-IP APM will forward traffic</p>
</td>
</tr><tr><td valign="top"><p><b>Service Port</b></p>
</td>
<td colspan="2" valign="top"><p><b>80Â if offloading SSL,Â 443Â if re-encrypting for SSL Bridging</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>iRulesÂ </b>(Main tab &gt; Local Traffic &gt; iRules)</p>
</td>
</tr><tr><td colspan="3" valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-78" rel="noreferrer"><i>Creating the persist iRule on the BIG-IP APM</i></a><i>Â andÂ </i><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-133" rel="noreferrer"><i>Creating the iRule to terminate inactive APM sessions if using Forms-based authentication for OWA (default)</i></a>Â orÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-142" rel="noreferrer"><i>Optional: Creating the iRule to terminate inactive APM sessions if using Windows based authentication for OWA</i></a><i>. You must also have created theÂ </i><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-79" rel="noreferrer"><i>OWA Redirect iRule (formerly referred to as the Append iRule)</i></a><i>.</i></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>ProfilesÂ </b>(Main tab &gt; Local Traffic &gt; Profiles)</p>
</td>
</tr><tr><td valign="top"><p><b>HTTP(Profiles--&gt;Services)</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>http</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>HTTP CompressionÂ <b>(Profiles--&gt;Services)</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>wan-optimized-compression</b></p>
</td>
</tr><tr><td valign="top"><p>Content List--&gt;Include List</p>
</td>
<td valign="top"><p>SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-120" rel="noreferrer"><i>HTTP Compression Content include list</i></a></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p>Web AccelerationÂ <b>(Profiles--&gt;Services)</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>optimized-caching</b></p>
</td>
</tr><tr><td valign="top"><p><b>URI List</b></p>
</td>
<td valign="top"><p>Add the following to theÂ <b>ExcludeÂ </b>list:Â <b>/owa/ev.owa</b>Â andÂ <b>uglobal.js</b></p>
</td>
</tr><tr><td valign="top"><p>TCP WANÂ <b>(Profiles--&gt;Protocol)</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-wan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p>TCP LANÂ <b>(Profiles--&gt;Protocol)</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>tcp-lan-optimized</b></p>
</td>
</tr><tr><td valign="top"><p><b>OneConnect(Profiles--&gt;Other)</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>oneconnect</b></p>
</td>
</tr><tr><td valign="top"><p>NTLMÂ <b>(Profiles--&gt;Other)</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>ntlm</b></p>
</td>
</tr><tr><td rowspan="2" valign="top"><p><b>Client SSL(Profiles--&gt;SSL)</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p><b>clientssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate and Key</p>
</td>
<td valign="top"><p>Select your Certificate and key</p>
</td>
</tr><tr><td rowspan="3" valign="top"><p><b>Server SSL(for SSL Bridging only)(Profiles--&gt;SSL)</b></p>
</td>
<td valign="top"><p>Parent Profile</p>
</td>
<td valign="top"><p>If the remote BIG-IP LTM receiving this traffic is using a self-signed or default certificate for decryption, selectÂ <b>serverssl-insecure-compatible</b>Â If it's using a certificate signed by a Certificate Authority, selectÂ <b>serverssl</b></p>
</td>
</tr><tr><td valign="top"><p>Certificate and Key</p>
</td>
<td valign="top"><p>Select your Certificate and key</p>
</td>
</tr><tr><td valign="top"><p>Options List</p>
</td>
<td valign="top"><p>If using BIG-IP v11.4.x only, enableÂ <b>No TLSv1.2</b></p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>Virtual ServersÂ </b>(Main tab &gt; Local Traffic &gt; Virtual Servers)</p>
</td>
</tr><tr><td valign="top"><p><b><i>Destination Address</i></b></p>
</td>
<td colspan="2" valign="top"><p>The IP address clients use to access Exchange. Your Exchange FQDN resolves to this IP address.</p>
</td>
</tr><tr><td valign="top"><p><b><i>Service Port</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>443</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>OneConnect profile</i></b></p>
</td>
<td colspan="2" valign="top"><p>Select the OneConnect profile you created</p>
</td>
</tr><tr><td valign="top"><p><b><i>HTTP Profile</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Select the HTTP profile you created above</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>HTTP Compression Profile</i></b></p>
</td>
<td colspan="2" valign="top"><p>Select the HTTP Compression profile you created</p>
</td>
</tr><tr><td valign="top"><p><b><i>Web Acceleration Profile</i></b></p>
</td>
<td colspan="2" valign="top"><p><b>Select the Web Acceleration profile you created</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>SSL Profile (Client)</i></b></p>
</td>
<td colspan="2" valign="top"><p>Select the Client SSL profile you created</p>
</td>
</tr><tr><td valign="top"><p><b><i>SSL Profile (Server)</i></b></p>
</td>
<td colspan="2" valign="top"><p>Select the Server SSL profile you created (only for Scenario 2, SSL Bridging).</p>
</td>
</tr><tr><td valign="top"><p><b><i>Access Profile</i></b></p>
</td>
<td colspan="2" valign="top"><p>Select the Access Profile you created</p>
</td>
</tr><tr><td valign="top"><p><b><i>iRules1</i></b></p>
</td>
<td colspan="2" valign="top"><p>Enable the Append iRule you created onÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-79" rel="noreferrer">page 83</a>. Enable the iRule you created to terminate inactive sessionsÂ <b>Enable either the built-in_sys_APM_ExchangeSupport_OA_BasicAuthÂ </b>orÂ <b>sys_APM_ExchangeSupport_OA_NTLMAuth</b>Â Rule<b>Â as depending on your auth method.</b>Â This rule is necessary whether deploying Outlook Anywhere or not.1 Enable the iRule that chooses the SSO configuration you created (<b>select_SSO_iruleÂ </b>in our example) Enable the APM session ID irule you created (<b>apm-iruleÂ in our example)</b></p>
</td>
</tr><tr><td valign="top"><p><b><i>Default Pool</i></b></p>
</td>
<td colspan="2" valign="top"><p>Select the Pool you created</p>
</td>
</tr><tr><td colspan="3" valign="top"><p><b>1 Do not attach the _sys_APM_ExchangeSupport_OA_BasicAuth iRule if you are using BIG-IP v11.4 and the Exchange profile.</b></p>
</td>
</tr></tbody></table>
<h3><a name="Anchor-55" id="Anchor-55"></a><a name="Anchor-78" id="Anchor-78"></a><b>Creating the persist iRule on the BIG-IP APM</b></h3>
<p>The first task is to create the iRule on the BIG-IP LTM for BIG-IP APM. The first iRule is necessary for all deployments with BIG-IP APM.</p>
<ol>
<li><p>To create the iRule to persist connections based on APM session ID</p>
</li>
<li><p>On the Main tab, expandÂ <b>Local Traffic,</b> clickÂ <b>iRules,</b> and then click theÂ <b>Create</b>Â button.</p>
</li>
<li><p>In theÂ <b>Name</b>Â box, give the iRule a unique name. We useÂ <b>apm-session-id-irule.</b></p>
</li>
<li><p>In theÂ <b>Definition</b>Â section, copy and paste the following iRule, omitting the line numbers.</p>
<pre>
when ACCESS_ACL_ALLOWED {
</pre>
<pre>
set sessionid [ACCESS::session data get &quot;session.user.sessionid&quot;]
</pre>
<pre>
HTTP::header insert APM_session $sessionid
</pre>
<pre>
}
</pre>
<pre>
when HTTP_RESPONSE {
</pre>
<pre>
if { ( [HTTP::header exists &quot;WWW-Authenticate&quot;] &amp;&amp; [string tolower [HTTP::header values &quot;WWW-Authenticate&quot;]] contains &quot;negotiate&quot; ) ||
</pre>
<pre>
( [HTTP::header exists &quot;Persistent-Auth&quot;] &amp;&amp; [string tolower [HTTP::header &quot;Persistent-Auth&quot;]] contains &quot;true&quot; ) } {
</pre>
<pre>
ONECONNECT::reuse disable
</pre>
<pre>
ONECONNECT::detach disable
</pre>
<pre>
## disables NTLM conn pool for connections where OneConnect has been disabled
</pre>
<pre>
NTLM::disable
</pre>
<pre>
}
</pre>
<pre>
## this command rechunks encoded responses
</pre>
<pre>
if {[HTTP::header exists &quot;Transfer-Encoding&quot;]} {
</pre>
<pre>
HTTP::payload rechunk
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<p>Â </p>
</li>
<li><p>Click theÂ <b>Finished</b>Â button.</p>
</li>
</ol>
<h3><a name="Anchor-56" id="Anchor-56"></a>BIG-IP LTM iRule if all traffic goes through the BIG-IP APM</h3>
<p>If all of your Exchange traffic goes through the BIG-IP APM, and you do not have internal users who go directly to the BIG-IP LTM, you must modify the pool assignment iRule on the remote BIG-IP LTM to use the following iRule (and remove the existing pool assignment iRule).</p>
<p><b>Important</b>:Â <i>This iRule is only necessary if all traffic is going through the BIG-IP APM. If you have internal users who go directly to the BIG-IP LTM,Â <b>do notÂ </b>use this iRule.</i></p>
<ol>
<li>To create the pool assignment iRule if all traffic goes through the BIG-IP APM to the LTM</li>
<li>On the Main tab, expandÂ <b>Local Traffic</b>, clickÂ <b>iRules</b>, and then click theÂ <b>Create</b>Â button to create a new iRule.</li>
<li>In theÂ <b>Name</b>Â box, type a unique name. In our example, we typeÂ <b>apm-persist</b>.</li>
<li>In theÂ <b>Definition</b>Â section, copy and paste the appropriate iRule (omitting the line numbers), depending on your version of Exchange.</li>
</ol>
<p><i>BIG-IP APM iRule for Exchange 2016</i></p>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
## CHANGE ALL POOL NAMES TO MATCH THOSE IN YOUR ENVIRONMENT.
</pre>
<pre>
switch -glob -- [string tolower [HTTP::path]] {
</pre>
<pre>
&quot;/microsoft-server-activesync*&quot; {
</pre>
<pre>
pool my_Exchange__single_as_pool
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/ews*&quot; {
</pre>
<pre>
pool my_Exchange__single_oa_pool
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/ecp*&quot; {
</pre>
<pre>
pool my_Exchange__single_owa_pool
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/oab*&quot; {
</pre>
<pre>
pool my_Exchange__single_oa_pool
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/rpc/rpcproxy.dll*&quot; {
</pre>
<pre>
pool my_Exchange__single_oa_pool
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/mapi*&quot; {
</pre>
<pre>
pool my_Exchange__single_mapi_pool
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/autodiscover*&quot; {
</pre>
<pre>
pool my_Exchange__single_ad_pool
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
default {
</pre>
<pre>
## This final section takes all traffic that has not otherwise
</pre>
<pre>
## been accounted for and sends it to the pool for Outlook Web
</pre>
<pre>
## App
</pre>
<pre>
pool my_Exchange__single_owa_pool
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
when HTTP_RESPONSE {
</pre>
<pre>
if { ( [HTTP::header exists &quot;WWW-Authenticate&quot;] &amp;&amp; [string tolower [HTTP::header values &quot;WWW-Authenticate&quot;]] contains &quot;negotiate&quot; ) ||
</pre>
<pre>
( [HTTP::header exists &quot;Persistent-Auth&quot;] &amp;&amp; [string tolower [HTTP::header &quot;Persistent-Auth&quot;]] contains &quot;true&quot; ) } {
</pre>
<pre>
ONECONNECT::reuse disable
</pre>
<pre>
ONECONNECT::detach disable
</pre>
<pre>
## disables NTLM conn pool for connections where OneConnect has been disabled
</pre>
<pre>
NTLM::disable
</pre>
<pre>
}
</pre>
<pre>
## this command rechunks encoded responses
</pre>
<pre>
if {[HTTP::header exists &quot;Transfer-Encoding&quot;]} {
</pre>
<pre>
HTTP::payload rechunk
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<h3><a name="Anchor-133" id="Anchor-133"></a><b>Creating the iRule to terminate inactive APM sessions if using Forms-based authentication for OWA (default)</b></h3>
<p>When using APM to secure OWA, APM sessions can remain active after users have manually logged out of OWA, or the OWA session has timed out due to user inactivity. This iRule checks the OWA session status and terminates the associated APM session if applicable.Â <b>Note:</b>Â <i>This iRule is only effective if you are using Forms-based authentication for OWA, if using Windows Authentication, seeÂ </i><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-142" rel="noreferrer"><i>Optional: Creating the iRule to terminate inactive APM sessions if using Windows based authentication for OWA</i></a><i>.</i></p>
<ol>
<li><p><b>To add the APM</b>Â session check <b>iRule</b></p>
</li>
<li><p>On the Main tab, expandÂ <b>Local Traffic</b>Â and then clickÂ <b>iRules.</b></p>
</li>
<li><p>Click theÂ <b>Create</b>Â button.</p>
</li>
<li><p>In theÂ <b>Name</b>Â box, type a unique name such as apm-owa-session-irule.</p>
</li>
<li><p>In theÂ <b>Definition</b>Â section, copy and paste the following iRule. Note that line 23 is a single line.</p>
<pre>
when RULE_INIT {
</pre>
<pre>
set static::cookie_sessionid [format &quot;sessionid=null; path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT;&quot;]
</pre>
<pre>
set static::cookie_cadata [format &quot;cadata=null; path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT;&quot;]
</pre>
<pre>
set static::cookie_usercontext [format &quot;UserContext=null; path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT;&quot;]
</pre>
<pre>
}
</pre>
<pre>
when ACCESS_SESSION_STARTED {
</pre>
<pre>
if { [string tolower [HTTP::uri]] contains &quot;ua=0&quot; } {
</pre>
<pre>
ACCESS::session remove
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
when ACCESS_ACL_ALLOWED {
</pre>
<pre>
set apm_mrhsession [HTTP::cookie value &quot;MRHSession&quot;]
</pre>
<pre>
if { [table lookup $apm_mrhsession] == &quot;EXCHANGE_LOGOUT&quot; } {
</pre>
<pre>
ACCESS::session remove
</pre>
<pre>
table delete $apm_mrhsession
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
set isset 0
</pre>
<pre>
if {[string tolower [HTTP::uri]] starts_with &quot;/owa&quot; } {
</pre>
<pre>
if {[string tolower [HTTP::uri]] contains &quot;logoff&quot; } {
</pre>
<pre>
ACCESS::session remove
</pre>
<pre>
HTTP::respond 302 Location &quot;https://[HTTP::host]/vdesk/hangup.php3&quot; &quot;Set-Cookie&quot; $static::cookie_sessionid &quot;Set-Cookie&quot; $static::cookie_cadata &quot;Set-Cookie&quot; $static::cookie_usercontext
</pre>
<pre>
} else {
</pre>
<pre>
if { [string tolower [HTTP::uri]] contains &quot;ua=0&quot; } {
</pre>
<pre>
set mrhsession [HTTP::cookie value &quot;MRHSession&quot;]
</pre>
<pre>
set isset 1
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
when HTTP_RESPONSE {
</pre>
<pre>
if { $isset == 1 } {
</pre>
<pre>
if { $mrhsession != &quot;&quot; &amp;&amp; [HTTP::status] == 440 } {
</pre>
<pre>
table set $apm_mrhsession &quot;EXCHANGE_LOGOUT&quot;
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<p>Â </p>
</li>
<li><p>ClickÂ <b>Finished.</b></p>
</li>
<li><p>On the Main tab, clickÂ <b>Virtual Servers.</b></p>
</li>
<li><p>From theÂ <b>Virtual Server</b>Â list, click the name of the appropriate virtual server (either the BIG-IP APM virtual server, the combined virtual server, or the separate OWA virtual server, depending on how you configured the BIG-IP system.</p>
</li>
<li><p>On the Menu bar, clickÂ <b>Resources.</b></p>
</li>
<li><p>From the iRules section, clickÂ <b>Manage.</b></p>
</li>
<li><p>From theÂ <b>Available</b>Â list, select the iRule you just created and then click Add (&lt;&lt;).</p>
</li>
<li><p>If deploying for BIG-IP APM, click theÂ <b>Up</b>Â button to move the this iRule just below theÂ <b>_sys_APM_ExchangeSupport_OA_BasicAuthÂ (orÂ _sys_APM_ExchangeSupport_OA_NtlmAuth</b>Â if using NTLM for OA) rule. If you are using BIG-IP version 11.4 and deploying with the BIG-IP APM Exchange profile, this step is not necessary.</p>
</li>
<li><p>ClickÂ <b>Finished.</b></p>
</li>
</ol>
<h3><a name="Anchor-142" id="Anchor-142"></a><b>Optional: Creating the iRule to terminate inactive APM sessions if using Windows based authentication for OWA</b></h3>
<p>When using APM to secure OWA, APM sessions can remain active after users have closed the OWA window. This iRule checks the</p>
<p>OWA session status and terminates the associated APM session after a configurable amount time.</p>
<p><b>Note:Â </b>This iRule is only effective if you are using Windows based authentication for OWA.</p>
<ol>
<li><b>To add the APMÂ </b>session ch<b>eck iRule if you are configuring the system manually</b></li>
<li>On the Main tab, clickÂ <b>Local Traffic</b>Â &gt;Â <b>iRules &gt;</b>Â <b>Create</b>.</li>
<li>In theÂ <b>Name</b>Â box, type a unique name such as apm-owa-session-irule.</li>
<li>In theÂ <b>Definition</b>Â section, copy and paste the following iRule. Note that line 15 is a single line.</li>
</ol>
<p>You can also modify the timeout values by changing the values in red in lines 10, 13, and 19. The end value (number in line 10 (also in line 19) subtracted by the number in line 13) valueÂ <b>MUST</b>Â be at leastÂ <b>900</b>Â seconds (15 minutes).</p>
<pre>
when RULE_INIT {
</pre>
<pre>
set static::cookie_clientid [format &quot;ClientId=null; path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT;&quot;]
</pre>
<pre>
set static::cookie_uc [format &quot;UC=null; path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT;&quot;]
</pre>
<pre>
set static::cookie_xbackend [format &quot;X-BackEndCookie=null; path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT;&quot;]
</pre>
<pre>
set static::cookie_xowacanary [format &quot;X-OWA-CANARY=null; path=/; Expires=Thu, 01-Jan-1970 00:00:00 GMT;&quot;]
</pre>
<pre>
}
</pre>
<pre>
when HTTP_REQUEST {
</pre>
<pre>
if {[string tolower [HTTP::uri]] starts_with &quot;/owa&quot; } {
</pre>
<pre>
set owa_session [HTTP::cookie value &quot;ClientId&quot;]
</pre>
<pre>
table add $owa_session 0 1200
</pre>
<pre>
if {[string tolower [HTTP::uri]] contains &quot;ua=0&quot; } {
</pre>
<pre>
table incr -notouch $owa_session
</pre>
<pre>
if {[table lookup -notouch $owa_session] != 0 &amp;&amp; [table timeout -remaining $owa_session] &lt; 300 } {
</pre>
<pre>
log local0. &quot;Session timed out&quot;
</pre>
<pre>
HTTP::respond 440 Set-Cookie $static::cookie_clientid Set-Cookie $static::cookie_uc Set-Cookie $static::cookie_xbackend Set-Cookie $static::cookie_xowacanary
</pre>
<pre>
ACCESS::session remove
</pre>
<pre>
}
</pre>
<pre>
} else {
</pre>
<pre>
table replace $owa_session 0 1200
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<ol>
<li>ClickÂ <b>Finished</b>.</li>
<li>The next step depends on whether you used the iApp template or are configuring the BIG-IP system manually</li>
<li>On the Main tab, clickÂ <b>Virtual Servers</b>.</li>
<li>From theÂ <b>Virtual Server</b>Â list, click the name of the appropriate virtual server (either the BIG-IP APM virtual server, the combined virtual server, or the separate OWA virtual server, depending on how you configured the BIG-IP system.</li>
<li>On the Menu bar, clickÂ <b>Resources</b>, and then from the iRules section, clickÂ <b>Manage</b>.</li>
<li>From theÂ <b>Available</b>Â list, select the iRule you just created and then click Add (<b>&lt;&lt;</b>).</li>
<li>If deploying for BIG-IP APM, click theÂ <b>Up</b>Â button to move the this iRule just below theÂ <b>_sys_APM_ExchangeSupport_OA_BasicAuth</b>Â (orÂ <b>_sys_APM_ExchangeSupport_OA_NtlmAuthÂ </b>if using NTLM for OA) rule. If you are using BIG-IP version 11.4 and deploying with the BIG-IP APM Exchange profile, this step is not necessary.</li>
<li>ClickÂ <b>Finished</b>.</li>
</ol>
<h2><b>Configuration for scenario 2: Single BIG-IP with LTM and APM</b></h2>
<p>If you are configuring the BIG-IP APM as a module on the same physical BIG-IP device as the LTM configuration, you must modify your BIG-IP LTM configuration to use the following pool assignment iRule, and remove any existing pool assignment iRules on the LTM.</p>
<h3><b>Creating the Pool Assignment iRule when using BIG-IP APM</b></h3>
<p>The next task is to create a new pool assignment iRule on the BIG-IP system for APM.</p>
<ol>
<li>To create the iRule</li>
<li>On the Main tab, expandÂ <b>Local Traffic</b>, clickÂ <b>iRules</b>, and then click theÂ <b>Create</b>Â button.</li>
<li>In the Name box, give the iRule a unique name. We useÂ <b>apm-pool-assign-irule</b>.</li>
<li>In theÂ <b>Definition</b>Â section, copy and paste the definition on the next page.</li>
<li>ClickÂ <b>Finished</b>.</li>
</ol>
<pre>
## CHANGE ALL POOL NAMES TO MATCH THOSE IN YOUR ENVIRONMENT.
</pre>
<pre>
when ACCESS_ACL_ALLOWED {
</pre>
<pre>
set sessionid [ACCESS::session data get &quot;session.user.sessionid&quot;]
</pre>
<pre>
switch -glob -- [string tolower [HTTP::path]] {
</pre>
<pre>
&quot;/microsoft-server-activesync*&quot; {
</pre>
<pre>
pool my_Exchange__single_as_pool
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/ews*&quot; {
</pre>
<pre>
pool my_Exchange__single_oa_pool
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/ecp*&quot; {
</pre>
<pre>
pool my_Exchange__single_owa_pool
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/oab*&quot; {
</pre>
<pre>
pool my_Exchange__single_oa_pool
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/rpc/rpcproxy.dll*&quot; {
</pre>
<pre>
pool my_Exchange__single_oa_pool
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/mapi*&quot; {
</pre>
<pre>
pool my_Exchange__single_mapi_pool
</pre>
<pre>
COMPRESS::disable
</pre>
<pre>
CACHE::disable
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
&quot;/autodiscover*&quot; {
</pre>
<pre>
pool my_Exchange__single_ad_pool
</pre>
<pre>
return
</pre>
<pre>
}
</pre>
<pre>
default {
</pre>
<pre>
## This final section takes all traffic that has not otherwise
</pre>
<pre>
## been accounted for and sends it to the pool for Outlook Web
</pre>
<pre>
## App
</pre>
<pre>
pool my_Exchange__single_owa_pool
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<pre>
when HTTP_RESPONSE {
</pre>
<pre>
if { ( [HTTP::header exists &quot;WWW-Authenticate&quot;] &amp;&amp; [string tolower [HTTP::header values &quot;WWW-Authenticate&quot;]] contains &quot;negotiate&quot; ) ||
</pre>
<pre>
( [HTTP::header exists &quot;Persistent-Auth&quot;] &amp;&amp; [string tolower [HTTP::header &quot;Persistent-Auth&quot;]] contains &quot;true&quot; ) } {
</pre>
<pre>
ONECONNECT::reuse disable
</pre>
<pre>
ONECONNECT::detach disable
</pre>
<pre>
## disables NTLM conn pool for connections where OneConnect has been disabled
</pre>
<pre>
NTLM::disable
</pre>
<pre>
}
</pre>
<pre>
## this command rechunks encoded responses
</pre>
<pre>
if {[HTTP::header exists &quot;Transfer-Encoding&quot;]} {
</pre>
<pre>
HTTP::payload rechunk
</pre>
<pre>
}
</pre>
<pre>
}
</pre>
<p><a name="Anchor-86" id="Anchor-86"></a><b>Modifying the virtual server to use the iRules and Access Profile</b></p>
<p>The final task is to modify the BIG-IP LTM virtual server(s) to use the new pool assignment iRule (and remove any existing pool assignment iRules), the terminate inactive sessions iRule, and add the Access Profile you created on BIG-IP APM.</p>
<p>If you created separate virtual servers, you must add the pool assignment iRule and Access Profile to all BIG-IP LTM virtual server for the HTTP-based client access services (Outlook Web App, Outlook Anywhere, ActiveSync, and Autodiscover). The terminate inactive sessions iRule only needs to be assigned to the OWA virtual server.</p>
<h2><a name="Anchor-32" id="Anchor-32"></a><b>Optional: Securing Access to the Exchange Administration Center with BIG-IP APM</b></h2>
<p>Exchange administration is performed via a web-based console, the Exchange Administration Center (EAC). You can use F5âs APM module to query Active Directory group membership for the user making the request to EAC. If the user is not a member of the Organization Management group, the APM policy denies access.</p>
<h3><b>Creating the Access profile</b></h3>
<p>This configuration requires creating a new APM Access Profile object. If you have previously deployed Exchange 2010 CAS servers with APM using the iApp template, the simplest way is to create the profile is to copy the existing policy created by the template.</p>
<h3><b>Copying the Access Policy created by the iApp template</b></h3>
<p>To copy the Access Policy created by iApp, use the following procedure.</p>
<ol>
<li>To copy the Access Policy created by the iApp template</li>
<li>On the Main tab, expandÂ <b>Access Policy</b>, and clickÂ <b>Access Profiles</b>.</li>
<li>In the Access Policy list, find the row for the Access Policy created by the Exchange iApp template. This policy starts with the name you gave the iApp, followed byÂ <b>_apm_access</b>.</li>
<li>Click theÂ <b>Copy</b>Â link that corresponds to the Access Policy.</li>
<li>In theÂ <b>Copied Profile Name</b>Â box, type a new name for this profile.</li>
<li>Click theÂ <b>Copy</b>Â button.</li>
<li>Continue withÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-102" rel="noreferrer"><i>Editing the APM Access Policy if you copied the existing Access Policy</i></a><i>.</i></li>
</ol>
<h3><b>Creating a new Access Policy</b></h3>
<p>To create a new Access Policy, use the following table for guidance. For specific instructions, see the online help or product manuals.</p>
<table border="0" cellspacing="3" cellpadding="0" width="540">
<tbody><tr><td><p><b>BIG-IP APM Object</b></p>
</td>
<td colspan="2"><p><b>Non-default settings/Notes</b></p>
</td>
</tr></tbody><tbody><tr><td rowspan="2" valign="top"><p><b>Access Profile</b>Â (Main tab--&gt;Access Policy--&gt;Access Profiles)</p>
</td>
<td valign="top"><p><b>Name</b></p>
</td>
<td valign="top"><p>Type a unique name.</p>
</td>
</tr><tr><td valign="top"><p><b><i>SSO Configuration</i></b></p>
</td>
<td valign="top"><p>Use the NTLMv1 SSO object created by the iApp template</p>
</td>
</tr></tbody></table>
<h3><b>Editing the APM Access Policy if you created a new Access Policy</b></h3>
<p>Use this section to edit the Access Profile if you created a new Access Policy.</p>
<p><b>To edit the access policy</b></p>
<ol>
<li>On the Main tab, expandÂ <b>Access Policy</b>, and clickÂ <b>Access Profiles</b>.</li>
<li>Locate the Access Profile you created using the table above, and then, in the Access Policy column, clickÂ <b>Edit</b>. The VPE opens in a new window.</li>
<li>Click theÂ <b>+</b>Â symbol betweenÂ <b>Start</b>Â andÂ <b>Deny</b>. A box opens with options for different actions.<ol>
<li>Click theÂ <b>Logon Page</b>Â option button, and then theÂ <b>Add Item</b>button at the bottom.</li>
<li>From theÂ <b>Split domain from full Username</b>Â list, selectÂ <b>Yes</b>.</li>
<li>Configure the rest of the Logon Page properties as applicable, and then clickÂ <b>Save</b>.</li>
</ol>
</li>
<li>Click theÂ <b>+</b>Â symbol betweenÂ <b>Logon Page</b>Â andÂ <b>Deny</b>.</li>
</ol>
<ol>
<li>On the Successful path betweenÂ <b>AD Auth</b>Â andÂ <b>Deny</b>, click theÂ <b>+</b>symbol.</li>
<li>Â <ol>
<li>In the Authentication section, click theÂ <b>AD Auth</b>Â option button, and clickÂ <b>Add Item</b>.</li>
<li>In theÂ <b>Active Directory</b>Â properties box, from theÂ <b>Server</b>Â list, select the AAA server created by the iApp.</li>
<li>The rest of the settings are optional. ClickÂ <b>Save</b>.</li>
</ol>
</li>
</ol>
<ol>
<li>On theÂ <b>is EAC</b>Â path (if you did not modify the name, this is Branch Rule 1) betweenÂ <b>EAC URI Check</b>Â andÂ <b>Deny</b>Â click theÂ <b>+</b>Â symbol.</li>
<li>Â <ol>
<li>Click theÂ <b>Empty</b>Â option button, and then clickÂ <b>Add Item</b>.</li>
<li>In theÂ <b>Name</b>Â box, typeÂ <b>EAC URI Check</b>.</li>
<li>Click the Branch Rules tab.</li>
<li>ClickÂ <b>Add Branch Rule</b>.</li>
<li>In theÂ <b>Name</b>Â box, typeÂ <b>is EAC</b>.</li>
<li>In the Expression row, click theÂ <b>change</b>Â link.</li>
<li>ClickÂ <b>Add Expression</b>.</li>
<li>From theÂ <b>Agent Sel</b>Â list, selectÂ <b>Landing URI</b>.</li>
<li>In theÂ <b>Landing URI is</b>Â box, typeÂ <b>/ecp/default.aspx</b>.</li>
<li>ClickÂ <b>Add Expression</b>.</li>
<li>Click theÂ <b>Finished</b>Â button.</li>
<li>Click theÂ <b>Save</b>Â button.</li>
</ol>
</li>
</ol>
<ol>
<li>On the fallback path betweenÂ <b>EAC URI Check</b>Â andÂ <b>Deny</b>, click theÂ <b>+</b>symbol.</li>
<li>Â <ol>
<li>ClickÂ <b>AD Query</b>, and then clickÂ <b>Add Item</b>.</li>
<li>In theÂ <b>Name</b>Â box, typeÂ <b>EAC AD Query</b>.</li>
<li>From theÂ <b>Server</b>Â list, select the AAA server created by the iApp.</li>
<li>In theÂ <b>Search Filter</b>Â box, typeÂ <b>sAMAccountName=%{session.logon.last.username}</b>.</li>
<li>Click the Branch Rules tab.</li>
<li>In theÂ <b>Name</b>Â box, delete any existing text, and then typeÂ <b>Organization Management</b>.</li>
<li>In the Expression row, click theÂ <b>change</b>Â link.</li>
<li>Click the Delete (<b>x</b>) button to the right of theÂ <b>User's Primary Group ID is</b>Â box.</li>
<li>ClickÂ <b>Add Expression</b>.</li>
<li>From theÂ <b>Agent Sel</b>Â list, selectÂ <b>AD Query</b>.</li>
<li>From theÂ <b>Condition</b>Â list, selectÂ <b>User is a Member of</b>.</li>
<li>In theÂ <b>User is a member of</b>Â box, typeÂ <b>CN=Organization Management,OU=Microsoft Exchange Security Groups,DC=example,DC=com</b>.</li>
<li>ClickÂ <b>Add Expression</b>.</li>
<li>Click theÂ <b>Finished</b>Â button.</li>
<li>Click theÂ <b>Save</b>Â button.</li>
</ol>
</li>
</ol>
<ol>
<li>On theÂ <b>Organization Management</b>Â path, betweenÂ <b>EAC AD QueryÂ </b>andÂ <b>Deny</b>Â clickÂ <b>+</b>.</li>
<li>Â <ol>
<li>ClickÂ <b>SSO Credential Mapping</b>, and then clickÂ <b>Add Item</b>.</li>
<li>Configure the settings as applicable. We leave the settings at the defaults.</li>
<li>ClickÂ <b>Save</b>.</li>
<li>On the fallback path betweenÂ <b>SSO Credential Mapping</b>Â andÂ <b>Deny</b>, click theÂ <b>Deny</b>Â box/link.</li>
<li>Click theÂ <b>Allow</b>Â option button, and then clickÂ <b>Save</b>.</li>
</ol>
</li>
</ol>
<ol>
<li>Click the yellowÂ <b>Apply Access Policy</b>Â link in the upper left part of the window. You must apply an access policy before it takes effect.</li>
<li>Continue withÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-104" rel="noreferrer"><i>Modifying the virtual server to use the new Access Policy</i></a><i>.</i></li>
<li>Â <ol>
<li>ClickÂ <b>SSO Credential Mapping</b>, and then clickÂ <b>Add Item</b>.</li>
<li>Configure the settings as applicable. We leave the settings at the defaults.</li>
<li>ClickÂ <b>Save</b>.</li>
<li>On the fallback path betweenÂ <b>SSO Credential Mapping</b>Â andÂ <b>Deny</b>, click theÂ <b>Deny</b>Â box/link.</li>
<li>Click theÂ <b>Allow</b>Â option button, and then clickÂ <b>Save</b>.</li>
</ol>
</li>
</ol>
<h3><a name="Anchor-102" id="Anchor-102"></a><b>Editing the APM Access Policy if you copied the existing Access Policy</b></h3>
<p>Use this section to edit the Access Profile if you made a copy of the Access Policy created by the iApp template.</p>
<p><b>To edit the access policy</b></p>
<ol>
<li>On the Main tab, expandÂ <b>Access Policy</b>, and clickÂ <b>Access Profiles</b>.</li>
<li>Locate the Access Profile you created using the table above, and then, in the Access Policy column, clickÂ <b>Edit</b>. The VPE opens in a new window.</li>
<li>On the Successful path betweenÂ <b>AD Auth</b>Â andÂ <b>SSO Credential Mapping</b>, click theÂ <b>+</b>Â symbol.<ol>
<li>Click theÂ <b>Empty</b>Â option button, and then clickÂ <b>Add Item</b>.</li>
<li>In theÂ <b>Name</b>Â box, typeÂ <b>EAC URI Check</b>.</li>
<li>Click the Branch Rules tab.</li>
<li>ClickÂ <b>Add Branch Rule</b>.</li>
<li>In theÂ <b>Name</b>Â box, typeÂ <b>is EAC</b>.</li>
<li>In the Expression row, click theÂ <b>change</b>Â link.</li>
<li>ClickÂ <b>Add Expression</b>.</li>
<li>From theÂ <b>Agent Sel</b>Â list, selectÂ <b>Landing URI</b>.</li>
<li>In theÂ <b>Landing URI is</b>Â box, typeÂ <b>/ecp/default.aspx</b>.</li>
<li>ClickÂ <b>Add Expression</b>.</li>
<li>Click theÂ <b>Finished</b>Â button.</li>
<li>Click theÂ <b>Save</b>Â button.</li>
</ol>
</li>
<li>On theÂ <b>is EAC</b>Â path (if you did not modify the name, this is Branch Rule 1) betweenÂ <b>EAC URI Check</b>Â andÂ <b>Deny</b>Â click theÂ <b>+</b>Â symbol.</li>
</ol>
<ol>
<li>On theÂ <b>Organization Management</b>Â path, betweenÂ <b>EAC AD QueryÂ </b>andÂ <b>Deny</b>Â click theÂ <b>+</b>Â symbol.</li>
<li>Â <ol>
<li>ClickÂ <b>AD Query</b>, and then clickÂ <b>Add Item</b>.</li>
<li>In theÂ <b>Name</b>Â box, typeÂ <b>EAC AD Query</b>.</li>
<li>From theÂ <b>Server</b>Â list, select the AAA Server created by the iApp.</li>
<li>In theÂ <b>Search Filter</b>Â box, typeÂ <b>sAMAccountName=%{session.logon.last.username}</b>.</li>
<li>Click the Branch Rules tab.</li>
<li>In theÂ <b>Name</b>Â box, delete any existing text, and then typeÂ <b>Organization Management</b>.</li>
<li>In the Expression row, click theÂ <b>change</b>Â link.</li>
<li>Click the Delete (<b>x</b>) button to the right of theÂ <b>User's Primary Group ID is</b>Â box.</li>
<li>ClickÂ <b>Add Expression</b>.</li>
<li>From theÂ <b>Agent Sel</b>Â list, selectÂ <b>AD Query</b>.</li>
<li>From theÂ <b>Condition</b>Â list, selectÂ <b>User is a Member of</b>.</li>
<li>In theÂ <b>User is a member of</b>Â box, typeÂ <b>CN=Organization Management,OU=Microsoft Exchange Security Groups,DC=example,DC=com</b>.</li>
<li>ClickÂ <b>Add Expression</b>.</li>
<li>Click theÂ <b>Finished</b>Â button.</li>
<li>Click theÂ <b>Save</b>Â button.</li>
</ol>
</li>
</ol>
<ol>
<li>Click the yellowÂ <b>Apply Access Policy</b>Â link in the upper left part of the window. You must apply an access policy before it takes effect.</li>
<li>Use the following procedure to add the Access Policy to the virtual server.</li>
<li>Â <ol>
<li>ClickÂ <b>SSO Credential Mapping</b>, and then clickÂ <b>Add Item</b>.</li>
<li>Configure the settings as applicable. We leave the settings at the defaults.</li>
<li>ClickÂ <b>Save</b>.</li>
<li>On the fallback path betweenÂ <b>SSO Credential Mapping</b>Â andÂ <b>Deny</b>, click theÂ <b>Deny</b>Â box/link.</li>
<li>Click theÂ <b>Allow</b>Â option button, and then clickÂ <b>Save</b>.</li>
</ol>
</li>
</ol>
<h3><a name="Anchor-104" id="Anchor-104"></a><b>Modifying the virtual server to use the new Access Policy</b></h3>
<p>The final task is to add the new Access Policy to the virtual server.</p>
<p><b>To modify the virtual server to use the Access Policy</b></p>
<ol>
<li>On the Main tab, expandÂ <b>Local Traffic</b>Â and then clickÂ <b>Virtual Servers.</b></li>
<li>Click the name of the appropriate virtual server. This is either the single virtual server for all HTTP-based client access services or the separate virtual server for OWA.</li>
<li>In the Access Policy section, from theÂ <b>Access Profile</b>Â list, select the Access profile you just modified.</li>
<li>ClickÂ <b>Update</b>.</li>
</ol>
<p>This completes the EAC configuration.</p>
<h2><a name="Anchor-105" id="Anchor-105"></a><b>Optional: Configuring the APM for Outlook Anywhere with NTLM Authentication - BIG-IP v11.3 or later only</b></h2>
<p>F5âs Access Policy Manager (APM) module supports NTLM authentication for Outlook clients using the RPC-over-HTTP protocol (Outlook Anywhere) in version 11.3 and later. Use the following table for guidance on configuring the BIG-IP APM. Give each BIG-IP object a unique name in theÂ <b>Name</b>Â field. Note that the Kerberos SSO method is the only SSO method that can be used when the authentication method of the access policy is NTLM.</p>
<p><i>Before configuring BIG-IP system, you must perform prerequisite configuration steps on the Exchange Server(s) and Active Directory servers</i>. SeeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-100" rel="noreferrer"><i>Appendix E: Active Directory and Exchange Server configuration for NTLM</i></a><i>.</i></p>
<table border="0" cellspacing="3" cellpadding="0" width="540">
<tbody><tr><td colspan="2" valign="top"><p><b>AAA ServerÂ </b>(Access Policy--&gt;AAA Servers)</p>
</td>
</tr><tr><td valign="top"><p><b>Type</b></p>
</td>
<td valign="top"><p><b>Active Directory</b></p>
</td>
</tr><tr><td valign="top"><p><b>Domain Controller</b></p>
</td>
<td valign="top"><p>Type the IP address or FQDN name of an Active Directory Domain Controller</p>
</td>
</tr><tr><td valign="top"><p><b>Domain Name</b></p>
</td>
<td valign="top"><p>Type the Active Directory domain name</p>
</td>
</tr><tr><td valign="top"><p><b>Admin Name1</b></p>
</td>
<td valign="top"><p>Type the AD user name with administrative permissions (optional)</p>
</td>
</tr><tr><td valign="top"><p><b>Admin Password1</b></p>
</td>
<td valign="top"><p>Type the associated password (optional). Type it again in the Verify Password box</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>SSO ConfigurationÂ </b>(Access Policy--&gt;SSO Configurations)</p>
</td>
</tr><tr><td valign="top"><p><b>SSO Method</b></p>
</td>
<td valign="top"><p><b>Kerberos</b></p>
</td>
</tr><tr><td valign="top"><p><b>Kerberos Realm</b></p>
</td>
<td valign="top"><p>Type the Kerberos Realm. This must be uppercase, such asÂ <b>MYDOMAIN.COM</b></p>
</td>
</tr><tr><td valign="top"><p><b>KDC1</b></p>
</td>
<td valign="top"><p>IP address of the Kerberos Key Distribution Center. If you leave this field blank, the system uses DNS to find the address of the KDC</p>
</td>
</tr><tr><td valign="top"><p><b>Account Name</b></p>
</td>
<td valign="top"><p>The account name of the Active Directory user account to which logon rights have been delegated; this must begin with<b>Â host/</b>, for example,Â <b>host/bigip_user_acct.mydomain.local</b></p>
</td>
</tr><tr><td valign="top"><p><b>Account Password</b></p>
</td>
<td valign="top"><p>Type the associated password</p>
</td>
</tr><tr><td valign="top"><p><b>SPN Pattern1</b></p>
</td>
<td valign="top"><p>Optional: Specify a custom SPN pattern to create the ticket request using the host name from the HTTP request1.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>NTLM Machine AccountÂ </b>(Access Policy--&gt;Access Profiles--&gt;NTLM)</p>
</td>
</tr><tr><td valign="top"><p><b>Machine Account Name</b></p>
</td>
<td valign="top"><p>The name of the account which will be joined to the Active Directory domain. This must be different than the account name specified in Kerberos SSO Configuration (such asÂ <b>bigip_machine_acct)</b>. Do not use spaces or special characters.</p>
</td>
</tr><tr><td valign="top"><p><b>Domain FQDN</b></p>
</td>
<td valign="top"><p>Type the FQDN for Active Directory (such asÂ <b>mydomain.com</b>)</p>
</td>
</tr><tr><td valign="top"><p><b>Admin User</b></p>
</td>
<td valign="top"><p>Type the user name of a user with permissions to join a computer account to the Active Directory domain.</p>
</td>
</tr><tr><td valign="top"><p><b>Admin Password1</b></p>
</td>
<td valign="top"><p>Type the associated password.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>NTLM Auth ConfigurationÂ 2Â </b>(Access Policy--&gt; Access Profiles--&gt;NTLM)</p>
</td>
</tr><tr><td valign="top"><p><b>Name</b></p>
</td>
<td valign="top"><p>Use following syntax:Â <b>exch_ntlm_</b>, i.e.Â <b>exch_ntlm_my_exchange_iapp_combined_https</b></p>
</td>
</tr><tr><td valign="top"><p><b>Machine Account Name</b></p>
</td>
<td valign="top"><p>Select the NTLM Machine Account you created above</p>
</td>
</tr><tr><td valign="top"><p><b>Domain Controller FQDN List</b></p>
</td>
<td valign="top"><p>Type the fully qualified name of your Active Directory domain controller and then clickÂ <b>Add</b>.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>11.4 and later only: Exchange Profile3Â </b>(Main tab--&gt;Access Policy--&gt;Secure Connectivity--&gt; Application Access--&gt; Microsoft Exchange)</p>
</td>
</tr><tr><td valign="top"><p><b>Parent Profile</b></p>
</td>
<td valign="top"><p><b>/Common/exchange</b></p>
</td>
</tr><tr><td valign="top"><p><b>NTLM Configuration</b></p>
</td>
<td valign="top"><p>Select the NTLM Auth configuration you created.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>In the left pane of the box, clickÂ Autodiscover</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Configuration</b></p>
</td>
<td valign="top"><p>From the Autodiscover SSO Configuration list, select the Kerberos SSO Configuration you created above.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>In the left pane of the box, clickÂ Exchange Web Service</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Configuration</b></p>
</td>
<td valign="top"><p>From the EWS SSO Configuration list, select the Kerberos SSO Configuration you created above.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>In the left pane of the box, clickÂ Offline Address Book</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Configuration</b></p>
</td>
<td valign="top"><p>From the OAB SSO Configuration list, select the Kerberos SSO Configuration you created above.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>In the left pane of the box, clickÂ Outlook Anywhere</b></p>
</td>
</tr><tr><td valign="top"><p><b>Front End Authentication</b></p>
</td>
<td valign="top"><p><b>NTLM</b></p>
</td>
</tr><tr><td valign="top"><p><b>SSO Configuration</b></p>
</td>
<td valign="top"><p>From the OAB SSO Configuration list, select the Kerberos SSO Configuration you created above.</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><b>Access ProfileÂ </b>(Main tab--&gt;Access Policy--&gt;Access Profiles)</p>
</td>
</tr><tr><td valign="top"><p><b>Microsoft Exchange</b></p>
</td>
<td valign="top"><p>If you created the Exchange profile, select the profile you created from the list.</p>
</td>
</tr><tr><td valign="top"><p><b><i>SSO Configuration</i></b></p>
</td>
<td valign="top"><p>Select name of Kerberos SSO configuration you created above</p>
</td>
</tr><tr><td colspan="2" valign="top"><p>Edit the Access Policy</p>
</td>
</tr><tr><td colspan="2" valign="top"><p><i>Edit the Access Profile you just created using the Visual Policy Editor. Continue now withÂ </i><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-127" rel="noreferrer"><i>Editing the Access Policy</i></a></p>
</td>
</tr><tr><td colspan="2" valign="top"><p>1 By default, the SSO will attempt to use reverse DNS lookups of the pool member IP address to construct the Kerberos ticket request. If you do not wish to use DNS to find the host name to be used in the ticket request, you can specify a custom SPN pattern to create the ticket request using the host name from the HTTP request. The correct SPN pattern is:Â <b>HTTP/%h@REALM.COM</b>, where REALM.com is replaced with your fully-qualified Active Directory domain name. This configuration also requires that the DefaultAppPool, MSExchangeAutodiscoverAppPool, and MSExchangeServicesAppPool IIS application pools are configured to run under the user account specified for Kerberos Delegation, and that an SPN has been created for the hostname used to access Outlook Anywhere and Autodiscover</p>
<p>2 You must create this object in the same partition and folder location as the virtual server to which the Access Profile is applied.Â <b>if you are manually reconfiguring the BIG-IP system from a previous iApp deployment, you will need to create this object from the tmsh command line</b>. See the following procedure.</p>
<p>3 If using the Exchange profile in 11.4 and later, you must remove any _sys_APM irules from the virtual server.</p>
</td>
</tr></tbody></table>
<h3><a name="Anchor-127" id="Anchor-127"></a><b>Editing the Access Policy</b></h3>
<p>The configuration in this section depends on whether you configured a separate virtual server for Outlook Anywhere, or configured a combined virtual server.</p>
<h3><b>Editing the Access profile for Outlook Anywhere on a separate virtual server</b></h3>
<p>Use the following procedure for configuring the Access Policy for a separate Outlook Anywhere virtual server.</p>
<p>To configure the Access Policy for Outlook Anywhere on a separate virtual server</p>
<ol>
<li>On the Main tab, expandÂ <b>Access Policy</b>, and clickÂ <b>Access Profiles</b>.</li>
<li>Locate the Access Profile you created using the table above, and then, in the Access Policy column, clickÂ <b>Edit</b>. The VPE opens.</li>
<li>Click theÂ <b>+</b>Â symbol betweenÂ <b>Start</b>Â andÂ <b>Deny</b>. A box opens with options for different actions.<ol>
<li>Click theÂ <b>Client for MS Exchange</b>Â option button, and then theÂ <b>Add Item</b>Â button at the bottom.</li>
<li>Click theÂ <b>Save</b>Â button.</li>
</ol>
</li>
<li>On theÂ <i>Client for MS Exchange</i>Â path, click theÂ <b>+</b>Â symbol betweenÂ <b>Client for MS ExchangeÂ </b>andÂ <b>Deny</b>. A box opens with options for different actions.</li>
</ol>
<ol>
<li>On theÂ <i>Successful</i>Â path betweenÂ <b>NTLM Auth Result CheckÂ </b>andÂ <b>Deny</b>, click theÂ <b>+</b>Â symbol.</li>
<li>Â <ol>
<li>Click theÂ <b>NTLM Auth Result Check</b>Â option button, and then theÂ <b>Add Item</b>Â button at the bottom.</li>
<li>Click theÂ <b>Save</b>Â button.</li>
</ol>
</li>
</ol>
<ol>
<li>On theÂ <i>fallback</i>Â path betweenÂ <b>SSO Credential Mapping</b>Â andÂ <b>Deny</b>, click theÂ <b>Deny</b>Â box. Click theÂ <b>Allow</b>Â option button, and then clickÂ <b>Save</b>.</li>
<li>On theÂ <i>Fallback</i>Â path betweenÂ <b>NTLM Auth Result CheckÂ </b>andÂ <b>Deny</b>, click theÂ <b>+</b>Â symbol.</li>
<li>Â <ol>
<li>Click theÂ <b>SSO Credential Mapping</b>Â option button, and then clickÂ <b>Add Item</b>.</li>
<li>Configure the Properties as applicable for your configuration. In our example, we leave the settings at the defaults. Click theÂ <b>Save</b>button.</li>
</ol>
</li>
</ol>
<ol>
<li>On theÂ <i>Fallback</i>Â path betweenÂ <b>Logon PageÂ </b>andÂ <b>Deny</b>, click theÂ <b>+</b>symbol.</li>
<li>Â <ol>
<li>Click theÂ <b>Logon Page</b>Â option button, and then theÂ <b>Add Item</b>button at the bottom.</li>
<li>From theÂ <b>Split domain from full Username</b>Â list, selectÂ <b>Yes</b>.</li>
<li>Configure the rest of the Logon Page properties as applicable, and then clickÂ <b>Save</b>.</li>
</ol>
</li>
</ol>
<ol>
<li>On theÂ <i>Successful</i>Â path betweenÂ <b>AD Auth</b>Â andÂ <b>Deny</b>, click theÂ <b>+</b>symbol.</li>
<li>Click theÂ <b>SSO Credential Mapping</b>Â option button, and then clickÂ <b>Add Item</b>.</li>
<li>Configure the Properties as applicable for your configuration. In our example, we leave the settings at the defaults. Click theÂ <b>Save</b>Â button.</li>
<li>On theÂ <i>fallback</i>Â path betweenÂ <b>SSO Credential Mapping</b>Â andÂ <b>Deny</b>, click theÂ <b>Deny</b>Â box. Click theÂ <b>Allow</b>Â option button, and then clickÂ <b>Save</b>.</li>
<li>Click the yellowÂ <b>Apply Access Policy</b>Â link in the upper left part of the window. You must apply an access policy before it takes effect.</li>
<li>Â <ol>
<li>In the Authentication section, click theÂ <b>AD Auth</b>Â option button, and clickÂ <b>Add Item</b>.</li>
<li>In theÂ <b>Active Directory</b>Â properties box, from theÂ <b>Server</b>Â list, select the AAA Server you created using the table above.</li>
<li>ClickÂ <b>Save</b>.</li>
</ol>
</li>
</ol>
<h3><b>Editing the Access profile for Outlook Anywhere on a combined virtual server</b></h3>
<p>Use the following procedure for configuring the Access Policy if you configured Outlook Anywhere as a part of a combined virtual server.</p>
<p><b>To configure the Access Policy for Outlook Anywhere on a combined virtual server</b></p>
<ol>
<li>On the Main tab, expandÂ <b>Access Policy</b>, and clickÂ <b>Access Profiles</b>.</li>
<li>Locate the Access Profile you created using the table above, and then, in the Access Policy column, clickÂ <b>Edit</b>. The VPE opens in a new window.</li>
<li>Click theÂ <b>+</b>Â symbol betweenÂ <b>Start</b>Â andÂ <b>Deny</b>. A box opens with options for different actions.<ol>
<li>Click theÂ <b>Client for MS Exchange</b>Â option button, and then theÂ <b>Add Item</b>Â button at the bottom.</li>
<li>Click theÂ <b>Save</b>Â button.</li>
</ol>
</li>
<li>On theÂ <i>Client for MS Exchange</i>Â path, click theÂ <b>+</b>Â symbol betweenÂ <b>Client for MS ExchangeÂ </b>andÂ <b>Deny</b>. A box opens with options for different actions.</li>
</ol>
<ol>
<li>On theÂ <i>Successful</i>Â path betweenÂ <b>NTLM Auth Result CheckÂ </b>andÂ <b>Deny</b>, click theÂ <b>+</b>Â symbol.</li>
<li>Â <ol>
<li>Click theÂ <b>NTLM Auth Result Check</b>Â option button, and then theÂ <b>Add Item</b>Â button at the bottom.</li>
<li>Click theÂ <b>Save</b>Â button.</li>
</ol>
</li>
</ol>
<ol>
<li>On theÂ <i>fallback</i>Â path betweenÂ <b>SSO Credential Mapping</b>Â andÂ <b>Deny</b>, click theÂ <b>Deny</b>Â box. Click theÂ <b>Allow</b>Â option button, and then clickÂ <b>Save</b>.</li>
<li>On theÂ <i>Fallback</i>Â path betweenÂ <b>NTLM Auth Result CheckÂ </b>andÂ <b>Deny</b>, click theÂ <b>+</b>Â symbol.</li>
<li>Â <ol>
<li>Click theÂ <b>SSO Credential Mapping</b>Â option button, and then clickÂ <b>Add Item</b>.</li>
<li>Configure the Properties as applicable for your configuration. In our example, we leave the settings at the defaults. Click theÂ <b>Save</b>button.</li>
</ol>
</li>
</ol>
<ol>
<li>On theÂ <i>Fallback</i>Â path betweenÂ <b>Logon PageÂ </b>andÂ <b>Deny</b>, click theÂ <b>+</b>symbol.</li>
<li>Â <ol>
<li>Click theÂ <b>Logon Page</b>Â option button, and then theÂ <b>Add Item</b>button at the bottom.</li>
<li>From theÂ <b>Split domain from full Username</b>Â list, selectÂ <b>Yes</b>.</li>
<li>Configure the rest of the Logon Page properties as applicable, and then clickÂ <b>Save</b>.</li>
</ol>
</li>
</ol>
<ol>
<li>On theÂ <i>Successful</i>Â path betweenÂ <b>AD Auth</b>Â andÂ <b>Deny</b>, click theÂ <b>+</b>symbol.</li>
<li>Â <ol>
<li>In the Authentication section, click theÂ <b>AD Auth</b>Â option button, and clickÂ <b>Add Item</b>.</li>
<li>In theÂ <b>Active Directory</b>Â properties box, from theÂ <b>Server</b>Â list, select the AAA Server you created using the table above. The rest of the settings are optional.</li>
<li>ClickÂ <b>Save</b>.</li>
</ol>
</li>
</ol>
<ol>
<li>On theÂ <i>fallback</i>Â path betweenÂ <b>SSO Credential Mapping</b>Â andÂ <b>Deny</b>, click theÂ <b>Deny</b>Â box. Click theÂ <b>Allow</b>Â option button, and then clickÂ <b>Save</b>.</li>
<li>On theÂ <i>Fallback</i>Â path betweenÂ <b>Client for MS ExchangeÂ </b>(the first box of the VPE) andÂ <b>Deny</b>, click theÂ <b>+</b>Â symbol.</li>
<li>Â <ol>
<li>Click theÂ <b>SSO Credential Mapping</b>Â option button, and then clickÂ <b>Add Item</b>.</li>
<li>Configure the Properties as applicable for your configuration. In our example, we leave the settings at the defaults. Click theÂ <b>Save</b>button.</li>
</ol>
</li>
</ol>
<ol>
<li>On the bottomÂ <i>Fallback</i>Â path between the newÂ <b>Logon PageÂ </b>andÂ <b>Deny</b>, click theÂ <b>+</b>Â symbol.</li>
<li>Â <ol>
<li>Click theÂ <b>Logon Page</b>Â option button, and then theÂ <b>Add Item</b>button at the bottom.</li>
<li>From theÂ <b>Split domain from full Username</b>Â list, selectÂ <b>Yes</b>.</li>
<li>Configure the rest of the Logon Page properties as applicable, and then clickÂ <b>Save</b>.</li>
</ol>
</li>
</ol>
<ol>
<li>On theÂ <i>Successful</i>Â path betweenÂ <b>AD Auth</b>Â andÂ <b>Deny</b>, click theÂ <b>+</b>symbol.</li>
<li>Â <ol>
<li>In the Authentication section, click theÂ <b>AD Auth</b>Â option button, and clickÂ <b>Add Item</b>.</li>
<li>In theÂ <b>Active Directory</b>Â properties box, from theÂ <b>Server</b>Â list, select the AAA Server you created using the table above. The rest of the settings are optional.</li>
<li>ClickÂ <b>Save</b>.</li>
</ol>
</li>
</ol>
<ol>
<li>On theÂ <i>fallback</i>Â path betweenÂ <b>SSO Credential Mapping</b>Â andÂ <b>Deny</b>, click theÂ <b>Deny</b>Â box. Click theÂ <b>Allow</b>Â option button, and then clickÂ <b>Save</b>.</li>
<li>Click the yellowÂ <b>Apply Access Policy</b>Â link in the upper left part of the window. You must apply an access policy before it takes effect.</li>
<li>Â <ol>
<li>Click theÂ <b>SSO Credential Mapping</b>Â option button, and then clickÂ <b>Add Item</b>.</li>
<li>Configure the Properties as applicable for your configuration. In our example, we leave the settings at the defaults. Click theÂ <b>Save</b>button.</li>
</ol>
</li>
</ol>
<p>This completes the Access Policy for the combined virtual server.</p>
<h3><a name="Anchor-108" id="Anchor-108"></a><b>Applying the System iRule to Outlook Anywhere virtual server if using a BIG-IP version prior to 11.4</b></h3>
<p>Before attempting a connection via BIG-IP APM with Outlook Anywhere, you must apply the system iRule that manages NTLM authentication to either the separate Outlook Anywhere virtual server, or the combined virtual server.</p>
<p><b>To apply the system iRule to the virtual server</b></p>
<ol>
<li>On the Main tab, expandÂ <b>Local Traffic</b>Â and then clickÂ <b>Virtual Servers</b>.</li>
<li>Click the name of either the combined virtual server or the separate Outlook Anywhere virtual server.</li>
<li>Click theÂ <b>Resources</b>Â tab.</li>
<li>In the iRules section, click theÂ <b>Manage</b>Â button.</li>
<li>From theÂ <b>Available</b>Â list, selectÂ <b>_sys_APM_ExchangeSupport_OA_NtlmAuth</b>, and then click the Add (<b>&lt;&lt;</b>) button.</li>
<li>If necessary, use the Up and Down buttons to ensure the iRules are in the following order when deployed on a single, combined virtual server:</li>
</ol>
<p>Â·Â Â Â Â Â Â  <i>OWA Append iRuleÂ </i>(for combined virtual only)</p>
<p>Â·Â Â Â Â Â Â  <i>_sys_APM_ExchangeSupport_OA_NtlmAuth</i></p>
<p>Â·Â Â Â Â Â Â  <i>Select SSO iRule</i></p>
<p>Â·Â Â Â Â Â Â  <i>Combined Virtual Server Pool Assignment iRule</i></p>
<ol>
<li>ClickÂ <b>Finished</b>.</li>
</ol>
<h3><b>Setting the Default Pool on a combined virtual server</b></h3>
<p>If you have configured the BIG-IP system use a single, combined virtual server for Exchange, the final task is to set the BIG-IP LTM pool for Outlook Anywhere as the default pool for the virtual server.</p>
<p>To set the default pool on the combined virtual server</p>
<ol>
<li>On the Main tab, expandÂ <b>Local Traffic</b>Â and then clickÂ <b>Virtual Servers</b>.</li>
<li>Click the HTTPS virtual server (port 443) virtual server.</li>
<li>Click theÂ <b>Resources</b>Â tab.</li>
<li>In the Load Balancing section, from theÂ <b>Default Pool</b>Â list, select the Outlook Anywhere pool.</li>
<li>ClickÂ <b>Update</b>.</li>
</ol>
<p>This completes the configuration for NTLM and Outlook Anywhere.</p>
<h2><b>Access Policy example when using both EAC restricted access and NTLM for Outlook Anywhere or MAPI over HTTP</b></h2>
<p>Using both EAC restricted access and NTLM for Outlook Anywhere and/or MAPI over HTTP in a single Access Policy is an acceptable configuration, although the step by step procedure is outside the scope of this document (use the iApp for this scenario if you need the walkthrough).</p>
<h2><a name="Anchor-97" id="Anchor-97"></a><b>Manually configuring the BIG-IP Advanced Firewall Module to secure your Exchange deployment</b></h2>
<p>This section describes how to manually configure BIG-IP AFM, F5's Network Firewall module, to secure your Exchange deployment. BIG-IP AFM is particularly useful if you want to only allow access from specific clients or networks. Because this configuration can be complex, we recommend using the iApp template in version 11.6 and later to configure BIG-IP AFM.</p>
<h3><b>Network Firewall settings</b></h3>
<p>When configuring the BIG-IP Advanced Firewall Manager, you may want to configure your BIG-IP system to drop all traffic that you have not specifically allowed with firewall rules. This in known asÂ <b><i>firewall mode</i></b>. By default, your BIG-IP system is set to default-accept, or ADC mode. Instructions for configuring your BIG-IP system, and the implications to consider, can be found on AskF5. For example, for BIG-IP v11.5:Â <a href="http://support.f5.com/kb/en-us/products/big-ip-afm/manuals/product/network-firewall-policies-implementations-11-5-0/1.html" rel="noreferrer">http://support.f5.com/kb/en-us/products/big-ip-afm/manuals/product/network-firewall-policies-implementations-11-5-0/1.html</a></p>
<p>If you have licensed IP Intelligence on the BIG-IP system, you can prohibit connections from sources with low reputation scores.</p>
<p>The following instructions cover a basic firewall configuration that is effective for the most common scenario of wanting to allow connections from a single trusted network. If you have complex requirements, such as the need to schedule different policies for different times of the day, or you want to create complicated rule or address lists, consult the BIG-IP AFM documentation. The basic steps for Policy and Rule creation apply to all scenarios.</p>
<p><a name="Anchor-111" id="Anchor-111"></a>To configure the BIG-IP AFM to allow connections from a single trusted network</p>
<ol>
<li><p><i>Create a Network Firewall Policy:</i></p>
</li>
<li><p>From the Configuration utility, clickÂ <b>Security &gt; Network Firewall &gt; Policies,</b> and then clickÂ <b>Create.</b></p>
</li>
<li><p>In theÂ <b>Name</b>Â field, type a unique name for the policy, such asÂ <b>Exchange-Policy.</b></p>
</li>
<li><p>ClickÂ <b>Finished.</b></p>
</li>
<li><p><i>Create a rule to allow authorized hosts or networks to connect:</i></p>
</li>
<li><p>ClickÂ <b>Security &gt; Network Firewall &gt; Policies.</b></p>
</li>
<li><p>Click the name of the policy you just created.</p>
</li>
<li><p>In the Rule section (below the General Properties section), click theÂ <b>Add</b>Â button.</p>
</li>
<li><p>Leave theÂ <b>Type</b>Â list set to Rule.</p>
</li>
<li><p>From theÂ <b>Order</b>Â list, selectÂ <b>First.</b> The Order list only appears in version 11.5 and later. In 11.4.x, you must reorder the rules from the Policy General Properties page.</p>
</li>
<li><p>In theÂ <b>Name</b>Â field, type a unique name, for instanceÂ <b>Exchange-traffic-Allowed.</b></p>
</li>
<li><p>Ensure theÂ <b>State</b>Â list is set toÂ <b>Enabled.</b></p>
</li>
<li><p>From theÂ <b>Protocol</b>Â list, selectÂ <b>TCP.</b> Leave the box to the right of TCP set toÂ <b>6.</b></p>
</li>
<li><p>In theÂ SourceÂ section, from theÂ <b>Address/Region</b>Â list, selectÂ <b>Specify.</b> You are now able to list the trusted source addresses for your connection. In the following example, we will configure a single subnet as trusted.</p>
<ul>
<li><p>Select <b>Address.</b></p>
</li>
<li><p>In the box, type the network address you want to allow, including netmask if more than a single host. Specify a network using CIDR notation, such asÂ <b>10.0.0.0/24.</b></p>
</li>
<li><p>Do not configure a source port.</p>
</li>
<li><p>Optional: If you want to limit inbound connections to a specific VLAN or Tunnel, from theÂ <b>VLAN / Tunnel</b>Â list, selectÂ <b>Specify,</b> and then move the VLANs or tunnels that are allowed access to the Selected box.</p>
</li>
<li><p>Click <b>Add.</b></p>
</li>
<li><p>Repeat these steps for additional hosts or networks. Use <b>Address List</b> or <b>Address Range</b> when appropriate.</p>
</li>
</ul>
</li>
<li><p>In theÂ <b>Destination</b>Â section, leave theÂ <b>Address/Region</b>Â andÂ <b>Port</b>Â set toÂ <b>Any.</b> Because you will be applying your policy to a virtual server that listens only on a single desired address and port, do not specify that information here.</p>
</li>
<li><p>If necessary, from theÂ <b>Action</b>Â list, selectÂ <b>Accept.</b></p>
</li>
<li><p><i>Optional:Â </i>If you have configured a logging profile and want to log connections, from theÂ <b>Logging</b>Â list, selectÂ <b>Enabled.</b> Typically, allowed connections do not need to be logged.</p>
</li>
<li><p>ClickÂ <b>Finished.</b></p>
</li>
<li><p><i>Creating a firewall rule to block all other trafficÂ </i>The next task is to create a firewall rule to block all other traffic that you have not allowed. Although this is not a required step if your BIG-IP system is set to default deny (<b>Firewall mode</b>), it is required in default-accept (<b>ADC mode</b>), and is a good practice to always configure such a rule.</p>
</li>
<li><p>ClickÂ <b>Security &gt; Network Firewall &gt; Policies.</b></p>
</li>
<li><p>Click the name of the policy you created in step 1.</p>
</li>
<li><p>In the Rule section (below the General Properties section), click theÂ <b>Add</b>Â button.</p>
</li>
<li><p>Leave theÂ <b>Type</b>Â list set toÂ <b>Rule.</b></p>
</li>
<li><p>Leave theÂ <b>Order</b>Â list, selectÂ <b>Last.</b></p>
</li>
<li><p>In theÂ <b>Name</b>Â field, type a unique name, for exampleÂ <b>Exchange-traffic-Prohibited.</b></p>
</li>
<li><p>Ensure theÂ <b>State</b>Â list is set toÂ <b>Enabled.</b></p>
</li>
<li><p>From theÂ <b>Protocol</b>Â list, selectÂ <b>TCP.</b> Leave the box to the right of TCP set toÂ <b>6.</b></p>
</li>
<li><p>In theÂ <b>Source</b>Â section, leave all the lists set toÂ <b>Any</b></p>
</li>
<li><p>From theÂ <b>Action</b>Â list, select eitherÂ <b>Drop</b>Â (to silently discard incoming connections) orÂ <b>Reject</b>Â (to send a Destination Unreachable message to the sender).</p>
</li>
<li><p>If you configured a logging profile as described inÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-129" rel="noreferrer"><i>Optional: Configuring the BIG-IP system to log network firewall events</i></a>, from theÂ <b>Logging</b>Â list, selectÂ <b>Enabled.</b></p>
</li>
<li><p>ClickÂ <b>Finished.</b> You return to the Policy Properties page.</p>
</li>
<li><p>On the Policy Properties page, in the Rules section, ensure the rule with the Action of Accept comes before the Drop or Reject rule you just created. If it does not, use theÂ <b>Reorder</b>Â button and drag the rules into the correct order.</p>
</li>
<li><p><i>Apply Your Firewall Policy to your Virtual Server</i></p>
</li>
<li><p>ClickÂ <b>Security &gt; Network Firewall &gt; Active.Rules.</b></p>
</li>
<li><p>In the Rule section (below the General Properties section), click theÂ <b>Add</b>Â button.</p>
</li>
<li><p>From theÂ <b>Context</b>Â list, selectÂ <b>Virtual Server,</b> and then select the virtual server you created for your Exchange traffic.</p>
</li>
<li><p>From theÂ <b>Type</b>Â list, selectÂ <b>Policy,</b> and then select the firewall policy you created.</p>
</li>
<li><p>From theÂ <b>Policy Type</b>Â list, selectÂ <b>Enforced.</b></p>
</li>
<li><p>ClickÂ <b>Finished.</b></p>
</li>
</ol>
<h3>Optional: Assigning an IP Intelligence Policy to your Exchange virtual server</h3>
<p>It is outside the scope of this document to provide instructions on configuring an IP Intelligence Policy. Full documentation on enabling and configuring the IP Intelligence feature can be found on AskF5. For example, the manual for BIG-IP AFM v11.5 is:Â <a href="https://support.f5.com/kb/en-us/products/big-ip-afm/manuals/product/network-firewall-policies-implementations-11-5-0/5.html" rel="noreferrer">https://support.f5.com/kb/en-us/products/big-ip-afm/manuals/product/network-firewall-policies-implementations-11-5-0/5.html</a></p>
<p>After you have enabled and configured an IP Intelligence policy, use the following steps to assign the policy to your Exchange virtual server:</p>
<ol>
<li>To assign the IP intelligence policy to the Exchange virtual server</li>
<li>On the Main tab, clickÂ <b>Local Traffic &gt; Virtual Servers</b>. The Virtual Server List screen opens.</li>
<li>Click the name of your Exchange virtual server.</li>
<li>From theÂ <b>Security</b>Â menu, chooseÂ <b>Policies</b>.</li>
<li>Next toÂ <b>IP Intelligence</b>, selectÂ <b>Enabled</b>, then select the IP intelligence policy to apply to traffic on the virtual server.</li>
<li>ClickÂ <b>Update</b>. The list screen and the updated item are displayed. The IP Intelligence policy is applied to traffic on the virtual server.</li>
</ol>
<h3><a name="Anchor-129" id="Anchor-129"></a><b>Optional: Configuring the BIG-IP system to log network firewall events</b></h3>
<p>If you are using BIG-IP AFM, you have the option of logging network firewall events to one or more remote syslog servers (recommended) or to log events locally. You can either use an iApp template to create the logging profile, or create the logging profile manually.</p>
<p>For specific information on logging on the BIG-IP system, see the appropriate guide for your version. For example, for 11.5.0:</p>
<ul>
<li>Remote High-Speed Logging:Â <a href="https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/tmos-implementations-11-5-0/22.html" rel="noreferrer">https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/tmos-implementations-11-5-0/22.html</a>.</li>
<li>Local logging:Â <a href="https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/tmos-concepts-11-5-0/11.html" rel="noreferrer">https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/tmos-concepts-11-5-0/11.html</a></li>
</ul>
<h3><b>Creating the logging profile using the iApp template</b></h3>
<p>Use this section to create the logging profile using the logging profile iApp template. If you have not already downloaded the iApp template, seeÂ <a href="https://devcentral.f5.com/wiki/iApp.F5-Remote-Logging-iApp.ashx" rel="noreferrer">https://devcentral.f5.com/wiki/iApp.F5-Remote-Logging-iApp.ashx</a>.</p>
<ol>
<li>To configure the logging profile iApp</li>
<li>Log on to the BIG-IP system.</li>
<li>On the Main tab, clickÂ <b>iApp</b>.<b>&gt;</b>.<b>Application Services</b>.</li>
<li>ClickÂ <b>Create</b>. The Template Selection page opens.</li>
<li>In theÂ <b>Name</b>Â box, type a name. In our example, we use<b>Â logging-iapp_.</b></li>
<li>From theÂ <b>Template</b>Â list, selectÂ <b>f5.remote_logging.v</b>. The template opens</li>
<li><p>Use the following table for guidance on configuring the iApp template. Questions not mentioned in the table can be configured as applicable for your implementation.</p>
<table border="0" cellspacing="3" cellpadding="0">
<tbody><tr><td><p>Question</p>
</td>
<td><p>Your selection</p>
</td>
</tr></tbody><tbody><tr><td><p>Do you want to create a new pool of remote logging servers, or use an existing one?</p>
</td>
<td><p>Unless you have already created a pool on the BIG-IP system for your remote logging servers, selectÂ <b>Create a new pool</b>.</p>
</td>
</tr><tr><td><p>Which servers should be included in this pool?</p>
</td>
<td><p>Specify the IP addresses of your logging servers. ClickÂ <b>Add</b>Â to include more servers.</p>
</td>
</tr><tr><td><p>What port do the pool members use?</p>
</td>
<td><p>Specify the port used by your logging servers, typicallyÂ <b>514</b>.</p>
</td>
</tr><tr><td><p>Do the pool members expect UDP or TCP connections?</p>
</td>
<td><p><b>TCP</b></p>
</td>
</tr><tr><td><p>Do you want to create a new monitor for this pool, or use an existing one?</p>
</td>
<td><p>Unless you have already created a health monitor for your pool of logging servers, selectÂ <b>Use a simple ICMP (ping) monitor</b>.</p>
</td>
</tr><tr><td><p>Do your log pool members require a specific log format?</p>
</td>
<td><p>If your logging servers require a specific format, select the appropriate format from the list.</p>
</td>
</tr></tbody></table>
</li>
<li>ClickÂ <b>Finished</b>.</li>
<li>On the Main tab, clickÂ <b>Local Traffic &gt; Virtual Servers</b>. The Virtual Server List screen opens.</li>
<li>Click the name of your Exchange virtual server.</li>
<li>From theÂ <b>Security</b>Â menu, chooseÂ <b>Policies</b>.</li>
<li>Next toÂ <b>Log Profile</b>, selectÂ <b>Enabled</b>, then select the Logging profile you created.</li>
<li>ClickÂ <b>Note:Â </b>The iApp template creates a log publisher and attaches it to the logging profile. If the publisher does not appear in the BIG-IP Configuration utility (GUI), you can verify the configuration by running the following command from the Traffic Management shell (tmsh): list security log profileÂ .</li>
</ol>
<h3><b>Creating logging profile manually</b></h3>
<p>If you do not want to use the iApp template to create a logging profile, use this section for guidance on configuring the logging profile manually. You must have access to the tmsh command line to use this method.</p>
<ol>
<li>To manually configure a logging profile</li>
<li><p>Use the following guidance for configuring a health monitor and load balancing pool for the logging servers.</p>
<table border="0" cellspacing="3" cellpadding="0">
<tbody><tr><td><p>BIG-IP LTM Object</p>
</td>
<td colspan="2"><p>Non-default settings/Notes</p>
</td>
</tr></tbody><tbody><tr><td rowspan="4"><p><b>Health Monitor</b>(Local Traffic --&gt;Monitors)</p>
</td>
<td><p><b>Name</b></p>
</td>
<td><p>Type a unique name</p>
</td>
</tr><tr><td><p><b>Type</b></p>
</td>
<td><p>ICMP</p>
</td>
</tr><tr><td><p><b>Interval</b></p>
</td>
<td><p><b>30</b>Â (recommended)</p>
</td>
</tr><tr><td><p><b>Timeout</b></p>
</td>
<td><p><b>91</b>Â (recommended)</p>
</td>
</tr><tr><td rowspan="6"><p><b>PoolÂ </b>(Local Traffic --&gt;Pools)</p>
</td>
<td><p><b>Name</b></p>
</td>
<td><p>Type a unique name</p>
</td>
</tr><tr><td><p><b>Health Monitor</b></p>
</td>
<td><p>Select the appropriate monitor you created</p>
</td>
</tr><tr><td><p><b>Slow Ramp Time</b></p>
</td>
<td><p>300</p>
</td>
</tr><tr><td><p><b>Load Balancing Method</b></p>
</td>
<td><p><b>Choose a load balancing method. We recommendÂ Least Connections (Member)</b></p>
</td>
</tr><tr><td><p><b>Address</b></p>
</td>
<td><p>Type the IP Address of a server.</p>
</td>
</tr><tr><td><p><b>Service Port</b></p>
</td>
<td><p><b>Type the appropriate port, such as UDP port514, the port on which logging typically occurs. ClickÂ Add, and then repeat Address and Port for all nodes</b></p>
</td>
</tr></tbody></table>
</li>
<li>Log into the BIG-IP system using the command line. Enter the tmsh shell, by typingÂ <b>tmsh</b>Â from the prompt.</li>
<li>Create a Remote High Speed Log (HSL) destination: (tmos)# create / sys log-config destination remote-high-speed-log [name] pool-name [specified pool] protocol [udp or tcp]</li>
<li>If you have a specific log format requirement, create a format-specific log destination, and forward that to the previously-created HSL destination: (tmos)# create / sys log-config destination [splunk|arcsight|remote-high-speed-log] [name] forward-to [HSL name]</li>
<li>Create a log publisher: (tmos)# create / sys log-config publisher [name] destinations add { [logdestination name] }</li>
<li>Create the logging profile to tie everything together. If you chose to log allowed connections, include the green text (as in step 2 substep l inÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-111" rel="noreferrer"><i>To configure the BIG-IP AFM to allow connections from a single trusted network</i></a><i>)</i>. If you set the rule to drop incoming connections, include the text in blue. If you chose to log IP intelligence events, include the text in red to add the parameter that sets the log publisher. (tmos)# create / security log profile [name] network add { [name] { filter { log-acl-match-accept enabled log-acl-match-drop enabled log-acl-match-reject enabled } format { field-list { date_time action drop_reason protocol src_ip src_port dest_ip dest_port } type field-list } publisher [logpublisher name] } } ip-intelligence { log-publisher [logpublisher name] }</li>
</ol>
<h3><a name="Anchor-66" id="Anchor-66"></a><b>Assigning the logging profile to the virtual server</b></h3>
<p>The final task is to assign the logging profile to the virtual server.</p>
<ol>
<li>To assign the logging profile to the Exchange virtual server</li>
<li>On the Main tab, clickÂ <b>Local Traffic &gt; Virtual Servers</b>. The Virtual Server List screen opens.</li>
<li>Click the name of your Exchange virtual server.</li>
<li>From theÂ <b>Security</b>Â menu, chooseÂ <b>Policies</b>.</li>
<li>Next toÂ <b>Log Profile</b>, selectÂ <b>Enabled</b>, then select the Logging profile you created.</li>
<li>ClickÂ <b>Update</b>. The list screen and the updated item are displayed.</li>
</ol>
<h2><b>Appendix D: Technical Notes</b></h2>
<p>The following contains additional information that may be helpful when configuring the BIG-IP system for Exchange Server.</p>
<h2><b>Slow Ramp Time</b></h2>
<p>When you configure a Slow Ramp time, BIG-IP will not immediately send a full proportional share of incoming traffic to a pool member that has just come online. Instead, the BIG-IP will increase the proportion of traffic gradually over the time specified. This ensures that a newly-booted or newly-added server is not overwhelmed with incoming traffic, especially when you have selected a Least Connections load-balancing method.</p>
<p>Although external monitors for POP3/IMAP4 that perform logins will prevent any traffic being sent to a Mailbox server until at least those functions are enabled, other background services may not be fully ready to service connections. As such, we strongly recommend Slow Ramp even with external monitors. If you are not using external monitors but have only enabled simple TCP checks or HTTP queries that do not actually check for full client functionality, a Slow Ramp time is essential.</p>
<p>F5 testing has shown that 300 seconds (5 minutes) is generally sufficient to allow a rebooted Exchange Mailbox server to fully start all services and be ready to handle a full load of traffic, but that time is highly dependent on local conditions. You may want to adjust the time period up or down in your environment based on your server capacity and load.</p>
<h2><a name="Anchor-65" id="Anchor-65"></a><b>Subject Alternative Name (SAN) SSL Certificates</b></h2>
<p>This template currently only supports the use of a single DNS name and corresponding certificate and key for all services, or multiple DNS names using a SAN-enabled certificate and key or wildcard certificate.</p>
<p>An SSL certificate that supports the Subject Alternative Name (SAN) extension allows more than one valid FQDN per certificate, without having to resort to a âwildcardâ certificate for a domain. When used in conjunction with Exchange Server, SAN certificates make it simple to combine multiple services into a single virtual server while retaining the flexibility of separate FQDNs. Some examples of using SAN certificates with Exchange 2010 are shown here:Â <a href="http://technet.microsoft.com/en-us/library/aa995942%28EXCHG.140%29.aspx" rel="noreferrer">http://technet.microsoft.com/en-us/library/aa995942%28EXCHG.140%29.aspx</a></p>
<p>When you request a SAN certificate from a certification authority, you must define all desired FQDNs in the Subject Alternative Name field; clients will ignore the Common Name in the certificate Subject.</p>
<p>In BIG-IP versions prior to 11.1, the BIG-IP web-based Configuration utility does not display the Subject Alternative Name values of imported certificates, however, the use of SAN certificates is otherwise supported.</p>
<p>The BIG-IP system supports using a wildcard certificate to secure Exchange deployments using multiple FQDNs. However, for increased security, F5 recommends using SAN certificate(s) where possible. Additionally, some older mobile devices are incompatible with wildcard certificates. Consult your issuing Certificate Authority for compatibility information.</p>
<h2><a name="Anchor-49" id="Anchor-49"></a><b>Maximum number of concurrent users: SNAT Pool guidance</b></h2>
<p>If you expect fewer than 6,000 concurrent users per Mailbox Server, the iApp configures SNAT Auto Map. If you expect more than 6,000 users, the iApp configures a SNAT Pool. This section describes how F5 chose 6,000 users as a rule of thumb, and contains additional information if you want to more precisely calculate the number of concurrent users for your SNAT Pool configuration.</p>
<p>The BIG-IP system can create roughly 64,000 connections per SNAT address (ephemeral or source ports used by connections from the BIG-IP range from 1024 to 65,535, or an absolute maximum 64,511 effective concurrent connections). Each user connected to a Mailbox server can have about 10 concurrent connections (for example, if a user has Outlook on a PC, a mobile phone, and Lync running simultaneously). Therefore, you would need a SNAT address for each 6,000 concurrent users you expect. For example, if you have 12,000 users, you need two SNAT pool IP addresses; if you have 15,000 users, you need three addresses. The IP address(es) you specify must not be self IP addresses on this BIG-IP system.</p>
<h2><b>Outlook Client Configuration</b></h2>
<p>Exchange administrators will typically use Autodiscover to configure Outlook clients. If manual configuration is required, the following table provides the recommended settings to match the deployment scenarios described in this guide.</p>
<table border="0" cellspacing="3" cellpadding="0" width="540">
<tbody><tr><td valign="top"><p><b>Connection Settings</b></p>
</td>
<td valign="top"><p><b>Default</b></p>
</td>
<td valign="top"><p><b>Your Setting</b></p>
</td>
<td valign="top"><p>Notes</p>
</td>
</tr><tr><td valign="top"><p>Connect to Microsoft Exchange using HTTP</p>
</td>
<td valign="top"><p>Not selected</p>
</td>
<td valign="top"><p><b>Selected</b></p>
</td>
<td valign="top"><p><b>This enables Outlook Anywhere</b></p>
</td>
</tr><tr><td valign="top"><p>Use this URL to connect to my Proxy server for Exchange</p>
</td>
<td valign="top"><p>No default value</p>
</td>
<td valign="top"><p><b>FQDN of your Outlook Anywhere virtual server on your BIG-IP APM</b></p>
</td>
<td valign="top">Â </td>
</tr><tr><td valign="top"><p>Connect using SSL only</p>
</td>
<td valign="top"><p>Selected</p>
</td>
<td valign="top"><p><b>Selected</b></p>
</td>
<td valign="top">Â </td>
</tr><tr><td valign="top"><p>On fast networks, connect using HTTP first, then connect using TCP/IP</p>
</td>
<td valign="top"><p>Not selected</p>
</td>
<td valign="top"><p><b>Selected</b></p>
</td>
<td valign="top">Â </td>
</tr><tr><td valign="top"><p>On slow networks, connect using HTTP first, then connect using TCP/IP</p>
</td>
<td valign="top"><p>Selected</p>
</td>
<td valign="top"><p><b>Selected</b></p>
</td>
<td valign="top">Â </td>
</tr><tr><td valign="top"><p>Proxy authentication settings</p>
</td>
<td valign="top"><p>NTLM</p>
</td>
<td valign="top"><p><b>Basic</b></p>
</td>
<td valign="top">Â </td>
</tr></tbody></table>
<h2><a name="Anchor-52" id="Anchor-52"></a><b>Note on creating External monitors manually</b></h2>
<p>If you choose External monitors, the BIG-IP system performs logins to the POP3 and/or IMAP4 service and checks for valid content in the response. Because these monitors attempt to access a specific mailbox, they more accurately determine the actual health of client access services. However, account maintenance and Mailbox status must become a part of your monitoring strategy.</p>
<h3><b>Important note about BIG-IP health monitors that use Exchange server accounts</b></h3>
<p>The monitors described in this section require a valid Exchange server account and associated mailbox specifically for monitoring purposes. The accounts used for authentication must be associated with a valid mailbox. If authentication should fail for any reason, for instance, the account is locked, the Mailbox server associated with that account is down for maintenance, or the account password is changed, the monitors will mark all Mailbox servers down for the relevant service (Autodiscover, ActiveSync, or Outlook Anywhere). Maintenance of the accounts and associated mailboxes thus becomes an integral part of your health status checks.</p>
<p>If you choose to use this method, we recommend using at least two separate instances of the monitor, with Mailboxes located on different servers. You should then configure the pool to only mark members down if all monitors fail.</p>
<p>You should create accounts (and associated mailboxes) for monitoring that are not accessed by actual users and that do not have privileged access anywhere else in your network. Because you have to store the user name and password in plain text on your BIG-IP devices, make sure the credentials a<i>r</i>e not used elsewhere in your organization for anything other than monitoring. We strongly recommend creating a mailbox account(s) specifically for use in the monitor(s).</p>
<h2><a name="Anchor-100" id="Anchor-100"></a><a name="Anchor-103" id="Anchor-103"></a><b>Appendix E: Active Directory and Exchange Server configuration for NTLM</b></h2>
<p>If you plan on configuring your BIG-IP system version for NTLM authentication as described inÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-105" rel="noreferrer"><i>Optional: Configuring the APM for Outlook Anywhere with NTLM Authentication - BIG-IP v11.3 or later only</i></a><i>,Â </i>you must first perform the following tasks on your Active Directory and Exchange servers.</p>
<p><b>Note:Â </b>Note that the Kerberos SSO method is the only SSO method that can be used when the authentication method of the access policy is NTLM.</p>
<p>Most of the following guidance is performed using Microsoft PowerShell. You must have access to perform PowerShell commands.</p>
<p><b>Note:Â </b>This section provides guidance only; for specific instructions, consult the appropriate documentation. F5 cannot be responsible for improper configuration of Active Directory or Microsoft devices.</p>
<h2><a name="Anchor-109" id="Anchor-109"></a><b>Create a Delegation Account</b></h2>
<p>You must create a user account for the BIG-IP system to use to perform Kerberos authentication. The user logon name must begin withÂ <b>host/</b>Â and the account should be a member of the Domain Users security group.</p>
<p>Run the following PowerShell commands on an Active Directory Domain Controller on a single line, replacing the text in red with the proper information for your environment. You will be prompted to enter a new password for the delegation account.</p>
<p>New-ADUser -Name &quot;APM Delegation Account&quot; -UserPrincipalName host/account-username.example.com@example.com -SamAccountName &quot;account-username&quot; -PasswordNeverExpires $true -Enabled $true -AccountPassword (Read-Host -AsSecureString &quot;Account Password&quot;)</p>
<h2><b>Configure the servicePrincipalName</b></h2>
<p>The next task is to modify theÂ <b>servicePrincipalName</b>Â attribute of the Delegation Account. TheÂ <b>servicePrincipalName</b>Â value should match the user logon name of the delegation account. Replace the domain in the example with your domain</p>
<p>Set-AdUser -Identity account-username -ServicePrincipalNames @{Add=&quot;host/account-username.example.com&quot;}</p>
<h2><a name="Anchor-106" id="Anchor-106"></a><b>Enabling Delegation for the account</b></h2>
<p>After configuring the servicePrincipalName attribute, find the account inÂ <b>Active Directory Users and Computers</b>. After configuring the servicePrincipalName attribute, the Delegation tab appears under the properties of the user account. SelectÂ <b>Trust the user for delegation to specified services only</b>, and then selectÂ <b>Use any authentication method</b>. ClickÂ <b>Add</b>Â to add a service for which this account can authenticate, and then add the HTTP service type for each Client Access Server.</p>
<h2><b>Configure Outlook Anywhere for NTLM Client Authentication</b></h2>
<p>Run the following commands on one or more Exchange Client Access Servers to configure Outlook Anywhere for NTLM. You may run this command on any Client Access Server.</p>
<p>Get-OutlookAnywhere | Set-OutlookAnywhere -ExternalClientAuthenticationMethod NTLM -InternalClientAuthenticationMethod NTLM</p>
<h2><a name="Anchor-95" id="Anchor-95"></a><b>Enabling Kerberos Authentication for RPC IIS Virtual Directory</b></h2>
<p>Enable the Negotiate authentication provider on the RPC virtual directory using the following PowerShell command:</p>
<pre>
Get-OutlookAnywhere | Set-OutlookAnywhere -IISAuthenticationMethods Negotiate,NTLM
</pre>
<h2><b>DNS Reverse Lookups</b></h2>
<p>To ensure DNS reverse lookups are working, from the command line of the BIG-IP system, type nslookup and then pressÂ <b>Enter</b>. At the new prompt that appears, type the IP addresses of the Outlook Anywhere pool members and confirm it resolves to the hostname of that pool member.</p>
<p>If the Outlook Anywhere IIS Application Pool is running under the LocalSystem or ApplicationPoolIdentity account, you must ensure that APM can successfully perform reverse DNS lookups against the IP address of the Outlook Anywhere pool member(s). These DNS lookups must return the host name of the Exchange CAS server (APM+LTM scenario):</p>
<h2><a name="Anchor-99" id="Anchor-99"></a><b>BIG-IP APM/LTM without DNS lookups</b></h2>
<p>If you have deployed BIG-IP APM to forward Outlook Anywhere traffic to a virtual server on an internal BIG-IP LTM, or you are deploying on a BIG-IP system running both LTM and APM and would like to eliminate the need for reverse DNS lookups, you must perform the following configuration steps in Active Directory and from the IIS Management Console on the Client Access Servers.</p>
<p>The first task in this section is to create a Service Principal Name for the Outlook Anywhere FQDN to allow authentication by the delegation user account. Replace the text in red with the appropriate values in your implementation.</p>
<p>Use the following command syntax: setspn -S</p>
<p>For example:</p>
<p>setspn -S http/mail.example.com EXAMPLE\account-username</p>
<p>setspn -S http/autodiscover.example.com EXAMPLE\account-username</p>
<p>Perform this step for every host name that you will be accessing using NTLM client authentication, which includes Autodiscover by default.</p>
<p>Based on reverse DNS lookups or the SPN pattern specified in the Kerberos SSO configuration, APM will construct a Kerberos ticket request to the Active Directory domain controller for the SPN HTTP/mail.example.com. You must allow Kerberos constrained delegation for HTTP/mail.example.com via the Delegation tab within the properties of the previously created user account. To add mail.example.com NS autodiscover.example.com for delegation, you must search based on the delegation account user name field, as that is where the SPNs are registered once you the setspn command.</p>
<p>Also, you must ensure that the previously created delegation account is allowed to log on for all of the SPNs you just created (seeÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-106" rel="noreferrer"><i>Enabling Delegation for the account</i></a><i>)</i>.</p>
<p>Finally, you must change the Application Pool Identity for the Application Pool used by Outlook Anywhere, Autodiscover, and Exchange Web Services to use the delegation user account you created, or configure an Alternate Service Account for each Client Access Server.</p>
<h2><b>Setting the IIS Alternate Service Account</b></h2>
<p>Use the following PowerShell commands to set the IIS Alternate Service Account for Exchange Server 2016.</p>
<h3><b>Exchange 2016: Configuring Alternate Service Account</b></h3>
<p>The commands for configuring the Alternate Service Account.</p>
<p>You must run these commands on all Exchange Servers in your deployment. In the following example,Â is the short name of the co-located Client Access/Mailbox Server.</p>
<p>Set-ClientAccessServerÂ -AlternateServiceAccountCredential (Get-Credential)</p>
<p>Finally, verify ASA. You may run this command on any Client Access Server in the implementation.</p>
<p>Get-ClientAccessServer -IncludeAlternateServiceAccountCredentialStatus | Format-List Name,Alt*</p>
<h2><b>Troubleshooting NTLM Authentication</b></h2>
<p>You can increase the logging level for Access Policy Manager to assist in troubleshooting issues with NTLM client authentication. ClickÂ <b>System &gt; Logs &gt; Configuration &gt; Options</b>. UnderÂ <b>Access Policy Logging</b>, selectÂ <b>Debug</b>Â log level for either the Access Policy, SSO, or both. The debug setting causes BIG-IP to log all APM-related messages to this file:Â <b>/var/log/apm</b>.</p>
<p>These logs can be useful in diagnosing problems with NTLM auth/Kerberos SSO functionality.</p>
<p>If you have followed these steps and are receiving Kerberos errors in the APM log, you can clear any previously cached Kerberos tickets by restarting the websso service on the APM BIG-IP system:</p>
<p>[root@ms-ve-v11-x2010-EDGE:Active:Standalone] config # bigstart restart websso</p>
<h2><a name="Anchor-89" id="Anchor-89"></a><b>Document Revision History</b></h2>
<h2>Â </h2>
<table border="0" cellspacing="3" cellpadding="0" width="540">
<tbody><tr><td><p>Version</p>
</td>
<td><p>Description</p>
</td>
<td><p>Date</p>
</td>
</tr></tbody><tbody><tr><td valign="top"><p>1.0</p>
</td>
<td valign="top"><p>New deployment guide for the supported f5.microsoft_exchange_2016.v1.0.0rc2 iApp template. Note that v1.0.0rc1 was never released.</p>
</td>
<td valign="top"><p>01-26-2016</p>
</td>
</tr><tr><td valign="top"><p>1.1</p>
</td>
<td valign="top"><p>Added the new troubleshooting entryÂ <i>After deploying the iApp, APM sessions are no longer timing out, even though a timeout value was specified</i>.</p>
</td>
<td valign="top"><p>02-01-2016</p>
</td>
</tr><tr><td valign="top"><p>1.2</p>
</td>
<td valign="top"><p>Added the new troubleshooting entryÂ <i>Cross-forest mailbox moves and remote move migrations between your on-premise Exchange organization and Exchange Online are unsuccessful when APM is deployed and/or SSL is offloaded</i>Â (since combined with another entry, see rev 1.6).</p>
</td>
<td valign="top"><p>04-08-2016</p>
</td>
</tr><tr><td valign="top"><p>1.3</p>
</td>
<td valign="top"><p>- Added the new troubleshooting entryÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-145" rel="noreferrer"><i>Multiple BIG-IP APM sessions may be created when a website uses favicon</i></a>.</p>
<p>- Added a note in the APM AAA Server iApp walkthrough stating that if you want to select a pre-existing AAA Server, only AAA Server objects configured to use a pool of domain controllers appear in the list.</p>
</td>
<td valign="top"><p>04-28-2016</p>
</td>
</tr><tr><td valign="top"><p>1.4</p>
</td>
<td valign="top"><p>Added support for BIG-IP version 12.1.</p>
</td>
<td valign="top"><p>05-18-2016</p>
</td>
</tr><tr><td valign="top"><p>1.5</p>
</td>
<td valign="top"><p>Updated the guide for the fully supported f5.microsoft_exchange_2016.v1.0.0 iApp template on downloads.f5.com.</p>
</td>
<td valign="top"><p>06-16-2016</p>
</td>
</tr><tr><td valign="top"><p>1.6</p>
</td>
<td valign="top"><p><a name="Anchor-155" id="Anchor-155"></a>Added the troubleshooting entryÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-144" rel="noreferrer"><i>Exchange Hybrid Autodiscover, free/busy lookups, and remote mailbox moves/migrations fail when APM is deployed</i></a>. Because the iRule solution for this is the same as the one that was included in the entry &quot;<i>Cross-forest mailbox moves and remote move migrations between your on-premise Exchange organization and Exchange Online are unsuccessful when APM is deployed and/or SSL is offloaded&quot;Â we combined the two entries into the new one, separating out an entry forÂ </i><a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-156" rel="noreferrer"><i>SSL Offloading is not supported when performing remote moves and migrations between your Exchange organization and Exchange Online</i></a>.</p>
</td>
<td valign="top"><p>08-03-2016</p>
</td>
</tr><tr><td valign="top"><p>1.7</p>
</td>
<td valign="top"><p>Corrected the links to the external monitor script files in the manual configuration section on page 92.</p>
</td>
<td valign="top"><p>09-06-2016</p>
</td>
</tr><tr><td valign="top"><p>1.8</p>
</td>
<td valign="top"><p>Clarified the guidance for which virtual server to attach the iRule in Step 5 of the troubleshooting entryÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-144" rel="noreferrer"><i>Exchange Hybrid Autodiscover, free/busy lookups, and remote mailbox moves/migrations fail when APM is deployed</i></a></p>
</td>
<td valign="top"><p>09-19-2016</p>
</td>
</tr><tr><td valign="top"><p>1.9</p>
</td>
<td valign="top"><p>- Added two new troubleshooting entries:Â <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-158" rel="noreferrer"><i>OSX/iOS clients receive a bad request error when clicking logout from Outlook Web App</i></a>Â andÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-143" rel="noreferrer"><i>When using Forms-based authentication, users are unable to logout of an APM session after clicking logout from OWA</i></a>.</p>
<p>- Updated the manual configuration iRule (<a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-133" rel="noreferrer"><i>Creating the iRule to terminate inactive APM sessions if using Forms-based authentication for OWA (default)</i></a>) to solve the issues described in the new troubleshooting entries.</p>
</td>
<td valign="top"><p>09-22-2016</p>
</td>
</tr><tr><td valign="top"><p>2.0</p>
</td>
<td valign="top"><p>Reverted the manual configuration iRule (<a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-142" rel="noreferrer"><i>Optional: Creating the iRule to terminate inactive APM sessions if using Windows based authentication for OWA</i></a>) line 15, which was inadvertently changed in the last update.</p>
</td>
<td valign="top"><p>10-03-2016</p>
</td>
</tr><tr><td valign="top"><p>2.1</p>
</td>
<td valign="top"><p>Updated the guide for the release candidate iApp template f5.microsoft_exchange_2016.v1.0.1rc1 on downloads.f5.com in the RELEASE_CANDIDATE directory. This iApp has the following new features and configuration changes:</p>
<p>- The iApp now allows use of named and ephemeral (FQDN) nodes as pool members</p>
<p>- Added support for BIG-IP v12.1.1</p>
<p>Issues Resolved:</p>
<p>- Modified the iRules produced by the iApp to better support Apple Mac clients</p>
<p>- Corrected the login timeout iRule for the http::respond line (302 instead of 440)</p>
<p>- Modified the advanced SNMP monitors to be more efficient</p>
</td>
<td valign="top"><p>10-18-2016</p>
</td>
</tr><tr><td valign="top"><p>2.2</p>
</td>
<td valign="top"><p>Added an additional iRule to the troubleshooting entryÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-96" rel="noreferrer"><i>Clients receiving error message when using BIG-IP APM with OWA 2016 and IE10 or Google Chrome</i></a>Â for BIG-IP versions v11.5.4 HF2 and v11.6.1 HF1.</p>
</td>
<td valign="top"><p>11-02-2016</p>
</td>
</tr><tr><td valign="top"><p>2.3</p>
</td>
<td valign="top"><p>Added support for BIG-IP version 13.0.</p>
</td>
<td valign="top"><p>02-22-2017</p>
</td>
</tr><tr><td valign="top"><p>2.4</p>
</td>
<td valign="top"><p>Added a new troubleshooting entry:Â <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-159" rel="noreferrer"><i>Clients experiencing Outlook connectivity issues</i></a></p>
</td>
<td valign="top"><p>03-14-2017</p>
</td>
</tr><tr><td valign="top"><p>2.5</p>
</td>
<td valign="top"><p>Updated the guide for the template f5.microsoft_exchange_2016.v1.0.1 on downloads.f5.com. This iApp is the fully supported release of the changes made in v1.0.1rc1, with no additional changes to the iApp template.</p>
</td>
<td valign="top"><p>03-29-2017</p>
</td>
</tr><tr><td valign="top"><p>2.6</p>
</td>
<td valign="top"><p>Updated the guide for the template f5.microsoft_exchange_2016.v1.0.2rc1 on downloads.f5.com in the Release Candidate directory. This version of the template (and this guide) contains the following changes:</p>
<p>- Modified the Timeout value on the TCP profiles to help solve Outlook connectivity issues as described inÂ <a href="../../../../services/resources/deployment-guides/deployment-guide-archive.html#Anchor-159" rel="noreferrer"><i>Clients experiencing Outlook connectivity issues</i></a></p>
<p>- Corrected an issue in the iApp presentation where the chain certificate option would incorrectly appear if you selected Smart Card authentication for OWA and are using an existing Client SSL profile.</p>
</td>
<td valign="top"><p>05-11-2017</p>
</td>
</tr><tr><td valign="top"><p>2.7</p>
</td>
<td valign="top"><p>Updated this guide for the fully supported template f5.microsoft_exchange_2016.v1.0.2 on downloads.f5.com. This version of the template (and this guide) contains the all of the features and fixes from 1.0.2rc1, as well as the following.<br />
- Added the ability to bypass APM for hybrid services.<br />
- Corrected an issue where special characters would cause APM logon customization to fail.<br />
- Corrected an issue where a ::services_owa_login_timeout variable does not exist error would occur.<br />
- Corrected an issue in the APM login timeout iRule by adding the redirect location.</p>
</td>
<td valign="top"><p>07-11-2017</p>
</td>
</tr><tr><td valign="top"><p>2.8</p>
</td>
<td valign="top"><p>Removed the sectionÂ <i>Optional: Configuring LTM/APM to support NTLMv2-only deployments as it is not needed. The iApp performs the necessary configuration.</i></p>
</td>
<td valign="top"><p>07-21-2017</p>
</td>
</tr></tbody></table>
</div></div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









<div id="article386280911" class="a01 "><p><a class="btn btn-primary" href="../../../../content/dam/f5/corp/global/pdf/deployment-guides/microsoft-exchange-2016-dg.pdf">Download Deployment Guide</a></p>
</div></div>

    
</div>
</div>

    
</div>
</div>
            </div>
        </div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </div>
</div>
</div>
<div data-component-type="structure f5-com" class="u02a aem-GridColumn aem-GridColumn--default--12" data-component-title="Footer">









    
    







    

    

    

    

    

<footer class="u02a__container footer__v2 ">

    <div class="container">
        <div class="row">
            <div class="u02a__content">
                <div>


<div class="aem-Grid aem-Grid--12 aem-Grid--default--12 ">
    
    <div data-component-type="platter" class="c29a-constrained-columns aem-GridColumn aem-GridColumn--default--12">




                              



<div id="platter882604344" class="c29a-constrained-columns__wrap container">
    <div class="c29a-constrained-columns__container">
        <div class="row">
            <div class="c29a-constrained-columns__col one_col">
                <div>


<div class="aem-Grid aem-Grid--12 aem-Grid--default--12 ">
    
    <div data-component-type="container" class="cont01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Wrapper Bloc">





<!-- Custom Height Styles-->





<style type='text/css'>

 



</style>





<div class="bg-default cont01 
     
    U:padding-top-xl 
    height-1 theme-dark theme-wrap" data-jump-link="true" dir="auto" id="footer" data-bg-skip="None">

    
    
    
    

    <div>

        
    
    <div class="content parsys container">




    
    
    <div data-component-type="article" class="a01" data-component-title="Article text">









<div id="article1055866814" class="a01 "><h3 class="U:nudge-bot-xs display-4 u02__headline" style="text-align: center;">åè¶ãããã¸ã¿ã«ã»ã¨ã¯ã¹ããªã¨ã³ã¹ãå®å¨ã«ãå±ããã¾ã</h3>
<p class="U:padding-x-lg u02__text" style="text-align: center;">èªååãã»ã­ã¥ãªãã£ãããã©ã¼ãã³ã¹ãã¤ã³ãµã¤ãè½åãæããF5è£½åã©ã¤ã³ãããã¯ããå®¢æ§ãã³ã¹ãåæ¸ããªãã¬ã¼ã·ã§ã³ã®æ¹åãããã¦ã¦ã¼ã¶ä¿è­·ã®å¼·åãå®ç¾ããã¢ããªã±ã¼ã·ã§ã³ãä½æã»ä¿è­·ã»éç¨ãããã¨ãå¯è½ã«ãã¾ãã<a class="text-inverse" href="../../../solutions/adaptive-applications.html"><u>ãã£ã¨è©³ããï¼</u></a></p>
</div></div>


</div>


        

    </div>

    <div class="cont01__gradient-wrap">
        <div class="cont01__gradient-first-color"></div>
        <div class="cont01__gradient"></div>
        <div class="cont01__gradient-second-color"></div>
    </div>
</div>


</div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









</div>

    
</div>
</div>
            </div>
        </div>
        
    </div>
</div>
</div>
<div class="ghost aem-GridColumn aem-GridColumn--default--12">

</div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









</div>
<div data-component-type="platter" class="c09 aem-GridColumn aem-GridColumn--default--12" data-component-title="Divider">



                              




<div id="platter-767499843">
    <hr class="c09__hr U:margin-y-md c09__footer"/>
</div>
</div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









</div>
<div class="ghost aem-GridColumn aem-GridColumn--default--12">

</div>
<div class="ghost aem-GridColumn aem-GridColumn--default--12">

</div>
<div data-component-type="article" class="a01 aem-GridColumn aem-GridColumn--default--12" data-component-title="Article text">









</div>

    
</div>
</div>
            </div>
        </div>
    </div>
    <div class="container">
        
        <div class="u02a-nav isCollapsible columns-5 brandimage-0">
            
            <nav class="u02a-nav__main">
                <div class="u02a-nav__col collapsibleOverall">
                    <h4 class="u02a-nav__title display-4 collapsibleTarget">ãæä¾ãµã¼ãã¹</h4>
                    <ul class="u02a-nav__list collapsibleContainer">
                        <li>
                            <a class="u02a-nav__link" href="../../../trials.html">ç¡æãã©ã¤ã¢ã«</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../../products.html">è£½å</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../../solutions.html">ã½ãªã¥ã¼ã·ã§ã³</a>
                        </li>
                    </ul>
                </div>
<div class="u02a-nav__col collapsibleOverall">
                    <h4 class="u02a-nav__title display-4 collapsibleTarget">ãªã½ã¼ã¹</h4>
                    <ul class="u02a-nav__list collapsibleContainer">
                        <li>
                            <a class="u02a-nav__link" href="https://support.f5.com/" target="_blank" rel="noreferrer">è£½åãã­ã¥ã¡ã³ã</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../white-papers.html">ãã¯ã¤ã ãã¼ãã¼</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../glossary.html">ç¨èªé</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../../customer-stories.html">ãå®¢æ§ã®æåäºä¾</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../../company/events/webinars.html">Webã»ããã¼</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../training/free-training-courses/getting-started-start-here.html">ããªã¼ ãªã³ã©ã¤ã³ ãã¬ã¼ãã³ã°</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../certification.html">èªå®è³æ ¼</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../training.html">ãã¬ã¼ãã³ã°</a>
                        </li>
                    </ul>
                </div>
<div class="u02a-nav__col collapsibleOverall">
                    <h4 class="u02a-nav__title display-4 collapsibleTarget">ãµãã¼ã</h4>
                    <ul class="u02a-nav__list collapsibleContainer">
                        <li>
                            <a class="u02a-nav__link" href="https://account.f5.com/myf5" target="_blank" rel="noreferrer">F5ã®ã½ãªã¥ã¼ã·ã§ã³ã®ç®¡ç</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="https://support.f5.com/" target="_blank" rel="noreferrer">ãµãã¼ã ãã¼ã¿ã«</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../professional-services.html">ãã­ãã§ãã·ã§ãã« ãµã¼ãã¹</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="https://support.f5.com/csp/my-support/service-request" target="_blank" rel="noreferrer">ãµã¼ãã¹ ãªã¯ã¨ã¹ãã®ä½æ</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="https://downloads.f5.com/" target="_blank" rel="noreferrer">ã½ããã¦ã§ã¢ ãã¦ã³ã­ã¼ã</a>
                        </li>
                    </ul>
                </div>
<div class="u02a-nav__col collapsibleOverall">
                    <h4 class="u02a-nav__title display-4 collapsibleTarget">ãã¼ããã¼</h4>
                    <ul class="u02a-nav__list collapsibleContainer">
                        <li>
                            <a class="u02a-nav__link" href="../../../partners/jp-find-a-partner.html">è²©å£²ãã¼ããã¼ãæ¢ã</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../../partners/technology-alliances.html">æè¡ææº</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../../partners.html">F5ãã¼ããã¼ ãã­ã°ã©ã </a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="https://partnercentral.f5.com/" target="_blank" rel="noreferrer">Partner Central</a>
                        </li>
                    </ul>
                </div>
<div class="u02a-nav__col collapsibleOverall">
                    <h4 class="u02a-nav__title display-4 collapsibleTarget">ä¼ç¤¾æ¡å</h4>
                    <ul class="u02a-nav__list collapsibleContainer">
                        <li>
                            <a class="u02a-nav__link" href="../../../company/contact/japanoffice.html">ãåãåããå</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../../company/careers.html">ã­ã£ãªã¢</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../../company/diversity-inclusion.html">ãã¤ãã¼ã·ãã£ã¨ã¤ã³ã¯ã«ã¼ã¸ã§ã³</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="https://investors.f5.com/" target="_blank" rel="noreferrer">æè³å®¶åãæå ±</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../../company/blog.html">ãã­ã°</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../../company/events.html">ã¤ãã³ã</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="../../../company/news.html">F5ãã¥ã¼ã¹ã«ã¼ã </a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="https://www.nginx.com/" target="_blank" rel="noreferrer">F5 NGINX</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="https://www.threatstack.com/" target="_blank" rel="noreferrer">Threat Stack</a>
                        </li>
                    
                        <li>
                            <a class="u02a-nav__link" href="https://www.volterra.io/" target="_blank" rel="noreferrer">Volterra</a>
                        </li>
                    </ul>
                </div>

            </nav>
        </div>
        <div class="row">
                       
                <div class="u02a-social">




<div class="m20__contact-wrap">
    <div class="m20__social-wrap">
        <ul class="m20__social-links">
            <li class="m20__contact">
                <h4 class="display-4 text-uppercase icons-label">ãã©ã­ã¼ãã</h4>
            </li>
            
            
            <li><a href="https://twitter.com/f5japan" target="_blank" rel="noreferrer">
                <svg class="svg-icon svg-n-twitter" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                    <path class="svg-fill" d="M95 23.3s-3.5 5.4-9.2 9C87 57.3 67.8 85 33.3 85 16 85 5 77 5 77s13.6 2.7 27.3-7.2C18.3 69 15 57.5 15 57.5s3.8 1 8.4-.3c-15.6-3.7-15-17.6-15-17.6s4 2.2 8.5 2.2C2.6 31.4 11 18 11 18s12.7 17.2 38 18.7C45.8 17.3 69 8.4 81 20.5c6.2-1 12-4.3 12-4.3s-2 6.6-8.3 9.8c5-.3 10.5-2.7 10.5-2.7z"></path>
                </svg>
                Twitter</a></li>
            
            
            
            
            
            
            
            
            
            
        
            
            
            <li><a href="https://www.linkedin.com/company/f5/" target="_blank" rel="noreferrer">
                <svg class="svg-icon svg-n-linkedin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.99 22.131"><defs><style>.link-cls-1{fill:none}</style><clipPath id="link-clip-path"><path id="Path_131" data-name="Path 131" class="link-cls-1" d="M1403.535-522.583h-18.741a1.605 1.605 0 0 0-1.624 1.583v18.96a1.605 1.605 0 0 0 1.624 1.585h18.741a1.606 1.606 0 0 0 1.625-1.585V-521a1.606 1.606 0 0 0-1.625-1.583zm-13.7 18.526h-3.321v-9.993h3.321zm-1.661-11.358h-.022a1.719 1.719 0 0 1-1.835-1.726 1.733 1.733 0 0 1 1.879-1.726 1.726 1.726 0 0 1 1.857 1.726 1.733 1.733 0 0 1-1.878 1.725zm13.637 11.358h-3.322v-5.343c0-1.343-.48-2.259-1.682-2.259a1.819 1.819 0 0 0-1.7 1.215 2.28 2.28 0 0 0-.109.81v5.581h-3.321s.043-9.056 0-9.993H1395v1.414a3.3 3.3 0 0 1 2.993-1.65c2.185 0 3.824 1.429 3.824 4.5v5.731z" transform="translate(-1383.17 522.583)"/></clipPath><clipPath id="link-clip-path-2"><path id="Path_130" data-name="Path 130" class="link-cls-1" d="M0-117.436h1619.358V-750H0z" transform="translate(0 750)"/></clipPath></defs><g id="Icon_LinkedIn" clip-path="url(#link-clip-path)"><g id="Group_241" data-name="Group 241" transform="translate(-1166.587 -191.807)" clip-path="url(#link-clip-path-2)"><path id="Path_129" data-name="Path 129" d="M1378.17-497.019h30.43v-30.564h-30.43z" transform="translate(-215.8 715.174)" fill="#fff"/></g></g></svg>
                LinkedIn</a></li>
            
            
            
            
            
            
            
            
            
        
            
            
            
            
            <li><a href="https://www.facebook.com/f5networksjapan" target="_blank" rel="noreferrer">
                <svg class="svg-icon svg-n-facebook" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75 100">
                    <path class="svg-fill" d="M45,95H27.3V53.9H12.5v-16h14.8V26.1c0-6.7,2.1-12,6.3-15.8C37.5,6.8,42.7,5,49.3,5c3.7,0,8.1,0.2,13.2,0.6v14.3h-9.3 c-5.5,0-8.3,2.3-8.3,7v11h16.9l-2.2,16H45V95z"></path>
                </svg>
                Facebook</a></li>
            
            
            
            
            
            
            
        
            
            
            
            
            
            
            <li><a href="https://www.youtube.com/playlist?list=PLSKNMFxFwt4Rh6wlGX9ixlssxwtGz6rIR" target="_blank" rel="noreferrer">
                <svg class="svg-icon svg-n-youtube" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23.516 23" height="23px">
                    <path class="svg-fill" data-name="Union 1" d="M4.299 22.998a4.3 4.3 0 0 1-4.3-4.3v-3.45a4.3 4.3 0 0 1 4.3-4.3h14.919a4.3 4.3 0 0 1 4.3 4.3v3.45a4.3 4.3 0 0 1-4.3 4.3zm12.5-8.075a1.682 1.682 0 0 0-.506 1.261v2.674a1.9 1.9 0 0 0 .461 1.35 1.643 1.643 0 0 0 1.258.489 1.773 1.773 0 0 0 1.335-.461 1.912 1.912 0 0 0 .447-1.379v-.305h-1.229v.271a1.289 1.289 0 0 1-.117.679.493.493 0 0 1-.412.153.447.447 0 0 1-.406-.181 1.3 1.3 0 0 1-.116-.651v-1.125h2.275v-1.514a1.785 1.785 0 0 0-.438-1.3 1.669 1.669 0 0 0-1.255-.449 1.793 1.793 0 0 0-1.297.488zM7.95 19.558a1.284 1.284 0 0 0 .21.8.743.743 0 0 0 .622.268 1.432 1.432 0 0 0 .691-.19 2.692 2.692 0 0 0 .688-.55v.651h1.186v-5.954h-1.186v4.515a1.614 1.614 0 0 1-.372.32.667.667 0 0 1-.331.124.294.294 0 0 1-.244-.092.524.524 0 0 1-.072-.305v-4.562H7.95zm6.006.924a1.408 1.408 0 0 0 .622.13.994.994 0 0 0 .809-.337 1.5 1.5 0 0 0 .28-.97v-3.307a1.777 1.777 0 0 0-.3-1.111 1.034 1.034 0 0 0-.864-.38 1.159 1.159 0 0 0-.546.141 1.862 1.862 0 0 0-.51.414v-2.6h-1.2v8.067h1.2v-.455a1.5 1.5 0 0 0 .509.408zM3.315 13.639h1.384v6.9h1.343v-6.9H7.43v-1.172H3.315zm10.558 5.977a.979.979 0 0 1-.282-.213v-3.705a.86.86 0 0 1 .244-.184.6.6 0 0 1 .25-.058.468.468 0 0 1 .375.155.716.716 0 0 1 .124.458v3.075a.636.636 0 0 1-.1.409.378.378 0 0 1-.319.127.7.7 0 0 1-.292-.065zm3.786-2.839v-.6a.884.884 0 0 1 .123-.533.48.48 0 0 1 .406-.164.455.455 0 0 1 .394.164.853.853 0 0 1 .127.533v.6zm-8.06-8.223a1.735 1.735 0 0 1-.527-1.327v-3.4a1.494 1.494 0 0 1 .541-1.212 2.192 2.192 0 0 1 1.454-.452 1.979 1.979 0 0 1 1.365.475 1.581 1.581 0 0 1 .527 1.226v3.389a1.711 1.711 0 0 1-.519 1.318 2.038 2.038 0 0 1-1.434.478 1.97 1.97 0 0 1-1.407-.495zm1.006-5.125a.443.443 0 0 0-.153.348v3.574a.571.571 0 0 0 .144.415.53.53 0 0 0 .408.15.6.6 0 0 0 .429-.15.537.537 0 0 0 .164-.415V3.778a.428.428 0 0 0-.164-.348.675.675 0 0 0-.429-.13.6.6 0 0 0-.396.13zm3.677 5.254a1.388 1.388 0 0 1-.234-.875V2.33h1.336v5.027a.537.537 0 0 0 .089.334.316.316 0 0 0 .27.107.8.8 0 0 0 .375-.138 1.822 1.822 0 0 0 .412-.354V2.33h1.338v6.555h-1.336V8.16a2.851 2.851 0 0 1-.772.61 1.675 1.675 0 0 1-.774.21.84.84 0 0 1-.702-.296zm-8.58.2V5.364L3.911-.002h1.517l.979 3.553h.1l.928-3.553h1.532l-1.754 5.2v3.687z" fill="#fff"/></svg>
                YouTube</a></li>
            
            
            
            
            
        
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="https://devcentral.f5.com" target="_blank" rel="noreferrer">
                <svg class="svg-icon svg-n-devcentral" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                    <g class="svg-fill">
                        <path transform="scale(2) rotate(-45 12.5 42.2)" d="M20.2 54.6h19.5v5.3H20.2z"/>
                        <path transform="scale(2) rotate(-45 -5 24.7)" d="M2.7 37.1h19.5v5.3H2.7z"/>
                        <path transform="scale(2) rotate(-45 -5 42.2)" d="M9.7 47.6h5.4v19.5H9.7z"/>
                        <path transform="scale(2) rotate(-45 -8.8 11)" d="M-1.1 23.4h19.5v5.3H-1.1z"/>
                        <path transform="scale(2) rotate(-45 8.7 28.5)" d="M16.4 40.9h19.5v5.3H16.4z"/>
                        <path transform="scale(2) rotate(-45 8.8 11)" d="M23.5 16.2h5.4v19.5h-5.4z"/>
                    </g>
                </svg>
                DevCentral</a></li>
        
        </ul>
    </div>
</div>

    

</div>          
        </div>
        <hr class="c09-divider__hr"/>
        <div class="row">
            <div class="u02a-legal display-8">
                
                <div class="U:nudge-top-sm">
                    <p>Â©2022 F5, Inc. All rights reserved.</p>
                </div>
                
                <ul class="u02a-legal__links">
                    <li class="u02a-legal__list-item U:nudge-top-sm">
                        <a href="../../../company/policies.html">
                            ããªã·ã¼
                        </a>
                    </li>
<li class="u02a-legal__list-item U:nudge-top-sm">
                        <a href="../../../company/policies/privacy-notice.html">
                            åäººæå ±ä¿è­·æ¹é
                        </a>
                    </li>
<li class="u02a-legal__list-item U:nudge-top-sm">
                        <a href="../../../company/policies/trademarks.html">
                            Trademarks
                        </a>
                    </li>
<li class="u02a-legal__list-item U:nudge-top-sm">
                        <a href="../../../company/policies/F5-California-privacy-summary.html">
                            California Privacy
                        </a>
                    </li>
<li class="u02a-legal__list-item U:nudge-top-sm">
                        <a href="../../../company/policies/privacy-notice.html#do-not-sell">
                            Do Not Sell
                        </a>
                    </li>

                    
                    <li class="u02a-legal__list-item U:nudge-top-sm">
                        <span id="teconsent"></span>
                    </li>
                </ul>
            </div>
        </div>

</footer>



</div>

    
</div>
</div>


        
    
    



    
<script src="../../../../etc.clientlibs/base/clientlibs/libs/jquery/v3.6.0.abec7e706514e7e243d79b097790f71b.js"></script>
<script src="../../../../etc.clientlibs/core/wcm/components/commons/site/clientlibs/container.68e8a508c100f218cc66bb13a94d1002.js"></script>
<script src="../../../../etc.clientlibs/f5-com/clientlibs/clientlib-base.c125322a681df38e36d43f5655fd7c7a.js"></script>



<script>wperf.mark("clientlib-js-base-done");</script>


    



    
<script src="../../../../etc.clientlibs/f5-com/clientlibs/clientlib-components.811851762dbe028ba94f2af6c4540d4a.js"></script>



<script>wperf.mark("clientlib-js-components-done");</script>

    


        











<section class="u03 CoveoSearchInterface" id="CoveoSearch" data-enable-history="true" data-enable-debug-info="true" data-cmp-name="u03" data-search-page-path="/content/f5-com/ja_jp/search.html" data-page-path="/content/f5-com/ja_jp/services/resources/deployment-guides/microsoft-exchange-server-2016-big-ip-v11-v12-ltm-apm-afm" data-node-name="jcr:content" data-lang-code="ja_jp" data-auto-trigger-query='false' data-global-search-url="https://api-u.f5.com/support/fedsearch" data-global-coveo-token="xx72b884cd-c3eb-4428-aa1b-6440a04643c1" data-global-search-nextalt="æ¬¡ã®ãã¼ã¸" data-global-search-prevalt="åã®ãã¼ã¸" data-lang="ja" data-coveo-error-message="ãã®æ¤ç´¢ã§æè¡çãªã¨ã©ã¼ãçºçãã¾ãã" data-headline-error-message="ãã®æ¤ç´¢ã«é¢é£ããçµæã¯è¦ã¤ããã¾ããã§ããã" data-subheadline-error-message="æ¤ç´¢èªãçµãè¾¼ãããæ¬¡ã«æããå¼ç¤¾ã®å¥ãã¼ã¿ã«ã§ã®æ¤ç´¢ããæ¤è¨ãã ãã" data-repeat-en-search-page="ãã®ä»ã®ãªã½ã¼ã¹ã«ã¤ãã¦ã¯ãF5.comã§è±èªã§åæ¤ç´¢ãã¦ãã ããã" data-ask-f5-portal="ãµãã¼ãããã³ãã­ã¥ã¡ã³ãã«ã¤ãã¦ã¯AskF5ã¸" data-my-f5-portal="ãµãã¹ã¯ãªãã·ã§ã³ã®ã©ã¤ã»ã³ã¹ããã³ã­ã¼ã«ã¤ãã¦ã¯MyF5ã¸" data-dev-central-portal="ã³ãã¥ããã£ããã³ãã¢ã³ã³ãã³ãã«ã¤ãã¦ã¯DevCentralã¸" data-nginx-portal="é¢é£ãã­ã¥ã¡ã³ãããã³ã³ãã¥ããã£ã«ã¤ãã¦ã¯NGINXã¸">
    <div class="CoveoAnalytics" data-anonymous='true' data-search-hub="f5com"></div>
    <div class="u03__close-target"></div>
    <div class="u03__search-page-overlay U:padding-top-lg U:padding-bot-lg">
        <div class="u03__search container">

            <!-- Search Input container rendered by coveo engine dedicated for search page -->
            

            <!-- Search Input container dedicated for non search page -->
            <div class="CoveoOmnibox CoveoSearchbox custom-search-box">
                <div class="magic-box-input">
                    <input spellcheck="false" form="coveo-dummy-form" role="combobox" autocomplete="off" aria-autocomplete="list" title="ã¯ã¨ãªãæ¿å¥ãã¾ãã Enterã­ã¼ãæ¼ãã¦éä¿¡ãã¾ã" aria-label="æ¢ã" placeholder="æ¢ã" class="u03__search-input U:margin-x"/>
                </div>
                <div class="magic-box-suggestions"></div>
            </div>

            
        </div>
        
    </div>
    <div class="CoveoTriggers"></div>
    
</section>


        

        <div id="consent_blackbar" style="position:fixed;bottom:200px;width:100%"></div>
    </body>
</html>
