(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[57],{1038:function(e,t){},1045:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var o=n(2),i=n(48),s=n(10),a=n(11),c=n(17),r=n(21),l=n(1),d=n(3),p=n(52),u=n(22),h=n(14),b=n.n(h),j=n(994),m=n(7),v=(n(1046),n(0));var g=Object(m.b)((function(e){return{siteHeader:e.siteHeader}}))(Object(j.a)()(Object(p.c)((function(e){var t=e.brand,n=(t=void 0===t?{}:t).accentColor,o=e.btnSize,i=void 0===o?"large":o,s=e.isMenu,a=void 0!==s&&s,c=e.siteHeader,r=(c=void 0===c?{}:c).data,l=(r=void 0===r?{}:r).booking,d=void 0!==l&&l,p=r.bookingForm,h=(p=void 0===p?{}:p).bookingFormType,j=p.customBookingUrl,m=p.buttonText,g=r.registrationName,O=void 0===g?"BOOK_NOW":g,f=e.t,x=b()("c-booking-button",{"c-booking-button--menu-type":a}),S="CUSTOM"===h,k=f("event.book-now.".concat(O));return d?Object(v.jsxs)(u.a,{type:"button",size:i,to:S?j:"/",event:S?null:{type:"BUY_LINK"},style:{backgroundColor:n},className:x,children:[Object(v.jsx)("span",{className:"c-booking-button__text",children:S?Object(v.jsx)(v.Fragment,{children:m||k}):Object(v.jsx)(v.Fragment,{children:k})}),Object(v.jsx)("span",{className:"c-booking-button__text-short",children:O?Object(v.jsx)(v.Fragment,{children:k}):S?Object(v.jsx)(v.Fragment,{children:m||f("event.book-now.mobile")}):Object(v.jsx)(v.Fragment,{children:f("event.book-now.mobile")})})]}):null})))),O=(n(1038),["index","content","modalPosition","withTopPanel","withBookingButton","brand","bookingLink"]);function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},j=function(l){Object(c.a)(j,l);var p=Object(r.a)(j);function j(e){var t;return Object(s.a)(this,j),(t=p.call(this,e)).handleOpen=function(e){e.preventDefault(),Object(d.L)(),t.setState({isModalOpen:!0})},t.handleClose=function(e){var n=t.props.superModal,o=void 0!==n&&n;e&&e.preventDefault(),o||(Object(d.d)(),t.setState({isModalOpen:!1}))},t.state={isModalOpen:!!e.isShowing},t}return Object(a.a)(j,[{key:"componentDidMount",value:function(){this.state.isModalOpen?Object(d.L)():Object(d.d)(window.scrollY)}},{key:"render",value:function(){var s=this.props,a=s.index,c=s.content,r=s.modalPosition,l=void 0===r?"center":r,d=s.withTopPanel,p=s.withBookingButton,j=s.brand,m=s.bookingLink,f=Object(i.a)(s,O),x="top"===l?{alignItems:"flex-start"}:"center"===l?{alignItems:"center"}:null;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(e,Object(o.a)(Object(o.a)({onClick:this.handleOpen},n),f)),this.state.isModalOpen&&Object(v.jsx)("div",{className:"c-modal ".concat(h),children:Object(v.jsxs)("div",{className:"c-modal__wrapper",style:x,children:[Object(v.jsx)("div",{className:"c-modal__overlay",onClick:this.handleClose,role:"presentation"}),Object(v.jsxs)("div",{className:"c-modal__container",children:[d&&Object(v.jsxs)("div",{className:"c-modal__top-panel",style:{backgroundColor:j.secondaryColor},children:[Object(v.jsx)("span",{children:p&&m?Object(v.jsx)(u.a,{type:"button",to:m,size:"popup",children:"Book now"}):p?Object(v.jsx)(g,{size:"popup"}):null}),Object(v.jsx)("span",{className:"c-modal__close",onClick:this.handleClose,children:"\xd7"})]}),Object(v.jsx)(t,Object(o.a)(Object(o.a)(Object(o.a)({index:a},c),b),{},{closeModal:this.handleClose}))]})]})})]})}}]),j}(l.Component);return Object(p.c)(j)}},1046:function(e,t){},1198:function(e,t,n){"use strict";n.r(t),n.d(t,"Prompt",(function(){return U}));var o=n(8),i=n(10),s=n(11),a=n(23),c=n(17),r=n(21),l=n(1),d=n.n(l),p=n(7),u=n(35),h=n(1002),b=n(1456),j=n.n(b),m=n(1464),v=n.n(m),g=n(28),O=n.n(g),f=n(1465),x=n.n(f),S=n(3),k=n(15),y=n(47),M=n(440),C=n(61),N=n(344),_=n(22),D=n(1045),w=n(994),A=n(52),L=(n(1466),n(0)),T=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={selectedSection:null},o}return Object(s.a)(n,[{key:"getRadioMode",value:function(e){var t=this;return Object(L.jsx)(d.a.Fragment,{children:e.map((function(e,n){return Object(L.jsx)("div",{className:"radio-custom-wrapper",children:Object(L.jsxs)("label",{htmlFor:e.id,onClick:function(){return t.setState({selectedSection:e.name})},children:[Object(L.jsx)("input",{id:e.id,name:"ma-prompt-radio",value:e.name,type:"radio",className:"radio"}),Object(L.jsx)("span",{className:"radio-custom"}),Object(L.jsx)("span",{className:"radio-prompt",children:e.textForVisitor})]})},n)}))})}},{key:"getTextButtons",value:function(e){var t=this;return Object(L.jsx)(d.a.Fragment,{children:e.map((function(e,n){return Object(L.jsx)("span",{className:"button apply-prompt",onClick:function(){return t.props.sendMASegment(e.name)},children:e.textForVisitor},n)}))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,o=(n=void 0===n?{}:n).header,i=n.introText,s=n.closeOutText,a=n.mode,c=n.prompts,r=t.brand,l=(r=void 0===r?{}:r).secondaryColor,d=t.t,p={backgroundColor:l},u="RADIO_BUTTONS"===a,h=u?this.getRadioMode(c):this.getTextButtons(c),b=this.state.selectedSection,j=b?this.props.getMALocation(b):null;return Object(L.jsxs)("div",{className:"modal-ma ".concat(u?"radio":""),style:p,children:[Object(L.jsx)("div",{className:"header-text",children:o}),Object(L.jsx)("div",{className:"intro-text",children:i}),Object(L.jsx)("div",{className:"content ".concat(u?"radio":"text"),children:h}),Object(L.jsxs)("div",{className:"row",children:[Object(L.jsx)("div",{className:"col-xs-12 col-sm-6",children:u&&Object(L.jsx)("div",{className:"button submit-prompt ".concat(j?"":"inactive"),onClick:function(){return e.props.sendMASegment(b)},children:d("event.submit")})}),Object(L.jsx)("div",{className:"col-xs-12 col-sm-6 ".concat(u?"":" col-sm-offset-6"),children:Object(L.jsx)("div",{className:"choice-close",children:Object(L.jsxs)("span",{onClick:function(){return e.props.sendMASegment("none")},className:"popup-close-btn",children:[Object(L.jsx)("span",{children:s}),Object(L.jsx)("span",{className:"popup-close",children:"\xd7"})]})})})]})]})}}]),n}(l.Component),F=Object(w.a)()(Object(u.j)(Object(A.c)(T))),I="x-ma-segments",B="ma-segments",P="x-ma-ab-test",E="TUMGM",U=function(e){Object(c.a)(n,e);var t=Object(r.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={isDisplayed:!1,promptSections:j()(e.siteContent.data.sections,v()("type","event_prompt_section"))},o.getMALocation=o.getMALocation.bind(Object(a.a)(o)),o.sendMASegment=o.sendMASegment.bind(Object(a.a)(o)),o}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cookies,n=e.options,o=(n=void 0===n?{}:n).data,i=(o=void 0===o?{}:o).maConfig,s=void 0===i?{}:i;"ignore"!==sessionStorage.TUMGM&&(this.state.promptSections||s[I]||t.get(I))&&this.init(),s.abTestingEnabled&&s[P]&&C.a.pushABTest(s[P])}},{key:"sendMASegment",value:function(e){var t,n=this,i=this.props,s=i.sendChosenSegments,a=i.cookies,c=i.options,r=(c=void 0===c?{}:c).data,l=(r=void 0===r?{}:r).eventId,d=void 0===l?"":l,p=i.pageConfig,u=(p=void 0===p?{}:p).isPreview,h=a.get("macid"),b=null===(t=this.state.promptSections)||void 0===t?void 0:t.prompts,j={hash:b?x()(b):null,timestamp:new Date};return u?(this.setState({isDisplayed:!1}),localStorage.setItem(B,JSON.stringify(Object(o.a)({},d,j))),!1):e&&h?s(h,e).then((function(e){var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.json})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];e.forEach((function(e){t.push(e.name)})),j.success=!0,n.fetchSiteData(t.join("|"))})).catch((function(){j.success=!1})).finally((function(){n.setState({isDisplayed:!1}),n.updateLocalStorageData(j),C.a.updateSegmentsLayer(e)})):(this.setState({isDisplayed:!1}),!1)}},{key:"updateLocalStorageData",value:function(e){var t=this.props.options,n=(t=void 0===t?{}:t).data,o=(n=void 0===n?{}:n).eventId,i=void 0===o?"":o,s=JSON.parse(localStorage.getItem(B))||{},a=s&&s[i]||{};a=Object.assign(a,e),s[i]=a,localStorage.setItem(B,JSON.stringify(s))}},{key:"fetchSiteData",value:function(e){var t=this.props,n=t.fetchSiteHeader,o=t.fetchSiteContent,i={maSegments:{"x-ma-segments":e},sitePage:"home"};n(i),o(i)}},{key:"clearMALocation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.location.search.split("?"),o=function(e){var n=e.split("&"),o="";return n.forEach((function(e,t){var i=e.replace(/^segments=([,\x0-xff]*\w*)&?/,"").replace(/^source=([\x0-xff]\w*)&?/,"");o+=i.length?i+(n.length-t>1?"&":""):""})),o.length?"".concat(t).concat(o):""};return n[1]?"".concat(n[0]).concat(o(n[1])):e.location.search}},{key:"getMALocation",value:function(e){return"?segments=".concat(e,"&source=PROMPT").concat(this.clearMALocation(this.props.history,"&"))}},{key:"setCookies",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,n=this.props,o=n.pageConfig,i=(o=void 0===o?{}:o).cookieSitePath,s=n.cookies,a=new Date(Date.now()+316224e5);s.set(t,e,{expires:a,path:i})}},{key:"previewMode",value:function(e,t,n){e&&this.setCookies(e,I);var o="none"!==t.get(I)?t.get(I):"",i="none"!==sessionStorage.getItem(I)?sessionStorage.getItem(I):"",s="none"!==t.get(E)?t.get(E):"";(o||s)&&this.fetchSiteData(o||s),(n&&o&&o!==i||!i||!n&&!s)&&this.setState({isDisplayed:!0}),n&&o!==i&&sessionStorage.setItem(I,o||"ignore")}},{key:"productionMode",value:function(e,t){var n=this.state.promptSections,o=(n=void 0===n?{}:n).prompts,i=JSON.parse(localStorage.getItem(B))||{},s=i&&i[t];e?(this.updateLocalStorageData({hash:o?x()(o):null,timestamp:new Date,success:!0}),this.setState({isDisplayed:!1})):o&&s&&s.hash===x()(o)||this.setState({isDisplayed:!0})}},{key:"init",value:function(){var e=this.props,t=e.history,n=e.cookies,o=e.options,i=(o=void 0===o?{}:o).data,s=(i=void 0===i?{}:i).eventId,a=void 0===s?"":s,c=e.pageConfig,r=(c=void 0===c?{}:c).isPreview,l=Object(S.y)("local")||r,d=O.a.parse(t.location.search.slice(1)).segments;l?this.previewMode(d,n,r):this.productionMode(d,a);var p=this.clearMALocation(t,"?");t.location.search!==p&&(t.location.search=p,t.replace(t.location))}},{key:"render",value:function(){var e=this.props,t=e.children,n=void 0===t?{}:t,o=e.pageConfig,i=(o=void 0===o?{}:o).tenantId,s=this.state,a=s.promptSections,c=s.isDisplayed,r=a&&Object(D.a)(_.a,F,{},"white-overlay promptMA");return Object(L.jsxs)(L.Fragment,{children:[n,N.a.isEnabledForTenant(i)&&a&&Object(L.jsx)(r,{isShowing:c,superModal:!0,content:{content:a,getMALocation:this.getMALocation,sendMASegment:this.sendMASegment}})]})}}]),n}(l.Component);t.default=Object(p.b)((function(e){return{siteContent:e.siteContent,pageConfig:e.pageConfig,options:e.options}}),(function(e){return{fetchSiteContent:function(t){e(Object(y.b)(t))},fetchSiteHeader:function(t){e(Object(k.b)(t))},sendChosenSegments:function(t,n){return e(Object(M.b)(t,n))}}}))(Object(u.j)(Object(h.a)(U)))},1466:function(e,t){}}]);