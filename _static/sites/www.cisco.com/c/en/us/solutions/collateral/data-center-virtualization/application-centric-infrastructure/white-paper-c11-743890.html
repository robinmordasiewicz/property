











<!DOCTYPE html>
<html xmlns:fb="//www.facebook.com/2008/fbml" xmlns:og="//opengraphprotocol.org/schema/" lang="en" xml:lang="en"  class="no-touch no-js">













<head>
    <meta charset="utf-8">
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    
        <script tyle="text/javascript" src="https://www.cisco.com/content/dam/cdc/j/cdcrSwitch.js"></script>
         
    
    

    










<script type="text/javascript" src="https://www.cisco.com/c/dam/cdc/t/ctm-core.js"></script>
<script>
    window['adrum-start-time'] = new Date().getTime();
    window.environ = "prod" ;
</script>
<script type="text/javascript" src="https://www.cisco.com/c/dam/cdc/j/personalization-init.js"></script>







    









      <style id="targetable-styles"  class="pzn-styles">.targetable, .mboxDefault, .targetable.hidden { visibility:hidden; }
        .targetable { position:relative; }
        .targetable.spinner > :not(.spinner-box) { opacity: 0 !important; }
        .targetable.spinner > div.spinner-box { position: absolute; top: 50%; left: 50%;transform: translateX(-50%) translateY(-50%); }
        div.spinner-box > div.spinner-wheel { position:relative; visibility:visible; width:4em; height:4em; border-radius:100%; border:.2em solid #cccccc; border-left-color:#049fd9; -webkit-animation: load 1.1s infinite linear; animation: load 1.1s infinite linear; } @-webkit-keyframes load{ 0%{ -ms-transform: rotate(7deg); -webkit-transform: rotate(7deg); transform: rotate(7deg); } 100%{ -ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg); } } @keyframes load{ 0%{ -ms-transform: rotate(7deg); -webkit-transform: rotate(7deg); transform: rotate(7deg); } 100%{ -ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg); } }
        .targetable.obscured { visibility:visible; opacity:.1; transition: opacity 2s ease-in-out; -moz-transition: opacity 2s ease-in-out; -webkit-transition: opacity 2s ease-in-out; filter: blur(5px); -webkit-filter: blur(5px); -moz-filter: blur(5px); -o-filter: blur(5px); -ms-filter: blur(5px); filter: url('data:image/svg+xml;utf9,<svg%20version=\"1.1\"%20xmlns=\"http://www.w3.org/2000/svg\"><filter%20id=\"blur\"><feGaussianBlur%20stdDeviation=\"3\"%20/></filter></svg>#blur'); filter: progid: DXImageTransform.Microsoft.Blur(PixelRadius='5'); -webkit-transition: 2s -webkit-filter linear; -moz-transition: 2s -moz-filter linear; -o-transition: 2s -o-filter linear; }
      </style>
    


  <script type="text/javascript">
  		if (window.cpe === undefined) { window.cpe = {}; }
		  if (cpe.trgt === undefined) { cpe.trgt = {}; cpe.trgt.personalizationObj=null;}
          cpe.trgt.personalizationObj={
			              'entity': '{"id":"1596674133706218","categoryId":"NetworkingSolutions,Data Center,Networking Solutions White Paper"}',

          }
    </script>



    
    







 
    <title>Cisco Application Centric Infrastructure - Cisco ACI and F5 BIG-IP Design Guide White Paper - Cisco</title>
    
    
    
    








<meta name="format-detection" content="telephone=no">
    















    <meta http-equiv="Content-type" content="text/html;charset=UTF-8"  />
    <meta name="description" content="An illustrated presentation on Cisco ACI topology, logical network constructs, typical use cases, load-balancer designs, and examples of F5 designs, with a section on multitenant options."  />
    <meta name="title" content="Cisco Application Centric Infrastructure - Cisco ACI and F5 BIG-IP Design Guide White Paper"  />
    <meta name="documentId" content="1596674132568217"  />
    <meta name="templateName" content="eot-toc"  />
    <meta property="fb:app_id" content="156494687694418"  />
    <meta name="ioContentSource" content="WEM"  />
    <meta name="concept" content="Cisco Application Centric Infrastructure"  />
    <meta name="docType" content="Networking Solutions White Paper"  />
    <meta name="iaPath" content="cisco.com#Networking Solutions#Data Center#Cisco Application Centric Infrastructure"  />
    <meta name="contentType" content="cisco.com#US#preSales"  />
    <meta name="locale" content="US"  />
    <meta name="language" content="en"  />
    <meta name="country" content="US"  />
    <meta name="hub" content="Data Center and Virtualization"  />
    <meta name="CCID_Page" content="cc001770"  />
    <meta name="date" content="Wed Aug 25 15:17:12 PDT 2021"  />
    <meta name="accessLevel" content="Customer"  />
    <meta name="accessLevel" content="Guest"  />
    <meta name="accessLevel" content="Partner"  />
    <meta name="entitlementExpression" content="contains( &quot;0,1,2,3,4,7&quot; , $profileField[3] )"  />
    <meta property="og:site_name" content="Cisco"  />
    <meta property="og:type" content="website"  />
    <meta property="og:title" content="Cisco Application Centric Infrastructure - Cisco ACI and F5 BIG-IP Design Guide White Paper"  />
    <meta property="og:description" content="An illustrated presentation on Cisco ACI topology, logical network constructs, typical use cases, load-balancer designs, and examples of F5 designs, with a section on multitenant options."  />
    <meta property="og:image" content="https://www.cisco.com/web/fw/i/logo-open-graph.gif"  />
    <meta property="og:url" content="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html"  />
    <link rel="canonical" href="white-paper-c11-743890.html"/>
	

    
 
    
    









    <script src="https://www.cisco.com/etc.clientlibs/clientlibs/granite/jquery.min.js"></script>
<script src="https://www.cisco.com/etc.clientlibs/clientlibs/granite/utils.min.js"></script>
<script src="https://www.cisco.com/etc.clientlibs/clientlibs/granite/jquery/granite.min.js"></script>
<script src="https://www.cisco.com/etc.clientlibs/foundation/clientlibs/jquery.min.js"></script>
<script src="https://www.cisco.com/etc.clientlibs/foundation/clientlibs/shared.min.js"></script>
<script src="https://www.cisco.com/etc.clientlibs/cq/personalization/clientlib/underscore.min.js"></script>
<script src="https://www.cisco.com/etc.clientlibs/cq/personalization/clientlib/personalization/kernel.min.js"></script>
<script src="https://www.cisco.com/etc.clientlibs/clientlibs/granite/lodash/modern.min.js"></script>
<script src="https://www.cisco.com/etc.clientlibs/cq/personalization/clientlib/personalization/kernel.min.js"></script>
<script type="text/javascript">
    $CQ(function() {
        CQ_Analytics.SegmentMgr.loadSegments("\/etc\/segmentation");
        CQ_Analytics.ClientContextUtils.init("\/c\/dnc\/etc\/clientcontext\/default", "\/content\/en\/us\/solutions\/collateral\/data\u002Dcenter\u002Dvirtualization\/application\u002Dcentric\u002Dinfrastructure\/white\u002Dpaper\u002Dc11\u002D743890");

        
    });
</script>

    










      <link rel="stylesheet" href="https://www.cisco.com/etc/designs/cdc/clientlibs/responsive/css/cisco-sans.min.css" type="text/css">


    








    <script src="https://www.cisco.com/etc/designs/cdc/clientlibs/responsive/js/foundation.min.js"></script>

    <link rel="stylesheet" href="https://www.cisco.com/etc/designs/cdc/clientlibs/responsive/css/responsive.min.css" type="text/css">

    










    









<script>
    cdc.wcAncillaryAssetAllocator.init(['cdc-search', 'cdc-nav'], 'en/us', true, false, true);
</script>

    <script>
        sessionStorage.setItem("logOutIntermediateMessage", 'You are being logged out.');
    </script>
    
    
	











<!-- Custom JSON LD For Products Type -->

    
    <script type="application/ld+json">
        [
           
            {
          "@context": "http://www.schema.org",                                                                        
          "@type": "WebPage",
          "name": "Cisco ACI and F5 BIG-IP Design Guide White Paper",  		  
          "url": "https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html",
          "description": "An illustrated presentation on Cisco ACI topology, logical network constructs, typical use cases, load-balancer designs, and examples of F5 designs, with a section on multitenant options.",
          "publisher": {
              "@type": "Corporation",
                 "name": "Cisco"
            }
        }]
    </script>
<!-- End Custom JSON LD For Products Type -->

<!-- Video JSON LD -->




<!-- End Video JSON LD -->

    
</head>

<body id="wcq" class="










fw-res cdc-eot cdc-eot-toc cdc-transform networking-solutions-white-paper
">
    
    









<div id="fw-skiplinks">
    <ul class="container">
        <li><a id="skiplink-content" href="#fw-content">Skip to content</a></li>
        <li><a id="skiplink-search" href="#fw-content">Skip to search</a></li>

        <li><a id="skiplink-footer" href="#fw-footer" class="last">Skip to footer</a></li>
    </ul>
</div>

    





























 
<script type="text/javascript">
    if (window.cdc === undefined) { window.cdc = {}; } 
    cdc.isReiJspLoaded = true;

    if (cdc.cdcMasthead === undefined) { cdc.cdcMasthead = {}; }
    if (cdc.cdcMasthead.additional === undefined) { cdc.cdcMasthead.additional = {}; }
    cdc.cdcMasthead.additional.env = 'prod';
    cdc.cdcMasthead.additional.linkSwaps = {accountUrl: "//www.cisco.com/c/en/us/about/account.html", registrationUrl: "https://id.cisco.com/signin/register", profileUrl: "https://rpfa.cloudapps.cisco.com/rpfa/profile/profile_management.do"}; 
</script>     

     
<header id="fwt-masthead"







class="cdc no-nav-wc" data-owner="ID">
    <div id="fwt-banner">
        <a id="fwt-logo" class="has-events" title="Cisco.com Worldwide" href="https://www.cisco.com/c/en/us/index.html" aria-labelledby="fwt-logo-title">
            









            <svg xmlns="http://www.w3.org/2000/svg" width="108" height="57" viewBox="0 0 108 57" role="img">
                <title id="fwt-logo-title">Cisco.com Worldwide</title><defs><path d="M0 22.769a2.348 2.348 0 0 0 3.935 1.545c.434-.403.7-.955.744-1.545v-5.2a2.34 2.34 0 0 0-4.679 0v5.2" id="bar_short" class="bar"></path><path d="M12.95 22.769a2.349 2.349 0 0 0 2.34 2.171 2.346 2.346 0 0 0 2.339-2.171V11.112a2.341 2.341 0 0 0-4.679 0V22.77" id="bar_tall" class="bar"></path><path d="M25.832 27.464a2.345 2.345 0 0 0 4.678 0V2.249a2.342 2.342 0 0 0-4.678 0v25.215" id="bar_grande" class="bar"></path><path d="M24.026 56.277v-5.002l-.098.043a9.253 9.253 0 0 1-3.605.915 5.303 5.303 0 0 1-3.63-1.07 4.644 4.644 0 0 1-1.58-2.244 5.395 5.395 0 0 1-.106-3 4.6 4.6 0 0 1 1.609-2.566 4.823 4.823 0 0 1 2.528-1.09 8.332 8.332 0 0 1 4.774.895l.108.056v-5.03l-.228-.061a12.78 12.78 0 0 0-4.552-.596 10.534 10.534 0 0 0-4.065.93 9.29 9.29 0 0 0-3.329 2.572 10.014 10.014 0 0 0-.182 12.18 9.546 9.546 0 0 0 5.292 3.403c2.211.538 4.528.456 6.697-.234l.367-.101" id="cisco_c"></path></defs><g fill="#00bceb" fill-rule="evenodd"><use href="#cisco_c"/><use href="#cisco_c" x="49.5"/><path d="M41.69 52.125l-.019 4.308.315.054c.989.185 1.987.313 2.99.385a18.1 18.1 0 0 0 2.642.051c.842-.06 1.675-.218 2.48-.468a6.862 6.862 0 0 0 2.573-1.371 5.19 5.19 0 0 0 1.498-2.148 5.912 5.912 0 0 0-.03-4.324 4.852 4.852 0 0 0-1.343-1.862 5.568 5.568 0 0 0-1.97-1.147l-3.25-1.206a1.742 1.742 0 0 1-.887-.845 1.107 1.107 0 0 1 .036-.986 1.29 1.29 0 0 1 .217-.291 1.75 1.75 0 0 1 .48-.347c.363-.18.755-.293 1.158-.337a6.76 6.76 0 0 1 2.072.022c.81.088 1.613.231 2.402.43l.168.037v-3.974l-.31-.067a21.14 21.14 0 0 0-2.444-.435 12.545 12.545 0 0 0-3.213-.014 6.945 6.945 0 0 0-3.699 1.488 4.908 4.908 0 0 0-1.58 2.178 5.984 5.984 0 0 0-.003 4.05c.242.65.63 1.237 1.136 1.714.437.422.932.78 1.47 1.065.708.38 1.458.675 2.235.878.257.077.512.158.766.243l.385.141.11.045c.38.136.726.35 1.018.628.202.19.358.423.455.683.06.237.061.485.003.723a1.536 1.536 0 0 1-.744.892 3.691 3.691 0 0 1-1.239.387 9 9 0 0 1-1.92.097 21.973 21.973 0 0 1-2.507-.334c-.433-.09-.864-.19-1.291-.303l-.16-.04zM30.546 56.607h4.73V37.846h-4.73zM85.305 43.386a4.934 4.934 0 1 1 6.157 7.711 4.934 4.934 0 0 1-6.157-7.71m-6.867 3.848A9.87 9.87 0 0 0 90.44 56.72a9.629 9.629 0 0 0 3.157-17.729 9.934 9.934 0 0 0-15.16 8.244"></path><use href="#bar_short" x="0"/><use href="#bar_tall" x="0"/><use href="#bar_grande" x="0"/><use href="#bar_tall" x="25.875"/><use href="#bar_short" x="51.75"/><use href="#bar_tall" x="51.75"/><use href="#bar_grande" x="51.75"/><use href="#bar_tall" x="77.625"/><use href="#bar_short" x="103.375"/></g>
            </svg>

        </a>
        








<div id="fwt-cornerstone">










        <button id="fwt-nav-button" aria-labelledby="fwt-nav-button-label" aria-haspopup="true" aria-expanded="false">
            <div>
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="nav-label active" id="fwt-nav-button-label">MENU</div>
            <div class="nav-label" id="fwt-nav-button-close-label">CLOSE</div>
        </button>
<slot name="masthead-title">
    <div id="fwt-sitearea-buttons">
        <button class="forCdcr" type="button" name="Products" disabled aria-controls="Products-tab" aria-haspopup="true" aria-selected="false">Products and Services</button>
        <button  class="forCdc" type="button" name="Products" disabled aria-controls="Products-tab" aria-haspopup="true" aria-selected="false">Products</button>   
        <button class="forCdcr" type="button" name="Solutions" disabled aria-controls="Solutions-tab" aria-haspopup="true" aria-selected="false">Solutions</button>
        <button type="button" name="Support" disabled aria-controls="Support-tab" aria-haspopup="true" aria-selected="false">Support</button>
        <button class="forCdcr" type="button" name="Learn" disabled aria-controls="Learn-tab" aria-haspopup="true" aria-selected="false">Learn</button>
        <button class="forCdc" type="button" name="Partners" disabled aria-controls="Partners-tab" aria-haspopup="true" aria-selected="false">Partners</button>
        <button class="forCdc" type="button" name="EventsVideos" disabled aria-controls="EventsVideos-tab" aria-haspopup="true" aria-selected="false">Events &amp; Videos</button>
        <button class="forCdcr hide" type="button" name="Partners" disabled aria-controls="Partners-tab" aria-haspopup="true" aria-selected="false">Partners</button>
    </div>
</slot>
</div>
        <div id="fwt-utilities">
        











<a href="https://www.cisco.com/c/en/us/about/sitemap.html" id="fwt-exploreCisco-button">Explore Cisco</a>

<button id="fwt-search-button" disabled="disabled" aria-label="Search" aria-haspopup="true" aria-expanded="false" title="Search">
<span class="forCdcr">Search</span> <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36" role="img" aria-labelledby="srch-btn-title">
    <title id="srch-btn-title">Search</title>
    <path d="M18.694 24.496a9.988 9.988 0 01-3.55.648c-5.524 0-10.002-4.477-10.001-10 0-5.524 4.477-10.002 10-10.001 5.524 0 10.001 4.477 10.001 10 0 2.721-1.177 5.256-2.94 7.06l7.92 7.92" stroke="#4d4c4c" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linejoin="round"/>
</svg>
</button>
<slot name="masthead-utilities"></slot>



            <button id="fwt-ellipsis-button">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" width="32" height="32" role="img" aria-labelledby="fwt-ellipsis-button-icon-title">
    <title id="fwt-ellipsis-button-icon-title">More</title>
    <g id="fwt-ellipsis-dots" fill="#4d4c4c">
        <ellipse cx="16" cy="16" rx="2.65" ry="2.51" />
        <ellipse cx="16" cy="16" rx="2.65" ry="2.51" style="transform: translateY(-8.75px)"/>
        <ellipse cx="16" cy="16" rx="2.65" ry="2.51" style="transform: translateY(8.75px)"/>
    </g>
</svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="svg-x" width="36" height="36" viewBox="0 0 36 36" stroke="#fff" stroke-width="2" role="img"><use href="#svg-x"/></svg>
            </button>

        </div>
    </div>
    <div id="fwt-rei-utilities">
        










<div class="fwt-rei-utilities-left">
    
</div>
<div class="fwt-rei-utilities-right">
    
    <a data-config-metrics-group="global nav" href="https://www.cisco.com/c/en/us/buy.html" id="fwt-buy-button">How to Buy</a>
    <button type="button" id="fwt-partner-button" class="show" name="Partners" aria-controls="Partners-tab" aria-haspopup="true" aria-selected="false">Partners</button>
	
    <button id="fwt-profile-button" class="ellipsis-short ellipsis-medium" aria-haspopup="true" aria-expanded="false"  aria-labelledby="fwt-profile-button-loggedout-title" title="Log In">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 40 40" id="fwt-profile-button-loggedout" role="img" >
            <title id="fwt-profile-button-loggedout-title">Log in</title>
            <g class="addStroke" fill="none" fill-rule="evenodd" stroke="#" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                <path class="forCdcr" d="M 28 31 V 26.07 c 0 -4.07 -3.136 -7.069 -6.967 -7.069 h -4.566 C 12.135 19 9 22.181 9 26.07 v 4.006 H 9 L 9 31 M 12 9.857 C 12 6.622 14.584 4 17.772 4 c 3.187 0 5.772 2.622 5.772 5.857 c 0 3.235 -2.585 5.857 -5.772 5.857 c -3.188 0 -5.772 -2.622 -5.772 -5.857 z"></path>
                <path class="forCdc" d="M27.5 32.077V26.07c0-3.888-3.136-7.069-6.967-7.069h-4.566C12.135 19 9 22.181 9 26.07v4.006c0 .553.454 1.001.998 1.001H20.94M12 9.857C12 6.622 14.584 4 17.772 4c3.187 0 5.772 2.622 5.772 5.857 0 3.235-2.585 5.857-5.772 5.857-3.188 0-5.772-2.622-5.772-5.857z"></path>
            </g>
        </svg>

        <svg class="forCdcr" id="fwt-profile-svg-cdcr" width="14" height="14" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="stroke:none;margin-top: -1px;">
            <title id="fwt-profile-button-loggedout-title">Log in</title>
            <mask id="mask0" mask-type="alpha" maskUnits="userSpaceOnUse" x="4" y="1" width="12" height="18">
                <path d="M10 8C9.30777 8 8.63108 7.79473 8.05551 7.41015C7.47993 7.02556 7.03133 6.47894 6.76642 5.83939C6.50152 5.19985 6.4322 4.49612 6.56725 3.81719C6.7023 3.13825 7.03564 2.51461 7.52513 2.02513C8.01461 1.53564 8.63825 1.2023 9.31718 1.06725C9.99612 0.932205 10.6999 1.00152 11.3394 1.26642C11.9789 1.53133 12.5256 1.97993 12.9101 2.55551C13.2947 3.13108 13.5 3.80777 13.5 4.5C13.4974 5.42745 13.1278 6.31615 12.472 6.97196C11.8162 7.62777 10.9274 7.99736 10 8ZM10 2C9.50555 2 9.0222 2.14662 8.61108 2.42133C8.19995 2.69603 7.87952 3.08648 7.6903 3.54329C7.50108 4.00011 7.45157 4.50277 7.54804 4.98773C7.6445 5.47268 7.8826 5.91814 8.23223 6.26777C8.58187 6.6174 9.02732 6.8555 9.51228 6.95196C9.99723 7.04843 10.4999 6.99892 10.9567 6.8097C11.4135 6.62048 11.804 6.30005 12.0787 5.88893C12.3534 5.4778 12.5 4.99445 12.5 4.5C12.4974 3.83777 12.2331 3.20342 11.7649 2.73514C11.2966 2.26687 10.6622 2.00263 10 2Z" fill="#1B1C1D"></path>
                <path d="M15.5 19H4.5C4.36739 19 4.24021 18.9473 4.14645 18.8536C4.05268 18.7598 4 18.6326 4 18.5V13.45C4.00264 12.5358 4.36697 11.6598 5.0134 11.0134C5.65983 10.367 6.53581 10.0026 7.45 10H12.55C13.4642 10.0026 14.3402 10.367 14.9866 11.0134C15.633 11.6598 15.9974 12.5358 16 13.45V18.5C16 18.6326 15.9473 18.7598 15.8536 18.8536C15.7598 18.9473 15.6326 19 15.5 19ZM5 18H15V13.45C15 12.8002 14.7419 12.1771 14.2824 11.7176C13.8229 11.2581 13.1998 11 12.55 11H7.45C6.80022 11 6.17705 11.2581 5.71759 11.7176C5.25812 12.1771 5 12.8002 5 13.45V18Z" fill="#1B1C1D"></path>
            </mask>
            <g mask="url(#mask0)">
                <path d="M20 0H0V20H20V0Z" fill="#1B1C1D"></path>
            </g>
        </svg>

        <div class="text">Log in</div>
        <svg class= "forCdc" xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36" id="fwt-profile-button-loggedin" role="img" >
            <title id="fwt-profile-button-loggedin-title">Log out</title>
            <g fill="none" fill-rule="evenodd">
                <path id="forCdc" stroke="#4d4c4c" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22.857 31.36c-1.616.614-3.37.95-5.202.95C9.56 32.31 3 25.749 3 17.655S9.561 3 17.655 3 32.31 9.561 32.31 17.655c0 3.988-1.727 7.703-4.31 10.344" x="0" y="0"></path>
                <circle id="forCdcr" cx="18" cy="18" r="17" fill="#E6E7E8"/>
                <text fill="#007493" font-family="CiscoSans, Arial, sans-serif" font-weight="300" font-size="16" x="50%" y="50%" dy=".35em" text-anchor="middle" id="fwt-initials"> </text>
            </g> 
        </svg>
    </button>
	
            <button id="fwt-language-button" class="ellipsis-short ellipsis-medium" aria-haspopup="true" aria-expanded="false" aria-labelledby="fwt-language-button-icon-title" title="Choose Language Selection">
                <svg class="forCdc" xmlns="http://www.w3.org/2000/svg" width="50" height="36" viewBox="0 0 50 36" role="img" >
                    <title id="fwt-language-button-icon-title">Choose Language Selection</title>
                    <g fill="none" fill-rule="evenodd">
                        <g stroke="#4d4c4c" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" transform="rotate(30 14.912 12.822)">
                            <path d="M23.196 28.598c-5.967 3.308-13.83.982-17.138-4.986-3.308-5.967-1.152-13.487 4.816-16.795C16.84 3.51 24.36 5.665 27.669 11.633c1.466 2.645 2.409 6.763.314 12.125"></path>
                            <ellipse cx="16.938" cy="18.031" rx="4.154" ry="12.142" transform="rotate(-30.001 16.938 18.03)"></ellipse>
                            <path d="M5.42 19.568L24.63 8.694M9.368 26.463l19.21-11.04"></path>
                        </g>
                        <text fill="#4d4c4c" font-family="CiscoSans, Arial, sans-serif" font-weight="300" font-size="12" letter-spacing=".926" style="text-transform: uppercase; direction: ltr;">
                            <tspan x="30" y="16">us</tspan>
                        </text>
                        <text fill="#4d4c4c" font-family="CiscoSans, Arial, sans-serif" font-weight="300" font-size="12" letter-spacing=".926" style="text-transform: uppercase; direction: ltr;">
                            <tspan x="30" y="29">en</tspan>
                        </text>
                    </g>
                </svg>

                <svg class="forCdcr" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 20 20" fill="none" stroke="none">
                    <title id="fwt-language-button-icon-title">Choose Language Selection</title>
                    <path d="M10.56 2C8.89073 2 7.25894 2.495 5.87099 3.4224C4.48304 4.3498 3.40126 5.66794 2.76246 7.21015C2.12365 8.75236 1.95651 10.4494 2.28217 12.0866C2.60783 13.7238 3.41166 15.2276 4.59202 16.408C5.77237 17.5883 7.27624 18.3922 8.91344 18.7178C10.5506 19.0435 12.2476 18.8763 13.7898 18.2375C15.3321 17.5987 16.6502 16.517 17.5776 15.129C18.505 13.7411 19 12.1093 19 10.44C18.9974 8.20238 18.1073 6.05718 16.5251 4.47494C14.9428 2.89271 12.7976 2.00265 10.56 2ZM18 10H15.11C15.149 7.6789 14.4716 5.4022 13.17 3.48C14.5191 3.9837 15.6933 4.8676 16.5505 6.02475C17.4077 7.18189 17.9112 8.56267 18 10ZM10 3.11V10H7C7.11 6.56 8.39 3.67 10 3.11ZM10 11V17.77C8.41 17.22 7.14 14.39 7 11H10ZM11 17.81V11H14.11C14 14.48 12.64 17.37 11 17.81ZM11 10V3.07C12.66 3.51 14 6.47 14.11 10H11ZM8 3.48C6.67716 5.3952 5.97862 7.67246 6 10H3.15C3.23918 8.55999 3.74513 7.17698 4.60624 6.01937C5.46735 4.86176 6.64646 3.97949 8 3.48ZM3.15 11H6C6.00393 13.2834 6.70138 15.5118 8 17.39C6.66487 16.9007 5.4982 16.0385 4.6385 14.9058C3.7788 13.7731 3.26219 12.4175 3.15 11ZM13.15 17.39C14.4391 15.5094 15.1229 13.2799 15.11 11H18C17.8895 12.4152 17.3758 13.7692 16.5198 14.9016C15.6639 16.034 14.5014 16.8976 13.17 17.39H13.15Z" fill="#1B1C1D"></path>
                </svg>
                <div class="text forCdcr fwt-language-submenu">en us</div>
            </button> 
</div>
    </div> 
    
    <div id="fwt-masthead-overlay">
        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36" style="display:none;"><defs><path id="svg-x" fill="none" fill-rule="evenodd" stroke="inherit" stroke-linecap="round" stroke-width="inherit" d="M30.26 6.495L5.505 31.25M5.495 6.495L30.25 31.25"/></defs></svg>
        









        <cdc-nav lang="en" hide-partners-menu></cdc-nav>
        <cdc-search lang="en" has-type-ahead has-close-button has-voice-search></cdc-search>
        <slot name="masthead-overlay"></slot>

        <div id="fwt-partner">
            <div class="fwt-partner-container">
                <p class="profile-header sectional">For Partners</p>
                <ul>
                    <li><a data-config-metrics-group="global nav" data-config-metrics-title="partners utility menu" data-config-metrics-item="Partners Home" href="https://www.cisco.com/c/en/us/partners.html">Partners Home</a></li>
                    <li><a data-config-metrics-group="global nav" data-config-metrics-title="partners utility menu" data-config-metrics-item="New Partner Program" href="https://www.cisco.com/c/en/us/partners/partner-with-cisco/new-partner-program.html">New Partner Program</a></li>
                    <li><a data-config-metrics-group="global nav" data-config-metrics-title="partners utility menu" data-config-metrics-item="Partner Certifications" href="https://www.cisco.com/c/en/us/partners/partner-with-cisco/channel-partner-program/certifications.html">Partner Certifications</a></li>
                    <li><a data-config-metrics-group="global nav" data-config-metrics-title="partners utility menu" data-config-metrics-item="Support" href="https://www.cisco.com/c/en/us/partners/support-help.html">Support</a></li>
                    <li><a data-config-metrics-group="global nav" data-config-metrics-title="partners utility menu" data-config-metrics-item="Tools" href="https://www.cisco.com/c/en/us/partners/tools.html">Tools</a></li>
                </ul>
            </div>
            <div class="fwt-partner-find">
                <div class="fwt-already-partner"> 
                    <p class="profile-header sectional">Already a Partner?</p>

                    <a data-config-metrics-group="global nav" data-config-metrics-title="partners utility menu" data-config-metrics-item="Log in" class="button-cta dark manage profile-url" href="https://www.cisco.com/c/login/index.html?referer=/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html">Log in</a>

                    <button  data-config-metrics-group="global nav" data-config-metrics-title="partners utility menu" data-config-metrics-item="Close Partner Menu"  value="Close Partner Menu" type="button" class="close-partner-button" aria-label="Close Partner Menu">
                        <svg id="fwt-partner-close-button"  xmlns="http://www.w3.org/2000/svg" class="svg-x" width="36" height="36" viewBox="0 0 36 36" stroke="#000000" stroke-width="2" role="img"><use href="#svg-x"></use></svg>
                    </button>
                </div>

                <div class="fwt-partner-search"> 
                    <p class="profile-header sectional find-a-cisco-partner find-partner"><a data-config-metrics-group="global nav" data-config-metrics-title="partners utility menu" data-config-metrics-item="Find a Cisco Partner" href="https://locatr.cloudapps.cisco.com/WWChannels/LOCATR/openBasicSearch.do">Find a Cisco Partner</a></p>
                </div> 
                <div class="fwt-partner-search"> 
                    <p class="profile-header sectional find-a-cisco-partner meet-partner"><a data-config-metrics-group="global nav" data-config-metrics-title="partners utility menu" data-config-metrics-item="Meet our Partners" href="https://www.cisco.com/c/en/us/partners/connect-with-a-partner.html">Meet our Partners</a></p>
                </div> 
                <div class="fwt-partner-search"> 
                    <p class="profile-header sectional find-a-cisco-partner become-partner"><a data-config-metrics-group="global nav" data-config-metrics-title="partners utility menu" data-config-metrics-item="Become a Cisco Partner" href="https://partnersuccess.cisco.com/becomeapartner">Become a Cisco Partner</a></p>
                </div> 
            </div>
        </div>

        <div id="fwt-ellipsis-profile" class="ellipsis-short ellipsis-medium">

            <button id="fwt-profile_ellipsis-button" class="ellipsis-short ellipsis-medium" aria-haspopup="true" aria-expanded="false"  aria-labelledby="fwt-profile_ellipsis-button-loggedout-title" title="Log In">
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36" id="fwt-profile_ellipsis-button-loggedout" role="img" >
                    <title id="fwt-profile_ellipsis-button-loggedout-title">Log In</title>
                    <g fill="none" fill-rule="evenodd" stroke="#4d4c4c" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                        <path d="M27.5 32.077V26.07c0-3.888-3.136-7.069-6.967-7.069h-4.566C12.135 19 9 22.181 9 26.07v4.006c0 .553.454 1.001.998 1.001H20.94M12 9.857C12 6.622 14.584 4 17.772 4c3.187 0 5.772 2.622 5.772 5.857 0 3.235-2.585 5.857-5.772 5.857-3.188 0-5.772-2.622-5.772-5.857z"></path>
                    </g>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36" id="fwt-profile_ellipsis-button-loggedin" role="img" >
                    <title id="fwt-profile_ellipsis-button-loggedin-title">Log Out</title>
                    <g fill="none" fill-rule="evenodd">
                        <path stroke="#4d4c4c" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22.857 31.36c-1.616.614-3.37.95-5.202.95C9.56 32.31 3 25.749 3 17.655S9.561 3 17.655 3 32.31 9.561 32.31 17.655c0 3.988-1.727 7.703-4.31 10.344" x="0" y="0"></path>
                        <text fill="#007493" font-family="CiscoSans, Arial, sans-serif" font-weight="300" font-size="16" x="50%" y="50%" dy=".35em" text-anchor="middle" id="fwt-initials_ellipsis"> </text>
                    </g> 
                </svg><span>&nbsp;Log In</span>
            </button>
            <div id="fwt-profile">
                









<div id="fwt-profile-content">

    <div id="fwt-profile-login-content" class="fwt-profile-content-container not_logged_in_fwt_profile">
        <p class="profile-header">Have an account?</p>
        <ul class="checked">
            <li>
<svg xmlns="http://www.w3.org/2000/svg" width="12" height="11" viewBox="0 0 12 11" role="img">
    <path fill="none" fill-rule="evenodd" stroke="#1ba0d7" stroke-linecap="round" stroke-width="3" d="M1.882 4.95l2.903 2.903L10.09 2.55"/>
</svg>&nbsp;&nbsp;Personalized content
            </li>
            <li>
<svg xmlns="http://www.w3.org/2000/svg" width="12" height="11" viewBox="0 0 12 11" role="img">
    <path fill="none" fill-rule="evenodd" stroke="#1ba0d7" stroke-linecap="round" stroke-width="3" d="M1.882 4.95l2.903 2.903L10.09 2.55"/>
</svg>&nbsp;&nbsp;Your products and support
            </li>
        </ul>
        <a class="button-cta dark login-url" href="https://www.cisco.com/c/login/index.html?referer=/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html">Log in</a>
        <span class="account-none"> Don't have an account? <a id="register_cdcr" href="https://id.cisco.com/signin/register">Sign up</a></span>
        <ul class="forgot-password">
            <li><a href="https://id.cisco.com/signin/forgot-password">Forgot your password?</a></li>
            <li><a class="account-url" href="https://www.cisco.com/c/en/us/about/account.html">About Cisco accounts</a></li>
        </ul>
    </div>
    <div id="fwt-create-account-bar" class="fwt-profile-content-container">
        <p class="profile-header">Need an account?</p>
        <a class="button-cta light registration-url" href="https://id.cisco.com/signin/register">Create an account</a>
        <ul>
            <li><a href="https://www.cisco.com/c/en/us/about/help.html">Help</a></li>
        </ul>

    </div>
</div>
<button value="Close Profile Menu" type="button" class="close-button" id="fwt-profile-close-button" aria-label="Close Profile Menu">
    <svg xmlns="http://www.w3.org/2000/svg" class="svg-x" width="36" height="36" viewBox="0 0 36 36" stroke="#fff" stroke-width="2" role="img"><use href="#svg-x"/></svg>
</button>

            </div>
        </div>
        <div id="fwt-ellipsis-language" class="ellipsis-short ellipsis-medium">

            <button id="fwt-language_ellipsis-button" class="ellipsis-short ellipsis-medium" aria-haspopup="true" aria-expanded="false" aria-labelledby="fwt-language_ellipsis-button-icon-title" title="Choose Language Selection">
                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="36" viewBox="0 0 50 36" role="img" >
                    <title id="fwt-language_ellipsis-button-icon-title">Choose Language Selection</title>
                    <g fill="none" fill-rule="evenodd">
                        <g stroke="#4d4c4c" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" transform="rotate(30 14.912 12.822)">
                            <path d="M23.196 28.598c-5.967 3.308-13.83.982-17.138-4.986-3.308-5.967-1.152-13.487 4.816-16.795C16.84 3.51 24.36 5.665 27.669 11.633c1.466 2.645 2.409 6.763.314 12.125"></path>
                            <ellipse cx="16.938" cy="18.031" rx="4.154" ry="12.142" transform="rotate(-30.001 16.938 18.03)"></ellipse>
                            <path d="M5.42 19.568L24.63 8.694M9.368 26.463l19.21-11.04"></path>
                        </g>
                        <text fill="#4d4c4c" font-family="CiscoSans, Arial, sans-serif" font-weight="300" font-size="12" letter-spacing=".926" style="text-transform: uppercase; direction: ltr;">
                            <tspan x="30" y="16">us</tspan>
                        </text>
                        <text fill="#4d4c4c" font-family="CiscoSans, Arial, sans-serif" font-weight="300" font-size="12" letter-spacing=".926" style="text-transform: uppercase; direction: ltr;">
                            <tspan x="30" y="29">en</tspan>
                        </text>
                    </g>
                </svg>&nbsp;Choose Language Selection
            </button> 
            <div id="fwt-language">
            </div>
        </div>
        <div id="fwt-nav-links">
            <ul>
                <li>
                    <a href="https://www.cisco.com/c/en/us/products/index.html">Products</a>
                </li>

               
            

                <li>
                    <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/SOLUTIONS_PAGE_URL">Solutions</a>
                </li>
                <li>
                    <a href="https://www.cisco.com/c/en/us/support/index.html">Support</a>
                </li>
                <li>
                    <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/LEARN_PAGE_URL">Learn</a>
                </li>   
            
            </ul>
        </div>
    </div>

</header>


    












<div id="fw-content" class="container grid">
    
    









   








<div class="row full" data-owner="ID">
	<div class="col full ">
		
		        















<nav id="fw-breadcrumb" class="data-based" data-owner="ID">
    <ul itemscope itemtype="//schema.org/BreadcrumbList">
        <li itemprop='itemListElement' itemscope itemtype='//schema.org/ListItem'><a itemprop='item' href='https://www.cisco.com/c/en/us/solutions/index.html'><span itemprop='name'>Solutions</span><meta itemprop='position' content='1' /></a><span class='caret'></span></li><li itemprop='itemListElement' itemscope itemtype='//schema.org/ListItem'><a itemprop='item' href='https://www.cisco.com/c/en/us/solutions/data-center-virtualization/index.html'><span itemprop='name'>Cisco Data Center Services & Solutions</span><meta itemprop='position' content='2' /></a><span class='caret'></span></li><li itemprop='itemListElement' itemscope itemtype='//schema.org/ListItem'><a itemprop='item' href='https://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/index.html'><span itemprop='name'>Application Centric Infrastructure</span><meta itemprop='position' content='3' /></a><span class='caret'></span></li><li itemprop='itemListElement' itemscope itemtype='//schema.org/ListItem'><a itemprop='item' href='https://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/white-paper-listing.html'><span itemprop='name'>White Papers</span><meta itemprop='position' content='4' /></a><span class='caret'></span></li>
    </ul>
</nav>
<script>
    if (window.cdc === undefined) { window.cdc = {}; }
    if (cdc.breadcrumb === undefined) {
        cdc.breadcrumb = (function () {
            let clone = document.querySelector('#fw-breadcrumb').cloneNode(true);

            let appendClone = function () {
                let hasBreadcrumb = document.querySelector('#fw-breadcrumb') !== null,
                    firstMarquee = document.querySelectorAll('.dmc-mq')[0];

                if (!hasBreadcrumb && firstMarquee !== undefined) {
                    firstMarquee.querySelector('.frame .inset').insertBefore(this.clone, firstMarquee.querySelector('.frame .inset').firstElementChild);
                }
            };

            return {
                clone: clone,
                appendClone: appendClone
            }
        }());
    }
    //DE380224
    var anchorChild = document.getElementsByTagName("a");
    for(var i=0; i<anchorChild.length; i++){ 
        if(anchorChild[i].getAttribute("itemprop")=="item")  {  
            if ( anchorChild[i].href.includes("%3Clocale%3E") ){
                let anchorChildHREF = anchorChild[i].href;
                let docLocale = document.querySelector('meta[name="locale"]').getAttribute('content');
                let docLanguage = document.querySelector('meta[name="language"]').getAttribute('content');
                
                var docSeparator;
                
                if ((docLocale.toLowerCase() == "us") && (docLanguage.toLowerCase() == "en")) {
                    docSeparator="/";
                } else {
                    docSeparator="_";
                }
                
                let anchorURLReplace = docLanguage.toLowerCase() + docSeparator + docLocale.toLowerCase();
                anchorChildHREF = anchorChildHREF.replace("%3Clocale%3E", anchorURLReplace);
                anchorChild[i].setAttribute('href', anchorChildHREF);
            }
        }
    }
</script>


		
		        <h1 id="fw-pagetitle" class="" data-owner="ID">Cisco ACI and F5 BIG-IP Design Guide White Paper</h1>
		
	</div>
</div>
     <!--googleon: index--><!--googleon: snippet-->
    












<script type="text/javascript">
    // initialize dictionary for i18n
    var pagelanguage = "en_us".replace("_","-");
    var pagelocale = pagelanguage;
    Granite.I18n.setLocale(pagelocale.toLowerCase());
    Granite.I18n.setUrlPrefix("/etc/designs/cdc/fw/w/responsive_components/eot/i18n/");
    Granite.I18n.setUrlSuffix(".1.json");
    cdc.util.ensureNamespace("cdc.rc");
    cdc.rc.isEotToc = true;
</script>


<div class="row full blowout">
    <div class="col full">

        <div class="docTypeBanner noprint">White Paper</div>
        
    </div>
</div>

<div class="row full">
    <div class="col full top docId">
        













<script>
    if (typeof(cdc) == "undefined") cdc={};
    if (typeof(cdc.translations) == "undefined") cdc.translations={};

</script>

        <div class="docHeaderComponent base-blowout">
        <div class="linksRow">
            
            <div class="toolbar">
            <!-- Translation Selctor -->
            <!-- Translation Selector is used on EOT and Books pages. if a page has a locale of en_US then it will provide a list of avaible translations, if its a translated page (non english locale) then provide the link to the english locale. -->


<script language="javascript">
        console.log("pageLocale = en_us");
        console.log("templatePage = /apps/cdc/responsive/templates/eot-toc/");
        console.log("urlMap = {en-us=https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html, x-default=https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html}");
        console.log("isSMP  = false");
        console.log("isSSP = false");
        console.log("isSTP = false");
        console.log("isMMEOT = false");
</script>
 


<script type="text/javascript">
/* Specifically for books at the simple overlay trigger class on English locale pages, if its a non english locale do not add the trigger. */
        if(jQuery('body').hasClass('cdc-books') && !jQuery('a').hasClass('nonEnglish')) {
                jQuery('.translations').addClass('simpleOverlay-trigger');
        }
</script>

            
                <div class="noprint downloadDocument"><button type="button" class="view-download-list-link anchor"><div class="toolbarIcon downloadIcon"></div><label class="iconLabel">Download</label></button></div>
            
            
                <div class="noprint printDocument js-only"><button type="button" class="anchor printPage"><div class="toolbarIcon printIcon"></div><label class="iconLabel">Print</label></button></div>
            
            </div>

        </div>
            <!-- Where translation selector list of available languages is set up for EOT pages, for the javascript to work must have <ul id="translationsList"> </ul> -->
            
                    <script language="javascript">
                        cdc.translations.map = "{en-us=https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html, x-default=https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html}";//storing the map for use in the JS
                        cdc.translations.locale="en_us";
                    </script>
                    <div class="availableLanguagesList">
                        <h3>Available Languages</h3>
                        <ul id="translationsList">
                
                          </ul>
                </div>
           
            
            <div class="noprint panelRow">
                <div class='download-list'>
                    <h3>Download Options</h3>
                    <ul>
                    
                        <li>
                            <div class="fileText">
                                <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.pdf" class="download-pdf"><div class="fileIcon pdfIcon"></div>PDF</a>
                                
                                <span class="docSize">(3.9 MB)</span>
                                
                                <br />
                                <span class="description">View with Adobe Reader on a variety of devices</span>
                            </div>
                        </li>
                    
                    </ul>
                </div>
            </div>
        

        <div class="infobarClearFix">
            <div class="infobar">
				
                    <div class="updatedDate"><span>Updated:</span>August 25, 2021</div>
                                
                

                 
                     <div class="bullet">&#8226;</div>
                     <div class="seeRevisions"><a href="#Document-History" id="seeRevisionsLink">See Revisions</a></div>
                     
                  </div>
                
        </div>
    </div>


<script>
jQuery(document).ready(function(){
    if(jQuery("body").hasClass("cdc-eot-toc") && jQuery(".cdc-eot-toc").find(".DocumentHistory").length > 0){
        jQuery(".cdc-eot-toc .seeRevisions").show();
        if(jQuery(window).width() >= 768){
            jQuery(".cdc-eot-toc .updatedDate").nextAll(".bullet").show();
        }
    }else{
      jQuery(".cdc-eot-toc .seeRevisions").hide();
      jQuery(".cdc-eot-toc .updatedDate").nextAll(".bullet").hide();
    }


})
</script>


    <div id="luh-holder" class="dmc-inpage-nav noprint">
        




































<link rel="stylesheet" href="https://www.cisco.com/etc/designs/cdc/dmr/mbox/mbox.min.css" type="text/css">


<div class="dmc-mbox " data-version="DM:components/target/mbox:V1.5.1">
        <div class="">
            

















<link rel="stylesheet" href="https://www.cisco.com/etc/designs/cdc/dmr/section/clientLib.min.css" type="text/css">






<section class="dmc-section" id="section-geo-luh" data-config-metrics-group="Section" data-config-metrics-title="section-geo-luh" data-version="DM:components/section/section-container:V1.1.1">
    
    

















 
				<link rel="stylesheet" href="https://www.cisco.com/etc/designs/cdc/dmr/text/base-v2.min.css" type="text/css">

        



<link rel="stylesheet" href="https://www.cisco.com/etc/designs/cdc/dmr/letushelp/clientLib-v2.min.css" type="text/css">



    <link rel="stylesheet" href="https://www.cisco.com/etc/designs/cdc/dmr/libs/base.min.css" type="text/css">
<script src="https://www.cisco.com/etc/designs/cdc/dmr/libs/base.min.js"></script>

    <link rel="stylesheet" href="https://www.cisco.com/etc/designs/cdc/dmr/icons/dm-font-icons.min.css" type="text/css">

    
    
    
    
    
    
    
	
  		<script src="https://www.cisco.com/etc/designs/cdc/dmr/libs/a11y/a11y-menu.min.js" defer></script><script src="https://www.cisco.com/etc/designs/cdc/dmr/letushelp/clientLib-v2.min.js" defer></script>
	

    
<!-- DM:components/letushelp/letushelp-eot:V4.1.4 -->

<div class="dm0 dmc-letushelp-eot   floating compact thmd-1" data-config-metrics-group="sm_luh">

    <button class="btn" alt="Contact Cisco" title="Contact Cisco" id="luhrr-menubutton" aria-controls="inner-menu" aria-haspopup="true">
        <div class="btn-icn anm">
            <span class="luh-icn">
                <i class="dmi-audio-phone"></i>
            </span>
            <span class="luh-icn">
                <i class="dmi-app-tools"></i>
            </span>
            <span class="luh-icn">
                <i class="dmi-audio-headset"></i>
            </span>
            <span class="luh-icn">
                <i class="dmi-app-chats"></i>
            </span>
        </div>
        <span class="pri-4 btn-txt">Contact Cisco</span>
    </button>

    <ul class="no-bullets" id="inner-menu" tabindex="-1" role="menu" aria-label="Contact Cisco">
    
        <li class="hd">
            <span class="pri-4 txt">Contact Cisco</span>
            <button class="cls" data-config-metrics-item="close : sm_luh">
                <span class="luh-icn">
                    <i class="dmi-app-exit"></i>
                </span>
            </button>
        </li>
    
        <li class="c2c-no-margin">
        
            <script>
               var cocoaBotTranslateObject={"Cisco_Proactive_Chat_Intro":"Welcome to Cisco!","Cisco_Chat_Now":"Chat with Sales","Cisco_Proactive_Chat_Content":"How can I help you?","Cisco_Proactive_Chat_Decline_Title":"Decline the chat invitation","Cisco_Proactive_Chat_Metrics_Group":"pop up chat","Cisco_Proactive_Chat_Decline":"No Thanks","Cisco_Proactive_Chat_Intro_Title":"Cisco:","Cisco_Proactive_Chat_Accept_Metrics_Item":"accept the chat invitation","Cisco_Proactive_Chat_Decline_Metrics_Item":"decline the chat invitation","Cisco_Proactive_Chat_Title":"Chat live with a Cisco representative","Cisco_Proactive_Chat_Accept_Title":"Accept the chat invitation","Cisco_Proactive_Chat_Accept":"Chat Now"};
            </script>
            <script type="text/javascript" src="https://www.cisco.com/c/dam/cdc/j/chatbot/chatbot.js"></script>
            
                <span class="luh-icn">
                    <i class="dmi-app-chats"></i>
                </span>
            
            <div class="ancr">
                <div id="nhbtn" data-metrics-title="right rail" class="c2c-component">
                </div>
            </div>
        </li>
    
        
            <li class="lnk1">
            
                <span class="luh-icn">
                    <i class="dmi-audio-headset"></i>
                </span>
            
                <div class="ancr">
                    <a href="https://engage2demand.cisco.com/lp=11069?ecid=13896">Get a call from Sales</a>
                </div>
            </li>
        
        
            <li class="lnk2">
            
                <span class="luh-icn">
                    <i class="dmi-app-tools"></i>
                </span>
            
                <div class="ancr">
                    <a href="https://www.cisco.com/c/en/us/support/index.html">Product / Technical Support</a>
                </div>
            </li>
        
        
        
            <li class="lnk4">
            
                <span class="luh-icn">
                    <i class="dmi-status-certified"></i>
                </span>
            
                <div class="ancr">
                    <a href="https://www.cisco.com/c/en/us/training-events/training-certifications/overview.html">Training & Certification</a>
                </div>
            </li>
        
         
        
        
    
    
        <li class="luh-num">
            <span class="luh-icn">
                <i class="dmi-audio-phone"></i>
            </span>
            <div class="ancr">
            
            
                
                
                    
                        <a href="tel:18005536387">
                            
                            1-800-553-6387
                            
                        </a>
                    
                    
                
                
                <br>
            

            

            

            

            

            

            

            

            

            
                US/CAN | 5am-5pm PT
            
        </div>
        </li>
    
    
    </ul>
</div>



</section>














        </div>
        
    </div>
    





    </div>    

    </div>
</div>
<div class="row wide-narrow flip cdc-eot-toc-banner">
    <div class="col wide">
        














<div class="defaultBrandImage"></div>























<div data-version="DM:components/dgbanner/banner-mbox:V1.5.1">
    <div class="mboxDefault"></div>   
    <script type="text/javascript">
        var test="";
        if(test!=undefined && test.trim().length>0){
           mboxCreate('en-us_dg_large_eot','type=default','');
        }else{
           mboxCreate('en-us_dg_large_eot','type=default');
        }
       
    </script>
</div>



























<script src="https://www.cisco.com/etc/designs/cdc/dmr/libs/u.min.js"></script>
<script src="https://www.cisco.com/etc/designs/cdc/dmr/libs/nmsp.min.js"></script>
<script src="https://www.cisco.com/etc/designs/cdc/dmr/libs/log.min.js"></script>
<script src="https://www.cisco.com/etc/designs/cdc/dmr/libs/metrics.min.js"></script>




<!-- DM:components/html/htmlblob:V1.2.6 -->


	

  


	<style>.pChart_bodyCMT a{
font-weight: 700;
}
.cdc-eot-toc #eot-doc-wrapper p.pSubhead2CMT
{
font-weight: bold!important;
}
</style>





<div id="overDocWrapper" class="doctool noprint">

    
    <script type="text/javascript">
      $( document ).ready(function() {
        var fwt_element = $("#fw-content").find(".fwt-fatfooter");
        fwt_element.addClass("noprint");
      });
        if (window.cdc === undefined) { window.cdc = {}; }
        if (cdc.rac === undefined) { cdc.rac = {}; }
        if (cdc.rac.getOverrideConfig === undefined) {
         cdc.rac.getOverrideConfig = {};
        }
        else {
        //var configData = { "ratingsOnly": false, "objId":31, "source":"dummy source" };
          var configData = { "ratingsOnly": false};
          cdc.rac.getOverrideConfig(configData);
        }
    </script>

    
    













<script>
    if (typeof(cdc) == "undefined") cdc={};
    if (typeof(cdc.translations) == "undefined") cdc.translations={};

</script>

        <div class="docHeaderComponent base-blowout">
        <div class="linksRow">
            
            <div class="toolbar">
            <!-- Translation Selctor -->
            <!-- Translation Selector is used on EOT and Books pages. if a page has a locale of en_US then it will provide a list of avaible translations, if its a translated page (non english locale) then provide the link to the english locale. -->


<script language="javascript">
        console.log("pageLocale = en_us");
        console.log("templatePage = /apps/cdc/responsive/templates/eot-toc/");
        console.log("urlMap = {en-us=https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html, x-default=https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html}");
        console.log("isSMP  = false");
        console.log("isSSP = false");
        console.log("isSTP = false");
        console.log("isMMEOT = false");
</script>
 


<script type="text/javascript">
/* Specifically for books at the simple overlay trigger class on English locale pages, if its a non english locale do not add the trigger. */
        if(jQuery('body').hasClass('cdc-books') && !jQuery('a').hasClass('nonEnglish')) {
                jQuery('.translations').addClass('simpleOverlay-trigger');
        }
</script>

            
                <div class="noprint downloadDocument"><button type="button" class="view-download-list-link anchor"><div class="toolbarIcon downloadIcon"></div><label class="iconLabel">Download</label></button></div>
            
            
                <div class="noprint printDocument js-only"><button type="button" class="anchor printPage"><div class="toolbarIcon printIcon"></div><label class="iconLabel">Print</label></button></div>
            
            </div>

        </div>
            <!-- Where translation selector list of available languages is set up for EOT pages, for the javascript to work must have <ul id="translationsList"> </ul> -->
            
                    <script language="javascript">
                        cdc.translations.map = "{en-us=https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html, x-default=https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html}";//storing the map for use in the JS
                        cdc.translations.locale="en_us";
                    </script>
                    <div class="availableLanguagesList">
                        <h3>Available Languages</h3>
                        <ul id="translationsList">
                
                          </ul>
                </div>
           
            
            <div class="noprint panelRow">
                <div class='download-list'>
                    <h3>Download Options</h3>
                    <ul>
                    
                        <li>
                            <div class="fileText">
                                <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.pdf" class="download-pdf"><div class="fileIcon pdfIcon"></div>PDF</a>
                                
                                <span class="docSize">(3.9 MB)</span>
                                
                                <br />
                                <span class="description">View with Adobe Reader on a variety of devices</span>
                            </div>
                        </li>
                    
                    </ul>
                </div>
            </div>
        

        <div class="infobarClearFix">
            <div class="infobar">
				
                    <div class="updatedDate"><span>Updated:</span>August 25, 2021</div>
                                
                

                 
                     <div class="bullet">&#8226;</div>
                     <div class="seeRevisions"><a href="#Document-History" id="seeRevisionsLink">See Revisions</a></div>
                     
                  </div>
                
        </div>
    </div>


<script>
jQuery(document).ready(function(){
    if(jQuery("body").hasClass("cdc-eot-toc") && jQuery(".cdc-eot-toc").find(".DocumentHistory").length > 0){
        jQuery(".cdc-eot-toc .seeRevisions").show();
        if(jQuery(window).width() >= 768){
            jQuery(".cdc-eot-toc .updatedDate").nextAll(".bullet").show();
        }
    }else{
      jQuery(".cdc-eot-toc .seeRevisions").hide();
      jQuery(".cdc-eot-toc .updatedDate").nextAll(".bullet").hide();
    }


})
</script>

</div>

    </div>
    <div class="col narrow sticky noprint">
        








<span id="tocTop"></span>
<section id="eotTocNav">
	<div id="navWrapper">
	</div>
    <div id="tocSearch"></div>
    <div id="eotListWrapper" data-config-metrics-group="Table of Contents">
	    









 

  

<script type="text/javascript">
cdc.util.ensureNamespace("cdc.rc");
cdc.rc.toctitle = "Table of Contents";
</script>
    <h4 id="eotTocToc">Table of Contents</h4>
    <ul>	<li><a title="Goals of this document" class="head1" href="#Goalsofthisdocument">Goals of this document</a></li>
	<li><a title="Introduction" class="head1" href="#Introduction">Introduction</a></li>
	<li><a title="Prerequisites" class="head1" href="#Prerequisites">Prerequisites</a></li>
	<li><a title="Terminology" class="head1" href="#Terminology">Terminology</a></li>
	<li><a title="Cisco ACI overview" class="head1" href="#CiscoACIoverview">Cisco ACI overview</a></li>
	<li><a title="F5 BIG-IP Overview" class="head1" href="#F5BIGIPOverview">F5 BIG-IP Overview</a></li>
	<li><a title="F5 design considerations" class="head1" href="#F5designconsiderations">F5 design considerations</a></li>
	<li><a title="Multi-tenant design" class="head1" href="#Multitenantdesign">Multi-tenant design</a></li>
	<li><a title="F5 ACI ServiceCenter" class="head1" href="#F5ACIServiceCenter">F5 ACI ServiceCenter</a></li>
	<li><a title="Troubleshooting" class="head1" href="#Troubleshooting">Troubleshooting</a></li>
	<li><a title="For more information" class="head1" href="#Formoreinformation">For more information</a></ul>
    

	</div>
    <!--<div id="eotTocSearch"></div>
	<div id="eotTocToc"></div> -->
    <script type="text/javascript">
       cdc.util.ensureNamespace("cdc.rc.innerSearch");
       cdc.rc.innerSearch.hintText = "Search";
        cdc.util.ensureNamespace("cdc.rc.tableOfContents");
       cdc.rc.tableOfContents.label = "Table of Contents";
    </script>
</section>


    </div>
</div>
<div class="row narrow-wide">
    <!--style below is added to fix DE297691:TOC Headings are not clickable in Firefox/Edge Browsers -->
    <div class="col narrow noprint" style="position: relative;z-index: -1;">
        &nbsp;
        
    </div>
    <div class="col wide document">
        





















 

  
    

 


<div id="eot-doc-wrapper" >








<html>
 <head></head>
 <body>
  <code><script type="text/javascript"></script> 
   <link rel="stylesheet" href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/wemdcmt.css"/> 
   <link rel="stylesheet" href="https://www.cisco.com/etc/designs/cdc/transformation/wemdcmt.css"/></code> 
  <div class="WordSection1"> 
   <p class="pBody">&nbsp;</p> 
   <p class="pToC_Subhead1" style="page-break-before:always"><a name="_Toc58570575">Goals of this document</a></p> 
   <p class="pBody">This document describes Cisco<span class="Superscript"><sup class=" cSuperscript">&reg;</sup></span> Application Centric Infrastructure (Cisco ACI<span class="Superscript"><sup class=" cSuperscript">&reg;</sup></span>) and F5 BIG-IP LTM design and deployment considerations. </p> 
   <p class="pToC_Subhead1"><a name="_Toc58570576">Introduction</a></p> 
   <p class="pBody">The document discusses load balancer design considerations and deployment options in Cisco ACI, specifically with F5 BIG-IP from three aspects: network design, F5 design, and multi-tenant design. This document covers features up to Cisco ACI Release 5.0.</p> 
   <p class="pBody">One of the key considerations of the network design with load balancer is to ensure incoming and return traffic go through the same load balancer (one exception is direct server return (DSR), which doesn't have this requirement). There are various options you can use to insert the load balancer. One way is to use the load balancer as a gateway for servers or as a routing next hop for routing instances. Another option is to use Source Network Address Translation (SNAT) on the load balancer or use ACI Policy-Based Redirect (PBR) to make the return traffic go back to the load balancer.</p> 
   <p class="pBody">Because its a stateful device, F5 BIG-IP requires seeing the return traffic in most designs but using it as the default gateway is not necessarily the best way to deploy it, and Cisco ACI can provide a better integration with the use of a feature called Policy Based Redirect (PBR).</p> 
   <p class="pBody">F5 BIG-IP can be deployed in different high-availability modes. This document will cover the two common BIG-IP deployment modes: active-active and active-standby. Various design considerations, such as endpoint movement during failovers, MAC masquerade, source MAC-based forwarding, Link Layer Discovery Protocol (LLDP), and IP aging will be discussed around each of the deployment modes.</p> 
   <p class="pBody">Multi-tenancy is supported by both Cisco ACI and F5 BIG-IP in different ways. This document will cover a few ways that multi-tenancy constructs on ACI can be mapped to multi-tenancy on BIG-IP. The discussion will revolve around tenants, Virtual Routing And Forwarding (VRF), route domains, and partitions, and also multi-tenancy, based on which BIG-IP form factor you use.</p> 
   <p class="pBody">The Cisco Application Policy Infrastructure Controller (APIC) is used to manage the ACI fabric. The F5 ACI ServiceCenter is an application that runs on the APIC controller that augments the integration between ACI and F5 BIG-IP. This document will cover how the F5 ACI ServiceCenter application can be used to gain day-1 and day-2 operational benefits with joint deployment of F5 BIG-IP and Cisco ACI deployments.</p> 
   <p class="pToC_Subhead1"><a name="_Toc58570577">Prerequisites</a></p> 
   <p class="pBody">To best understand the network design presented in this document, you should have basic knowledge about Cisco ACI and F5 BIG-IP. </p> 
   <p class="pBody">Cisco ACI offers the capability to insert Layer 4  7 services, such as firewalls, load balancers, and Intrusion Prevention Systems (IPS), using a feature called a service graph. For more information, refer to the <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-734298.html">Cisco ACI service-graph-design white paper</a> at <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-734298.html">https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-734298.html</a></p> 
   <p class="pBody">The service graph functionality can then be enhanced by associating to Policy-Based Redirect (PBR) policies. For more detailed information on PBR, refer to the <a href="https://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739971.html">Cisco ACI PBR white paper</a>: <a href="https://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739971.html">https://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739971.html</a></p> 
   <p class="pBody">F5's BIG-IP product family comprises hardware, modularized software, and virtual appliances that run the <a href="https://www.f5.com/services/resources/white-papers/tmos-redefining-the-solution">F5 TMOS operating system</a>.</p> 
   <p class="pBody">To learn the basics of BIG-IP load balancing, refer to <a href="https://www.f5.com/services/resources/white-papers/load-balancing-101-nuts-and-bolts">https://www.f5.com/services/resources/white-papers/load-balancing-101-nuts-and-bolts</a>.</p> 
   <p class="pBody">For other load balancing concepts, such as Source Network Address Translation (SNAT) and Automap, refer to <a href="https://support.f5.com/csp/article/K7820">https://support.f5.com/csp/article/K7820</a></p> 
   <p class="pBody">For BIG-IP modes of deployment, refer to <a href="https://support.f5.com/csp/article/K96122456#link_02_01">https://support.f5.com/csp/article/K96122456#link_02_01</a></p> 
   <p class="pToC_Subhead1"><a name="_Toc58570578">Terminology</a></p> 
   <p class="pBody">This document uses the following terms with which you must be familiar:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Bridge Domain (BD)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Endpoint Group (EPG)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Layer 3 Out or external routed network (L3Out)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Subnet-based EPG in Layer 3 Out (L3Out EPG)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Virtual Routing and Forwarding (VRF)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Service graph</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Direct Server Return (DSR)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Policy-Based Redirect (PBR)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Load Balancer (LB)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Route Health Injection (RHI)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Source Network Address Translation (SNAT)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>MAC masquerade</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Self-IP - IP address on a BIG-IP interface associated with a VLAN</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Floating self-IP - IP address that two BIG-IP systems share. Any self-IP address that is assigned to a floating traffic group in BIG-IP is a floating self-IP address.</p> 
   <p class="pToC_Subhead1"><a name="_Toc58570579">Cisco ACI overview</a></p> 
   <p class="pBody">Cisco Application Centric Infrastructure (Cisco ACI) technology enables you to integrate virtual and physical workloads in a programmable, multi-hypervisor fabric to build a multiservice or cloud data center. The Cisco ACI fabric consists of discrete components that operate as routers and switches, but it is provisioned and monitored as a single entity.</p> 
   <p class="pSubhead2CMT" style="page-break-before:always">Cisco ACI physical topology</p> 
   <p class="pBody">The physical Cisco ACI fabric is built on a Cisco Nexus<span class="Superscript"><sup class=" cSuperscript">&reg;</sup></span> 9000 series spine-leaf design; its topology is illustrated in Figure 1, using a bipartite graph, where each leaf is a switch that connects to each spine switch, and no direct connections are allowed between leaf nodes and between spine nodes. The leaf nodes act as the connection point for all servers, storage, physical or virtual L4-L7 service devices, and external networks, and the spine acts as the high-speed forwarding engine between leaf nodes. Cisco ACI fabric is managed, monitored, and administered by the Cisco APIC.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 2" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_0.png" alt="Cisco ACI topology"/></p> 
   <div class=" pDefault">
     Figure 1. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Cisco ACI topology</p> 
   <p class="pBody">Cisco Nexus 9000 series switches that support ACI spine or leaf mode can be found at: <a href="https://www.cisco.com/c/en/us/products/switches/nexus-9000-series-switches/index.html">https://www.cisco.com/c/en/us/products/switches/nexus-9000-series-switches/index.html</a></p> 
   <p class="pBody">The minimum ACI fabric design should have two spine nodes, two leaf nodes, and three APICs. (Figure&nbsp;1&nbsp;illustrates four spine nodes and six leaf nodes.) The fabric design can scale up to 400 leaf nodes per ACI fabric. See the latest ACI verified scalability guide for details: <a href="https://www.cisco.com/c/en/us/support/cloud-systems-management/application-policy-infrastructure-controller-apic/tsd-products-support-series-home.html">https://www.cisco.com/c/en/us/support/cloud-systems-management/application-policy-infrastructure-controller-apic/tsd-products-support-series-home.html</a></p> 
   <p class="pBody">Although Figure 1 shows a separate leaf node pair for APIC cluster, servers, storage, and others, its not mandatory to use a separate leaf node. Even though there is no specific role configuration on each leaf, a leaf connected to the external network is called a border leaf.</p> 
   <p class="pSubhead2CMT">Cisco ACI logical constructs</p> 
   <p class="pBody">Instead of configuring individual switches in a fabric, the logical network and security are provisioned and monitored as a single entity in the ACI fabric.</p> 
   <p class="pBody">The fundamental security architecture of the ACI solution follows a whitelist model. A contract is a policy construct used to define communication between Endpoint Groups (EPGs). Without a contract between EPGs, no unicast communication is possible between those EPGs by default. A contract is not required to allow communication between endpoints in the same EPG.</p> 
   <p class="pBody" style="page-break-before:always">Figure 2 shows the relationship between EPGs and contracts.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 4" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_1.png" alt="EPG and contracts"/></p> 
   <div class=" pDefault">
     Figure 2. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">EPG and contracts</p> 
   <p class="pBody">An EPG provides or consumes a contract (or provides and consumes a contract). For instance, the App EPG in the example in Figure 2 provides a contract that the Web EPG consumes and consumes a contract that the DB EPG provides.</p> 
   <p class="pBody">An endpoint can belong to one EPG. Physical, virtual, and container endpoints can co-exist in the same EPG. How to define which EPG an endpoint belongs to is based on EPG type:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>L3Out EPG - based on the IP subnet (longest prefix match)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>EPG - based on the leaf interface and Virtual LAN (VLAN) ID, or leaf interface and Virtual Extensible LAN (VXLAN)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>uSeg EPG (also called micro-EPG) - based on IP, MAC VM attributes such as VM name, or a combination of IP, MAC, and those attributes</p> 
   <p class="pBody" style="margin-top:7.0pt">Figure 3 illustrates ACI logical network design constructs. The tenant is a logical entity to construct EPGs, contracts, and network components for EPGs. Each EPG belongs to a Bridge Domain (BD) that is a broadcast domain boundary in ACI. A BD belongs to a VRF. </p> 
   <p class="pBody">In this example, Web and App EPGs are in the same BD, BD1, and DB EPG is in a dedicated BD, BD2. Unlike traditional networks, multiple different EPGs can be in the same subnet as different security groups and zones.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 8" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_2.png" alt="ACI logical network construct"/></p> 
   <div class=" pDefault">
     Figure 3. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">ACI logical network construct</p> 
   <p class="pSubhead2CMT">Cisco ACI Service Graph and Policy-Based Redirect (PBR)</p> 
   <p class="pBody">The Layer 4  7 Service Graph is a feature in Cisco ACI to insert Layer 4  7 service devices such as a firewall, load balancer, and IPS between the consumer and provider EPGs. Service Graph itself is not mandatory to design Layer 4  7 service devices in ACI, as long as the Layer 4  7 devices are inserted in the network using the general routing and bridging. </p> 
   <p class="pBody">Figure 4 provides an example using routing and bridging to insert a load balancer without Service Graph. For incoming traffic from an endpoint in the consumer EPG, the VIP is routed by the ACI fabric. Why? Because the VIP is an ACI internal endpoint if the gateway of the server is the load balancer; the return traffic from an endpoint in the provider EPG is simply bridged by the ACI fabric.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 28" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_3.png" alt="Load balancer design without SNAT or PBR_a"/></p> 
   <p class="pBody">&nbsp;</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 29" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_4.png" alt="Load balancer design without SNAT or PBR_b"/></p> 
   <div class=" pDefault">
     Figure 4. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Load balancer design without SNAT or PBR</p> 
   <p class="pBody">If the load balancer interface and the servers are not in the same subnet, the use of SNAT on the load balancer can make the return traffic back to the load balancer. Even if the use of Service Graph is not mandatory in this case, the use of Service Graph offers these advantages:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>ACI automatically manages VLAN deployment on the ACI fabric and the virtual networks for service node connectivity.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>ACI automatically connects and disconnects virtual Network Interface Cards (vNICs) for virtual service appliances.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>ACI provides a more logical view of service insertion between consumer and provider EPGs.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>ACI can redirect traffic to the service node without the need for the service node to be the default gateway of the servers.</p> 
   <p class="pBody" style="margin-top:7.0pt">One of the main advantages of Service Graph is the PBR feature, which is helpful to insert Layer 4  7 service devices. With this PBR feature, ACI redirects traffic matched with the contract without relying on routing or bridging. For load balancer designs, PBR can be used for return traffic generated from the servers to make the return traffic go back to a load balancer that doesnt perform SNAT.</p> 
   <p class="pBody">Figure 5 illustrates this with an example. The incoming traffic from an endpoint in a consumer EPG to VIP doesnt require PBR because its routed to the VIP that is also an ACI internal endpoint. For the return traffic from an endpoint in the provider EPG, PBR is required if the load balancer didnt perform SNAT on the incoming traffic. Without PBR, traffic would directly go back to the consumer endpoint, which prevents the load balancer from seeing both directions of the traffic.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 31" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_5.png" alt="ACI Service Graph PBR use case for load balancer design_a"/></p> 
   <p class="pBody">&nbsp;</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 32" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_6.png" alt="ACI Service Graph PBR use case for load balancer design"/></p> 
   <div class=" pDefault">
     Figure 5. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">ACI Service Graph PBR use case for load balancer design</p> 
   <p class="pNoteCMT" style="margin-left:0in;text-indent:0in"><b>Note:&nbsp; <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></b>Service Graph is mandatory in order to use PBR.</p> 
   <p class="pBody">For more detailed information on Service Graph design and PBR, refer to the following white papers:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Service Graph Design with Cisco Application Centric Infrastructure White Paper: <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-734298.html">https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-734298.html</a></p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Cisco Application Centric Infrastructure Policy-Based Redirect Service Graph Design White Paper: <a href="https://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739971.html">https://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739971.html</a></p> 
   <p class="pToC_Subhead1"><a name="_Toc58570580">F5 BIG-IP Overview</a></p> 
   <p class="pBody">F5 BIG-IP is a family of products covering software and hardware designed around application availability, access control, and security solutions. When referring to BIG-IP this can mean a single software module in BIG-IP's software family or it could mean a hardware chassis sitting in your data center. </p> 
   <p class="pSubhead2CMT">BIG-IP hardware</p> 
   <p class="pBody">BIG-IP hardware offers several types of purpose-built custom solutions. There are two primary variations of BIG-IP hardware: single chassis design or VIPRION modular designs.</p> 
   <p class="pBody">For more information refer to: <a href="https://www.f5.com/products/big-ip-services/iseries-appliance">https://www.f5.com/products/big-ip-services/iseries-appliance</a></p> 
   <p class="pSubhead2CMT">BIG-IP software</p> 
   <p class="pBody">BIG-IP software products are licensed modules that run on top of F5's Traffic Management Operation System (TMOS). This custom operating system is an event-driven operating system designed specifically to inspect network and application traffic and make real-time decisions based on the configurations you provide. The BIG-IP software can run on hardware or can run in virtualized environments. Virtualized systems provide BIG-IP software functionality where hardware implementations are unavailable, including public clouds and various managed infrastructures where rack space is a critical commodity.</p> 
   <p class="pBody">There are a number of software modules offered by F5 BIG-IP. The <b>BIG-IP Local Traffic Manager (LTM)</b> is the software module that we focus on while discussing design and other considerations in this document. </p> 
   <p class="pBody"><b>BIG-IP LTM</b> is central to F5's full traffic proxy functionality. It provides the platform for creating virtual servers, performance, service, protocol, authentication, and security profiles to define and shape application traffic. Most other software modules in the BIG-IP family use LTM as a foundation for enhanced services.</p> 
   <p class="pBody">All variations of BIG-IP hardware and software work with Cisco ACI. If the virtual edition of BIG-IP is being used, a VMM integration, such as VMware vSphere or Microsoft SCVMM, can be done with Cisco APIC.</p> 
   <p class="pBody">For ACI VMM domain integration, see the Cisco ACI Virtualization Guide at: <a href="https://www.cisco.com/c/en/us/support/cloud-systems-management/application-policy-infrastructure-controller-apic/tsd-products-support-series-home.html">https://www.cisco.com/c/en/us/support/cloud-systems-management/application-policy-infrastructure-controller-apic/tsd-products-support-series-home.html</a> and review the ACI network design options for load balancer.</p> 
   <p class="pBody">This section explains typical network design options for load balancer in general and then explains how to translate these options to an ACI network construct.</p> 
   <p class="pSubhead2CMT">Overview</p> 
   <p class="pBody">When inserting a load balancer into a Cisco ACI fabric, it is important to understand the desired traffic flow There are two main types of traffic patterns to consider:</p> 
   <p class="pNumList1CMT"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Incoming and return traffic go through the same load balancer that is a stateful device</p> 
   <p class="pNumList1CMT"><span style="font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The traffic to the other VIP goes via a load balancer and the return traffic from servers goes directly back to the client: this is called Direct Server Return (DSR)</p> 
   <p class="pBody">Following is a list of questions that helps to understand the requirement.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Is the load balancer deployed in Layer 2 or Layer 3 mode? (F5 BIG-IP supports both Layer 2 and Layer 3 - see <a href="https://support.f5.com/csp/article/K55185917">https://support.f5.com/csp/article/K55185917</a>)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>How is the return traffic handled? Is the load balancer the gateway? Is the load balancer doing SNAT? Is ACI PBR redirecting the traffic to the load balancer or is the load balancer deployed in DSR mode?</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>What High-Availability (HA) option is used for the load balancer - active/standby HA pair, active/active HA pair, or multiple HA pairs?</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Is the VIP in the same subnet range as the IP address of a load balancer interface (F5 BIG-IP calls it self-IP) or outside of the subnet range?</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>What are the dynamic routing protocol requirements? Is Route Health Injection (RHI) required or not?</p> 
   <p class="pBody" style="margin-top:7.0pt">In this document, the assumption is that the load balancer is deployed in Layer 3 mode with active/standby HA because this represents the majority of the deployments. </p> 
   <p class="pBody">Figure 6 illustrates common load balancer network design options.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>In the first example on the left side of the image, the load balancer is deployed in two-arm mode and it is the default gateway of the servers. SNAT or PBR is not required because the load balancer is in the traffic path based on routing.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>In the second example, the load balancer is deployed in two-arm mode and it is placed between two different routers or VRFs: one is for external connectivity and the other is the gateway of servers. SNAT or PBR is not required because the load balancer is in the traffic path based on routing.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>In the third example, the load balancer is deployed in two-arm mode in a way that not all traffic from the servers has to go via the load balancer itself. SNAT or PBR is required to make return traffic back to the load balancer. If neither SNAT nor PBR is used, the return traffic would go back to the client directly, and as a result, the traffic would be dropped by the client. The reason: because the source IP address of the return traffic (of the server) is different from the destination IP address of the incoming traffic sent by the client, which was directed to the VIP.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>In the fourth example, the load balancer is deployed in one-arm mode in a way that not all traffic from the servers has to go via the load balancer itself. SNAT or PBR is required to make return traffic back to the load balancer. If neither SNAT nor PBR is used, the return traffic goes back to the client directly, which will be dropped by the client because the source IP address of the return traffic is different from the destination IP address of the incoming traffic sent by the client. The load balancer interface can be in the same or a different subnet with servers. This design can be used for Layer 2 DSR, where the return traffic doesnt go back via the load balancer. For Layer 2 DSR, the load balancer and servers must be in the same subnet.</p> 
   <p class="pBody" style="margin-top:7.0pt"><img border="0" width="100%" height="100%" id="Picture 33" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_7.png" alt="Typical load balancer design options"/></p> 
   <div class=" pDefault">
     Figure 6. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Typical load balancer design options</p> 
   <p class="pBody">Load balancer designs are often categorized using the terminology two-arm and one-arm. From the load balancers perspective, the number of arms is nothing more than the number of interfaces or VLAN interfaces that are created on the load balancer. There should be no significant difference between the two modes from a load balancer performance perspective. In the case of a two-arm design, traffic from the client arrives on an interface on the load balancer and is forwarded to a server through the other interface. In the case of a one-arm design, traffic arrives and leaves using the same interface on the load balancer.</p> 
   <p class="pBody">The following sub-sections explain how to translate the typical load balancer design options just described into ACI network constructs. Table 1 summarizes the comparison of the design options in a Cisco ACI fabric. </p> 
   <p class="pBody">In these examples, the load balancer external interface IP and the VIP are in the same subnet. For the case where they are not in the same subnet, refer to the <a href="#VIPoutsideoftheselfIPsubnetrange">VIP outside of the self IP subnet range</a> section. Even if the examples reference north-south traffic flows, which is traffic from the outside to internal servers through a VIP, the same design considerations can also be applied to east-west traffic flows, which is traffic from internal servers to other internal severs through a VIP.</p> 
   <p class="pTableCaptionCMT"><b>Table 1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b>Typical load balancer design options in Cisco ACI fabric</p> 
   <div> 
    <table border="1" cellpadding="6" cellspacing="0" width="100%" bordercolor="#ADADAD"> 
     <thead> 
      <tr valign="top" align="left"> 
       <td> <p class="Cellhead1">&nbsp;</p> </td> 
       <td> <p class="Cellhead1">How to make the return traffic go back via the Load Balancer (LB)</p> </td> 
       <td> <p class="Cellhead1">Design</p> </td> 
       <td> <p class="Cellhead1">Benefit</p> </td> 
       <td> <p class="Cellhead1">Consideration</p> </td> 
      </tr> 
     </thead> 
     <tbody> 
      <tr valign="top" align="left"> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none"><a href="#Twoarminline"><b>Two-arm (inline) LB as gateway</b></a></p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">LB is the gateway for the servers</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Use LB as the gateway for the servers associated to the VIP</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Simple network design</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Inter-subnet traffic must go through the load balancer.</p> </td> 
      </tr> 
      <tr valign="top" align="left"> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none"><a href="#Twoarmloadbalancer"><b>Two-arm (inline) LB Fabric as gateway</b></a></p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">LB as routing next hop (VRF sandwich)</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Use the ACI fabric as a gateway for the servers associated to the VIP. LB is routing next hop of the ACI fabric.</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Take advantage of the ACI anycast gateway.</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Need to manage two VRFs</p> </td> 
      </tr> 
      <tr valign="top" align="left"> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none"><a href="#Twoarmloadbalancerwithfabric"><b>Two-arm LB</b></a><b> </b></p> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none"><a href="#Twoarmloadbalancerwithfabric"><b>Fabric as gateway</b></a><b> </b></p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">SNAT or PBR</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Use the ACI fabric as a gateway for the LB and also for the servers associated to the VIP. Use SNAT or PBR to make return traffic go back via the LB.</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Take advantage of the ACI anycast gateway.</p> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Selective traffic redirection by using PBR</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Service Graph is mandatory to use PBR</p> </td> 
      </tr> 
      <tr valign="top" align="left"> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none"><b><a href="#Onearm">One-arm LB</a></b></p> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none"><span class="MsoHyperlink"><b><a href="#Onearm">Fabric as gateway<span style="text-decoration:none"> </span><sup><span style="font-weight:normal;text-decoration:none">*</span></sup></a></b></span></p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">SNAT or PBR</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Use the ACI fabric as a gateway for the LB and also for the servers associated to the VIP. Use SNAT or PBR to make return traffic back to load balancer.</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Take advantage of the ACI anycast gateway.</p> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Selective traffic redirection by using PBR</p> </td> 
       <td> <p class="pChart_bodyCMT" style="font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3pt; margin-left: 3pt; margin-right: 3pt; margin-top: 3pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">Service Graph is mandatory to use PBR</p> </td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class=" pDefault"> 
    <span class="Superscript"><sup class=" cSuperscript">*</sup></span> This design can be used for Layer 2 DSR where the return traffic doesnt go back via the load balancer (the details are not covered in this document.) 
   </div> 
   <p class="pSubhead2CMT"><a name="Twoarminline">Two-arm (inline) load balancer as gateway</a></p> 
   <p class="pBody">The first example is one where the two-arm inline load balancer is the default gateway of the servers. SNAT or PBR is not required because the load balancer is in the traffic path based on routing. In this case, two VLAN segments are required. Thus, in case of ACI, you need to use two bridge domains: one is for the load balancer external interface and the other is for the load balancer internal interface. Figure 7 provides an example of this scenario. In this example, the load balancer VIP and the load balancer external interface IP are in the same subnet.</p> 
   <p class="pBody"><img border="0" width="70%" height="70%" id="Picture 9" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_8.png" alt="Two-arm (inline) load balancer as gateway"/></p> 
   <div class=" pDefault">
     Figure 7. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Two-arm (inline) load balancer as gateway</p> 
   <p class="pBody">LB-Ext bridge domain for the load balancer external interface has the bridge domain subnet that is the gateway for the load balancer to the external network through L3Out. The Web bridge domain for the load balancer internal interface and the servers doesnt have a bridge domain subnet because the load balancer internal IP address is the gateway for the servers. The L3Out connected to the external network has the L3Out EPG External with the external network subnets that are allowed to access the load balancer VIP in the LB-Ext bridge domain.</p> 
   <p class="pBody">The traffic coming from the external network arrives to the ACI fabric and it is routed to the VIP (192.168.10.100) because the VIP is an ACI local endpoint in LB-Ext bridge domain. The traffic is then load balanced to one of the servers associated to the VIP. The return traffic from the server arrives on the load balancer internal interface because it is the gateway of the servers. The load balancer then routes the traffic back to the ACI fabric that is the gateway of the load balancer to the external network.</p> 
   <p class="pBody">Figure 8 illustrates the contract configuration for this design. To permit end-to-end traffic, one of the following configurations is required:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Two contracts  One is between the L3Out EPG External for the external network and the EPG LB-Ext for the load balancer external interface, and the other is between the EPG LB-In for the load balancer internal interface and Web EPG for the servers. All EPGs are created by a user.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>One contract  If there is no security requirement, the load balancer internal interface and the servers can be combined into one EPG instead of different EPGs with a contract. All EPGs are created by a user.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Service Graph  Use Service Graph on a contract between the L3Out EPG External for the external network and Web EPG. The EPGs (called internal service EPGs or shadow EPGs) for the load balancer external and internal interfaces are automatically created through Service Graph rendering. The internal service EPGs are not displayed in the GUI, and the user doesnt need to manage them.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 11" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_9.png" alt="Two-arm (inline) load balancer as gateway (ACI network and contract design)"/></p> 
   <div class=" pDefault">
     Figure 8. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Two-arm (inline) load balancer as gateway (ACI network and contract design)</p> 
   <p class="pBody">Highlights of key characteristics of this design:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The load balancer internal interface and the EPG for the servers are in the same bridge domain (ACI is used for bridging)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>ACI can be used as the next hop for the external side of the load balancer</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>All inter-subnet traffic goes through the load balancer</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>SNAT or PBR is not required</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Service Graph is not mandatory</p> 
   <p class="pSubhead2CMT"><a name="Twoarmloadbalancer"></a>Two-arm (inline) load balancer with fabric as gateway</p> 
   <p class="pBody">This design consists of a two-arm inline load balancer placed between two routing instances, such as two separate routers or two VRFs. The internal facing routing instance provides the gateway to the servers. SNAT or PBR is not required because the load balancer is in the traffic path based on routing. In the case of ACI, you can use two VRFs (instead of using an external router): one is for the load balancer external interface and the other is for the load balancer internal interface. The two VRFs configured in ACI are not for the purpose of multitenancy, but simply to route traffic via the load balancer. No inter-VRF route-leaking configuration is required on the ACI fabric itself because the load balancer is in between VRFs.</p> 
   <p class="pBody">Figure 9 provides an example of this configuration. In this example, the load balancer VIP and the load balancer external interface IP are in the same subnet.</p> 
   <p class="pBody"><img border="0" width="70%" height="70%" id="Picture 14" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_10.png" alt="Two-arm (inline) load balancer with the fabric as gateway"/></p> 
   <div class=" pDefault">
     Figure 9. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Two-arm (inline) load balancer with the fabric as gateway</p> 
   <p class="pBody">The external-facing VRF, VRF1, has the L3Out connected to the external network and the L3 bridge domain, LB-Ext, that has the gateway for the load balancer to the external network. The L3Out connected to the external network has the L3Out EPG External with the external network subnets that are allowed to access to the load balancer VIP in the LB-Ext bridge domain. The internal-facing VRF, VRF2, has the L3 bridge domain, Web, that is the gateway for the servers and the L3Out LB-In for the load balancer internal interface connectivity. The L3Out LB-In has the L3Out EPG LB-In with the external network subnets that are allowed to access to the servers through the load balancer.</p> 
   <p class="pBody">The traffic coming from the external network arrives on the ACI fabric on VRF1 and it is routed to the VIP (192.168.10.100) because the VIP is an ACI local endpoint in LB-Ext bridge domain. Traffic is then load balanced to one of the servers associated to the VIP. The load balancer must have a route to the server subnet (10.10.10.0/254). This load balancer route uses the ACI IP address on the L3Out logical interface of the L3Out LB-In and then traffic arrives on the servers in VRF2. The return traffic from the server arrives on the ACI fabric via the Web bridge domain on VRF2 because the Web bridge domain subnet is the gateway of the servers. ACI VRF2 must have a route to the external network via the load balancer internal interface. Then, the load balancer routes the traffic back to the ACI leaf that is the gateway of the load balancer to the external network.</p> 
   <p class="pBody">If the load balancer does SNAT and uses the load balancer internal IP subnet range as NATed IP, the load balancer internal interface can be in a bridge domain instead of an L3Out because the NATed IP is a local endpoint IP in VRF2 that doesnt require an additional route.</p> 
   <p class="pBody" style="page-break-before:always">Figure 10 illustrates the contract configuration for this design. To permit end-to-end traffic, one of the following configurations is required:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Two contracts  One is between the L3Out EPG External for the external network and the EPG LB-Ext for the load balancer external interface, and the other is between the L3Out EPG LB-In for the load balancer internal interface and Web EPG for the servers. All EPGs are created by a user.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Service Graph  Use of Service Graph on a contract between the L3Out EPG External for the external network and Web EPG. L3Out EPG LB-In for the load balancer internal interface needs to be created separately and is selected in the Service Graph. The EPG LB-Ext, internal service EPG, for the load balancer external interface is automatically created through Service Graph rendering. The internal service EPG is not displayed in the GUI, and the user doesnt need to manage it.</p> 
   <p class="pBody" style="margin-top:7.0pt"><img border="0" width="70%" height="70%" id="Picture 78" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_11.png" alt="Two-arm (inline) load balancer with fabric as gateway (ACI network and contract design)"/></p> 
   <div class=" pDefault">
     Figure 10. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Two-arm (inline) load balancer with fabric as gateway (ACI network and contract design)</p> 
   <p class="pBody">Key characteristics of this design:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>This is the traditional VRF sandwich design</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>ACI is used for routing</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The external interface of the load balancer is connected to a bridge domain via an EPG</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The internal interface of the load balancer is connected to a L3Out via a L3Out EPG</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>All inter-VRF traffic goes through the load balancer</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>SNAT or PBR is not required</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Service Graph is not mandatory</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>If SNAT is enabled on the load balancer using the internal interface subnet range as NATed IP, L3Out for the internal interface of the load balancer is not required</p> 
   <p class="pSubhead2CMT" style="page-break-before:always"><a name="Twoarmloadbalancerwithfabric"></a>Two-arm load balancer with fabric as the gateway</p> 
   <p class="pBody">This design describes the integration with a two-arm load balancer in a way that not all traffic from the servers has to go via the load balancer itself. SNAT or PBR is required to make the return traffic go back to the load balancer. Without the use of SNAT or PBR, the return traffic from the servers would bypass the load balancer and then the client that receives the return traffic doesnt handle the traffic as the reply because the source IP address of the return traffic is different from the destination IP address of the traffic sent by the client.</p> 
   <p class="pBody">Figure 11 provides an example of this scenario. This example consists three bridge domains: one is for the external interface of the load balancer, another is for the internal interface of the load balancer, and the third is for the servers. If the servers and the internal interface of the load balancer are in the same subnet, the two bridge domains can be combined to one bridge domain. In this example, the load balancer VIP and the load balancer external interface IP are in the same subnet.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 39" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_12.png" alt="Two-arm (inline) load balancer with fabric as gateway"/></p> 
   <div class=" pDefault">
     Figure 11. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Two-arm (inline) load balancer with fabric as gateway</p> 
   <p class="pBody">The LB-Ext bridge domain for the load balancer external interface has the bridge domain subnet that is the gateway for the load balancer to the external network. The LB-In bridge domain for the load balancer internal interface has the bridge domain subnet that is the gateway for the load balancer to the server network. The Web bridge domain for the servers has the bridge domain subnet that is the gateway for the servers. The L3Out connected to the external network has the L3Out EPG External with the external network subnets that are allowed to access the load balancer VIP in the LB-Ext bridge domain.</p> 
   <p class="pBody" style="page-break-before:always">The traffic coming from the external network arrives on the ACI fabric and is routed to the VIP (192.168.10.100) because the VIP is an ACI local endpoint in the LB-Ext bridge domain. The traffic is then load balanced to one of the servers associated to the VIP. The load balancer must have the route to the server subnet (10.10.10.0/254) via the LB-In bridge domain subnet IP. The return traffic from the server arrives on the Web bridge domain subnet IP because it is the gateway for the servers. SNAT or PBR is required to make the return traffic go back to the load balancer. If SNAT was enabled on the load balancer, the destination IP of the return traffic will be at the IP in the LB-In bridge domain, which is owned by the load balancer (for example, 192.168.11.10), so that the return traffic is routed and sent to the load balancer internal interface. If PBR is enabled for the return traffic, PBR is applied on the traffic from the Web EPG to L3Out EPG External. As a result, that traffic is redirected to the load balancer internal interface. The load balancer then routes the return traffic back to the ACI fabric LB-Ext bridge domain subnet IP that is the gateway of the load balancer to the external network.</p> 
   <p class="pBody">Figure 12 illustrates the contract configuration for this design. To permit end-to-end traffic, one of the following configurations is required:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Two contracts (SNAT on the load balancer)  One is between the L3Out EPG External for the external network and the EPG LB-Ext for the load balancer external interface, and the other is between the EPG LB-In for the load balancer internal interface and the Web EPG. </p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Service Graph (PBR for return traffic) Use Service Graph PBR on a contract between the L3Out EPG External for the external network and the Web EPG. The EPGs (called internal service EPGs or shadow EPGs) for the load balancer external and internal interfaces are automatically created through Service Graph rendering. The internal service EPGs are not displayed in the GUI, and the user doesnt need to manage them.</p> 
   <p class="pBody" style="margin-top:4.0pt"><img border="0" width="100%" height="100%" id="Picture 41" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_13.png" alt="Two-arm (inline) load balancer with fabric as gateway (ACI network and contract design)"/></p> 
   <div class=" pDefault" style="margin-top:6.0pt">
     Figure 12. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Two-arm (inline) load balancer with fabric as gateway (ACI network and contract design)</p> 
   <p class="pBody" style="page-break-before:always">The following points summarize some key characteristics of this design: </p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>ACI provides routing for the servers and the load balancer; it is their default gateway or routing next hop.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>PBR or SNAT is required.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The service device can be in the same bridge domain as the servers or in a different bridge domain.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>If PBR is used to make the return traffic go back to the load balancer, Service Graph is mandatory and specific traffic is redirected to the load balancer internal interface.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>If SNAT is used to make the return traffic go back to the load balancer, the NATed IP must be in the load balancer internal side subnet range.</p> 
   <p class="pSubhead2CMT"><a name="Onearm"></a>One-arm load balancer with fabric as the gateway</p> 
   <p class="pBody">This design describes the integration with a one-arm load balancer in a way that not all traffic from the servers has to go via the load balancer itself. SNAT or PBR is required to make the return traffic go back to the load balancer. Without the use of SNAT or PBR, the return traffic from the servers would bypass the load balancer and then the client that receives the return traffic doesnt handle the traffic as the reply because the source IP address of the return traffic is different from the destination IP address of the traffic sent by the client.</p> 
   <p class="pNoteCMT" style="margin-left:0in;text-indent:0in"><b>Note:&nbsp; <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></b>This design can also provide Layer 2 DSR, where the return traffic from the servers directly go back to the client without going through the load balancer. The Layer 2 DSR design requires the load balancer and servers to be in the same subnet; that the VIP is configured as a loopback address on the server; and that the server is configured not to answer ARP requests for the VIP. This document mainly explains designs with SNAT or PBR. Refer in <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739989.html#_Toc18440057">ACI Fabric Endpoint Learning white paper</a> for Layer 2 DSR design considerations in ACI.</p> 
   <p class="pBody">Figure 13 provides an example of this scenario. This example consists one bridge domain for the load balancer interface and the servers. The load balancer VIP and the load balancer external interface IP are in the same bridge domain subnet in this example, but they can be in different bridge domains if needed.</p> 
   <p class="pBody"><img border="0" width="70%" height="70%" id="Picture 42" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_14.png" alt="One-arm (inline) load balancer with fabric as gateway"/></p> 
   <div class=" pDefault">
     Figure 13. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">One-arm (inline) load balancer with fabric as gateway</p> 
   <p class="pBody">The Web bridge domain that is configured with a subnet is the gateway for the load balancer itself and for the servers. The L3Out connected to the external network has the L3Out EPG External with the external network subnets that are allowed to access to the load balancer VIP in the Web bridge domain.</p> 
   <p class="pBody">The traffic coming from the external network arrives on the ACI fabric and is routed to the VIP (10.10.10.100) because the VIP is an ACI local endpoint in the Web bridge domain. The traffic is then load balanced to one of the servers associated to the VIP. The return traffic from the server arrives on the Web bridge domain subnet IP because it is the gateway for the servers. SNAT or PBR is required to make the return traffic back to the load balancer. If SNAT is enabled on the load balancer, the destination IP of the return traffic is the IP in the Web bridge domain, which is owned by the load balancer (for example, 10.10.10.10). ACI bridges the traffic from the servers to the load balancer. If PBR is enabled for the return traffic, PBR is applied on the traffic from the Web EPG to the L3Out EPG External. ACI redirects the traffic to the load balancer internal interface. The load balancer then routes the return traffic back to the subnet IP address of the Web bridge domain.</p> 
   <p class="pBody">Figure 14 illustrates the contract configuration for this design. To permit end-to-end traffic, one of the following configurations is required:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Two contracts (SNAT on the load balancer)  One is between the L3Out EPG External for the external network and the EPG LB for the load balancer interface, and the other is between the EPG LB for the load balancer interface and Web EPG. </p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>One contract (SNAT on the load balancer)  If the interface of the load balancer and the servers is in the same bridge domain and there is no security requirement, they can be combined to one EPG instead of different EPGs with a contract.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Service Graph with PBR for return traffic  This design uses Service Graph PBR on a contract between the L3Out EPG External for the external network and the Web EPG. The EPG (called internal service EPG or shadow EPG) for the load balancer interface is automatically created through Service Graph rendering. The internal service EPG is not displayed in the GUI, and the user doesnt need to manage them.</p> 
   <p class="pBody" style="margin-top:7.0pt"><img border="0" width="100%" height="100%" id="Picture 44" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_15.png" alt="One-arm (inline) load balancer with fabric as gateway (ACI network and contract design)"/></p> 
   <div class=" pDefault">
     Figure 14. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">One-arm (inline) load balancer with fabric as gateway (ACI network and contract design)</p> 
   <p class="pBody">The following points summarize key characteristics of this design:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>ACI provides routing for the servers and the load balancer; it is their default gateway or routing next hop.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>PBR or SNAT is required.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The service device can be in the same or different BDs with the servers.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>If PBR is used to make the return traffic go back to the load balancer, Service Graph is mandatory and specific traffic is redirected to the load balancer internal interface.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>If SNAT is used to make the return traffic go back to the load balancer, the NATed IP must be in the load balancer interface subnet range.</p> 
   <p class="pSubhead2CMT"><a name="VIPoutsideoftheselfIPsubnetrange"></a>VIP outside of the self IP subnet range</p> 
   <p class="pBody">The previous four design examples are based on the assumption that the VIP address is in the load balancer interface local subnet range. The VIP can also belong to a different subnet than the load balancer interface local subnet range, especially if the VIP is a public IP address. In this case, the ACI fabric needs to know the route to the VIP because it is not a local endpoint IP in a bridge domain.</p> 
   <p class="pBody">To add a route to the VIP on an ACI fabric, three options are available:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Add a secondary IP on the bridge domain of the EPG for the load balancer external interface. This option requires you to allocate the VIP subnet range in the ACI bridge domain, which might not be preferable if VIP is a public IP address or if multiple VIPs in the same subnet are owned by different load balancers across different networks.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Add a /32 static route on the EPG for the load balancer external interface. This option supports /32 static route only. If you need a VIP subnet range or RHI, you need to use a L3Out to connect the load balancer external interface instead of this option. This option is available on an EPG created by a user. As of Cisco APIC Release 5.0, this option is not available in an internal service EPG created through Service Graph rendering.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Use an L3Out to add a static route or to establish dynamic routing neighborship with the load balancer. This option requires a L3Out configuration for load balancer interface connectivity. This option supports Route Health Injection (RHI), which requires dynamic routing to advertise the VIP from the load balancer.</p> 
   <p class="pBody" style="margin-top:7.0pt">The first two options dont require an L3Out, hence the network design is the same as the examples already covered. As a result, this section focuses on designs using an L3Out.</p> 
   <p class="pNoteCMT" style="margin-left:0in;text-indent:0in"><b>Note:&nbsp; <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></b>This document does not cover how to create L3Out and L3Out design considerations. Refer to the <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/guide-c07-743150.html">ACI Fabric L3Out Guide</a> for details: <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/guide-c07-743150.html">https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/guide-c07-743150.html</a></p> 
   <p class="pSubhead2CMT" style="page-break-before:always">Two-arm (inline) load balancer as gateway</p> 
   <p class="pBody">Figure 15 illustrates this design with an example. The VIP 10.10.20.100 is outside of the load balancer external interface local subnet, 192.168.10.0/24. ACI L3Out LB-Ext for the load balancer external interface connectivity is used to add the route onto the ACI fabric to reach VIP 10.10.20.100 via 192.168.10.254 that is the load balancer external interface IP. If RHI is enabled on the load balancer, use of dynamic routing on the L3Out LB-Ext is required to establish dynamic routing peering between the ACI border leaf node and the load balancer.</p> 
   <p class="pBody"><img border="0" width="70%" height="70%" id="Picture 20" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_16.png" alt="Two-arm (inline) load balancer as gateway"/></p> 
   <div class=" pDefault">
     Figure 15. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Two-arm (inline) load balancer as gateway</p> 
   <p class="pSubhead2CMT">Two-arm (inline) load balancer with the ACI fabric as gateway</p> 
   <p class="pBody">Figure 16 provides an example of this setup. The VIP 10.10.20.100 is outside the load balancer external interface local subnet, 192.168.10.0/24. ACI L3Out LB-Ext in VRF1 for the load balancer external interface connectivity is used to add the route on the ACI fabric VRF1 to reach VIP 10.10.20.100 via 192.168.10.254 that is the load balancer external interface IP. If RHI is enabled on the load balancer, use of dynamic routing on the L3Out LB-Ext is required to establish dynamic routing peering between the ACI border leaf node for VRF1 and the load balancer.</p> 
   <p class="pBody"><img border="0" width="70%" height="70%" id="Picture 17" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_17.png" alt="Two-arm (inline) load balancer with fabric as gateway"/></p> 
   <div class=" pDefault">
     Figure 16. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Two-arm (inline) load balancer with fabric as gateway</p> 
   <p class="pSubhead2CMT">Two-arm load balancer with fabric as gateway</p> 
   <p class="pBody">Figure 17 provides an example of this setup. The VIP 10.10.20.100 is outside of the load balancer external interface local subnet, 192.168.10.0/24. ACI L3Out LB-Ext for the load balancer external interface connectivity is used to add the route on the ACI fabric to reach VIP 10.10.20.100 via 192.168.10.254 that is the load balancer external interface IP. If RHI is enabled on the load balancer, use of dynamic routing on the L3Out LB-Ext is required to establish dynamic routing peering between the ACI border leaf node and the load balancer.</p> 
   <p class="pBody">Either SNAT or PBR can be used to make the return traffic go through the load balancer. If PBR is used to redirect return traffic (from the provider Web EPG to the consumer L3Out EPG External for an external network) to the load balancer internal interface, it requires the <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739971.html#unidirectionalPBRwithL3out">unidirectional PBR</a> feature that is available in Cisco APIC Release 5.0. </p> 
   <p class="pBody"><img border="0" width="70%" height="70%" id="Picture 48" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_18.png" alt="Two-arm load balancer with fabric as gateway"/></p> 
   <div class=" pDefault">
     Figure 17. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Two-arm load balancer with fabric as gateway</p> 
   <p class="pSubhead2CMT">One-arm load balancer with fabric as gateway</p> 
   <p class="pBody">If L3Out LB-Ext is used for one-arm load balancer connectivity, the servers and the load balancer interface should be in different subnets because the servers would also need to be in the same L3Out.</p> 
   <p class="pBody">Figure 18 provides an example what this looks like. The VIP 10.10.20.100 is outside the load balancer interface local subnet, 192.168.10.0/24. The L3Out LB-Ext for the load balancer interface is used to add the route on the ACI fabric to reach VIP 10.10.20.100 via 192.168.10.254 that is the load balancer interface IP. If RHI is enabled on the load balancer, use of dynamic routing on the L3Out LB-Ext is required to establish dynamic routing peering between the ACI border leaf nodes and the load balancer.</p> 
   <p class="pBody">As of APIC Release 5.0, ACI PBR can redirect traffic to a load balancer interface that is connected to a bridge domain, and not the interface on an L3Out. Therefore, SNAT must be enabled on the load balancer.</p> 
   <p class="pBody"><img border="0" width="70%" height="70%" id="Picture 50" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_19.png" alt="One-arm load balancer with fabric as gateway"/></p> 
   <div class=" pDefault">
     Figure 18. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">One-arm load balancer with fabric as gateway</p> 
   <p class="pToC_Subhead1"><a name="_Toc58570581">F5 design considerations</a></p> 
   <p class="pBody">This section explains the following F5 design considerations, which can be applied to the design options already discussed in this document:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Choice of High-Availability (HA) and failover mode</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Choosing whether to configure the F5 interface with a floating MAC (MAC masquerade)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Choosing to route traffic based on the ARP resolution on the next hop or from the MAC learned on the incoming traffic (Auto Last Hop, also known as source MAC-based forwarding)</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Whether to enable Link Layer Discovery Protocol (LLDP) on the BIG-IP</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Tuning IP aging on ACI</p> 
   <p class="pSubhead2CMT">High availability (HA)</p> 
   <p class="pBody">A <b>redundant system</b> is a type of BIG-IP system configuration that allows traffic processing to continue if a BIG-IP device in the redundant system becomes unavailable. A BIG-IP redundant system consists of two identically configured BIG-IP devices. When an event occurs that prevents one of the BIG-IP devices from processing network traffic, the peer device in the redundant system immediately begins processing that traffic, and users experience no interruption in service.</p> 
   <p class="pBody">You can configure the devices of a redundant system to run in one of two redundancy modes: active/standby mode and active/active mode.</p> 
   <p class="pSubhead2CMT">Active/standby mode</p> 
   <p class="pBody">With active/standby mode, only one of the two devices is in an active state that is processing traffic at any given time. The inactive device serves strictly as a standby device, becoming active only if the active device becomes unavailable. When a standby device becomes active, it normally remains active until an event occurs that requires the other device to become active again, or until you specifically force it into a standby state. <b>Active/standby mode is the recommended mode for redundant system configuration.</b> </p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 52" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_20.png" alt="Active/standby BIG-IP topology"/></p> 
   <div class=" pDefault">
     Figure 19. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Active/standby BIG-IP topology</p> 
   <p class="pSubhead2CMT">Active/active mode</p> 
   <p class="pBody">With active/active mode, <b>both devices are in an active state simultaneously</b>; each device processes traffic for different virtual servers (VIPs) or SNATs. If an event prevents one of the devices from processing traffic, the other device begins processing that traffic in addition to its own. In this mode, both devices actively process application traffic, each for a different application. </p> 
   <p class="pBody">A traffic group is a collection of related IP addresses that move between F5 BIG-IP in a high-availability failover event. Traffic groups are synced between BIG-IPs in an HA pair. A BIG-IP device in the HA pair processes its application traffic using the configuration objects associated with the default floating traffic group, traffic-group-1. By default, this traffic group contains the floating self-IP addresses of the default VLANs. The other BIG-IP device in the HA pair processes its application traffic using a second traffic group. If one of the devices becomes unavailable for any reason, the other device automatically begins processing traffic for the unavailable peer device, while continuing to process the traffic for its own application.</p> 
   <p class="pBody">A device group is a collection of BIG-IP devices that are configured to securely synchronize their BIG-IP configuration data and fail over when needed. You can create a sync-failover and a sync-only device group type.</p> 
   <p class="pBody">A <b>sync-failover device group</b> contains devices that synchronize configuration data and support traffic groups for failover purposes. A sync-failover device group supports a maximum of eight devices.</p> 
   <p class="pBody">A <b>sync-only device group</b> contains devices that synchronize configuration data but do not synchronize failover objects and do not fail over to other members of the device group.</p> 
   <p class="pBody">Figure 20 provides an example of the device group named Device Group 2. This device group contains two BIG-IP devices, Device 1 and Device 2.</p> 
   <p class="pBody">The configuration shows two traffic groups, traffic-group-1 and traffic-group-2, each containing failover objects. For traffic-group-1, Device 1 is the default device. For traffic-group-2, Device 2 is the default device. If Device 1 becomes unavailable, all objects in traffic-group-1 float (become active) on Device 2. If Device 2 becomes unavailable, traffic-group-2 floats to Device 1.</p> 
   <p class="pBody"><img border="0" width="70%" height="70%" id="Picture 53" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_21.png" alt="Device group with active/active configuration"/></p> 
   <div class=" pDefault">
     Figure 20. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Device group with active/active configuration</p> 
   <p class="pBody">By implementing this configuration, you ensure that:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Any objects on a BIG-IP device that you configure for synchronization remain synchronized between the two devices</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Failover capability and connection mirroring are enabled on each device</p> 
   <p class="pBody" style="margin-top:6.0pt"><img border="0" width="100%" height="100%" id="Picture 54" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_22.png" alt="Active/active BIG-IP topology"/></p> 
   <div class=" pDefault" style="margin-top:6.0pt">
     Figure 21. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Active/active BIG-IP topology</p> 
   <p class="pBody">Some considerations while deploying an active/active mode is that an active/active architecture can be helpful in the case of high load over an active/standby architecture. The drawback is that if you lose one of your devices, the other one may not be able to cope with complete traffic load. In terms of functionality, the LTM software module supports active/active mode, but other BIG-IP modules may not.</p> 
   <p class="pBody">See the F5 Knowledge base for details: <a href="https://support.f5.com/csp/article/K15002">https://support.f5.com/csp/article/K15002</a></p> 
   <p class="pNoteCMT" style="margin-left:0in;text-indent:0in"><b>Note:&nbsp; <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></b>For active/active mode, you must use network failover instead of hard-wired serial failover. These two types of failovers are discussed in the next section.</p> 
   <p class="pSubhead2CMT">Failover</p> 
   <p class="pBody">To enable a device to fail over to its peer device, you must first specify the type of failover that you want the redundant system to use. </p> 
   <p class="pBody">The two possible failover types are hard-wired failover and network-based failover. Hard-wired failover is applicable to <b>only</b> active/standby configurations. However, network-based failover is applicable to both active/standby as well as active/active configurations. </p> 
   <p class="pSubhead3CMT">Hard-wired failover</p> 
   <p class="pBody">When you configure hard-wired failover, you enable failover by using a failover cable to physically connect the two redundant devices. This is the default setting.</p> 
   <p class="pSubhead3CMT">Network failover</p> 
   <p class="pBody">When you configure network failover, you enable failover by configuring your redundant system to use the network to determine the status of the active device. You can use network failover in addition to, or instead of, hard-wired failover. </p> 
   <p class="pBody">On the BIG-IP, multiple interfaces can be used to decide if the network failover should occur. Configuring failover requires you to specify certain types of IP addresses on each device. Some of these IP addresses enable continual, High-Availability (HA) communication among devices in the device group, while other addresses ensure that application traffic processing continues when failover occurs.</p> 
   <p class="pBody">The types of IP addresses on each BIG-IP device that can be used for network failover are:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>A local, static, self-IP address for VLAN HA. This unicast self-IP address is the main address that other devices in the device group use to communicate continually with the local device to assess the health of that device. When a device in the device group fails to receive a response from the local device, the BIG-IP system triggers failover.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>A local management IP address. This unicast management IP address serves the same purpose as the static self-IP address for VLAN HA, but it is only used when the local device is unreachable through the HA static self-IP address.</p> 
   <p class="pBody" style="margin-top:7.0pt">In the case of using network failover for HA on the BIG-IP with ACI (Figure 22), if the network failover traffic is carried outside of the Cisco ACI fabric (for example, when using interfaces that are connected to each BIG-IP device directly) the Cisco ACI fabric doesnt have to manage the failover network. If the network failover traffic is carried within the Cisco ACI fabric, an EPG will need to be configured for the failover traffic.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 55" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_23.png" alt="Failover network design option"/></p> 
   <div class=" pDefault">
     Figure 22. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Failover network design option</p> 
   <p class="pBody">For general BIG-IP HA considerations and configuration, refer to the following documents:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>HA recommendations  <a href="https://support.f5.com/csp/article/K14135">https://support.f5.com/csp/article/K14135</a> </p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Hardwired versus network-based failover  <a href="https://support.f5.com/csp/article/K2397">https://support.f5.com/csp/article/K2397</a> </p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Persistence and mirroring  <a href="https://support.f5.com/csp/article/K13478">https://support.f5.com/csp/article/K13478</a> </p> 
   <p class="pSubhead3CMT">Endpoint movements during failover</p> 
   <p class="pBody">When failover takes place, the newly active BIG-IP sends Gratuitous Address Resolution Protocol (GARP) for floating self-IPs and VIPs. This is done so that endpoints and network devices in the same broadcast domain can update the ARP table and MAC address table. The ACI fabric has Move Frequency (per second) configuration in Endpoint Retention Policy that is referred from bridge domains to limit the maximum number of endpoint moves allowed per second in the bridge domain. The number is counted as total movements of any endpoint in the given bridge domain, whether it is a single endpoint flap, a simultaneous move of multiple endpoints, or a combination of both. If the number of movements per second is exceeded, the Move Frequency (256 by default) and the Hold interval (300 seconds by default) will trigger, and the learning new endpoint in the bridge domain is disabled until the Hold Interval expires. This feature is called BD Move Frequency or Endpoint Move Dampening. If there are many IP addresses in a bridge domain that are expected to move at the same time, for example BIG-IP owns many IPs in a given bridge domain, you might need to increase the Move Frequency to prevent endpoint learning from being disabled in the bridge domain. The APIC configuration location for End Point Retention Policy is at Tenant &gt; Policies &gt; Protocol &gt; End Point Retention, which is referred from bridge domains.</p> 
   <p class="pBody">The other option to prevent endpoint learning from being disabled in the bridge domain is to enable Rogue EP Control. If the Rogue EP Control is enabled, Endpoint Move Dampening via Endpoint Retention Policy explained above will not take effect. The APIC configuration location for Rogue EP Control is at System &gt; System Settings &gt; Endpoint Controls &gt; Rogue EP Control. This configuration is a fabric-wide setting and is disabled by default. </p> 
   <p class="pBody">For more details on ACI endpoint learning behavior and the configurations above, refer to Endpoint Retention Policy and Rogue EP Control sections in the ACI Fabric Endpoint Learning White Paper: <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739989.html">https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739989.html</a>.</p> 
   <p class="pBody">Another scenario possible after BIG-IP failover takes place is that the new standby BIG-IP still sends traffic using floating self-IPs and VIPs as source IP addresses. This will result in the ACI fabric learning the IPs from multiple locations via the data plane. This issue can be avoided by disabling IP Data-plane Learning.</p> 
   <p class="pBody">For more details on ACI IP Data-plane Learning and its use case, refer to IP Data-plane Learning section in the ACI Fabric Endpoint Learning White Paper: <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739989.html#IPDataplaneLearning">https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739989.html#IPDataplaneLearning</a></p> 
   <p class="pSubhead2CMT">MAC masquerade</p> 
   <p class="pBody">MAC masquerading is a feature that allows you to manually allocate a MAC address to a traffic group across a BIG-IP pair configured for high availability. More specifically, this MAC address floats between the devices in an HA pair, along with the floating self-IPs and virtual addresses within the same traffic group.</p> 
   <p class="pBody">Highly recommend using MAC masquerade under the following conditions:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>To improve reliability and failover speed in lossy networks by minimizing Address Resolution Protocol (ARP) table updates on servers and network devices that are in the same broadcast domain with BIG-IP system.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b>When using Policy-Based Redirect (PBR) on Cisco ACI</b></p> 
   <p class="pBody" style="margin-top:7.0pt">For more information and configuration, refer to <a href="https://support.f5.com/kb/en-us/solutions/public/13000/500/sol13502.html">SOL13502: Configuring MAC masquerade (11.x)</a></p> 
   <p class="pBody">When configuring traffic-group MAC masquerading for <b>BIG-IP Virtual Edition (VE)</b> on VMware ESXi servers, you must configure the virtual switch's <b>Forged Transmits and Promiscuous Mode</b> settings to <b>Accept</b>. By default, the <b>Promiscuous Mode and Forged Transmits</b> settings are disabled. Since the VMM integration with the Cisco APIC, the port-group security settings are controlled by the APIC and cannot be changed directly on VMware vCenter or ESXi servers. The APIC settings for the port-group security settings are available at the domain association configuration under an EPG.</p> 
   <p class="pBody">When using MAC masquerade with BIG-IP VE along with ACI Service Graph, enabling the Promiscuous Mode setting at the logical device cluster configuration on the APIC is required.</p> 
   <p class="pBody">To learn more about Layer 4 to Layer 7 services configuration, visit: <a href="https://www.cisco.com/c/en/us/support/cloud-systems-management/application-policy-infrastructure-controller-apic/tsd-products-support-series-home.html">https://www.cisco.com/c/en/us/support/cloud-systems-management/application-policy-infrastructure-controller-apic/tsd-products-support-series-home.html</a></p> 
   <p class="pSubhead2CMT" style="page-break-before:always">Auto Last Hop (source MAC-based forwarding)</p> 
   <p class="pBody">The Auto Last Hop setting allows the BIG-IP to track the source MAC address of incoming connections and return traffic from pools to the source MAC address, regardless of the routing table.</p> 
   <p class="pBody">When enabled, Auto Last Hop allows the BIG-IP system to send return traffic from pools to the MAC address that transmitted the request, even if the routing table points to a different network or interface. As a result, the BIG-IP system can send return traffic to clients, even when there is no matching route. An example would be when the BIG-IP system does not have a default route configured and the client is located on a remote network. Additionally, Auto Last Hop is useful when the BIG-IP system is load-balancing transparent devices that do not modify the source IP address of the packet. Without the Auto Last Hop option enabled, the BIG-IP system may not return connections to the same transparent node, resulting in asymmetric routing.</p> 
   <p class="pBody">For most network configurations, Auto Last Hop is enabled by default. </p> 
   <p class="pBody">When configuring in an environment where you may be required to disable Auto Last Hop, you should consider the following factors:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>If the last hop is a set of redundant routers or firewalls that do not use a shared MAC address, you can configure a last hop pool for the virtual server instead of disabling Auto Last Hop. For more information, refer to: <a href="https://support.f5.com/csp/article/K2211">https://support.f5.com/csp/article/K2211</a>.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>For BIG-IP system compatibility with Virtual Router Redundancy Protocol (VRRP) and Hot Standby Router Protocol (HSRP), refer to: <a href="https://support.f5.com/csp/article/K9487">https://support.f5.com/csp/article/K9487</a></p> 
   <p class="pBody" style="margin-top:7.0pt">For more details of Auto Last Hop, refer to: <a href="https://support.f5.com/csp/article/K13876">https://support.f5.com/csp/article/K13876</a></p> 
   <p class="pBody">If ACI PBR is used and Auto Last Hop is enabled, Source MAC Rewrite might need to be enabled on ACI PBR. Otherwise, the BIG-IP will use the original source MAC address, instead of the ACI bridge domain MAC, as the destination MAC for return traffic, even if the next hop of the traffic should be the ACI bridge domain MAC. See the Cisco ACI PBR white paper for more detail: <a href="https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739971.html">https://www.cisco.com/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-739971.html</a></p> 
   <p class="pSubhead2CMT">Link Layer Discovery Protocol (LLDP)</p> 
   <p class="pBody">Consider configuring LLDP on the BIG-IP device and the APIC for the interface between the BIG-IP and the ACI leaf nodes. LLDP provides the BIG-IP system with the ability to advertise its identity and capabilities to the ACI network. Once the ACI network has the information about the BIG-IP interface, integrations like the F5 ACI ServiceCenter (discussed later in this document) will be able to use this information to build out a topology map.</p> 
   <p class="pSubhead2CMT">IP Aging on ACI</p> 
   <p class="pBody">Because of the nature of load balancer that owns multiple IPs with a single MAC address, it is recommended to enable IP Aging on ACI. The APIC configuration location for IP Aging is at System &gt; System Settings &gt; IP Aging. The default setting is disabled.</p> 
   <p class="pBody">If IP Aging is disabled, an endpoint might have unused IP addresses stuck on the same MAC address. For example, when VIPs are using the same MAC as the self-IP, when BIG-IP is added and then the VIP is deleted as shown in Figure 23, the ACI fabric keeps the entry for the VIP that was already deleted as long traffic is received from the MAC. It is because the ACI fabric sees the endpoint as all three components (the MAC, self-IP, and VIP). If traffic is received from any one of these components, the entries for all three will be kept active.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 56" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_24.png" alt="IP Aging policy use case"/></p> 
   <div class=" pDefault">
     Figure 23. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">IP Aging policy use case </p> 
   <p class="pBody">If IP Aging is enabled, the ACI fabric sends a unicast ARP packet at 75 percent of the configured endpoint retention timer for all IP addresses that belong to the endpoint. If no response is received from that particular IP address, it will be aged out of the endpoint table. (Note that the MAC address and responding IP address for the endpoint will be retained).</p> 
   <p class="pToC_Subhead1"><a name="_Toc58570582">Multi-tenant design</a></p> 
   <p class="pBody">This section explains multi-tenant design examples and considerations on ACI and BIG-IP. </p> 
   <p class="pSubhead2CMT">ACI multi-tenant design</p> 
   <p class="pBody">This section explains the following ACI multi-tenant capabilities:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Role-Based Access Control (RBAC) to create separate users for each tenant</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Network isolation for each tenant</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Security isolation for each tenant</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Allowing communication between tenants</p> 
   <p class="pBody" style="margin-top:7.0pt">A tenant in the ACI object model represents the highest level object. A tenant consists of networking-related objects such as VRFs, bridge domains and subnets, and policy-related objects such as application profiles, EPGs, and contracts, as shown in Figure 24. A tenant could be a unique customer, an operating group, a business device, an application, etc. </p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 68" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_25.png" alt="Cisco ACI tenant logical model"/></p> 
   <div class=" pDefault">
     Figure 24. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Cisco ACI tenant logical model</p> 
   <p class="pBody">As of Release 4.2(3) of Cisco APIC, an ACI fabric supports up to 3000 tenants and 3000 VRFs. Refer to the ACI verified scalability guide for the latest status: <a href="https://www.cisco.com/c/en/us/support/cloud-systems-management/application-policy-infrastructure-controller-apic/tsd-products-support-series-home.html">https://www.cisco.com/c/en/us/support/cloud-systems-management/application-policy-infrastructure-controller-apic/tsd-products-support-series-home.html</a></p> 
   <p class="pSubhead3CMT">Role-Based Access Control (RBAC)</p> 
   <p class="pBody">By using ACI RBAC, an administrator can give tenant users access to their own tenant only. For example, User1 can write and read objects in Tenant1 only and User2 can write and read objects in Tenant2 only. Starting from APIC Release 5.0, the introduction of the Leaf RBAC feature allows an administrator to let users use specific leaf nodes only. For example, User1 for Tenant1 can use Leaf1 and Leaf2 only, and User2 for Tenant2 can use Leaf3 and Leaf4 only. This is useful for allocating isolated logical networks and physical resources to different purposes in a multi-tenant environment (see Figure 25).</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 12" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_26.png" alt="Cisco ACI RBAC for multi-tenancy"/></p> 
   <div class=" pDefault">
     Figure 25. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Cisco ACI RBAC for multi-tenancy</p> 
   <p class="pSubhead3CMT" style="page-break-before:always">Network isolation</p> 
   <p class="pBody">Objects such as VRFs, BDs, EPGs, and contracts defined in a tenant are not visible from other tenants unless objects are defined in a common tenant. Thus, the typical multi-tenant design is deployed so that each tenant has unique VRFs and BDs (Figure 26). The result is that EPGs in different tenants cant be in the same network (VRF/BD), which means each tenant network is logically isolated, even though both VRFs are deployed in the same ACI fabric.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 15" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_27.png" alt="Use of unique VRFs and BDs provides network isolation"/></p> 
   <div class=" pDefault">
     Figure 26. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Use of unique VRFs and BDs provides network isolation</p> 
   <p class="pSubhead3CMT">Security isolation</p> 
   <p class="pBody">Another example is the use of VRFs/BDs defined in common (Figure 27). This allows EPGs in different tenants to be in the same network. However, they still cant talk each other unless a contract is defined between them. </p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 16" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_28.png" alt="Use of common VRFs/BDs still provides security isolation"/></p> 
   <div class=" pDefault" style="margin-top:6.0pt">
     Figure 27. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Use of common VRFs/BDs still provides security isolation</p> 
   <p class="pBody">EPGs in different tenants cant have a contract unless a contract is exported from the provider tenant to the consumer tenant, or a contract defined in a common tenant is used. </p> 
   <p class="pSubhead2CMT">BIG-IP multi-tenant design</p> 
   <p class="pBody">This section explains F5 BIG-IP multi-tenant design.</p> 
   <p class="pSubhead3CMT">User role</p> 
   <p class="pBody">A user role is a property of a BIG-IP administrative user account. For each BIG-IP user account, you can assign a different user role to each administrative partition to which the user has access. This allows you to assign multiple user roles to each user account on the system.</p> 
   <p class="pBody">A user role controls:</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b>The types of resources that the user can manage</b>. User roles define the types of resources, or objects, that a user can manage. For example, a user with the operator role can enable or disable nodes and pool members only. By contrast, a user with the guest role cannot manage any BIG-IP system resources.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b>The tasks that a user can perform</b>. For example, a user with the operator role can enable or disable nodes and pool members, but cannot create, modify, or delete them. Conversely, a user with the manager role can perform all tasks related to objects within a partition, except for tasks related to user accounts.</p> 
   <p class="pBody" style="margin-top:7.0pt;page-break-before:always">The BIG-IP system offers several different user roles that you can choose from when assigning roles to a user account. Each user role grants a different level and type of permissions to the user.</p> 
   <p class="pNoteCMT" style="margin-left:0in;text-indent:0in"><b>Note:&nbsp; <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp; </span></b>You must have an administrator or user manager user role to assign user roles to a BIG-IP user account.</p> 
   <p class="pSubhead3CMT">Administrative partitions </p> 
   <p class="pBody">Ensure that specific users are granted access to only the partitions for which they are authorized. This is in addition to the role-based access that restricts users to specific operations. With administrative partitions, configuration objects are placed into specific partitions that only authorized users can access. While this design does have some limits in terms of the number of objects and partitions, it is quite capable of maintaining many hundreds of administrative partitions and route domains, making it a suitable candidate for larger-scale multi-tenancy.</p> 
   <p class="pSubhead3CMT">Route domains</p> 
   <p class="pBody">Route domains create strictly defined address spaces within a network. Each route domain contains IP address spaces, routing information, and VLANs. IP address spaces can be duplicated between domains, allowing easy reuse of RFC 1918 private addressing for multiple customers or projects. Route domains can be strictly isolated from one another or have explicitly controlled access between them. This allows a common front-end network space to be presented to an access network but with services running within dedicated tenant network spaces. Although system resources are not explicitly dedicated, each domain can be rate-limited by connections or throughput to provide some resource constraint. This design allows for the most efficient use of system resources since each domain will consume only the resources it allocated (see Figure 28).</p> 
   <p class="pBody">To learn more about forwarding traffic between route domains, refer to: <a href="https://support.f5.com/csp/article/K84417414">https://support.f5.com/csp/article/K84417414</a></p> 
   <p class="pBody"><img border="0" width="70%" height="70%" id="Picture 84" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_29.png" alt="BIG-IP partition and Route Domain (RD) concept"/></p> 
   <div class=" pDefault">
     Figure 28. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">BIG-IP partition and Route Domain (RD) concept</p> 
   <p class="pSubhead3CMT">Virtual Clustered Multiprocessing (vCMP)</p> 
   <p class="pBody">Virtual Clustered Multiprocessing (vCMP) creates multiple isolated instances of the BIG-IP software on a single F5 hardware platform. Each instance has its own CPU, memory, and disk, and can take advantage of multiple assigned CPU cores using the same clustered multiprocessing design used on all F5 platforms. BIG-IP guests run on F5 vCMP-enabled hardware using a standards-based, purpose-built hypervisor that provides robust security and isolation.</p> 
   <p class="pBody">vCMP is supported on VIPRION as well as BIG-IP appliances: <a href="https://support.f5.com/csp/article/K14088">https://support.f5.com/csp/article/K14088</a></p> 
   <p class="pBody" style="page-break-before:always">A vCMP guest is an instance of the BIG-IP software that you create on the vCMP system for the purpose of provisioning one or more BIG-IP modules to process application traffic. A guest consists of a Traffic Management Operating System (TMOS) instance, plus one or more BIG-IP modules. Each guest has its own share of hardware resources that the vCMP host allocates to the guest, as well as its own management IP addresses, self-IP addresses, virtual servers, and so on. In this way, each guest effectively functions as its own multi-blade VIPRION cluster, configured to receive and process application traffic with no knowledge of other guests on the system. Furthermore, each guest can use TMOS features such as route domains and administrative partitions to create its own multi-tenant configuration. Each guest requires its own guest administrator to provision, configure, and manage BIG-IP modules within the guest. The maximum number of guests that a fully-populated chassis can support varies by chassis and blade platform. An example of a vCMP system is shown in Figure 29.</p> 
   <p class="pBody"><img border="0" width="70%" height="70%" id="Picture 73" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_30.png" alt="Example of a four-guest vCMP system"/></p> 
   <div class=" pDefault">
     Figure 29. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Example of a four-guest vCMP system</p> 
   <p class="pBody">Refer to <a href="https://www.f5.com/services/resources/white-papers/multi-tenancy-designs-for-the-f5-high-performance-services-fabric">https://www.f5.com/services/resources/white-papers/multi-tenancy-designs-for-the-f5-high-performance-services-fabric</a> on when to choose the right multi-tenancy design for BIG-IP based on different attributes.</p> 
   <p class="pSubhead2CMT" style="page-break-before:always">ACI and BIG-IP multi-tenancy</p> 
   <p class="pBody">Based on different considerations defined above for multi-tenancy, one way of combining the two technologies is to use a single BIG-IP for more than one ACI tenant (see Figure 30):</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>A tenant on ACI is mapped to an administrative partition on the BIG-IP</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>A VRF on ACI is mapped to a route domain within the partition on the BIG-IP</p> 
   <p class="pBody" style="margin-top:7.0pt"><img border="0" width="100%" height="100%" id="Picture 59" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_31.png" alt="ACI and BIG-IP multi-tenancy mapping"/></p> 
   <div class=" pDefault">
     Figure 30. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">ACI and BIG-IP multi-tenancy mapping</p> 
   <p class="pBody">Another method to achieve multi-tenancy, which includes appliance-based separation along with administrative and network separation, is to use a dedicated BIG-IP device per APIC tenant.</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>A tenant on APIC can be mapped to a dedicated BIG-IP virtual edition or BIG-IP vCMP guest</p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>A VRF on ACI can be mapped to a route domain on a BIG-IP virtual edition or BIG-IP vCMP guest</p> 
   <p class="pToC_Subhead1"><a name="_Toc58570583">F5 ACI ServiceCenter</a></p> 
   <p class="pBody">The F5 ACI ServiceCenter (Figure 31) is an application available to download from <a href="https://dcappcenter.cisco.com/">Cisco DC App Center</a>, and runs on Cisco APIC. It is an integration point between the F5 BIG-IP and Cisco ACI. The application provides an APIC administratora unified way to manage both L2-L3 and L4-L7 infrastructure. Once day-0 activities are performed and BIG-IP is deployed within the ACI fabric using any of the design options already discussed, then the F5 ACI ServiceCenter can be used to handle day-1 and day-2 operations.</p> 
   <p class="pBody">The day-1 and day-2 operations provided by the application are well suited for both new/greenfield and existing/brownfield deployments of BIG-IP and ACI deployments. The integration is loosely coupled, which allows the F5 ACI ServiceCenter to be installed or uninstalled with no disruption to traffic flow, as well as no effect on the F5 BIG-IP and Cisco ACI configuration.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 60" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_32.png" alt="F5 ACI ServiceCenter"/></p> 
   <div class=" pDefault">
     Figure 31. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">F5 ACI ServiceCenter</p> 
   <p class="pSubhead2CMT">Features</p> 
   <p class="pBody">Key features provided by the F5 ACI ServiceCenter are outlined below.</p> 
   <p class="pBody"><b>F5 ACI ServiceCenter has the ability to manage multiple BIG-IP devices</b></p> 
   <p class="pBody">When the APIC is configured to use F5 BIG-IP within the Cisco ACI fabric as the L4-L7 device it does not have the ability to provide the BIG-IP credentials to the APIC. BIG-IP devices that are going to be managed by the F5 ACI ServiceCenter application have to be known to the F5 ACI ServiceCenter. There are two ways the BIG-IP devices can be known to the F5 ACI ServiceCenter. One way is by having the application user manually enter the BIG-IP device by providing the BIG-IP MGMT IP/hostname and credentials. The other way is by enabling LLDP on the interfaces between Cisco ACI and F5 BIG-IP. When enabling LLDP on the BIG-IP, include the BIG-IP management IP in the LLDP attributes list. The F5 ACI ServiceCenter will discover the BIG-IP using the BIG-IP chassis ID in the LLDP attribute list (Figure 32). Once discovered, the BIG-IP device will be added to the application by using the BIG-IP management IP. If the BIG-IP management IP is not available, the BIG-IP will be added using the BIG-IP serial number.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 40" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_33.png" alt="BIG-IP devices discovered using LLDP protocol along with management IP as part of LLDP attributes"/></p> 
   <div class=" pDefault" style="margin-top:7.0pt">
     Figure 32. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">BIG-IP devices discovered using LLDP protocol along with management IP as part of LLDP attributes</p> 
   <p class="pBody">Using the LLDP attributes the application will also be able to create a topology map (Figure 33). </p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 61" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_34.png" alt="ACI and BIG-IP topology map"/></p> 
   <div class=" pDefault">
     Figure 33. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">ACI and BIG-IP topology map</p> 
   <p class="pBody">Once a device is added, either manually or using self-discovery via the LLDP protocol, the user will enter the BIG-IP credentials to log in and get started with managing the BIG-IP. The application will categorize the BIG-IP device into a standalone BIG-IP or a BIG-IP high availability cluster. The application can manage physical (appliance and vCMP) as well as virtual BIG-IP devices.</p> 
   <p class="pBody"><b>F5 ACI ServiceCenter has the capability to correlate BIG-IP and APIC information</b></p> 
   <p class="pBody">A pool on the BIG-IP consists of a number of pool members. A pool member is a logical object that represents an application node. This application (endpoint) node is also discovered/learned by the APIC and is part of an endpoint group. Figure 34 illustrates this process.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 85" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_35.png" alt="EPG to pool mapping"/></p> 
   <div class=" pDefault">
     Figure 34. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">EPG to pool mapping</p> 
   <p class="pBody" style="page-break-before:always">The F5 ACI ServiceCenter has Read-only capabilities to the Cisco APIC and Read-Write capabilities to the F5 BIG-IP. The application collects the BIG-IP network elements like VLANs, VIPs, pools, and nodes, and correlates them with APIC information like tenant, application profile, and EPGs (see Figure 35). The data that is visible through the application will be the BIG-IP nodes and pool members that are also learned by the APIC fabric. This feature will work for both new/greenfield and existing/brownfield deployments since, to the F5 ACI ServiceCenter, it does not matter how and when the data was configured on the BIG-IP, but instead, how the configured data relates to the APIC.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 43" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_36.png" alt="BIG-IP virtual IP, pool, and nodes correlated to the APIC tenant, application, profile and endpoint group"/></p> 
   <div class=" pDefault">
     Figure 35. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">BIG-IP virtual IP, pool, and nodes correlated to the APIC tenant, application, profile and endpoint group</p> 
   <p class="pBody"><b>F5 ACI ServiceCenter has the capability to manage L2-L3 network configuration</b></p> 
   <p class="pBody">The APIC administrator can manage L2-L3 configurations on the BIG-IP using the F5 ACI ServiceCenter. The configuration involves the ability to create, delete, and update operations for the VLAN, Self-IP, and default gateway on the BIG-IP.</p> 
   <p class="pBody">The L2-L3 configuration is dependent on BIG-IP being inserted into the fabric using an APIC service graph. The VLANs from the APIC service graph are extracted by the application and then used to deploy the VLAN on the BIG-IP. The F5 ACI ServiceCenter user will have to supply the self-IPs and default gateway information and enter them in the application.</p> 
   <p class="pBody"><b>F5 ACI ServiceCenter has the capability to deploy L4-L7 application services</b></p> 
   <p class="pBody">The application leverages the <a href="https://clouddocs.f5.com/products/extensions/f5-appsvcs-extension/latest/userguide/about-as3.html">F5 Automation and Orchestration</a> toolchain (a declarative API model) to deploy feature-rich applications (nodes, pools, VIPs, monitors, profiles, etc.) on the BIG-IP. The configuration on BIG-IP can be deployed using two methods. In the first method, the configuration API is completely exposed to the user and a configuration-compatible JSON payload is used to deploy the configuration. Figure 36 outlines the commands used to deploy the configuration.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 51" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_37.png" alt="Advanced: BIG-IP application deployed using JSON payload"/></p> 
   <div class=" pDefault">
     Figure 36. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Advanced: BIG-IP application deployed using JSON payload</p> 
   <p class="pBody">The second method is to make use of templates embedded within the application (Figure 37). The templates abstract the API complexities and provide the user an input-based form that can be used to deploy an application on the BIG-IP.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 46" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_38.png" alt="Basic: BIG-IP application deployed using templates"/></p> 
   <div class=" pDefault">
     Figure 37. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Basic: BIG-IP application deployed using templates</p> 
   <p class="pBody"><b>F5 ACI ServiceCenter has the ability to dynamically add/remove pool members from the BIG-IP based on the endpoints discovered by APIC</b></p> 
   <p class="pBody">The application has the ability to adjust the pool members on the BIG-IP based on the server farm on the APIC. On the APIC, when workload is attached, it is learned by the fabric and added to a particular tenant, application profile, and EPG on the APIC. The F5 ACI ServiceCenter provides the capability to map an EPG on the APIC to a pool on the BIG-IP. The application relies on the attach/detach notifications from the APIC to add/delete the BIG-IP pool members (Figure 38). The pool members on BIG-IP are managed by the APIs provided by the F5 automation toolchain. The configuration (L4-L7 application deployment) on BIG-IP is recommended to be managed by the F5 ACI ServiceCenter in order to use this feature.</p> 
   <p class="pBody"><img border="0" width="100%" height="100%" id="Picture 62" src="https://www.cisco.com/c/dam/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.docx/_jcr_content/renditions/white-paper-c11-743890_39.png" alt="Add/delete pool member workflow"/></p> 
   <div class=" pDefault">
     Figure 38. 
    <span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp; 
   </div> 
   <p class="FigureCaptionText">Add/delete pool member workflow</p> 
   <p class="pBody"><b>Learn more about the F5 ACI ServiceCenter</b></p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Deployment and user guide: <a href="https://www.clouddocs.f5.com/f5-aci-servicecenter/latest">https://www.clouddocs.f5.com/f5-aci-servicecenter/latest</a></p> 
   <p class="pBulletCMT" style="font-style: normal; font-variant: normal; font-weight: normal;margin-bottom: 3pt; margin-right: 0pt; margin-top: 0pt; text-decoration: none; text-transform: none"><span style="font-size:7.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;position:relative;top:-.5pt"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Download software: <a href="https://dcappcenter.cisco.com/f5-aci-servicecenter.html">https://dcappcenter.cisco.com/f5-aci-servicecenter.html</a></p> 
   <p class="pToC_Subhead1"><a name="_Toc58570584">Troubleshooting</a></p> 
   <p class="pBody">This section explains troubleshooting tips for the load balancer connected to the Cisco ACI fabric.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p> 
   <p class="pSubhead2CMT">ACI troubleshooting</p> 
   <p class="pBody">For ACI forwarding and policy troubleshooting, see the Cisco ACI Troubleshooting Guide for more details: <a href="https://www.cisco.com/c/dam/en/us/td/docs/switches/datacenter/aci/apic/sw/4-x/troubleshooting/Cisco_TroubleshootingApplicationCentricInfrastructureSecondEdition.pdf">https://www.cisco.com/c/dam/en/us/td/docs/switches/datacenter/aci/apic/sw/4-x/troubleshooting/Cisco_TroubleshootingApplicationCentricInfrastructureSecondEdition.pdf</a></p> 
   <p class="pBody">The PBR section in the document includes a traffic flow example for the load balancer.</p> 
   <p class="pSubhead2CMT">F5 troubleshooting</p> 
   <p class="pBody">For F5 troubleshooting around various topics, visit:</p> 
   <p class="pBody"><a href="https://support.f5.com/csp/article/K05939436">https://support.f5.com/csp/article/K05939436</a></p> 
   <p class="pBody"><a href="https://clouddocs.f5.com/training/community/f5cert/html/intro.html">https://clouddocs.f5.com/training/community/f5cert/html/intro.html</a> </p> 
   <p class="pToC_Subhead1" style="page-break-before:always"><a name="_Toc58570585">For more information</a></p> 
   <p class="pBody">Cisco ACI white papers: <a href="https://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/white-paper-listing.html">https://www.cisco.com/c/en/us/solutions/data-center-virtualization/application-centric-infrastructure/white-paper-listing.html</a></p> 
   <p class="pBody">F5: <a href="https://f5.com/cisco">https://f5.com/cisco</a></p> 
   <p class="pBody"><span class="MsoHyperlink"><span style="color:#58595B;text-decoration:none">&nbsp;</span></span></p> 
   <p class="pBody"><span class="MsoHyperlink"><span style="color:#58595B;text-decoration:none">&nbsp;</span></span></p> 
   <p class="pBody"><span class="MsoHyperlink"><span style="color:#58595B;text-decoration:none">&nbsp;</span></span></p> 
  </div>
 </body>
</html>



</div>

<script>

  jQuery(document).ready(function() {
      if(jQuery('.unpublished').length>0){
          var lastRel = "1.0";
          if(jQuery('.published').length>0){
             lastRel  = Number(jQuery('.published td')[0].innerText)+1+".0";
          }
          jQuery('.preview_revision').text(lastRel);
      }

      
  });
</script>


<script type="text/javascript">
 jQuery(document).ready(function() {
   if (typeof(cdc) == "undefined") cdc={};
      if (typeof(cdc.eot) == "undefined") cdc.eot={};
      cdc.eot.isEot = true; 
      cdc.eot.isToc = true; 

      var linkItemsLen=jQuery("#eot-doc-wrapper link[rel='stylesheet']").length;
      
      function addNewTocStyleSheet() {
          let fileName="/etc/designs/cdc/transformation/wemdcmt_responsive.css",
              $head = jQuery("head"),
              linkElement = "<link rel='stylesheet' href='"+fileName+"' type='text/css' >";
          $head.append(linkElement);                    
      }
      
      if (cdc.eot.isToc && ! linkItemsLen ) {
          addNewTocStyleSheet();
      }  else if(cdc.eot.isEot) {
          var linkItemsLen=jQuery("#eot-doc-wrapper link[rel='stylesheet']").length;
          jQuery("#eot-doc-wrapper link[rel='stylesheet']").each(function(){
          
            var linkTag=jQuery(this);
            var hrefVal=jQuery(linkTag).attr("href");              
            
            if(hrefVal!=undefined && hrefVal.indexOf("support-responsive.css")==-1 && hrefVal.indexOf("_responsive.css")==-1){
                var fileName=hrefVal.substr(hrefVal.lastIndexOf("/")+1,hrefVal.length).split(".css")[0];
                var filePath="/etc/designs/cdc/transformation/";
                
                if(fileName=="ccimr"){
                    fileName="techdocs_responsive";
                }else if(fileName=="support-docs"){
                    fileName="support-responsive";
                }else if(fileName=="framework"){
                    fileName="responsiveframework";
                }else if(fileName=="dcmt"){
                    fileName="wemdcmt_responsive";
                }else if(fileName=="techdocs_85_11_word"){
                    fileName="techdocs_85_11_word";
                    if (cdc.eot.isToc) {
                        addNewTocStyleSheet();
                    }
                }else{
                    fileName+="_responsive";
                }
                jQuery(linkTag).attr("href",filePath+fileName+".css");
             }
             
           if(hrefVal.indexOf("support-responsive.css")>-1){
               jQuery(linkTag).attr("href","/etc/designs/cdc/transformation/support-responsive.css");
           }
             
        });
             jQuery("#eot-doc-wrapper > table").wrap("<div></div>");
             //jQuery("#eot-doc-wrapper table").parent().attr("style","overflow-x:auto !important");
             jQuery("#eot-doc-wrapper table:not('.olh_note')").parent().css({overflowX:"auto"});// commented above line coz its overriding existing inline styles
      } 
 });    
</script>


<div class="noprint">
    

</div>

<div class="noprint">
     









 




 <script> console.log("Getting INVALID_TAGs from data object") </script> 

</div>


<div id="learnMore" class="noprint">
    <h3>Learn more</h3>
</div>
<div class="row halves noprint">
    <div class="col half showComponent">
        











<div class="eot-vav">
  <ul>
  </ul>
</div>
    </div>
    <!-- Fix for US251354 -->    
    <div class="col half"></div>
</div>
<div class="noprint">
    

</div>



    </div>
</div>

     <!--googleoff: index--><!--googleoff: snippet-->
    









<!-- end: responsive fat footer re-use wrapper-->

</div>

    




















<footer id="fw-footer-v2" class="container " tabindex="-1" data-owner="ID">
    <div class='new-footer-wrapper'>
        <div class="primary">
            <button class="a_plus">
                Quick Links
                <span class="minus"></span>
            </button>
            <ul>
                <li><a href="https://www.cisco.com/c/en/us/about.html">About Cisco</a></li>
                <li><a href="https://www.cisco.com/c/en/us/about/contact-cisco.html">Contact Us</a></li>
                <li><a href="https://www.cisco.com/c/en/us/about/careers.html">Careers</a></li>
                <li><a href="https://www.cisco.com/c/en/us/partners/connect-with-a-partner.html">Meet our Partners</a></li>
            </ul>
            <div class="social inner">
                <a id="ff-facebook" href="https://www.facebook.com/Cisco/" title="facebook" target="_self"></a>        
                <a id="ff-twitter" href="https://twitter.com/Cisco/" title="twitter" target="_self"></a>
                <a id="ff-linkedin" href="https://www.linkedin.com/company/cisco" title="linkedin" target="_self"></a>
                <a id="ff-youtube" href="https://www.youtube.com/user/cisco" title="youtube" target="_self"></a>
                <a id="ff-instagram" href="https://www.instagram.com/cisco/" title="instagram" target="_self"></a>
            </div>        
        </div>
        <div class="secondary">
            <button class="a_plus">
                Resources and Legal
                <span class="minus"></span>
            </button>        
            <ul>
                <li><a href="https://ciscocx.qualtrics.com/jfe/form/SV_0Tcp9VU8pUm4lBY?Ref=/c/en/us/solutions/collateral/data-center-virtualization/application-centric-infrastructure/white-paper-c11-743890.html" id="cdc-ftr-feedback">Feedback</a></li>
                <li><a href="https://www.cisco.com/c/en/us/about/help.html">Help</a></li>
                <li><a href="https://www.cisco.com/c/en/us/about/legal/terms-conditions.html">Terms &amp; Conditions</a></li>
                <li>
                    <a href="https://www.cisco.com/c/en/us/about/legal/privacy-full.html">
                        <span>Privacy Statement</span>
                    </a>
                </li>
                <li>
                    <a href="https://www.cisco.com/c/en/us/about/legal/privacy-full.html#cookies">
                        <span>Cookies</span>
                    </a>
                </li>
                <li><a href="https://www.cisco.com/c/en/us/about/legal/trademarks.html">Trademarks</a></li>                
				<li class="supply-chain"><a href="https://www.cisco.com/c/dam/en_us/about/supply-chain/cisco-modern-slavery-statement.pdf">Supply Chain Transparency</a></li>
                <li><a href="https://www.cisco.com/c/en/us/about/sitemap.html">Sitemap</a></li>

            </ul>
        </div>
        <div class="social outer">
            <a id="ff-facebook" href="https://www.facebook.com/Cisco/" title="facebook" target="_self"></a>        
            <a id="ff-twitter" href="https://twitter.com/Cisco/" title="twitter" target="_self"></a>
            <a id="ff-linkedin" href="https://www.linkedin.com/company/cisco" title="linkedin" target="_self"></a>
            <a id="ff-youtube" href="https://www.youtube.com/user/cisco" title="youtube" target="_self"></a>
            <a id="ff-instagram" href="https://www.instagram.com/cisco/" title="instagram" target="_self"></a>
        </div>    
        <div class="copy-right">&copy;<span class="footer-date"></span> Cisco Systems, Inc.</div>
    </div>
</footer>

   
    
    









<div id="fw-overlay"></div>

    









<script src="https://www.cisco.com/etc/designs/cdc/clientlibs/responsive/js/responsive.min.js"></script>

<!-- change to new clientlib, and metricsrules if applicable -->













<script src="https://www.cisco.com/etc/designs/cdc/fw/m/eot_metricsrule.js" type="text/javascript"></script>
<script src="https://www.cisco.com/etc/designs/cdc/fw/lib/jqmodal.js" type="text/javascript"></script>

    
    

    <!-- SiteCatalyst code version: H.24.4. -->
    <noscript><img src="https://cisco.112.2o7.net/b/ss/cisco-mobile/5/12345" width="2" height="2" border="0" alt=""/></noscript>

</body>
</html>
